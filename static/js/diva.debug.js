"use strict";
(() => {
  // src/viewer-element.ts
  var ZOOM_IN_FACTOR = 1.6;
  var ZOOM_OUT_FACTOR = 1 / ZOOM_IN_FACTOR;
  var OsdViewer = class extends HTMLElement {
    constructor() {
      super();
      this.container = null;
      this.viewer = null;
      this.loadToken = 0;
      this.tileSources = [];
      this.pageAspects = [];
      this.pageOffsets = [];
      this.pageHeights = [];
      this.pageRowHeights = [];
      this.pageXOffsets = [];
      this.layoutMode = "single";
      this.viewingDirection = "ltr";
      this.hasFitFirstPage = false;
      this.loadedIndexes = /* @__PURE__ */ new Set();
      this.loadingIndexes = /* @__PURE__ */ new Set();
      this.loadedItems = /* @__PURE__ */ new Map();
      this.targetIndex = null;
      this.scrollPlaneItem = null;
      this.isViewportInitialized = false;
      this.lastReportedIndex = null;
      this.lastReportedZoom = null;
      this.loadingTimer = null;
      this.isLoading = false;
      this.isClamping = false;
      this.suppressPageChange = true;
      this.suppressZoomChange = true;
      this.scrollbarTrack = null;
      this.scrollbarThumb = null;
      this.isScrollbarDragging = false;
      this.handleWheelBound = this.handleWheel.bind(this);
      this.handleDoubleClickBound = this.handleDoubleClick.bind(this);
      this.handleViewportChangeBound = this.handleViewportChange.bind(this);
    }
    connectedCallback() {
      this.style.display = "block";
      if (!this.container) {
        this.container = document.createElement("div");
        this.container.className = "osd-container";
        this.container.style.width = "100%";
        this.container.style.height = "100%";
        this.container.addEventListener(
          "wheel",
          this.handleWheelBound,
          { passive: false, capture: true }
        );
        this.container.addEventListener("dblclick", this.handleDoubleClickBound);
        this.appendChild(this.container);
        this.createScrollbar();
      }
      this.syncViewer();
    }
    disconnectedCallback() {
      if (this.loadingTimer !== null) {
        window.clearTimeout(this.loadingTimer);
        this.loadingTimer = null;
      }
      if (this.container) {
        this.container.removeEventListener("wheel", this.handleWheelBound);
        this.container.removeEventListener("dblclick", this.handleDoubleClickBound);
      }
      if (this.viewer) {
        this.viewer.destroy();
        this.viewer = null;
      }
      this.scrollbarTrack = null;
      this.scrollbarThumb = null;
    }
    syncViewer() {
      const hasOsd = Boolean(window.OpenSeadragon);
      if (!hasOsd || !this.container) {
        return;
      }
      if (!this.viewer) {
        const options = {
          element: this.container,
          animationTime: 0.8,
          showNavigationControl: false,
          preserveViewport: true,
          visibilityRatio: 0,
          constrainDuringPan: false,
          minZoomLevel: 0.1,
          minZoomImageRatio: 0.1,
          maxZoomPixelRatio: 2,
          defaultZoomLevel: 0,
          sequenceMode: false,
          zoomPerScroll: 1,
          crossOriginPolicy: "Anonymous",
          loadTilesWithAjax: true,
          ajaxWithCredentials: false,
          gestureSettingsTrackpad: {
            pinchToZoom: true,
            scrollToZoom: false,
            flickEnabled: true,
            dragToPan: true
          },
          gestureSettingsMouse: {
            scrollToZoom: false,
            clickToZoom: false,
            dblClickToZoom: false,
            dragToPan: true
          },
          gestureSettingsTouch: { pinchToZoom: false, dragToPan: true }
        };
        this.viewer = OpenSeadragon(options);
        const viewer = this.viewer;
        if (!viewer) {
          return;
        }
        viewer.addHandler("pan", this.handleViewportChangeBound);
        viewer.addHandler("zoom", this.handleViewportChangeBound);
        viewer.addHandler("pan", () => this.updateScrollbar());
        viewer.addHandler("zoom", () => this.updateScrollbar());
        viewer.addHandler("animation-finish", () => this.updateScrollbar());
      }
    }
    setLayoutMode(mode) {
      const nextMode = mode === "spread" || mode === "spread-shift" ? mode : "single";
      this.applyLayoutChange({ mode: nextMode });
    }
    setViewingDirection(direction) {
      const nextDirection = direction === "rtl" ? "rtl" : "ltr";
      this.applyLayoutChange({ direction: nextDirection });
    }
    setLayoutConfig(mode, direction) {
      const nextMode = mode === "spread" || mode === "spread-shift" ? mode : "single";
      const nextDirection = direction === "rtl" ? "rtl" : "ltr";
      this.applyLayoutChange({ mode: nextMode, direction: nextDirection });
    }
    setTileSources(tileSources) {
      if (!Array.isArray(tileSources) || tileSources.length === 0) {
        return;
      }
      this.syncViewer();
      this.resetTileSources(tileSources);
    }
    resetTileSources(tileSources) {
      if (!this.viewer) {
        return;
      }
      this.viewer.world.removeAll();
      this.loadToken += 1;
      this.tileSources = tileSources;
      this.hasFitFirstPage = false;
      this.isViewportInitialized = false;
      this.loadedIndexes.clear();
      this.loadingIndexes.clear();
      this.loadedItems.clear();
      this.targetIndex = null;
      this.clearScrollPlane();
      this.buildOffsets();
      this.ensureScrollPlane();
      this.resetLoadingState();
      this.suppressPageChange = true;
      this.suppressZoomChange = true;
      this.maybeLoadMore();
    }
    handleViewportChange() {
      var _a;
      if (this.isClamping) {
        return;
      }
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      this.maybeLoadMore(viewport);
      this.maybeEmitPageChange(viewport);
      this.maybeEmitZoomChange(viewport);
      this.clampTop(viewport);
      this.clampBottom(viewport);
    }
    maybeLoadMore(viewport) {
      var _a;
      if (this.tileSources.length === 0) {
        return;
      }
      const vp = viewport != null ? viewport : (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!vp) {
        return;
      }
      const bounds = vp.getBounds(true);
      const buffer = bounds.height * 1.5;
      const viewTop = Math.max(0, bounds.y - buffer);
      const viewBottom = bounds.y + bounds.height + buffer;
      const range = this.indicesForRange(viewTop, viewBottom);
      if (!range) {
        return;
      }
      const start = range[0];
      const end = range[1];
      let index = start;
      while (index <= end) {
        this.ensurePageLoaded(index);
        index += 1;
      }
      if (this.targetIndex !== null) {
        this.ensurePageLoaded(this.targetIndex);
      }
    }
    ensurePageLoaded(index) {
      if (index < 0 || index >= this.tileSources.length || index >= this.pageOffsets.length) {
        return;
      }
      if (this.loadedIndexes.has(index) || this.loadingIndexes.has(index)) {
        return;
      }
      this.loadTile(index);
    }
    loadTile(index) {
      if (!this.viewer) {
        return;
      }
      const token = this.loadToken;
      const tileSource = this.tileSources[index];
      this.loadingIndexes.add(index);
      this.updateLoadingState();
      const yOffset = this.pageOffsets[index] || 0;
      const xOffset = this.pageXOffsets[index] || 0;
      const height = this.pageHeights[index] || 1;
      this.viewer.addTiledImage({
        tileSource,
        x: xOffset,
        y: yOffset,
        width: 1,
        success: (event) => {
          if (token !== this.loadToken) {
            return;
          }
          const item = event.item;
          item.setPosition(new OpenSeadragon.Point(xOffset, yOffset), true);
          item.setWidth(1, true);
          item.setHeight(height, true);
          this.loadedIndexes.add(index);
          this.loadedItems.set(index, item);
          this.loadingIndexes.delete(index);
          this.updateLoadingState();
          if (!this.hasFitFirstPage) {
            this.hasFitFirstPage = true;
            const viewer = this.viewer;
            if (!viewer || !viewer.viewport) {
              return;
            }
            const bounds = this.isSpreadMode() ? this.getRowBounds(index) : item.getBounds();
            viewer.viewport.fitBounds(bounds, true);
            viewer.viewport.zoomBy(0.95, viewer.viewport.getCenter(true), true);
            viewer.viewport.applyConstraints();
            this.alignTopAfterFit();
            this.isViewportInitialized = true;
            this.lockHorizontalPan();
            this.recenterAfterFit();
            this.flushInitialPageChange();
            this.flushInitialZoomChange();
          }
          if (this.targetIndex === index) {
            this.targetIndex = null;
          }
          this.maybeLoadMore();
        },
        error: () => {
          if (token !== this.loadToken) {
            return;
          }
          this.loadingIndexes.delete(index);
          this.updateLoadingState();
          this.maybeLoadMore();
        }
      });
    }
    setPageAspects(aspects) {
      if (!Array.isArray(aspects)) {
        return;
      }
      this.pageAspects = aspects.filter((value) => value > 0);
      this.buildOffsets();
      this.updateLoadedItemPositions();
      this.ensureScrollPlane();
      this.maybeLoadMore();
    }
    buildOffsets() {
      const count = this.tileSources.length > 0 ? this.tileSources.length : this.pageAspects.length;
      this.pageOffsets = new Array(count);
      this.pageHeights = new Array(count);
      this.pageRowHeights = new Array(count);
      this.pageXOffsets = new Array(count);
      if (this.isSpreadMode()) {
        this.buildSpreadOffsets(count);
      } else {
        this.buildSingleOffsets(count);
      }
    }
    buildSingleOffsets(count) {
      const gap = 0.03;
      let current = 0;
      let fallback = this.pageAspects[0] || 1;
      for (let index = 0; index < count; index += 1) {
        const height = this.pageAspects[index] || fallback;
        fallback = height;
        this.pageOffsets[index] = current;
        this.pageHeights[index] = height;
        this.pageRowHeights[index] = height;
        this.pageXOffsets[index] = 0;
        current += height + gap;
      }
    }
    buildSpreadOffsets(count) {
      const gap = 0.03;
      const isRtl = this.viewingDirection === "rtl";
      let current = 0;
      let index = 0;
      let fallback = this.pageAspects[0] || 1;
      if (this.layoutMode === "spread-shift" && count > 0) {
        const height = this.pageAspects[0] || fallback;
        fallback = height;
        this.pageOffsets[0] = current;
        this.pageHeights[0] = height;
        this.pageRowHeights[0] = height;
        this.pageXOffsets[0] = isRtl ? 0 : 1;
        current += height + gap;
        index = 1;
      }
      while (index < count) {
        const leftHeight = this.pageAspects[index] || fallback;
        const rightIndex = index + 1;
        const rightHeight = rightIndex < count ? this.pageAspects[rightIndex] || leftHeight : leftHeight;
        fallback = rightHeight;
        const rowHeight = Math.max(leftHeight, rightHeight);
        this.pageOffsets[index] = current;
        this.pageHeights[index] = leftHeight;
        this.pageRowHeights[index] = rowHeight;
        this.pageXOffsets[index] = isRtl ? 1 : 0;
        if (rightIndex < count) {
          this.pageOffsets[rightIndex] = current;
          this.pageHeights[rightIndex] = rightHeight;
          this.pageRowHeights[rightIndex] = rowHeight;
          this.pageXOffsets[rightIndex] = isRtl ? 0 : 1;
        }
        current += rowHeight + gap;
        index += 2;
      }
    }
    updateLoadedItemPositions() {
      if (!this.viewer) {
        return;
      }
      this.loadedItems.forEach((item, index) => {
        const yOffset = this.pageOffsets[index];
        const height = this.pageHeights[index];
        const xOffset = this.pageXOffsets[index];
        item.setPosition(new OpenSeadragon.Point(xOffset, yOffset), true);
        item.setWidth(1, true);
        item.setHeight(height, true);
      });
    }
    ensureScrollPlane() {
      if (!this.viewer || this.pageOffsets.length === 0) {
        return;
      }
      const lastIndex = this.pageOffsets.length - 1;
      const totalHeight = this.pageOffsets[lastIndex] + (this.pageRowHeights[lastIndex] || 1);
      const layoutWidth = this.isSpreadMode() ? 2 : 1;
      if (this.scrollPlaneItem) {
        this.scrollPlaneItem.setPosition(new OpenSeadragon.Point(0, 0), true);
        this.scrollPlaneItem.setWidth(layoutWidth, true);
        this.scrollPlaneItem.setHeight(totalHeight, true);
        return;
      }
      const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><rect width="100%" height="100%" fill="transparent"/></svg>`;
      const url = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svg)}`;
      this.viewer.addTiledImage({
        tileSource: { type: "image", url },
        x: 0,
        y: 0,
        width: layoutWidth,
        success: (event) => {
          const item = event.item;
          item.setOpacity(0);
          item.setPosition(new OpenSeadragon.Point(0, 0), true);
          item.setWidth(layoutWidth, true);
          item.setHeight(totalHeight, true);
          this.scrollPlaneItem = item;
        }
      });
    }
    clearScrollPlane() {
      if (!this.viewer || !this.scrollPlaneItem) {
        return;
      }
      this.viewer.world.removeItem(this.scrollPlaneItem);
      this.scrollPlaneItem = null;
    }
    indicesForRange(start, end) {
      if (this.pageOffsets.length === 0) {
        return null;
      }
      const startIndex = this.findIndexForOffset(start);
      const endIndex = this.getRowEndIndex(this.findIndexForOffset(end));
      return [startIndex, endIndex];
    }
    findIndexForOffset(offset) {
      let low = 0;
      let high = this.pageOffsets.length - 1;
      while (low <= high) {
        const mid = Math.floor((low + high) / 2);
        const midOffset = this.pageOffsets[mid];
        const midHeight = this.pageRowHeights[mid] || this.pageHeights[mid] || 1;
        if (offset < midOffset) {
          high = mid - 1;
        } else if (offset > midOffset + midHeight) {
          low = mid + 1;
        } else {
          return this.getRowStartIndex(mid);
        }
      }
      if (low >= this.pageOffsets.length) {
        return this.pageOffsets.length - 1;
      }
      const clamped = Math.max(0, low);
      return this.getRowStartIndex(clamped);
    }
    scrollToOffset(offset) {
      var _a;
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const bounds = viewport.getBounds(true);
      const width = this.isSpreadMode() ? 2 : 1;
      const rect = new OpenSeadragon.Rect(0, offset, width, bounds.height);
      viewport.fitBounds(rect, true);
    }
    scrollToIndex(index) {
      if (index < 0 || index >= this.tileSources.length || index >= this.pageOffsets.length) {
        return;
      }
      const offset = this.pageOffsets[index];
      this.scrollToOffset(offset);
      this.targetIndex = index;
      this.ensurePageLoaded(index);
      this.lastReportedIndex = index;
      this.emitCustomEvent("diva-page-change", { index });
    }
    setZoomLevel(zoom) {
      var _a;
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const center = viewport.getCenter(true);
      viewport.zoomTo(zoom, center, false);
      viewport.applyConstraints();
    }
    zoomBy(factor) {
      var _a;
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const center = viewport.getCenter(true);
      viewport.zoomBy(factor, center, false);
      viewport.applyConstraints();
    }
    handleDoubleClick(event) {
      var _a;
      event.preventDefault();
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const zoomBy = event.shiftKey ? ZOOM_OUT_FACTOR : ZOOM_IN_FACTOR;
      const webPoint = new OpenSeadragon.Point(event.clientX, event.clientY);
      const viewportPoint = viewport.pointFromPixel(webPoint);
      const nextZoom = viewport.getZoom() * zoomBy;
      viewport.zoomTo(nextZoom, viewportPoint, false);
      viewport.applyConstraints();
    }
    handleWheel(event) {
      var _a;
      if (!this.container) {
        return;
      }
      event.preventDefault();
      event.stopPropagation();
      if (typeof event.stopImmediatePropagation == "function") {
        event.stopImmediatePropagation();
      }
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const rect = this.container.getBoundingClientRect();
      const deltaY = event.deltaY || 0;
      const speed = 0.75;
      const panY = rect.height > 0 ? deltaY / rect.height * speed : 0;
      const center = viewport.getCenter(true);
      const nextCenter = new OpenSeadragon.Point(this.getCenterX(), center.y + panY);
      viewport.panTo(nextCenter, true);
      this.recenterBoundsX();
      this.clampTop();
      this.clampBottom();
      this.maybeEmitPageChange();
    }
    lockHorizontalPan() {
      var _a;
      if (!this.isViewportInitialized) {
        return;
      }
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const center = viewport.getCenter(true);
      viewport.panTo(new OpenSeadragon.Point(this.getCenterX(), center.y), true);
      viewport.applyConstraints();
    }
    recenterAfterFit() {
      if (!this.viewer) {
        return;
      }
      const handler = () => {
        if (this.viewer) {
          this.viewer.removeHandler("animation-finish", handler);
        }
        this.recenterBoundsX();
      };
      if (typeof this.viewer.addOnceHandler == "function") {
        this.viewer.addOnceHandler("animation-finish", handler);
      } else {
        this.viewer.addHandler("animation-finish", handler);
      }
    }
    recenterBoundsX() {
      var _a;
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const center = viewport.getCenter(true);
      const targetX = this.getCenterX();
      if (Math.abs(center.x - targetX) < 5e-4) {
        return;
      }
      viewport.panTo(new OpenSeadragon.Point(targetX, center.y), true);
      viewport.applyConstraints();
    }
    clampTop(viewport) {
      var _a;
      const vp = viewport != null ? viewport : (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!vp) {
        return;
      }
      const bounds = vp.getBounds(true);
      if (bounds.y >= 0) {
        return;
      }
      const clampedCenterY = bounds.height / 2;
      this.isClamping = true;
      vp.panTo(new OpenSeadragon.Point(this.getCenterX(), clampedCenterY), true);
      vp.applyConstraints();
      this.isClamping = false;
    }
    clampBottom(viewport) {
      var _a, _b;
      const vp = viewport != null ? viewport : (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!vp) {
        return;
      }
      if (this.pageOffsets.length === 0) {
        return;
      }
      const lastIndex = this.pageOffsets.length - 1;
      const totalHeight = this.pageOffsets[lastIndex] + (this.pageRowHeights[lastIndex] || 1);
      const bounds = vp.getBounds(true);
      const containerHeight = ((_b = this.container) == null ? void 0 : _b.getBoundingClientRect().height) || 1;
      const paddingViewport = 20 / containerHeight * bounds.height;
      const maxBottom = totalHeight + paddingViewport;
      const bottomEdge = bounds.y + bounds.height;
      if (bottomEdge <= maxBottom) {
        return;
      }
      const clampedCenterY = maxBottom - bounds.height / 2;
      this.isClamping = true;
      vp.panTo(new OpenSeadragon.Point(this.getCenterX(), clampedCenterY), true);
      vp.applyConstraints();
      this.isClamping = false;
    }
    maybeEmitPageChange(viewport) {
      var _a;
      if (this.suppressPageChange || this.isScrollbarDragging) {
        return;
      }
      if (this.pageOffsets.length == 0) {
        return;
      }
      const vp = viewport != null ? viewport : (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!vp) {
        return;
      }
      const center = vp.getCenter(true);
      const index = this.findIndexForOffset(center.y);
      if (this.lastReportedIndex == index) {
        return;
      }
      this.lastReportedIndex = index;
      this.emitCustomEvent("diva-page-change", { index });
    }
    emitPageChangeInstant() {
      var _a;
      if (this.pageOffsets.length === 0) {
        return;
      }
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const center = viewport.getCenter(true);
      const index = this.findIndexForOffset(center.y);
      this.lastReportedIndex = index;
      this.emitCustomEvent("diva-page-change", { index, instant: true });
    }
    flushInitialPageChange() {
      if (this.pageOffsets.length == 0) {
        this.suppressPageChange = false;
        return;
      }
      if (!this.viewer || !this.viewer.viewport) {
        return;
      }
      const center = this.viewer.viewport.getCenter(true);
      const index = this.findIndexForOffset(center.y);
      this.lastReportedIndex = index;
      this.suppressPageChange = false;
      this.emitCustomEvent("diva-page-change", { index });
    }
    maybeEmitZoomChange(viewport) {
      var _a;
      if (this.suppressZoomChange) {
        return;
      }
      const vp = viewport != null ? viewport : (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!vp) {
        return;
      }
      const zoom = vp.getZoom(true);
      if (this.lastReportedZoom !== null && Math.abs(this.lastReportedZoom - zoom) < 1e-4) {
        return;
      }
      this.lastReportedZoom = zoom;
      this.emitCustomEvent("diva-zoom-change", { zoom });
    }
    flushInitialZoomChange() {
      var _a;
      const viewport = (_a = this.viewer) == null ? void 0 : _a.viewport;
      if (!viewport) {
        return;
      }
      const zoom = viewport.getZoom(true);
      this.lastReportedZoom = zoom;
      this.suppressZoomChange = false;
      this.emitCustomEvent("diva-zoom-change", { zoom });
    }
    alignTopAfterFit() {
      if (!this.viewer) {
        return;
      }
      const viewport = this.viewer.viewport;
      if (!viewport) {
        return;
      }
      const bounds = viewport.getBounds(true);
      if (bounds.y <= 0) {
        return;
      }
      const center = viewport.getCenter(true);
      viewport.panTo(new OpenSeadragon.Point(center.x, bounds.height / 2), true);
      viewport.applyConstraints();
    }
    resetLoadingState() {
      if (this.loadingTimer !== null) {
        window.clearTimeout(this.loadingTimer);
        this.loadingTimer = null;
      }
      this.isLoading = false;
      this.emitCustomEvent("diva-loading-change", { loading: false });
    }
    updateLoadingState() {
      const shouldLoad = this.loadingIndexes.size > 0;
      if (shouldLoad) {
        if (this.isLoading || this.loadingTimer !== null) {
          return;
        }
        this.loadingTimer = window.setTimeout(() => {
          this.loadingTimer = null;
          if (this.loadingIndexes.size > 0 && !this.isLoading) {
            this.isLoading = true;
            this.emitCustomEvent("diva-loading-change", { loading: true });
          }
        }, 300);
        return;
      }
      if (this.loadingTimer !== null) {
        window.clearTimeout(this.loadingTimer);
        this.loadingTimer = null;
      }
      if (this.isLoading) {
        this.isLoading = false;
        this.emitCustomEvent("diva-loading-change", { loading: false });
      }
    }
    applyLayoutChange(next) {
      var _a, _b;
      const nextMode = (_a = next.mode) != null ? _a : this.layoutMode;
      const nextDirection = (_b = next.direction) != null ? _b : this.viewingDirection;
      if (this.layoutMode === nextMode && this.viewingDirection === nextDirection) {
        return;
      }
      this.layoutMode = nextMode;
      this.viewingDirection = nextDirection;
      this.buildOffsets();
      this.updateLoadedItemPositions();
      this.ensureScrollPlane();
      this.lockHorizontalPan();
      this.recenterAfterFit();
      this.maybeLoadMore();
    }
    emitCustomEvent(name, detail) {
      this.dispatchEvent(new CustomEvent(name, { detail }));
    }
    getCenterX() {
      return this.isSpreadMode() ? 1 : 0.5;
    }
    getRowBounds(index) {
      const yOffset = this.pageOffsets[index] || 0;
      const rowHeight = this.pageRowHeights[index] || this.pageHeights[index] || 1;
      const width = this.isSpreadMode() ? 2 : 1;
      return new OpenSeadragon.Rect(0, yOffset, width, rowHeight);
    }
    isSpreadMode() {
      return this.layoutMode !== "single";
    }
    getRowStartIndex(index) {
      if (!this.isSpreadMode()) {
        return index;
      }
      if (this.layoutMode === "spread-shift") {
        if (index == 0) {
          return 0;
        }
        return index % 2 == 1 ? index : index - 1;
      }
      return index - index % 2;
    }
    getRowEndIndex(startIndex) {
      const maxIndex = this.pageOffsets.length - 1;
      if (!this.isSpreadMode()) {
        return startIndex;
      }
      if (this.layoutMode === "spread-shift" && startIndex == 0) {
        return 0;
      }
      return Math.min(startIndex + 1, maxIndex);
    }
    createScrollbar() {
      if (!this.container) {
        return;
      }
      this.scrollbarTrack = document.createElement("div");
      this.scrollbarTrack.className = "diva-scrollbar-track";
      this.scrollbarThumb = document.createElement("div");
      this.scrollbarThumb.className = "diva-scrollbar-thumb";
      this.scrollbarTrack.appendChild(this.scrollbarThumb);
      this.container.appendChild(this.scrollbarTrack);
      this.setupScrollbarDrag();
      this.setupScrollbarTrackClick();
    }
    updateScrollbar() {
      if (!this.viewer || !this.scrollbarThumb || !this.scrollbarTrack) {
        return;
      }
      if (this.pageOffsets.length === 0) {
        return;
      }
      const bounds = this.viewer.viewport.getBounds(true);
      const trackHeight = this.scrollbarTrack.clientHeight;
      const lastIndex = this.pageOffsets.length - 1;
      const totalHeight = this.pageOffsets[lastIndex] + (this.pageRowHeights[lastIndex] || 1);
      const viewportHeight = bounds.height;
      const scrollTop = bounds.y;
      const thumbHeight = Math.max(30, viewportHeight / totalHeight * trackHeight);
      const maxScroll = totalHeight - viewportHeight;
      const scrollProgress = maxScroll > 0 ? Math.max(0, Math.min(1, scrollTop / maxScroll)) : 0;
      const thumbTop = scrollProgress * (trackHeight - thumbHeight);
      this.scrollbarThumb.style.height = `${thumbHeight}px`;
      this.scrollbarThumb.style.top = `${Math.max(0, thumbTop)}px`;
    }
    setupScrollbarDrag() {
      if (!this.scrollbarThumb || !this.scrollbarTrack) {
        return;
      }
      let isDragging = false;
      let startY = 0;
      let startThumbTop = 0;
      const onMouseDown = (e) => {
        var _a;
        isDragging = true;
        this.isScrollbarDragging = true;
        startY = e.clientY;
        startThumbTop = ((_a = this.scrollbarThumb) == null ? void 0 : _a.offsetTop) || 0;
        e.preventDefault();
        e.stopPropagation();
      };
      const onMouseMove = (e) => {
        if (!isDragging || !this.scrollbarTrack || !this.scrollbarThumb || !this.viewer) {
          return;
        }
        const deltaY = e.clientY - startY;
        const newThumbTop = startThumbTop + deltaY;
        const trackHeight = this.scrollbarTrack.clientHeight;
        const thumbHeight = this.scrollbarThumb.clientHeight;
        const clampedThumbTop = Math.max(0, Math.min(newThumbTop, trackHeight - thumbHeight));
        const scrollProgress = trackHeight - thumbHeight > 0 ? clampedThumbTop / (trackHeight - thumbHeight) : 0;
        const lastIndex = this.pageOffsets.length - 1;
        const totalHeight = this.pageOffsets[lastIndex] + (this.pageRowHeights[lastIndex] || 1);
        const viewportHeight = this.viewer.viewport.getBounds(true).height;
        const maxScroll = totalHeight - viewportHeight;
        const newScrollY = scrollProgress * maxScroll;
        this.scrollToOffset(newScrollY);
      };
      const onMouseUp = () => {
        if (isDragging) {
          isDragging = false;
          this.isScrollbarDragging = false;
          this.emitPageChangeInstant();
        }
      };
      this.scrollbarThumb.addEventListener("mousedown", onMouseDown);
      document.addEventListener("mousemove", onMouseMove);
      document.addEventListener("mouseup", onMouseUp);
    }
    setupScrollbarTrackClick() {
      if (!this.scrollbarTrack) {
        return;
      }
      this.scrollbarTrack.addEventListener("click", (e) => {
        var _a, _b;
        if (e.target === this.scrollbarThumb || !this.viewer) {
          return;
        }
        const rect = (_a = this.scrollbarTrack) == null ? void 0 : _a.getBoundingClientRect();
        if (!rect) {
          return;
        }
        const clickY = e.clientY - rect.top;
        const trackHeight = rect.height;
        const thumbHeight = ((_b = this.scrollbarThumb) == null ? void 0 : _b.clientHeight) || 30;
        const scrollProgress = Math.max(0, Math.min(1, clickY / trackHeight));
        const lastIndex = this.pageOffsets.length - 1;
        const totalHeight = this.pageOffsets[lastIndex] + (this.pageRowHeights[lastIndex] || 1);
        const viewportHeight = this.viewer.viewport.getBounds(true).height;
        const maxScroll = totalHeight - viewportHeight;
        const newScrollY = scrollProgress * maxScroll;
        this.scrollToOffset(newScrollY);
      });
    }
  };
  customElements.define("osd-viewer", OsdViewer);

  // cache/diva.css
  var diva_default = ":root{--diva-accent:#5a6bff;--diva-accent-light:#9aa4ff;--diva-border:#d9d4ce;--diva-danger:#d32f2f;--diva-dark-bg:#1c1d22;--diva-dark-border:#2c2d33;--diva-overlay-bg:#10111499;--diva-page-bg:#f7f5f1;--diva-shadow-dark:#00000026;--diva-shadow-focus:#9aa4ff59;--diva-shadow-modal:#00000040;--diva-surface:#e6e1dc;--diva-text-muted:#5c5a55;--diva-text-muted-on-dark:#ffffffb3;--diva-text-primary:#1b1b1b;--diva-toolbar-button-bg:#5258626b;--diva-toolbar-button-bg-hover:#5c636e85;--diva-toolbar-button-bg-fullscreen:#52586285;--diva-toolbar-button-bg-fullscreen-hover:#6068749e;--diva-toolbar-button-border:#ffffff59;--diva-toolbar-button-border-hover:#ffffff73;--diva-toolbar-button-border-fullscreen-hover:#fff9;--diva-toolbar-button-icon:#2c2d33;--diva-toolbar-button-shadow:inset 0 1px 0 #ffffff8c, inset 0 -1px 0 #ffffff2e;--diva-toolbar-button-shadow-hover:inset 0 1px 0 #ffffffb3, inset 0 -1px 0 #ffffff3d;--diva-white:#fff;--diva-font-lg:16px;--diva-font-md:13px;--diva-font-sm:11px;--diva-font-xs:10px;--diva-font-xl:20px;color-scheme:light}*{box-sizing:border-box}.list-reset{margin:0;padding:0;list-style:none}.ui-button{text-align:left;cursor:pointer;color:var(--diva-text-primary);font-size:var(--diva-font-lg);background-color:#0000;border:none;padding:0}.ui-button:hover{background-color:var(--diva-surface)}.ui-card{cursor:pointer;border-radius:6px;width:100%;padding:6px}.ui-card--dark{background-color:var(--diva-dark-bg)}.diva-app{flex-direction:column;flex:1;height:100%;min-height:0;padding:24px;display:flex}.diva-app.is-fullscreen{height:100vh;min-height:100vh;padding:0}.diva-app-header{font-size:var(--diva-font-lg);align-items:center;gap:12px;margin-bottom:16px;font-weight:600;display:flex}.diva-app-title{font-size:var(--diva-font-xl);text-align:left;color:var(--diva-text-primary);margin-bottom:12px;font-weight:600}.diva-app-title.is-fullscreen{color:var(--diva-white)}.diva-app-body{flex:1;align-items:stretch;gap:0;height:100%;min-height:0;display:flex;position:relative}.diva-app-body.is-fullscreen{flex:1;min-height:0}.diva-canvas-column{flex-direction:column;flex:1;gap:24px;min-height:0;display:flex}.diva-canvas-column.is-fullscreen{flex:1;height:100%;min-height:0}.diva-canvas-wrapper{flex:1;min-height:0;position:relative}.diva-canvas{background-color:var(--diva-dark-bg);border:1px solid var(--diva-dark-border);border-radius:6px 0 0 6px;width:100%;height:100%;overflow:hidden}.diva-canvas.is-fullscreen{border-radius:0;flex:1;height:100%}.diva-canvas.has-collection{border-radius:0}.metadata-panel{height:100%;padding:12px;overflow:auto}.metadata-body{flex-direction:column;gap:10px;display:flex}.metadata-item{flex-direction:column;gap:4px;display:flex}.metadata-label{font-size:var(--diva-font-lg);color:var(--diva-text-muted);text-transform:uppercase;letter-spacing:.05em;font-weight:600}.metadata-value{font-size:var(--diva-font-lg);color:var(--diva-text-muted);line-height:1.4}.contents-empty{font-size:var(--diva-font-lg);color:var(--diva-text-muted);padding-left:12px}.sidebar-resizer,.collection-resizer{width:12px;font-size:var(--diva-font-xl);color:var(--diva-white);background-color:var(--diva-text-muted);cursor:ew-resize;user-select:none;touch-action:none;flex:0 0 12px;justify-content:center;align-self:stretch;align-items:center;line-height:1;display:flex}.sidebar-resizer.is-hidden,.collection-resizer.is-hidden{display:none}.sidebar-panel.is-fullscreen,.collection-panel.is-fullscreen{border-radius:0;height:100%}.sidebar-panel.is-hidden,.collection-panel.is-hidden{opacity:0;pointer-events:none;border-width:0;padding:0;overflow:hidden}.required-statement-dock{justify-content:flex-end;width:100%;margin-top:12px;padding-right:8px;display:flex}.required-statement{font-size:var(--diva-font-md);color:var(--diva-text-muted);text-align:right;max-width:20vw;line-height:1.4}.diva-scrollbar-track{background:var(--diva-surface);border:1px solid var(--diva-border);z-index:100;border-radius:6px;width:12px;position:absolute;top:4px;bottom:4px;right:4px}.diva-scrollbar-thumb{background:var(--diva-text-muted);cursor:pointer;border-radius:5px;min-height:30px;position:absolute;left:1px;right:1px}.diva-scrollbar-thumb:hover{background:var(--diva-text-primary)}.diva-scrollbar-thumb:active{background:var(--diva-dark-border)}.throbber-overlay{pointer-events:none;justify-content:center;align-items:center;display:flex;position:absolute;inset:0}.throbber{background-color:var(--diva-white);width:64px;height:64px;box-shadow:0 8px 16px var(--diva-shadow-dark);border-radius:8px;flex-wrap:wrap;padding:8px;display:flex}.throbber-cube{background-color:var(--diva-accent);width:16px;height:16px;animation-name:diva-cube-grid;animation-duration:1.3s;animation-timing-function:ease-in-out;animation-iteration-count:infinite}@keyframes diva-cube-grid{0%{transform:scale(1)}35%{transform:scale(0)}70%{transform:scale(1)}to{transform:scale(1)}}@media (width<=720px){.diva-app{padding:12px}.diva-app-body{flex-direction:column;gap:12px}.sidebar-resizer,.collection-resizer{display:none}}.sidebar-panel{border:1px solid var(--diva-dark-border);background-color:var(--diva-page-bg);border-radius:0 6px 6px 0;flex-direction:column;width:320px;height:100%;min-height:0;display:flex;overflow:hidden}.sidebar-tabs{border:1px solid var(--diva-surface);background-color:var(--diva-surface);border-radius:0 6px 0 0;display:flex}.sidebar-tab-button{font-size:var(--diva-font-md);text-transform:uppercase;cursor:pointer;color:var(--diva-text-muted);background-color:#0000;border:none;flex:1;padding:10px 12px}.sidebar-tab-button.is-active{background-color:var(--diva-white);font-weight:600}.sidebar-content{background-color:var(--diva-page-bg);flex-direction:column;flex:1;min-height:0;display:flex;position:relative;overflow:hidden}.sidebar-pane{flex:1;width:100%;min-height:0}.sidebar-pane.is-hidden{display:none}.thumbs{scroll-behavior:smooth;background-color:var(--diva-dark-bg);flex:1;grid-template-columns:repeat(3,minmax(0,1fr));align-content:start;gap:10px;width:100%;height:100%;min-height:0;padding:12px;display:grid;overflow-y:auto}.thumbs.is-fullscreen{height:100%}.thumbs-item{border:1px solid var(--diva-dark-border);text-align:left;flex-direction:column;justify-content:flex-start;align-items:stretch;max-width:none;display:flex}.thumbs-item:focus-visible{outline:2px solid var(--diva-accent);outline-offset:2px}.thumbs-item.is-active{border-color:var(--diva-accent-light);box-shadow:0 0 0 var(--diva-shadow-focus);background-color:var(--diva-dark-bg);outline:2px solid var(--diva-accent-light);outline-offset:2px}.thumbs-image{border-radius:3px;width:100%;height:auto;display:block}.thumbs-label{font-size:var(--diva-font-sm);color:var(--diva-text-muted-on-dark);margin-top:6px;line-height:1.3}.thumbs-label.is-active{color:var(--diva-white)}.contents-panel{height:100%;padding:12px;overflow:auto}.contents-title{font-size:var(--diva-font-lg);color:var(--diva-text-muted);margin-bottom:10px;font-weight:600}.contents-view-tabs{gap:8px;margin-bottom:12px;display:flex}.contents-view-button{background-color:var(--diva-surface);border:1px solid var(--diva-border);font-size:var(--diva-font-sm);color:var(--diva-text-muted);cursor:pointer;border-radius:6px;padding:4px 10px}.contents-view-button.is-active{background-color:var(--diva-white);border-color:var(--diva-accent);color:var(--diva-text-primary)}.contents-list-nested{margin-top:6px;padding-left:16px}.contents-item{margin-bottom:6px}.contents-meta{border:1px solid var(--diva-dark-border);margin-top:6px;padding:8px}.contents-button:hover{color:var(--diva-accent)}@media (width<=720px){.sidebar-panel{border-radius:6px;height:auto;width:100%!important}.sidebar-panel.is-overlay{z-index:100;width:100%;height:100%;box-shadow:0 12px 24px var(--diva-shadow-dark);border-radius:0;position:absolute;inset:0}.sidebar-panel.is-mobile-hidden{display:none}.thumbs{grid-template-columns:repeat(3,minmax(0,1fr));width:100%;height:auto;overflow:auto hidden}.thumbs-item{min-width:120px}}.canvas-toolbar-stack{flex-direction:column;gap:6px;width:100%;min-width:0;display:flex}.canvas-toolbar{align-items:center;width:100%;margin-bottom:0;display:flex}.canvas-toolbar-section{flex:none;align-items:center;gap:12px;min-width:0;display:flex}.canvas-toolbar-section.is-right{flex:none;margin-left:auto}.canvas-toolbar-item{flex-direction:column;flex:none;align-items:center;gap:6px;width:80px;display:flex}.canvas-toolbar-button{background-color:var(--diva-toolbar-button-bg);color:var(--diva-toolbar-button-icon);border:2px solid var(--diva-toolbar-button-icon);box-shadow:var(--diva-toolbar-button-shadow);-webkit-backdrop-filter:blur(10px)saturate(140%);cursor:pointer;border-radius:6px;align-items:center;width:80%;height:46px;padding:4px 6px;display:flex}.canvas-toolbar-button:focus-visible{outline:2px solid var(--diva-accent);outline-offset:2px}.canvas-toolbar-button:hover{background-color:var(--diva-toolbar-button-bg-hover);border-color:var(--diva-toolbar-button-icon);box-shadow:var(--diva-toolbar-button-shadow-hover)}.canvas-toolbar-button.is-fullscreen{color:var(--diva-white);background-color:var(--diva-toolbar-button-bg-fullscreen);border-color:var(--diva-toolbar-button-border-hover)}.canvas-toolbar-button.is-fullscreen:hover{background-color:var(--diva-toolbar-button-bg-fullscreen-hover);border-color:var(--diva-toolbar-button-border-fullscreen-hover)}.canvas-toolbar-button.is-disabled{opacity:.4;cursor:not-allowed}.canvas-toolbar-button.is-disabled:hover{background-color:var(--diva-toolbar-button-bg);border-color:var(--diva-toolbar-button-icon);box-shadow:var(--diva-toolbar-button-shadow)}.canvas-toolbar-button.is-fullscreen.is-disabled:hover{background-color:var(--diva-toolbar-button-bg-fullscreen);border-color:var(--diva-toolbar-button-border-hover);box-shadow:var(--diva-toolbar-button-shadow)}.canvas-toolbar-label{font-size:var(--diva-font-sm);color:var(--diva-text-primary);white-space:normal;text-overflow:ellipsis;text-align:center;text-transform:uppercase;word-break:break-word;min-height:2.2em;font-weight:500;line-height:1.1;overflow:hidden}.canvas-toolbar-label.is-fullscreen{color:var(--diva-white)}.canvas-label{font-size:var(--diva-font-lg);color:var(--diva-text-muted);text-align:left;white-space:normal;overflow-wrap:anywhere;word-break:break-word;width:100%}.canvas-label.is-fullscreen{color:var(--diva-white)}.status{font-size:var(--diva-font-lg);color:var(--diva-text-muted);margin-bottom:0}.status.is-error{color:var(--diva-danger)}@media (width<=720px){.canvas-toolbar{flex-wrap:wrap;gap:8px}.canvas-toolbar-item{width:64px}.canvas-label,.status{display:none}}.modal-overlay{background-color:var(--diva-overlay-bg);z-index:100;justify-content:center;align-items:center;padding:24px;display:flex;position:fixed;inset:0}.modal-overlay.is-fullscreen{padding:0}.modal{background-color:var(--diva-page-bg);color:var(--diva-text-primary);width:min(1440px,96vw);max-height:90vh;box-shadow:0 20px 40px var(--diva-shadow-modal);border-radius:10px;flex-direction:column;display:flex}.modal.is-narrow{width:min(960px,94vw)}.modal.is-page-view{height:80vh;max-height:80vh}.modal.is-fullscreen{border-radius:0;width:100vw;height:100vh;max-height:100vh}.modal-header{justify-content:space-between;align-items:center;padding:16px 20px 0;display:flex}.modal-actions{gap:8px;display:flex}.modal-close-action .canvas-toolbar-button{color:var(--diva-danger);box-shadow:none;-webkit-backdrop-filter:none;background-color:#0000;border:none;width:auto;height:auto;padding:2px}.modal-close-action .canvas-toolbar-button:hover{background-color:#d32f2f1f;border-color:#0000}.modal-close-action .canvas-toolbar-item{gap:2px;width:32px}.modal-close-action .canvas-toolbar-label{font-size:var(--diva-font-xs);min-height:auto}.modal-title-stack{flex-direction:column;gap:4px;display:flex}.modal-title{font-size:var(--diva-font-lg);font-weight:600}.modal-subtitle{font-size:var(--diva-font-lg);color:var(--diva-text-primary)}.modal-subtitle.is-muted{font-size:var(--diva-font-md)}.modal-body{flex:1;grid-template-columns:minmax(0,1fr) 240px;gap:16px;min-height:0;padding:16px 20px 20px;display:grid}.modal-body.is-no-gap{gap:0}.modal-body.is-two-column{grid-template-columns:minmax(0,1fr) 200px;align-items:start}.modal-body.is-no-sidebar{grid-template-columns:minmax(0,1fr)}.modal-body.is-fullscreen{flex:1;min-height:0}.modal-body.is-with-choices{grid-template-columns:120px minmax(0,1fr) 240px}.modal-body.is-with-choices-no-sidebar{grid-template-columns:120px minmax(0,1fr)}.modal-viewer{background-color:var(--diva-dark-bg);border:1px solid var(--diva-dark-border);height:100%;overflow:hidden}.modal-viewer.is-fullscreen{border-radius:0;height:100%}.modal-viewer.is-outer-left{border-radius:6px 0 0 6px}.modal-canvas{width:100%;height:100%;display:block}.modal-sidebar{background-color:var(--diva-white);border-top:1px solid var(--diva-border);border-right:1px solid var(--diva-border);border-bottom:1px solid var(--diva-border);border-radius:0 6px 6px 0;padding:16px;overflow:auto}.manifest-info-logo-wrap{text-align:center;flex-direction:column;align-items:center;gap:8px;display:flex}.manifest-info-logo{width:100%;max-width:180px;height:auto}.page-view-choices{background-color:var(--diva-dark-bg);border-radius:6px 0 0 6px;flex-direction:column;gap:8px;padding:8px;display:flex;overflow:auto}.page-view-choice{border:2px solid #0000;flex-direction:column;gap:4px;display:flex}.page-view-choice:focus-visible{outline:2px solid var(--diva-accent);outline-offset:2px}.page-view-choice:hover{background-color:var(--diva-dark-bg)}.page-view-choice.is-active{border-color:var(--diva-accent-light);background-color:var(--diva-dark-bg)}.page-view-choice-thumb{border-radius:3px;width:100%;height:auto;display:block}.page-view-choice-label{font-size:var(--diva-font-xs);color:var(--diva-text-muted);text-overflow:ellipsis;white-space:nowrap;line-height:1.2;overflow:hidden}.filter-group{border-bottom:1px solid var(--diva-border);margin-bottom:12px;padding-bottom:12px}.filter-title-button{text-align:left;cursor:pointer;width:100%;font-size:var(--diva-font-sm);text-transform:uppercase;letter-spacing:.08em;color:var(--diva-text-muted);background-color:#0000;border:none;align-items:center;gap:8px;margin-bottom:8px;padding:0;font-weight:600;display:flex}.filter-title-button.is-collapsed{margin-bottom:0}.filter-title-icon{border-top:4px solid #0000;border-bottom:4px solid #0000;border-left:6px solid var(--diva-text-muted);width:0;height:0;transition:transform .15s;display:inline-block}.filter-title-icon.is-expanded{transform:rotate(90deg)}.filter-row{flex-wrap:wrap;align-items:center;gap:8px;margin-bottom:8px;display:flex}.filter-toggle{font-size:var(--diva-font-md);align-items:center;gap:8px;margin-bottom:8px;display:flex}.filter-toggle.is-inline{margin-bottom:0}.filter-range-group{flex-direction:column;gap:6px;margin-bottom:10px;display:flex}.filter-range-header{justify-content:space-between;align-items:center;gap:8px;display:flex}.filter-range-header-right{align-items:center;gap:8px;display:flex}.filter-range-input{width:100%}.filter-value{font-size:var(--diva-font-sm);color:var(--diva-text-muted);text-align:right;width:40px}.filter-reset{font-size:var(--diva-font-xs);background-color:var(--diva-surface);border:1px solid var(--diva-border);cursor:pointer;color:var(--diva-text-muted);border-radius:3px;padding:2px 6px}.filter-reset:hover{background-color:var(--diva-border)}.filter-json{width:100%;min-height:120px;font-size:var(--diva-font-sm);border:1px solid var(--diva-border);background-color:var(--diva-white);resize:vertical;border-radius:4px;padding:6px 8px;font-family:Menlo,Monaco,Consolas,Liberation Mono,monospace}.filter-json-error{font-size:var(--diva-font-sm);color:var(--diva-danger);margin-top:4px}.filter-label{font-size:var(--diva-font-sm);color:var(--diva-text-muted)}.filter-select{border:1px solid var(--diva-border);background-color:var(--diva-white);font-size:var(--diva-font-sm);border-radius:4px;padding:4px 6px}.filter-color-input{border:1px solid var(--diva-border);background-color:var(--diva-white);border-radius:4px;width:42px;height:28px;padding:0}.collection-panel{border:1px solid var(--diva-dark-border);background-color:var(--diva-page-bg);border-radius:6px 0 0 6px;flex-direction:column;height:70vh;display:flex;overflow:hidden}.collection-header{background-color:var(--diva-surface);border-bottom:1px solid var(--diva-border);border-radius:6px 0 0;padding:12px}.collection-title{font-size:var(--diva-font-lg);color:var(--diva-text-muted);margin-bottom:4px;font-weight:600}.collection-summary{font-size:var(--diva-font-md);color:var(--diva-text-muted);line-height:1.4}.collection-tree-item{padding-left:12px}.collection-node-button{align-items:center;gap:6px;width:100%;padding:6px 8px;display:flex}.collection-expand-icon{flex-shrink:0;justify-content:center;align-items:center;width:16px;height:16px;display:flex}.manifest-tree-item{padding:6px 8px 6px 30px}.manifest-tree-item.is-active{background-color:var(--diva-border);font-weight:600}.sidebar-pane.is-scroll{overflow-y:auto}@media (width<=720px){.collection-panel{border-radius:6px;width:100%;height:auto}}";

  // cache/elm-esm.js
  function F(arity, fun, wrapper) {
    wrapper.a = arity;
    wrapper.f = fun;
    return wrapper;
  }
  function F2(fun) {
    return F(2, fun, function(a) {
      return function(b) {
        return fun(a, b);
      };
    });
  }
  function F3(fun) {
    return F(3, fun, function(a) {
      return function(b) {
        return function(c) {
          return fun(a, b, c);
        };
      };
    });
  }
  function F4(fun) {
    return F(4, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return fun(a, b, c, d);
          };
        };
      };
    });
  }
  function F5(fun) {
    return F(5, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return function(e) {
              return fun(a, b, c, d, e);
            };
          };
        };
      };
    });
  }
  function F6(fun) {
    return F(6, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return function(e) {
              return function(f) {
                return fun(a, b, c, d, e, f);
              };
            };
          };
        };
      };
    });
  }
  function F7(fun) {
    return F(7, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return function(e) {
              return function(f) {
                return function(g) {
                  return fun(a, b, c, d, e, f, g);
                };
              };
            };
          };
        };
      };
    });
  }
  function F8(fun) {
    return F(8, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return function(e) {
              return function(f) {
                return function(g) {
                  return function(h) {
                    return fun(a, b, c, d, e, f, g, h);
                  };
                };
              };
            };
          };
        };
      };
    });
  }
  function F9(fun) {
    return F(9, fun, function(a) {
      return function(b) {
        return function(c) {
          return function(d) {
            return function(e) {
              return function(f) {
                return function(g) {
                  return function(h) {
                    return function(i) {
                      return fun(a, b, c, d, e, f, g, h, i);
                    };
                  };
                };
              };
            };
          };
        };
      };
    });
  }
  function A2(fun, a, b) {
    return fun.a === 2 ? fun.f(a, b) : fun(a)(b);
  }
  function A3(fun, a, b, c) {
    return fun.a === 3 ? fun.f(a, b, c) : fun(a)(b)(c);
  }
  function A4(fun, a, b, c, d) {
    return fun.a === 4 ? fun.f(a, b, c, d) : fun(a)(b)(c)(d);
  }
  function A5(fun, a, b, c, d, e) {
    return fun.a === 5 ? fun.f(a, b, c, d, e) : fun(a)(b)(c)(d)(e);
  }
  function A6(fun, a, b, c, d, e, f) {
    return fun.a === 6 ? fun.f(a, b, c, d, e, f) : fun(a)(b)(c)(d)(e)(f);
  }
  function A7(fun, a, b, c, d, e, f, g) {
    return fun.a === 7 ? fun.f(a, b, c, d, e, f, g) : fun(a)(b)(c)(d)(e)(f)(g);
  }
  function A8(fun, a, b, c, d, e, f, g, h) {
    return fun.a === 8 ? fun.f(a, b, c, d, e, f, g, h) : fun(a)(b)(c)(d)(e)(f)(g)(h);
  }
  console.warn("Compiled in DEBUG mode. Follow the advice at https://elm-lang.org/0.19.1/optimize for better performance and smaller assets.");
  var _JsArray_empty = [];
  function _JsArray_singleton(value) {
    return [value];
  }
  function _JsArray_length(array) {
    return array.length;
  }
  var _JsArray_initialize = F3(function(size, offset, func) {
    var result = new Array(size);
    for (var i = 0; i < size; i++) {
      result[i] = func(offset + i);
    }
    return result;
  });
  var _JsArray_initializeFromList = F2(function(max, ls) {
    var result = new Array(max);
    for (var i = 0; i < max && ls.b; i++) {
      result[i] = ls.a;
      ls = ls.b;
    }
    result.length = i;
    return _Utils_Tuple2(result, ls);
  });
  var _JsArray_unsafeGet = F2(function(index, array) {
    return array[index];
  });
  var _JsArray_unsafeSet = F3(function(index, value, array) {
    var length = array.length;
    var result = new Array(length);
    for (var i = 0; i < length; i++) {
      result[i] = array[i];
    }
    result[index] = value;
    return result;
  });
  var _JsArray_push = F2(function(value, array) {
    var length = array.length;
    var result = new Array(length + 1);
    for (var i = 0; i < length; i++) {
      result[i] = array[i];
    }
    result[length] = value;
    return result;
  });
  var _JsArray_foldl = F3(function(func, acc, array) {
    var length = array.length;
    for (var i = 0; i < length; i++) {
      acc = A2(func, array[i], acc);
    }
    return acc;
  });
  var _JsArray_foldr = F3(function(func, acc, array) {
    for (var i = array.length - 1; i >= 0; i--) {
      acc = A2(func, array[i], acc);
    }
    return acc;
  });
  var _JsArray_map = F2(function(func, array) {
    var length = array.length;
    var result = new Array(length);
    for (var i = 0; i < length; i++) {
      result[i] = func(array[i]);
    }
    return result;
  });
  var _JsArray_indexedMap = F3(function(func, offset, array) {
    var length = array.length;
    var result = new Array(length);
    for (var i = 0; i < length; i++) {
      result[i] = A2(func, offset + i, array[i]);
    }
    return result;
  });
  var _JsArray_slice = F3(function(from, to, array) {
    return array.slice(from, to);
  });
  var _JsArray_appendN = F3(function(n, dest, source) {
    var destLen = dest.length;
    var itemsToCopy = n - destLen;
    if (itemsToCopy > source.length) {
      itemsToCopy = source.length;
    }
    var size = destLen + itemsToCopy;
    var result = new Array(size);
    for (var i = 0; i < destLen; i++) {
      result[i] = dest[i];
    }
    for (var i = 0; i < itemsToCopy; i++) {
      result[i + destLen] = source[i];
    }
    return result;
  });
  var _Debug_log_UNUSED = F2(function(tag, value) {
    return value;
  });
  var _Debug_log = F2(function(tag, value) {
    console.log(tag + ": " + _Debug_toString(value));
    return value;
  });
  function _Debug_toString(value) {
    return _Debug_toAnsiString(false, value);
  }
  function _Debug_toAnsiString(ansi, value) {
    if (typeof value === "function") {
      return _Debug_internalColor(ansi, "<function>");
    }
    if (typeof value === "boolean") {
      return _Debug_ctorColor(ansi, value ? "True" : "False");
    }
    if (typeof value === "number") {
      return _Debug_numberColor(ansi, value + "");
    }
    if (value instanceof String) {
      return _Debug_charColor(ansi, "'" + _Debug_addSlashes(value, true) + "'");
    }
    if (typeof value === "string") {
      return _Debug_stringColor(ansi, '"' + _Debug_addSlashes(value, false) + '"');
    }
    if (typeof value === "object" && "$" in value) {
      var tag = value.$;
      if (typeof tag === "number") {
        return _Debug_internalColor(ansi, "<internals>");
      }
      if (tag[0] === "#") {
        var output = [];
        for (var k in value) {
          if (k === "$") continue;
          output.push(_Debug_toAnsiString(ansi, value[k]));
        }
        return "(" + output.join(",") + ")";
      }
      if (tag === "Set_elm_builtin") {
        return _Debug_ctorColor(ansi, "Set") + _Debug_fadeColor(ansi, ".fromList") + " " + _Debug_toAnsiString(ansi, $elm$core$Set$toList(value));
      }
      if (tag === "RBNode_elm_builtin" || tag === "RBEmpty_elm_builtin") {
        return _Debug_ctorColor(ansi, "Dict") + _Debug_fadeColor(ansi, ".fromList") + " " + _Debug_toAnsiString(ansi, $elm$core$Dict$toList(value));
      }
      if (tag === "Array_elm_builtin") {
        return _Debug_ctorColor(ansi, "Array") + _Debug_fadeColor(ansi, ".fromList") + " " + _Debug_toAnsiString(ansi, $elm$core$Array$toList(value));
      }
      if (tag === "::" || tag === "[]") {
        var output = "[";
        value.b && (output += _Debug_toAnsiString(ansi, value.a), value = value.b);
        for (; value.b; value = value.b) {
          output += "," + _Debug_toAnsiString(ansi, value.a);
        }
        return output + "]";
      }
      var output = "";
      for (var i in value) {
        if (i === "$") continue;
        var str = _Debug_toAnsiString(ansi, value[i]);
        var c0 = str[0];
        var parenless = c0 === "{" || c0 === "(" || c0 === "[" || c0 === "<" || c0 === '"' || str.indexOf(" ") < 0;
        output += " " + (parenless ? str : "(" + str + ")");
      }
      return _Debug_ctorColor(ansi, tag) + output;
    }
    if (typeof DataView === "function" && value instanceof DataView) {
      return _Debug_stringColor(ansi, "<" + value.byteLength + " bytes>");
    }
    if (typeof File !== "undefined" && value instanceof File) {
      return _Debug_internalColor(ansi, "<" + value.name + ">");
    }
    if (typeof value === "object") {
      var output = [];
      for (var key in value) {
        var field = key[0] === "_" ? key.slice(1) : key;
        output.push(_Debug_fadeColor(ansi, field) + " = " + _Debug_toAnsiString(ansi, value[key]));
      }
      if (output.length === 0) {
        return "{}";
      }
      return "{ " + output.join(", ") + " }";
    }
    return _Debug_internalColor(ansi, "<internals>");
  }
  function _Debug_addSlashes(str, isChar) {
    var s = str.replace(/\\/g, "\\\\").replace(/\n/g, "\\n").replace(/\t/g, "\\t").replace(/\r/g, "\\r").replace(/\v/g, "\\v").replace(/\0/g, "\\0");
    if (isChar) {
      return s.replace(/\'/g, "\\'");
    } else {
      return s.replace(/\"/g, '\\"');
    }
  }
  function _Debug_ctorColor(ansi, string) {
    return ansi ? "\x1B[96m" + string + "\x1B[0m" : string;
  }
  function _Debug_numberColor(ansi, string) {
    return ansi ? "\x1B[95m" + string + "\x1B[0m" : string;
  }
  function _Debug_stringColor(ansi, string) {
    return ansi ? "\x1B[93m" + string + "\x1B[0m" : string;
  }
  function _Debug_charColor(ansi, string) {
    return ansi ? "\x1B[92m" + string + "\x1B[0m" : string;
  }
  function _Debug_fadeColor(ansi, string) {
    return ansi ? "\x1B[37m" + string + "\x1B[0m" : string;
  }
  function _Debug_internalColor(ansi, string) {
    return ansi ? "\x1B[36m" + string + "\x1B[0m" : string;
  }
  function _Debug_crash(identifier, fact1, fact2, fact3, fact4) {
    switch (identifier) {
      case 0:
        throw new Error('What node should I take over? In JavaScript I need something like:\n\n    Elm.Main.init({\n        node: document.getElementById("elm-node")\n    })\n\nYou need to do this with any Browser.sandbox or Browser.element program.');
      case 1:
        throw new Error("Browser.application programs cannot handle URLs like this:\n\n    " + document.location.href + "\n\nWhat is the root? The root of your file system? Try looking at this program with `elm reactor` or some other server.");
      case 2:
        var jsonErrorString = fact1;
        throw new Error("Problem with the flags given to your Elm program on initialization.\n\n" + jsonErrorString);
      case 3:
        var portName = fact1;
        throw new Error("There can only be one port named `" + portName + "`, but your program has multiple.");
      case 4:
        var portName = fact1;
        var problem = fact2;
        throw new Error("Trying to send an unexpected type of value through port `" + portName + "`:\n" + problem);
      case 5:
        throw new Error('Trying to use `(==)` on functions.\nThere is no way to know if functions are "the same" in the Elm sense.\nRead more about this at https://package.elm-lang.org/packages/elm/core/latest/Basics#== which describes why it is this way and what the better version will look like.');
      case 6:
        var moduleName = fact1;
        throw new Error("Your page is loading multiple Elm scripts with a module named " + moduleName + ". Maybe a duplicate script is getting loaded accidentally? If not, rename one of them so I know which is which!");
      case 8:
        var moduleName = fact1;
        var region = fact2;
        var message = fact3;
        throw new Error("TODO in module `" + moduleName + "` " + _Debug_regionToString(region) + "\n\n" + message);
      case 9:
        var moduleName = fact1;
        var region = fact2;
        var value = fact3;
        var message = fact4;
        throw new Error(
          "TODO in module `" + moduleName + "` from the `case` expression " + _Debug_regionToString(region) + "\n\nIt received the following value:\n\n    " + _Debug_toString(value).replace("\n", "\n    ") + "\n\nBut the branch that handles it says:\n\n    " + message.replace("\n", "\n    ")
        );
      case 10:
        throw new Error("Bug in https://github.com/elm/virtual-dom/issues");
      case 11:
        throw new Error("Cannot perform mod 0. Division by zero error.");
    }
  }
  function _Debug_regionToString(region) {
    if (region.start.line === region.end.line) {
      return "on line " + region.start.line;
    }
    return "on lines " + region.start.line + " through " + region.end.line;
  }
  function _Utils_eq(x, y) {
    for (var pair, stack = [], isEqual = _Utils_eqHelp(x, y, 0, stack); isEqual && (pair = stack.pop()); isEqual = _Utils_eqHelp(pair.a, pair.b, 0, stack)) {
    }
    return isEqual;
  }
  function _Utils_eqHelp(x, y, depth, stack) {
    if (x === y) {
      return true;
    }
    if (typeof x !== "object" || x === null || y === null) {
      typeof x === "function" && _Debug_crash(5);
      return false;
    }
    if (depth > 100) {
      stack.push(_Utils_Tuple2(x, y));
      return true;
    }
    if (x.$ === "Set_elm_builtin") {
      x = $elm$core$Set$toList(x);
      y = $elm$core$Set$toList(y);
    }
    if (x.$ === "RBNode_elm_builtin" || x.$ === "RBEmpty_elm_builtin") {
      x = $elm$core$Dict$toList(x);
      y = $elm$core$Dict$toList(y);
    }
    if (typeof DataView === "function" && x instanceof DataView) {
      var length = x.byteLength;
      if (y.byteLength !== length) {
        return false;
      }
      for (var i = 0; i < length; ++i) {
        if (x.getUint8(i) !== y.getUint8(i)) {
          return false;
        }
      }
    }
    for (var key in x) {
      if (!_Utils_eqHelp(x[key], y[key], depth + 1, stack)) {
        return false;
      }
    }
    return true;
  }
  var _Utils_equal = F2(_Utils_eq);
  var _Utils_notEqual = F2(function(a, b) {
    return !_Utils_eq(a, b);
  });
  function _Utils_cmp(x, y, ord) {
    if (typeof x !== "object") {
      return x === y ? (
        /*EQ*/
        0
      ) : x < y ? (
        /*LT*/
        -1
      ) : (
        /*GT*/
        1
      );
    }
    if (x instanceof String) {
      var a = x.valueOf();
      var b = y.valueOf();
      return a === b ? 0 : a < b ? -1 : 1;
    }
    if (x.$[0] === "#") {
      return (ord = _Utils_cmp(x.a, y.a)) ? ord : (ord = _Utils_cmp(x.b, y.b)) ? ord : _Utils_cmp(x.c, y.c);
    }
    for (; x.b && y.b && !(ord = _Utils_cmp(x.a, y.a)); x = x.b, y = y.b) {
    }
    return ord || (x.b ? (
      /*GT*/
      1
    ) : y.b ? (
      /*LT*/
      -1
    ) : (
      /*EQ*/
      0
    ));
  }
  var _Utils_lt = F2(function(a, b) {
    return _Utils_cmp(a, b) < 0;
  });
  var _Utils_le = F2(function(a, b) {
    return _Utils_cmp(a, b) < 1;
  });
  var _Utils_gt = F2(function(a, b) {
    return _Utils_cmp(a, b) > 0;
  });
  var _Utils_ge = F2(function(a, b) {
    return _Utils_cmp(a, b) >= 0;
  });
  var _Utils_compare = F2(function(x, y) {
    var n = _Utils_cmp(x, y);
    return n < 0 ? $elm$core$Basics$LT : n ? $elm$core$Basics$GT : $elm$core$Basics$EQ;
  });
  var _Utils_Tuple0 = { $: "#0" };
  function _Utils_Tuple2(a, b) {
    return { $: "#2", a, b };
  }
  function _Utils_Tuple3(a, b, c) {
    return { $: "#3", a, b, c };
  }
  function _Utils_chr(c) {
    return new String(c);
  }
  function _Utils_update(oldRecord, updatedFields) {
    var newRecord = {};
    for (var key in oldRecord) {
      newRecord[key] = oldRecord[key];
    }
    for (var key in updatedFields) {
      newRecord[key] = updatedFields[key];
    }
    return newRecord;
  }
  var _Utils_append = F2(_Utils_ap);
  function _Utils_ap(xs, ys) {
    if (typeof xs === "string") {
      return xs + ys;
    }
    if (!xs.b) {
      return ys;
    }
    var root = _List_Cons(xs.a, ys);
    xs = xs.b;
    for (var curr = root; xs.b; xs = xs.b) {
      curr = curr.b = _List_Cons(xs.a, ys);
    }
    return root;
  }
  var _List_Nil = { $: "[]" };
  function _List_Cons(hd, tl) {
    return { $: "::", a: hd, b: tl };
  }
  var _List_cons = F2(_List_Cons);
  function _List_fromArray(arr) {
    var out = _List_Nil;
    for (var i = arr.length; i--; ) {
      out = _List_Cons(arr[i], out);
    }
    return out;
  }
  function _List_toArray(xs) {
    for (var out = []; xs.b; xs = xs.b) {
      out.push(xs.a);
    }
    return out;
  }
  var _List_map2 = F3(function(f, xs, ys) {
    for (var arr = []; xs.b && ys.b; xs = xs.b, ys = ys.b) {
      arr.push(A2(f, xs.a, ys.a));
    }
    return _List_fromArray(arr);
  });
  var _List_map3 = F4(function(f, xs, ys, zs) {
    for (var arr = []; xs.b && ys.b && zs.b; xs = xs.b, ys = ys.b, zs = zs.b) {
      arr.push(A3(f, xs.a, ys.a, zs.a));
    }
    return _List_fromArray(arr);
  });
  var _List_map4 = F5(function(f, ws, xs, ys, zs) {
    for (var arr = []; ws.b && xs.b && ys.b && zs.b; ws = ws.b, xs = xs.b, ys = ys.b, zs = zs.b) {
      arr.push(A4(f, ws.a, xs.a, ys.a, zs.a));
    }
    return _List_fromArray(arr);
  });
  var _List_map5 = F6(function(f, vs, ws, xs, ys, zs) {
    for (var arr = []; vs.b && ws.b && xs.b && ys.b && zs.b; vs = vs.b, ws = ws.b, xs = xs.b, ys = ys.b, zs = zs.b) {
      arr.push(A5(f, vs.a, ws.a, xs.a, ys.a, zs.a));
    }
    return _List_fromArray(arr);
  });
  var _List_sortBy = F2(function(f, xs) {
    return _List_fromArray(_List_toArray(xs).sort(function(a, b) {
      return _Utils_cmp(f(a), f(b));
    }));
  });
  var _List_sortWith = F2(function(f, xs) {
    return _List_fromArray(_List_toArray(xs).sort(function(a, b) {
      var ord = A2(f, a, b);
      return ord === $elm$core$Basics$EQ ? 0 : ord === $elm$core$Basics$LT ? -1 : 1;
    }));
  });
  var _Basics_add = F2(function(a, b) {
    return a + b;
  });
  var _Basics_sub = F2(function(a, b) {
    return a - b;
  });
  var _Basics_mul = F2(function(a, b) {
    return a * b;
  });
  var _Basics_fdiv = F2(function(a, b) {
    return a / b;
  });
  var _Basics_idiv = F2(function(a, b) {
    return a / b | 0;
  });
  var _Basics_pow = F2(Math.pow);
  var _Basics_remainderBy = F2(function(b, a) {
    return a % b;
  });
  var _Basics_modBy = F2(function(modulus, x) {
    var answer = x % modulus;
    return modulus === 0 ? _Debug_crash(11) : answer > 0 && modulus < 0 || answer < 0 && modulus > 0 ? answer + modulus : answer;
  });
  var _Basics_atan2 = F2(Math.atan2);
  function _Basics_toFloat(x) {
    return x;
  }
  var _Basics_ceiling = Math.ceil;
  var _Basics_floor = Math.floor;
  var _Basics_round = Math.round;
  var _Basics_log = Math.log;
  function _Basics_not(bool) {
    return !bool;
  }
  var _Basics_and = F2(function(a, b) {
    return a && b;
  });
  var _Basics_or = F2(function(a, b) {
    return a || b;
  });
  var _Basics_xor = F2(function(a, b) {
    return a !== b;
  });
  var _String_cons = F2(function(chr, str) {
    return chr + str;
  });
  function _String_uncons(string) {
    var word = string.charCodeAt(0);
    return !isNaN(word) ? $elm$core$Maybe$Just(
      55296 <= word && word <= 56319 ? _Utils_Tuple2(_Utils_chr(string[0] + string[1]), string.slice(2)) : _Utils_Tuple2(_Utils_chr(string[0]), string.slice(1))
    ) : $elm$core$Maybe$Nothing;
  }
  var _String_append = F2(function(a, b) {
    return a + b;
  });
  function _String_length(str) {
    return str.length;
  }
  var _String_map = F2(function(func, string) {
    var len = string.length;
    var array = new Array(len);
    var i = 0;
    while (i < len) {
      var word = string.charCodeAt(i);
      if (55296 <= word && word <= 56319) {
        array[i] = func(_Utils_chr(string[i] + string[i + 1]));
        i += 2;
        continue;
      }
      array[i] = func(_Utils_chr(string[i]));
      i++;
    }
    return array.join("");
  });
  var _String_filter = F2(function(isGood, str) {
    var arr = [];
    var len = str.length;
    var i = 0;
    while (i < len) {
      var char = str[i];
      var word = str.charCodeAt(i);
      i++;
      if (55296 <= word && word <= 56319) {
        char += str[i];
        i++;
      }
      if (isGood(_Utils_chr(char))) {
        arr.push(char);
      }
    }
    return arr.join("");
  });
  var _String_foldl = F3(function(func, state, string) {
    var len = string.length;
    var i = 0;
    while (i < len) {
      var char = string[i];
      var word = string.charCodeAt(i);
      i++;
      if (55296 <= word && word <= 56319) {
        char += string[i];
        i++;
      }
      state = A2(func, _Utils_chr(char), state);
    }
    return state;
  });
  var _String_foldr = F3(function(func, state, string) {
    var i = string.length;
    while (i-- > 0) {
      var char = string[i];
      var word = string.charCodeAt(i);
      if (56320 <= word && word <= 57343) {
        i--;
        char = string[i] + char;
      }
      state = A2(func, _Utils_chr(char), state);
    }
    return state;
  });
  var _String_split = F2(function(sep, str) {
    return str.split(sep);
  });
  var _String_join = F2(function(sep, strs) {
    return strs.join(sep);
  });
  var _String_slice = F3(function(start, end, str) {
    return str.slice(start, end);
  });
  function _String_toLower(str) {
    return str.toLowerCase();
  }
  var _String_any = F2(function(isGood, string) {
    var i = string.length;
    while (i-- > 0) {
      var char = string[i];
      var word = string.charCodeAt(i);
      if (56320 <= word && word <= 57343) {
        i--;
        char = string[i] + char;
      }
      if (isGood(_Utils_chr(char))) {
        return true;
      }
    }
    return false;
  });
  var _String_all = F2(function(isGood, string) {
    var i = string.length;
    while (i-- > 0) {
      var char = string[i];
      var word = string.charCodeAt(i);
      if (56320 <= word && word <= 57343) {
        i--;
        char = string[i] + char;
      }
      if (!isGood(_Utils_chr(char))) {
        return false;
      }
    }
    return true;
  });
  var _String_contains = F2(function(sub, str) {
    return str.indexOf(sub) > -1;
  });
  var _String_startsWith = F2(function(sub, str) {
    return str.indexOf(sub) === 0;
  });
  var _String_endsWith = F2(function(sub, str) {
    return str.length >= sub.length && str.lastIndexOf(sub) === str.length - sub.length;
  });
  var _String_indexes = F2(function(sub, str) {
    var subLen = sub.length;
    if (subLen < 1) {
      return _List_Nil;
    }
    var i = 0;
    var is = [];
    while ((i = str.indexOf(sub, i)) > -1) {
      is.push(i);
      i = i + subLen;
    }
    return _List_fromArray(is);
  });
  function _String_fromNumber(number) {
    return number + "";
  }
  function _String_toInt(str) {
    var total = 0;
    var code0 = str.charCodeAt(0);
    var start = code0 == 43 || code0 == 45 ? 1 : 0;
    for (var i = start; i < str.length; ++i) {
      var code = str.charCodeAt(i);
      if (code < 48 || 57 < code) {
        return $elm$core$Maybe$Nothing;
      }
      total = 10 * total + code - 48;
    }
    return i == start ? $elm$core$Maybe$Nothing : $elm$core$Maybe$Just(code0 == 45 ? -total : total);
  }
  function _String_toFloat(s) {
    if (s.length === 0 || /[\sxbo]/.test(s)) {
      return $elm$core$Maybe$Nothing;
    }
    var n = +s;
    return n === n ? $elm$core$Maybe$Just(n) : $elm$core$Maybe$Nothing;
  }
  function _Char_toCode(char) {
    var code = char.charCodeAt(0);
    if (55296 <= code && code <= 56319) {
      return (code - 55296) * 1024 + char.charCodeAt(1) - 56320 + 65536;
    }
    return code;
  }
  function _Char_fromCode(code) {
    return _Utils_chr(
      code < 0 || 1114111 < code ? "\uFFFD" : code <= 65535 ? String.fromCharCode(code) : (code -= 65536, String.fromCharCode(Math.floor(code / 1024) + 55296, code % 1024 + 56320))
    );
  }
  function _Char_toUpper(char) {
    return _Utils_chr(char.toUpperCase());
  }
  function _Char_toLower(char) {
    return _Utils_chr(char.toLowerCase());
  }
  function _Json_errorToString(error) {
    return $elm$json$Json$Decode$errorToString(error);
  }
  function _Json_succeed(msg) {
    return {
      $: 0,
      a: msg
    };
  }
  function _Json_fail(msg) {
    return {
      $: 1,
      a: msg
    };
  }
  function _Json_decodePrim(decoder) {
    return { $: 2, b: decoder };
  }
  var _Json_decodeInt = _Json_decodePrim(function(value) {
    return typeof value !== "number" ? _Json_expecting("an INT", value) : -2147483647 < value && value < 2147483647 && (value | 0) === value ? $elm$core$Result$Ok(value) : isFinite(value) && !(value % 1) ? $elm$core$Result$Ok(value) : _Json_expecting("an INT", value);
  });
  var _Json_decodeBool = _Json_decodePrim(function(value) {
    return typeof value === "boolean" ? $elm$core$Result$Ok(value) : _Json_expecting("a BOOL", value);
  });
  var _Json_decodeFloat = _Json_decodePrim(function(value) {
    return typeof value === "number" ? $elm$core$Result$Ok(value) : _Json_expecting("a FLOAT", value);
  });
  var _Json_decodeValue = _Json_decodePrim(function(value) {
    return $elm$core$Result$Ok(_Json_wrap(value));
  });
  var _Json_decodeString = _Json_decodePrim(function(value) {
    return typeof value === "string" ? $elm$core$Result$Ok(value) : value instanceof String ? $elm$core$Result$Ok(value + "") : _Json_expecting("a STRING", value);
  });
  function _Json_decodeList(decoder) {
    return { $: 3, b: decoder };
  }
  var _Json_decodeField = F2(function(field, decoder) {
    return {
      $: 6,
      d: field,
      b: decoder
    };
  });
  var _Json_decodeIndex = F2(function(index, decoder) {
    return {
      $: 7,
      e: index,
      b: decoder
    };
  });
  function _Json_decodeKeyValuePairs(decoder) {
    return {
      $: 8,
      b: decoder
    };
  }
  function _Json_mapMany(f, decoders) {
    return {
      $: 9,
      f,
      g: decoders
    };
  }
  var _Json_andThen = F2(function(callback, decoder) {
    return {
      $: 10,
      b: decoder,
      h: callback
    };
  });
  function _Json_oneOf(decoders) {
    return {
      $: 11,
      g: decoders
    };
  }
  var _Json_map1 = F2(function(f, d1) {
    return _Json_mapMany(f, [d1]);
  });
  var _Json_map2 = F3(function(f, d1, d2) {
    return _Json_mapMany(f, [d1, d2]);
  });
  var _Json_map3 = F4(function(f, d1, d2, d3) {
    return _Json_mapMany(f, [d1, d2, d3]);
  });
  var _Json_map4 = F5(function(f, d1, d2, d3, d4) {
    return _Json_mapMany(f, [d1, d2, d3, d4]);
  });
  var _Json_map5 = F6(function(f, d1, d2, d3, d4, d5) {
    return _Json_mapMany(f, [d1, d2, d3, d4, d5]);
  });
  var _Json_map6 = F7(function(f, d1, d2, d3, d4, d5, d6) {
    return _Json_mapMany(f, [d1, d2, d3, d4, d5, d6]);
  });
  var _Json_map7 = F8(function(f, d1, d2, d3, d4, d5, d6, d7) {
    return _Json_mapMany(f, [d1, d2, d3, d4, d5, d6, d7]);
  });
  var _Json_map8 = F9(function(f, d1, d2, d3, d4, d5, d6, d7, d8) {
    return _Json_mapMany(f, [d1, d2, d3, d4, d5, d6, d7, d8]);
  });
  var _Json_runOnString = F2(function(decoder, string) {
    try {
      var value = JSON.parse(string);
      return _Json_runHelp(decoder, value);
    } catch (e) {
      return $elm$core$Result$Err(A2($elm$json$Json$Decode$Failure, "This is not valid JSON! " + e.message, _Json_wrap(string)));
    }
  });
  var _Json_run = F2(function(decoder, value) {
    return _Json_runHelp(decoder, _Json_unwrap(value));
  });
  function _Json_runHelp(decoder, value) {
    switch (decoder.$) {
      case 2:
        return decoder.b(value);
      case 5:
        return value === null ? $elm$core$Result$Ok(decoder.c) : _Json_expecting("null", value);
      case 3:
        if (!_Json_isArray(value)) {
          return _Json_expecting("a LIST", value);
        }
        return _Json_runArrayDecoder(decoder.b, value, _List_fromArray);
      case 4:
        if (!_Json_isArray(value)) {
          return _Json_expecting("an ARRAY", value);
        }
        return _Json_runArrayDecoder(decoder.b, value, _Json_toElmArray);
      case 6:
        var field = decoder.d;
        if (typeof value !== "object" || value === null || !(field in value)) {
          return _Json_expecting("an OBJECT with a field named `" + field + "`", value);
        }
        var result = _Json_runHelp(decoder.b, value[field]);
        return $elm$core$Result$isOk(result) ? result : $elm$core$Result$Err(A2($elm$json$Json$Decode$Field, field, result.a));
      case 7:
        var index = decoder.e;
        if (!_Json_isArray(value)) {
          return _Json_expecting("an ARRAY", value);
        }
        if (index >= value.length) {
          return _Json_expecting("a LONGER array. Need index " + index + " but only see " + value.length + " entries", value);
        }
        var result = _Json_runHelp(decoder.b, value[index]);
        return $elm$core$Result$isOk(result) ? result : $elm$core$Result$Err(A2($elm$json$Json$Decode$Index, index, result.a));
      case 8:
        if (typeof value !== "object" || value === null || _Json_isArray(value)) {
          return _Json_expecting("an OBJECT", value);
        }
        var keyValuePairs = _List_Nil;
        for (var key in value) {
          if (Object.prototype.hasOwnProperty.call(value, key)) {
            var result = _Json_runHelp(decoder.b, value[key]);
            if (!$elm$core$Result$isOk(result)) {
              return $elm$core$Result$Err(A2($elm$json$Json$Decode$Field, key, result.a));
            }
            keyValuePairs = _List_Cons(_Utils_Tuple2(key, result.a), keyValuePairs);
          }
        }
        return $elm$core$Result$Ok($elm$core$List$reverse(keyValuePairs));
      case 9:
        var answer = decoder.f;
        var decoders = decoder.g;
        for (var i = 0; i < decoders.length; i++) {
          var result = _Json_runHelp(decoders[i], value);
          if (!$elm$core$Result$isOk(result)) {
            return result;
          }
          answer = answer(result.a);
        }
        return $elm$core$Result$Ok(answer);
      case 10:
        var result = _Json_runHelp(decoder.b, value);
        return !$elm$core$Result$isOk(result) ? result : _Json_runHelp(decoder.h(result.a), value);
      case 11:
        var errors = _List_Nil;
        for (var temp = decoder.g; temp.b; temp = temp.b) {
          var result = _Json_runHelp(temp.a, value);
          if ($elm$core$Result$isOk(result)) {
            return result;
          }
          errors = _List_Cons(result.a, errors);
        }
        return $elm$core$Result$Err($elm$json$Json$Decode$OneOf($elm$core$List$reverse(errors)));
      case 1:
        return $elm$core$Result$Err(A2($elm$json$Json$Decode$Failure, decoder.a, _Json_wrap(value)));
      case 0:
        return $elm$core$Result$Ok(decoder.a);
    }
  }
  function _Json_runArrayDecoder(decoder, value, toElmValue) {
    var len = value.length;
    var array = new Array(len);
    for (var i = 0; i < len; i++) {
      var result = _Json_runHelp(decoder, value[i]);
      if (!$elm$core$Result$isOk(result)) {
        return $elm$core$Result$Err(A2($elm$json$Json$Decode$Index, i, result.a));
      }
      array[i] = result.a;
    }
    return $elm$core$Result$Ok(toElmValue(array));
  }
  function _Json_isArray(value) {
    return Array.isArray(value) || typeof FileList !== "undefined" && value instanceof FileList;
  }
  function _Json_toElmArray(array) {
    return A2($elm$core$Array$initialize, array.length, function(i) {
      return array[i];
    });
  }
  function _Json_expecting(type, value) {
    return $elm$core$Result$Err(A2($elm$json$Json$Decode$Failure, "Expecting " + type, _Json_wrap(value)));
  }
  var _Json_encode = F2(function(indentLevel, value) {
    return JSON.stringify(_Json_unwrap(value), null, indentLevel) + "";
  });
  function _Json_wrap(value) {
    return { $: 0, a: value };
  }
  function _Json_unwrap(value) {
    return value.a;
  }
  function _Json_emptyArray() {
    return [];
  }
  function _Json_emptyObject() {
    return {};
  }
  var _Json_addField = F3(function(key, value, object) {
    var unwrapped = _Json_unwrap(value);
    if (!(key === "toJSON" && typeof unwrapped === "function")) {
      object[key] = unwrapped;
    }
    return object;
  });
  function _Json_addEntry(func) {
    return F2(function(entry, array) {
      array.push(_Json_unwrap(func(entry)));
      return array;
    });
  }
  var _Json_encodeNull = _Json_wrap(null);
  function _Scheduler_succeed(value) {
    return {
      $: 0,
      a: value
    };
  }
  function _Scheduler_fail(error) {
    return {
      $: 1,
      a: error
    };
  }
  function _Scheduler_binding(callback) {
    return {
      $: 2,
      b: callback,
      c: null
    };
  }
  var _Scheduler_andThen = F2(function(callback, task) {
    return {
      $: 3,
      b: callback,
      d: task
    };
  });
  var _Scheduler_onError = F2(function(callback, task) {
    return {
      $: 4,
      b: callback,
      d: task
    };
  });
  function _Scheduler_receive(callback) {
    return {
      $: 5,
      b: callback
    };
  }
  var _Scheduler_guid = 0;
  function _Scheduler_rawSpawn(task) {
    var proc = {
      $: 0,
      e: _Scheduler_guid++,
      f: task,
      g: null,
      h: []
    };
    _Scheduler_enqueue(proc);
    return proc;
  }
  function _Scheduler_spawn(task) {
    return _Scheduler_binding(function(callback) {
      callback(_Scheduler_succeed(_Scheduler_rawSpawn(task)));
    });
  }
  function _Scheduler_rawSend(proc, msg) {
    proc.h.push(msg);
    _Scheduler_enqueue(proc);
  }
  var _Scheduler_send = F2(function(proc, msg) {
    return _Scheduler_binding(function(callback) {
      _Scheduler_rawSend(proc, msg);
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  });
  function _Scheduler_kill(proc) {
    return _Scheduler_binding(function(callback) {
      var task = proc.f;
      if (task.$ === 2 && task.c) {
        task.c();
      }
      proc.f = null;
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  }
  var _Scheduler_working = false;
  var _Scheduler_queue = [];
  function _Scheduler_enqueue(proc) {
    _Scheduler_queue.push(proc);
    if (_Scheduler_working) {
      return;
    }
    _Scheduler_working = true;
    while (proc = _Scheduler_queue.shift()) {
      _Scheduler_step(proc);
    }
    _Scheduler_working = false;
  }
  function _Scheduler_step(proc) {
    while (proc.f) {
      var rootTag = proc.f.$;
      if (rootTag === 0 || rootTag === 1) {
        while (proc.g && proc.g.$ !== rootTag) {
          proc.g = proc.g.i;
        }
        if (!proc.g) {
          return;
        }
        proc.f = proc.g.b(proc.f.a);
        proc.g = proc.g.i;
      } else if (rootTag === 2) {
        proc.f.c = proc.f.b(function(newRoot) {
          proc.f = newRoot;
          _Scheduler_enqueue(proc);
        });
        return;
      } else if (rootTag === 5) {
        if (proc.h.length === 0) {
          return;
        }
        proc.f = proc.f.b(proc.h.shift());
      } else {
        proc.g = {
          $: rootTag === 3 ? 0 : 1,
          b: proc.f.b,
          i: proc.g
        };
        proc.f = proc.f.d;
      }
    }
  }
  function _Process_sleep(time) {
    return _Scheduler_binding(function(callback) {
      var id = setTimeout(function() {
        callback(_Scheduler_succeed(_Utils_Tuple0));
      }, time);
      return function() {
        clearTimeout(id);
      };
    });
  }
  var _Platform_worker = F4(function(impl, flagDecoder, debugMetadata, args) {
    return _Platform_initialize(
      flagDecoder,
      args,
      impl.init,
      impl.update,
      impl.subscriptions,
      function() {
        return function() {
        };
      }
    );
  });
  function _Platform_initialize(flagDecoder, args, init, update, subscriptions, stepperBuilder) {
    var result = A2(_Json_run, flagDecoder, _Json_wrap(args ? args["flags"] : void 0));
    $elm$core$Result$isOk(result) || _Debug_crash(
      2,
      _Json_errorToString(result.a)
      /**/
    );
    var managers = {};
    var initPair = init(result.a);
    var model = initPair.a;
    var stepper = stepperBuilder(sendToApp, model);
    var ports = _Platform_setupEffects(managers, sendToApp);
    function sendToApp(msg, viewMetadata) {
      var pair = A2(update, msg, model);
      stepper(model = pair.a, viewMetadata);
      _Platform_enqueueEffects(managers, pair.b, subscriptions(model));
    }
    _Platform_enqueueEffects(managers, initPair.b, subscriptions(model));
    return ports ? { ports } : {};
  }
  var _Platform_effectManagers = {};
  function _Platform_setupEffects(managers, sendToApp) {
    var ports;
    for (var key in _Platform_effectManagers) {
      var manager = _Platform_effectManagers[key];
      if (manager.a) {
        ports = ports || {};
        ports[key] = manager.a(key, sendToApp);
      }
      managers[key] = _Platform_instantiateManager(manager, sendToApp);
    }
    return ports;
  }
  function _Platform_createManager(init, onEffects, onSelfMsg, cmdMap, subMap) {
    return {
      b: init,
      c: onEffects,
      d: onSelfMsg,
      e: cmdMap,
      f: subMap
    };
  }
  function _Platform_instantiateManager(info, sendToApp) {
    var router = {
      g: sendToApp,
      h: void 0
    };
    var onEffects = info.c;
    var onSelfMsg = info.d;
    var cmdMap = info.e;
    var subMap = info.f;
    function loop(state) {
      return A2(_Scheduler_andThen, loop, _Scheduler_receive(function(msg) {
        var value = msg.a;
        if (msg.$ === 0) {
          return A3(onSelfMsg, router, value, state);
        }
        return cmdMap && subMap ? A4(onEffects, router, value.i, value.j, state) : A3(onEffects, router, cmdMap ? value.i : value.j, state);
      }));
    }
    return router.h = _Scheduler_rawSpawn(A2(_Scheduler_andThen, loop, info.b));
  }
  var _Platform_sendToApp = F2(function(router, msg) {
    return _Scheduler_binding(function(callback) {
      router.g(msg);
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  });
  var _Platform_sendToSelf = F2(function(router, msg) {
    return A2(_Scheduler_send, router.h, {
      $: 0,
      a: msg
    });
  });
  function _Platform_leaf(home) {
    return function(value) {
      return {
        $: 1,
        k: home,
        l: value
      };
    };
  }
  function _Platform_batch(list) {
    return {
      $: 2,
      m: list
    };
  }
  var _Platform_map = F2(function(tagger, bag) {
    return {
      $: 3,
      n: tagger,
      o: bag
    };
  });
  var _Platform_effectsQueue = [];
  var _Platform_effectsActive = false;
  function _Platform_enqueueEffects(managers, cmdBag, subBag) {
    _Platform_effectsQueue.push({ p: managers, q: cmdBag, r: subBag });
    if (_Platform_effectsActive) return;
    _Platform_effectsActive = true;
    for (var fx; fx = _Platform_effectsQueue.shift(); ) {
      _Platform_dispatchEffects(fx.p, fx.q, fx.r);
    }
    _Platform_effectsActive = false;
  }
  function _Platform_dispatchEffects(managers, cmdBag, subBag) {
    var effectsDict = {};
    _Platform_gatherEffects(true, cmdBag, effectsDict, null);
    _Platform_gatherEffects(false, subBag, effectsDict, null);
    for (var home in managers) {
      _Scheduler_rawSend(managers[home], {
        $: "fx",
        a: effectsDict[home] || { i: _List_Nil, j: _List_Nil }
      });
    }
  }
  function _Platform_gatherEffects(isCmd, bag, effectsDict, taggers) {
    switch (bag.$) {
      case 1:
        var home = bag.k;
        var effect = _Platform_toEffect(isCmd, home, taggers, bag.l);
        effectsDict[home] = _Platform_insert(isCmd, effect, effectsDict[home]);
        return;
      case 2:
        for (var list = bag.m; list.b; list = list.b) {
          _Platform_gatherEffects(isCmd, list.a, effectsDict, taggers);
        }
        return;
      case 3:
        _Platform_gatherEffects(isCmd, bag.o, effectsDict, {
          s: bag.n,
          t: taggers
        });
        return;
    }
  }
  function _Platform_toEffect(isCmd, home, taggers, value) {
    function applyTaggers(x) {
      for (var temp = taggers; temp; temp = temp.t) {
        x = temp.s(x);
      }
      return x;
    }
    var map = isCmd ? _Platform_effectManagers[home].e : _Platform_effectManagers[home].f;
    return A2(map, applyTaggers, value);
  }
  function _Platform_insert(isCmd, newEffect, effects) {
    effects = effects || { i: _List_Nil, j: _List_Nil };
    isCmd ? effects.i = _List_Cons(newEffect, effects.i) : effects.j = _List_Cons(newEffect, effects.j);
    return effects;
  }
  function _Platform_checkPortName(name) {
    if (_Platform_effectManagers[name]) {
      _Debug_crash(3, name);
    }
  }
  function _Platform_outgoingPort(name, converter) {
    _Platform_checkPortName(name);
    _Platform_effectManagers[name] = {
      e: _Platform_outgoingPortMap,
      u: converter,
      a: _Platform_setupOutgoingPort
    };
    return _Platform_leaf(name);
  }
  var _Platform_outgoingPortMap = F2(function(tagger, value) {
    return value;
  });
  function _Platform_setupOutgoingPort(name) {
    var subs = [];
    var converter = _Platform_effectManagers[name].u;
    var init = _Process_sleep(0);
    _Platform_effectManagers[name].b = init;
    _Platform_effectManagers[name].c = F3(function(router, cmdList, state) {
      for (; cmdList.b; cmdList = cmdList.b) {
        var currentSubs = subs;
        var value = _Json_unwrap(converter(cmdList.a));
        for (var i = 0; i < currentSubs.length; i++) {
          currentSubs[i](value);
        }
      }
      return init;
    });
    function subscribe(callback) {
      if (typeof callback !== "function") {
        throw new Error("Trying to subscribe an invalid callback on port `" + name + "`");
      }
      subs.push(callback);
    }
    function unsubscribe(callback) {
      subs = subs.slice();
      var index = subs.indexOf(callback);
      if (index >= 0) {
        subs.splice(index, 1);
      }
    }
    return {
      subscribe,
      unsubscribe
    };
  }
  function _Platform_incomingPort(name, converter) {
    _Platform_checkPortName(name);
    _Platform_effectManagers[name] = {
      f: _Platform_incomingPortMap,
      u: converter,
      a: _Platform_setupIncomingPort
    };
    return _Platform_leaf(name);
  }
  var _Platform_incomingPortMap = F2(function(tagger, finalTagger) {
    return function(value) {
      return tagger(finalTagger(value));
    };
  });
  function _Platform_setupIncomingPort(name, sendToApp) {
    var subs = _List_Nil;
    var converter = _Platform_effectManagers[name].u;
    var init = _Scheduler_succeed(null);
    _Platform_effectManagers[name].b = init;
    _Platform_effectManagers[name].c = F3(function(router, subList, state) {
      subs = subList;
      return init;
    });
    function send(incomingValue) {
      var result = A2(_Json_run, converter, _Json_wrap(incomingValue));
      $elm$core$Result$isOk(result) || _Debug_crash(4, name, result.a);
      var value = result.a;
      for (var temp = subs; temp.b; temp = temp.b) {
        sendToApp(temp.a(value));
      }
    }
    return { send };
  }
  var _VirtualDom_everTranslated = false;
  var _VirtualDom_divertHrefToApp;
  var _VirtualDom_doc = typeof document !== "undefined" ? document : {};
  function _VirtualDom_appendChild(parent, child) {
    parent.appendChild(child);
  }
  function _VirtualDom_insertBefore(parent, child, reference) {
    if (!(child.parentNode === parent && child.nextSibling === reference)) {
      parent.insertBefore(child, reference);
    }
  }
  function _VirtualDom_insertAfter(parent, child, reference) {
    if (!(child.parentNode === parent && child.previousSibling === reference)) {
      parent.insertBefore(child, reference === null ? parent.firstChild : reference.nextSibling);
    }
  }
  function _VirtualDom_moveBefore_(parent, child, reference) {
    if (!(child.parentNode === parent && child.nextSibling === reference)) {
      parent.moveBefore(child, reference);
    }
  }
  function _VirtualDom_moveAfter_(parent, child, reference) {
    if (!(child.parentNode === parent && child.previousSibling === reference)) {
      parent.moveBefore(child, reference === null ? parent.firstChild : reference.nextSibling);
    }
  }
  var _VirtualDom_supports_moveBefore = typeof Element !== "undefined" && typeof Element.prototype.moveBefore === "function";
  var _VirtualDom_moveBefore = _VirtualDom_supports_moveBefore ? _VirtualDom_moveBefore_ : _VirtualDom_insertBefore;
  var _VirtualDom_moveAfter = _VirtualDom_supports_moveBefore ? _VirtualDom_moveAfter_ : _VirtualDom_insertAfter;
  function _VirtualDom_remove(domNode) {
    var parentNode = domNode.parentNode;
    if (parentNode) {
      parentNode.removeChild(domNode);
    }
  }
  function _VirtualDom_createTNode(domNode) {
    return {
      r: domNode,
      s: /* @__PURE__ */ Object.create(null)
    };
  }
  var _VirtualDom_init = F4(function(virtualNode, flagDecoder, debugMetadata, args) {
    var node = args && args["node"] ? args["node"] : _Debug_crash(0);
    node.parentNode.replaceChild(
      _VirtualDom_render(virtualNode, function() {
      }, _VirtualDom_createTNode(void 0)),
      node
    );
    return {};
  });
  function _VirtualDom_text(string) {
    return {
      $: 0,
      a: string
    };
  }
  var _VirtualDom_nodeNS = F2(function(namespace, tag) {
    return F2(function(factList, kidList) {
      for (var kids = []; kidList.b; kidList = kidList.b) {
        kids.push(kidList.a);
      }
      return {
        $: 1,
        c: tag,
        d: _VirtualDom_organizeFacts(factList),
        e: kids,
        f: namespace,
        // Unused, only exists for backwards compatibility with:
        // https://github.com/elm-explorations/test/blob/9669a27d84fc29175364c7a60d5d700771a2801e/src/Test/Html/Internal/ElmHtml/InternalTypes.elm#L279
        // https://github.com/dillonkearns/elm-pages/blob/fa1d0347016e20917b412de5c3657c2e6e095087/src/Test/Html/Internal/ElmHtml/InternalTypes.elm#L281
        b: 0
      };
    });
  });
  var _VirtualDom_node = _VirtualDom_nodeNS(void 0);
  var _VirtualDom_keyedNodeNS = F2(function(namespace, tag) {
    return F2(function(factList, kidList) {
      for (var kids = [], kidsMap = /* @__PURE__ */ Object.create(null); kidList.b; kidList = kidList.b) {
        var kid = kidList.a;
        var key = kid.a;
        while (key in kidsMap) {
          key += _VirtualDom_POSTFIX;
          kid = _Utils_Tuple2(key, kid.b);
        }
        kids.push(kid);
        kidsMap[key] = kid.b;
      }
      return {
        $: 2,
        c: tag,
        d: _VirtualDom_organizeFacts(factList),
        // e holds the order and length of the kids.
        e: kids,
        // t is a dict from key to node.
        // Note when iterating JavaScript objects, numeric-looking keys come first.
        // So we need both e and t.
        // Another reason is backwards compatibility with:
        // https://github.com/elm-explorations/test/blob/d5eb84809de0f8bbf50303efd26889092c800609/src/Elm/Kernel/HtmlAsJson.js#L37
        // https://github.com/dillonkearns/elm-pages/blob/fa1d0347016e20917b412de5c3657c2e6e095087/generator/src/build.js#L675
        t: kidsMap,
        f: namespace,
        b: 0
        // See _VirtualDom_nodeNS.
      };
    });
  });
  var _VirtualDom_keyedNode = _VirtualDom_keyedNodeNS(void 0);
  var _VirtualDom_map = F2(function(tagger, node) {
    return {
      $: 4,
      j: tagger,
      k: node,
      b: 0
      // See _VirtualDom_nodeNS.
    };
  });
  function _VirtualDom_thunk(refs, thunk) {
    return {
      $: 5,
      l: refs,
      m: thunk,
      k: void 0
    };
  }
  var _VirtualDom_lazy = F2(function(func, a) {
    return _VirtualDom_thunk([func, a], function() {
      return func(a);
    });
  });
  var _VirtualDom_lazy2 = F3(function(func, a, b) {
    return _VirtualDom_thunk([func, a, b], function() {
      return A2(func, a, b);
    });
  });
  var _VirtualDom_lazy3 = F4(function(func, a, b, c) {
    return _VirtualDom_thunk([func, a, b, c], function() {
      return A3(func, a, b, c);
    });
  });
  var _VirtualDom_lazy4 = F5(function(func, a, b, c, d) {
    return _VirtualDom_thunk([func, a, b, c, d], function() {
      return A4(func, a, b, c, d);
    });
  });
  var _VirtualDom_lazy5 = F6(function(func, a, b, c, d, e) {
    return _VirtualDom_thunk([func, a, b, c, d, e], function() {
      return A5(func, a, b, c, d, e);
    });
  });
  var _VirtualDom_lazy6 = F7(function(func, a, b, c, d, e, f) {
    return _VirtualDom_thunk([func, a, b, c, d, e, f], function() {
      return A6(func, a, b, c, d, e, f);
    });
  });
  var _VirtualDom_lazy7 = F8(function(func, a, b, c, d, e, f, g) {
    return _VirtualDom_thunk([func, a, b, c, d, e, f, g], function() {
      return A7(func, a, b, c, d, e, f, g);
    });
  });
  var _VirtualDom_lazy8 = F9(function(func, a, b, c, d, e, f, g, h) {
    return _VirtualDom_thunk([func, a, b, c, d, e, f, g, h], function() {
      return A8(func, a, b, c, d, e, f, g, h);
    });
  });
  var _VirtualDom_on = F2(function(key, handler) {
    return {
      $: "a0",
      n: key,
      o: handler
    };
  });
  var _VirtualDom_style = F2(function(key, value) {
    return {
      $: "a1",
      n: key,
      o: value
    };
  });
  var _VirtualDom_property = F2(function(key, value) {
    return {
      $: "a2",
      n: key,
      o: value
    };
  });
  var _VirtualDom_attribute = F2(function(key, value) {
    return {
      $: "a3",
      n: key,
      o: value
    };
  });
  var _VirtualDom_attributeNS = F3(function(namespace, key, value) {
    return {
      $: "a4",
      n: key,
      o: { f: namespace, o: value }
    };
  });
  var _VirtualDom_RE_script = /^script$/i;
  var _VirtualDom_RE_on_formAction = /^(on|formAction$)/i;
  var _VirtualDom_RE_js = /^\s*j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:/i;
  var _VirtualDom_RE_js_html = /^\s*(j\s*a\s*v\s*a\s*s\s*c\s*r\s*i\s*p\s*t\s*:|d\s*a\s*t\s*a\s*:\s*t\s*e\s*x\s*t\s*\/\s*h\s*t\s*m\s*l\s*(,|;))/i;
  function _VirtualDom_noScript(tag) {
    return _VirtualDom_RE_script.test(tag) ? "p" : tag;
  }
  function _VirtualDom_noOnOrFormAction(key) {
    return _VirtualDom_RE_on_formAction.test(key) ? "data-" + key : key;
  }
  function _VirtualDom_noJavaScriptUri(value) {
    return _VirtualDom_RE_js.test(value) ? (
      /**_UNUSED/''//*/
      /**/
      'javascript:alert("This is an XSS vector. Please use ports or web components instead.")'
    ) : value;
  }
  function _VirtualDom_noJavaScriptOrHtmlUri(value) {
    return _VirtualDom_RE_js_html.test(value) ? (
      /**_UNUSED/''//*/
      /**/
      'javascript:alert("This is an XSS vector. Please use ports or web components instead.")'
    ) : value;
  }
  var _VirtualDom_mapAttribute = F2(function(func, attr) {
    return attr.$ === "a0" ? A2(_VirtualDom_on, attr.n, _VirtualDom_mapHandler(func, attr.o)) : attr;
  });
  function _VirtualDom_mapHandler(func, handler) {
    var tag = $elm$virtual_dom$VirtualDom$toHandlerInt(handler);
    return {
      $: handler.$,
      a: !tag ? A2($elm$json$Json$Decode$map, func, handler.a) : A3(
        $elm$json$Json$Decode$map2,
        tag < 3 ? _VirtualDom_mapEventTuple : _VirtualDom_mapEventRecord,
        $elm$json$Json$Decode$succeed(func),
        handler.a
      )
    };
  }
  var _VirtualDom_mapEventTuple = F2(function(func, tuple) {
    return _Utils_Tuple2(func(tuple.a), tuple.b);
  });
  var _VirtualDom_mapEventRecord = F2(function(func, record) {
    return {
      message: func(record.message),
      stopPropagation: record.stopPropagation,
      preventDefault: record.preventDefault
    };
  });
  var _VirtualDom_elmExplorationsTestBackwardsCompatibility = typeof _Test_runThunk === "function";
  function _VirtualDom_organizeFacts(factList) {
    var facts = {};
    facts[_VirtualDom_markerProperty] = true;
    for (; factList.b; factList = factList.b) {
      var entry = factList.a;
      var tag = entry.$;
      var key = entry.n;
      var value = entry.o;
      if (tag === "a2") {
        key === "className" ? _VirtualDom_addClass(facts, key, _Json_unwrap(value)) : facts[key] = _Json_unwrap(value);
        continue;
      }
      var subFacts = facts[tag] || (facts[tag] = {});
      tag === "a3" && key === "class" ? _VirtualDom_elmExplorationsTestBackwardsCompatibility ? _VirtualDom_addClass(facts, "className", value) : _VirtualDom_addClass(subFacts, key, value) : subFacts[key] = value;
    }
    return facts;
  }
  function _VirtualDom_addClass(object, key, newClass) {
    var classes = object[key];
    object[key] = classes ? classes + " " + newClass : newClass;
  }
  function _VirtualDom_render(vNode, eventNode, tNode) {
    var tag = vNode.$;
    if (tag === 5) {
      return _VirtualDom_render(vNode.k || (vNode.k = vNode.m()), eventNode, tNode);
    }
    if (tag === 4) {
      return _VirtualDom_render(vNode.k, function(msg, isSync) {
        return eventNode(vNode.j(msg), isSync);
      }, tNode);
    }
    if (tag === 0) {
      var domNode = _VirtualDom_doc.createTextNode(vNode.a);
      tNode.r = domNode;
      return domNode;
    }
    if (tag === 3) {
      var domNode = vNode.h(vNode.g);
      _VirtualDom_applyFacts(domNode, eventNode, {}, vNode.d);
      tNode.r = domNode;
      return domNode;
    }
    var domNode = vNode.f ? _VirtualDom_doc.createElementNS(vNode.f, vNode.c) : _VirtualDom_doc.createElement(vNode.c);
    if (_VirtualDom_divertHrefToApp && vNode.c == "a") {
      domNode.addEventListener("click", _VirtualDom_divertHrefToApp(domNode));
    }
    _VirtualDom_applyFacts(domNode, eventNode, {}, vNode.d);
    if (tag === 1) {
      for (var kids = vNode.e, i = 0; i < kids.length; i++) {
        var childTNode = _VirtualDom_createTNode(void 0);
        var childDomNode = _VirtualDom_render(kids[i], eventNode, childTNode);
        tNode.s[i] = childTNode;
        _VirtualDom_appendChild(domNode, childDomNode);
      }
    } else {
      for (var kids = vNode.e, i = 0; i < kids.length; i++) {
        var kid = kids[i];
        var childTNode = _VirtualDom_createTNode(void 0);
        var childDomNode = _VirtualDom_render(kid.b, eventNode, childTNode);
        tNode.s[kid.a] = childTNode;
        _VirtualDom_appendChild(domNode, childDomNode);
      }
    }
    tNode.r = domNode;
    return domNode;
  }
  function _VirtualDom_renderTranslated(vNode, eventNode, tNode) {
    var tag = vNode.$;
    if (tag === 5) {
      return _VirtualDom_renderTranslated(vNode.k, eventNode, tNode);
    }
    if (tag === 4) {
      return _VirtualDom_renderTranslated(vNode.k, function(msg, isSync) {
        return eventNode(vNode.j(msg), isSync);
      }, tNode);
    }
    if (tag === 0) {
      var newNode = _VirtualDom_doc.createTextNode(vNode.a);
      tNode.r = newNode;
      return newNode;
    }
    return tNode.r;
  }
  function _VirtualDom_applyFacts(domNode, eventNode, prevFacts, facts) {
    if (prevFacts.a1 !== void 0) {
      _VirtualDom_removeStyles(domNode, prevFacts.a1, facts.a1 || {});
    }
    _VirtualDom_removeProps(domNode, prevFacts, facts);
    if (prevFacts.a3 !== void 0) {
      _VirtualDom_removeAttrs(domNode, prevFacts.a3, facts.a3 || {});
    }
    if (prevFacts.a4 !== void 0) {
      _VirtualDom_removeAttrsNS(domNode, prevFacts.a4, facts.a4 || {});
    }
    if (facts.a1 !== void 0) {
      _VirtualDom_applyStyles(domNode, prevFacts.a1 || {}, facts.a1);
    }
    if (facts.a3 !== void 0) {
      _VirtualDom_applyAttrs(domNode, prevFacts.a3 || {}, facts.a3);
    }
    if (facts.a4 !== void 0) {
      _VirtualDom_applyAttrsNS(domNode, prevFacts.a4 || {}, facts.a4);
    }
    _VirtualDom_applyProps(domNode, facts);
    if (facts.a0 !== void 0 || prevFacts.a0 !== void 0) {
      _VirtualDom_applyEvents(domNode, eventNode, facts.a0 || {});
    }
  }
  function _VirtualDom_applyStyles(domNode, prevStyles, styles) {
    for (var key in styles) {
      var value = styles[key];
      if (value !== prevStyles[key]) {
        if (key.charCodeAt(0) === 45) {
          domNode.style.setProperty(key, value);
        } else {
          domNode.style[key] = value;
        }
      }
    }
  }
  function _VirtualDom_removeStyles(domNode, prevStyles, styles) {
    for (var key in prevStyles) {
      if (!(key in styles)) {
        if (key.charCodeAt(0) === 45) {
          domNode.style.removeProperty(key);
        } else {
          domNode.style[key] = "";
        }
      }
    }
  }
  function _VirtualDom_applyProps(domNode, props) {
    for (var key in props) {
      if (key === "a0" || key === "a1" || key === "a3" || key === "a4" || key === _VirtualDom_markerProperty) {
        continue;
      }
      var value = props[key];
      if (value !== domNode[key]) {
        domNode[key] = value;
      }
    }
  }
  function _VirtualDom_removeProps(domNode, prevProps, props) {
    for (var key in prevProps) {
      if (key === "a0" || key === "a1" || key === "a3" || key === "a4" || key === _VirtualDom_markerProperty) {
        continue;
      }
      if (!(key in props)) {
        var value = prevProps[key];
        switch (typeof value) {
          // Most string properties default to the empty string.
          case "string":
            domNode[key] = "";
            break;
          // Most boolean properties default to false.
          case "boolean":
            domNode[key] = false;
            break;
        }
        delete domNode[key];
      }
    }
  }
  function _VirtualDom_applyAttrs(domNode, prevAttrs, attrs) {
    for (var key in attrs) {
      var value = attrs[key];
      if (value !== prevAttrs[key]) {
        domNode.setAttribute(key, value);
      }
    }
  }
  function _VirtualDom_removeAttrs(domNode, prevAttrs, attrs) {
    for (var key in prevAttrs) {
      if (!(key in attrs)) {
        domNode.removeAttribute(key);
      }
    }
  }
  function _VirtualDom_applyAttrsNS(domNode, prevNsAttrs, nsAttrs) {
    for (var key in nsAttrs) {
      var pair = nsAttrs[key];
      var namespace = pair.f;
      var value = pair.o;
      var previous = prevNsAttrs[key];
      if (!previous) {
        domNode.setAttributeNS(namespace, key, value);
      } else if (previous.f !== namespace) {
        domNode.removeAttributeNS(previous.f, key);
        domNode.setAttributeNS(namespace, key, value);
      } else if (previous.o !== value) {
        domNode.setAttributeNS(namespace, key, value);
      }
    }
  }
  function _VirtualDom_removeAttrsNS(domNode, prevNsAttrs, nsAttrs) {
    for (var key in prevNsAttrs) {
      if (!(key in nsAttrs)) {
        domNode.removeAttributeNS(prevNsAttrs[key].f, key);
      }
    }
  }
  function _VirtualDom_applyEvents(domNode, eventNode, events) {
    var allCallbacks = domNode.elmFs || (domNode.elmFs = {});
    for (var key in events) {
      var newHandler = events[key];
      var oldCallback = allCallbacks[key];
      if (!newHandler) {
        domNode.removeEventListener(key, oldCallback);
        delete allCallbacks[key];
        continue;
      }
      if (oldCallback) {
        var oldHandler = oldCallback.p;
        if (oldHandler.$ === newHandler.$) {
          oldCallback.p = newHandler;
          oldCallback.q = eventNode;
          continue;
        }
        domNode.removeEventListener(key, oldCallback);
      }
      oldCallback = _VirtualDom_makeCallback(eventNode, newHandler);
      domNode.addEventListener(
        key,
        oldCallback,
        _VirtualDom_passiveSupported && { passive: $elm$virtual_dom$VirtualDom$toHandlerInt(newHandler) < 2 }
      );
      allCallbacks[key] = oldCallback;
    }
    for (key in allCallbacks) {
      if (!(key in events)) {
        domNode.removeEventListener(key, allCallbacks[key]);
        delete allCallbacks[key];
      }
    }
  }
  function _VirtualDom_lazyUpdateEvents(domNode, eventNode) {
    var allCallbacks = domNode.elmFs;
    if (allCallbacks) {
      for (var key in allCallbacks) {
        var oldCallback = allCallbacks[key];
        oldCallback.q = eventNode;
      }
    }
  }
  var _VirtualDom_passiveSupported;
  try {
    window.addEventListener("t", null, Object.defineProperty({}, "passive", {
      get: function() {
        _VirtualDom_passiveSupported = true;
      }
    }));
  } catch (e) {
  }
  function _VirtualDom_makeCallback(initialEventNode, initialHandler) {
    function callback(event) {
      var handler = callback.p;
      var eventNode = callback.q;
      var result = _Json_runHelp(handler.a, event);
      if (!$elm$core$Result$isOk(result)) {
        return;
      }
      var tag = $elm$virtual_dom$VirtualDom$toHandlerInt(handler);
      var value = result.a;
      var message = !tag ? value : tag < 3 ? value.a : value.message;
      var stopPropagation = tag == 1 ? value.b : tag == 3 && value.stopPropagation;
      var currentEventNode = (stopPropagation && event.stopPropagation(), (tag == 2 ? value.b : tag == 3 && value.preventDefault) && event.preventDefault(), eventNode);
      currentEventNode(message, stopPropagation);
    }
    callback.p = initialHandler;
    callback.q = initialEventNode;
    return callback;
  }
  function _VirtualDom_diff(_x, y) {
    return y;
  }
  function _VirtualDom_diffHelp(x, y, eventNode, tNode) {
    if (x === y) {
      return {
        r: _VirtualDom_quickVisit(x, y, eventNode, tNode),
        u: false,
        v: false
      };
    }
    while (x.$ === 4) {
      x = x.k;
    }
    if (y.$ === 4) {
      return _VirtualDom_diffHelp(x, y.k, function(msg, isSync) {
        return eventNode(y.j(msg), isSync);
      }, tNode);
    }
    if (x.$ === 5) {
      if (y.$ === 5) {
        var xRefs = x.l;
        var yRefs = y.l;
        var i = xRefs.length;
        var same = i === yRefs.length;
        while (same && i--) {
          same = xRefs[i] === yRefs[i];
        }
        if (same) {
          y.k = x.k;
          return {
            r: _VirtualDom_quickVisit(x, y, eventNode, tNode),
            u: false,
            v: false
          };
        }
        y.k = y.m();
        return _VirtualDom_diffHelp(x.k, y.k, eventNode, tNode);
      } else {
        return _VirtualDom_diffHelp(x.k, y, eventNode, tNode);
      }
    }
    if (y.$ === 5) {
      return _VirtualDom_diffHelp(x, y.k || (y.k = y.m()), eventNode, tNode);
    }
    var domNode = tNode.r;
    var xType = x.$;
    var yType = y.$;
    if (xType !== yType) {
      if (xType === 1 && yType === 2) {
        x = _VirtualDom_upkey(x, y, tNode);
        xType = 2;
      } else if (xType === 2 && yType === 1) {
        x = _VirtualDom_dekey(x, tNode);
        xType = 1;
      } else {
        return _VirtualDom_applyPatchRedraw(x, y, eventNode, tNode);
      }
    }
    switch (yType) {
      case 0:
        if (x.a !== y.a) {
          if (!domNode.parentNode || domNode.data !== x.a) {
            return {
              r: domNode,
              u: true,
              v: false
            };
          }
          if (_VirtualDom_everTranslated) {
            var newNode = _VirtualDom_doc.createTextNode(y.a);
            tNode.r = newNode;
            domNode.parentNode.replaceChild(newNode, domNode);
            domNode = newNode;
          } else {
            domNode.data = y.a;
          }
        }
        return {
          r: domNode,
          u: false,
          v: false
        };
      case 1:
        return _VirtualDom_diffNodes(domNode, x, y, eventNode, tNode, _VirtualDom_diffKids);
      case 2:
        return _VirtualDom_diffNodes(domNode, x, y, eventNode, tNode, _VirtualDom_diffKeyedKids);
      case 3:
        if (x.h !== y.h) {
          return _VirtualDom_applyPatchRedraw(x, y, eventNode, tNode);
        }
        _VirtualDom_applyFacts(domNode, eventNode, x.d, y.d);
        var patch = y.i(x.g, y.g);
        patch && patch(domNode);
        return {
          r: domNode,
          u: false,
          v: false
        };
    }
  }
  function _VirtualDom_quickVisit(x, y, eventNode, tNode) {
    switch (y.$) {
      case 4:
        return _VirtualDom_quickVisit(x.k, y.k, function(msg, isSync) {
          return eventNode(y.j(msg), isSync);
        }, tNode);
      case 5:
        return _VirtualDom_quickVisit(x.k, y.k, eventNode, tNode);
    }
    var domNode = tNode.r;
    switch (y.$) {
      case 0:
        return domNode;
      case 1:
        _VirtualDom_applyProps(domNode, y.d);
        _VirtualDom_lazyUpdateEvents(domNode, eventNode);
        for (var xKids = x.e, yKids = y.e, i = 0; i < yKids.length; i++) {
          _VirtualDom_quickVisit(xKids[i], yKids[i], eventNode, tNode.s[i]);
        }
        return domNode;
      case 2:
        _VirtualDom_applyProps(domNode, y.d);
        _VirtualDom_lazyUpdateEvents(domNode, eventNode);
        for (var xKids = x.e, yKids = y.e, i = 0; i < yKids.length; i++) {
          var xKid = xKids[i];
          var yKid = yKids[i];
          _VirtualDom_quickVisit(xKid.b, yKid.b, eventNode, tNode.s[yKid.a]);
        }
        return domNode;
      case 3:
        _VirtualDom_applyProps(domNode, y.d);
        _VirtualDom_lazyUpdateEvents(domNode, eventNode);
        return domNode;
    }
  }
  function _VirtualDom_diffNodes(domNode, x, y, eventNode, tNode, diffKids) {
    if (x.c !== y.c || x.f !== y.f) {
      return _VirtualDom_applyPatchRedraw(x, y, eventNode, tNode);
    }
    _VirtualDom_applyFacts(domNode, eventNode, x.d, y.d);
    var translated = diffKids(domNode, x, y, eventNode, tNode);
    if (translated) {
      _VirtualDom_everTranslated = true;
      for (var current = null, kids = y.e, i = kids.length - 1, j = domNode.childNodes.length - 1; i >= 0; i--) {
        var kid = kids[i];
        var vNode = y.$ === 2 ? kid.b : kid;
        var child = _VirtualDom_renderTranslated(vNode, eventNode, tNode.s[y.$ === 2 ? kid.a : i]);
        if (child.parentNode === domNode) {
          for (; j >= 0; j--) {
            current = domNode.childNodes[j];
            if (current === child) {
              j--;
              break;
            }
            if (current.nodeType === 3 || current.localName === "font") {
              domNode.removeChild(current);
            }
          }
        } else {
          _VirtualDom_insertBefore(domNode, child, current);
          current = child;
        }
      }
      for (; j >= 0; j--) {
        current = domNode.childNodes[j];
        if (current.nodeType === 3 || current.localName === "font") {
          domNode.removeChild(current);
        }
      }
    }
    return {
      r: domNode,
      u: false,
      v: false
    };
  }
  function _VirtualDom_diffKids(parentDomNode, xParent, yParent, eventNode, tNode) {
    var xKids = xParent.e;
    var yKids = yParent.e;
    var xLen = xKids.length;
    var yLen = yKids.length;
    var translated = false;
    var previousSibling = null;
    for (var minLen = xLen < yLen ? xLen : yLen, i = 0; i < minLen; i++) {
      var diffReturn = _VirtualDom_diffHelp(xKids[i], yKids[i], eventNode, tNode.s[i]);
      var domNode = diffReturn.r;
      if (diffReturn.u) {
        translated = true;
      }
      if (diffReturn.v) {
        _VirtualDom_insertAfter(parentDomNode, domNode, previousSibling);
        previousSibling = domNode;
      } else if (domNode.parentNode === parentDomNode) {
        previousSibling = domNode;
      }
    }
    if (xLen > yLen) {
      for (var i = yLen; i < xLen; i++) {
        _VirtualDom_remove(tNode.s[i].r);
        delete tNode.s[i];
      }
    } else if (xLen < yLen) {
      for (var i = xLen; i < yLen; i++) {
        var y = yKids[i];
        var childTNode = _VirtualDom_createTNode(void 0);
        var domNode = _VirtualDom_render(y, eventNode, childTNode);
        tNode.s[i] = childTNode;
        _VirtualDom_appendChild(parentDomNode, domNode);
      }
    }
    return translated;
  }
  function _VirtualDom_diffKeyedKids(parentDomNode, xParent, yParent, eventNode, tNode) {
    var xKids = xParent.e;
    var yKids = yParent.e;
    var xKidsMap = xParent.t;
    var yKidsMap = yParent.t;
    var xIndexLower = 0;
    var yIndexLower = 0;
    var xIndexUpper = xKids.length - 1;
    var yIndexUpper = yKids.length - 1;
    var domNodeLower = null;
    var domNodeUpper = null;
    var translated = false;
    var handleDiffReturn = function(diffReturn2, upper) {
      var domNode2 = diffReturn2.r;
      if (diffReturn2.u) {
        translated = true;
      }
      if (diffReturn2.v) {
        if (upper) {
          _VirtualDom_insertBefore(parentDomNode, domNode2, domNodeUpper);
          domNodeUpper = domNode2;
        } else {
          _VirtualDom_insertAfter(parentDomNode, domNode2, domNodeLower);
          domNodeLower = domNode2;
        }
      } else if (domNode2.parentNode === parentDomNode) {
        if (upper) {
          domNodeUpper = domNode2;
        } else {
          domNodeLower = domNode2;
        }
      }
    };
    while (true) {
      while (xIndexLower <= xIndexUpper && yIndexLower <= yIndexUpper) {
        var xKid = xKids[xIndexLower];
        var yKid = yKids[yIndexLower];
        var xKey = xKid.a;
        var yKey = yKid.a;
        var x = xKid.b;
        var y = yKid.b;
        if (xKey === yKey) {
          var diffReturn = _VirtualDom_diffHelp(x, y, eventNode, tNode.s[yKey]);
          xIndexLower++;
          yIndexLower++;
          handleDiffReturn(diffReturn, false);
          continue;
        }
        var xMoved = false;
        if (xKey in yKidsMap) {
          xMoved = true;
        } else {
          _VirtualDom_remove(tNode.s[xKey].r);
          delete tNode.s[xKey];
          xIndexLower++;
        }
        if (yKey in xKidsMap) {
          if (xMoved) {
            break;
          }
        } else {
          var childTNode = _VirtualDom_createTNode(void 0);
          var domNode = _VirtualDom_render(y, eventNode, childTNode);
          tNode.s[yKey] = childTNode;
          _VirtualDom_insertAfter(parentDomNode, domNode, domNodeLower);
          yIndexLower++;
          domNodeLower = domNode;
        }
      }
      while (xIndexUpper > xIndexLower && yIndexUpper > yIndexLower) {
        var xKid = xKids[xIndexUpper];
        var yKid = yKids[yIndexUpper];
        var xKey = xKid.a;
        var yKey = yKid.a;
        var x = xKid.b;
        var y = yKid.b;
        if (xKey === yKey) {
          var diffReturn = _VirtualDom_diffHelp(x, y, eventNode, tNode.s[yKey]);
          xIndexUpper--;
          yIndexUpper--;
          handleDiffReturn(diffReturn, true);
          continue;
        }
        var xMoved = false;
        if (xKey in yKidsMap) {
          xMoved = true;
        } else {
          _VirtualDom_remove(tNode.s[xKey].r);
          delete tNode.s[xKey];
          xIndexUpper--;
        }
        if (yKey in xKidsMap) {
          if (xMoved) {
            break;
          }
        } else {
          var childTNode = _VirtualDom_createTNode(void 0);
          var domNode = _VirtualDom_render(y, eventNode, childTNode);
          tNode.s[yKey] = childTNode;
          _VirtualDom_insertBefore(parentDomNode, domNode, domNodeUpper);
          yIndexUpper--;
          domNodeUpper = domNode;
        }
      }
      var swapped = false;
      if (xIndexLower < xIndexUpper && yIndexLower < yIndexUpper) {
        var xKidLower = xKids[xIndexLower];
        var yKidLower = yKids[yIndexLower];
        var xKidUpper = xKids[xIndexUpper];
        var yKidUpper = yKids[yIndexUpper];
        var xKeyLower = xKidLower.a;
        var yKeyLower = yKidLower.a;
        var xKeyUpper = xKidUpper.a;
        var yKeyUpper = yKidUpper.a;
        if (xKeyLower === yKeyUpper) {
          var diffReturn = _VirtualDom_diffHelp(xKidLower.b, yKidUpper.b, eventNode, tNode.s[yKeyUpper]);
          xIndexLower++;
          yIndexUpper--;
          _VirtualDom_moveBefore(parentDomNode, diffReturn.r, domNodeUpper);
          handleDiffReturn(diffReturn, true);
          swapped = true;
        }
        if (xKeyUpper === yKeyLower) {
          var diffReturn = _VirtualDom_diffHelp(xKidUpper.b, yKidLower.b, eventNode, tNode.s[yKeyLower]);
          yIndexLower++;
          xIndexUpper--;
          _VirtualDom_moveAfter(parentDomNode, diffReturn.r, domNodeLower);
          handleDiffReturn(diffReturn, false);
          swapped = true;
        }
      }
      if (!swapped) {
        break;
      }
    }
    for (; yIndexLower <= yIndexUpper; yIndexLower++) {
      var yKid = yKids[yIndexLower];
      var yKey = yKid.a;
      var y = yKid.b;
      if (yKey in xKidsMap) {
        var x = xKidsMap[yKey];
        var diffReturn = _VirtualDom_diffHelp(x, y, eventNode, tNode.s[yKey]);
        _VirtualDom_moveAfter(parentDomNode, diffReturn.r, domNodeLower);
        handleDiffReturn(diffReturn, false);
      } else {
        var childTNode = _VirtualDom_createTNode(void 0);
        var domNode = _VirtualDom_render(y, eventNode, childTNode);
        tNode.s[yKey] = childTNode;
        _VirtualDom_insertAfter(parentDomNode, domNode, domNodeLower);
        domNodeLower = domNode;
      }
    }
    for (; xIndexLower <= xIndexUpper; xIndexLower++) {
      var xKid = xKids[xIndexLower];
      var xKey = xKid.a;
      if (!(xKey in yKidsMap)) {
        _VirtualDom_remove(tNode.s[xKid.a].r);
        delete tNode.s[xKid.a];
      }
    }
    return translated;
  }
  var _VirtualDom_POSTFIX = "_elmW6BL";
  function _VirtualDom_applyPatches(rootDomNode, oldVirtualNode, newVirtualNode, eventNode) {
    var tNode = rootDomNode.elmTree;
    var diffReturn = _VirtualDom_diffHelp(oldVirtualNode, newVirtualNode, eventNode, tNode);
    var newDomNode = diffReturn.r;
    if (newDomNode !== rootDomNode) {
      delete rootDomNode.elmTree;
      newDomNode.elmTree = tNode;
    }
    return newDomNode;
  }
  function _VirtualDom_applyPatchRedraw(x, y, eventNode, tNode) {
    var domNode = tNode.r;
    var parentNode = domNode.parentNode;
    var isTextNode = domNode.nodeType === 3;
    var newNode = _VirtualDom_render(y, eventNode, tNode);
    if (parentNode) {
      parentNode.replaceChild(newNode, domNode);
      return {
        r: newNode,
        u: isTextNode && domNode.data !== x.a,
        v: false
      };
    } else {
      return {
        r: newNode,
        u: isTextNode,
        v: true
      };
    }
  }
  var _VirtualDom_camelCaseBoolProperties = {
    novalidate: "noValidate",
    readonly: "readOnly",
    ismap: "isMap"
  };
  var _VirtualDom_markerProperty = "data-elm";
  function _VirtualDom_virtualize(node) {
    if (node === _VirtualDom_doc) {
      node = _VirtualDom_doc.body;
    }
    if (node.elmTree) {
      console.error("node.elmTree already exists:", node.elmTree, node);
      throw new Error("node.elmTree already exists!");
    }
    var tNode = _VirtualDom_createTNode(node);
    var vNode = _VirtualDom_virtualizeHelp(node, tNode) || _VirtualDom_text("");
    node.elmTree = tNode;
    return vNode;
  }
  function _VirtualDom_virtualizeHelp(node, tNode) {
    if (node.nodeType === 3) {
      return _VirtualDom_text(node.textContent);
    }
    if (node.nodeType !== 1) {
      return void 0;
    }
    var tag = node.localName;
    var attrList = _List_Nil;
    var attrs = node.attributes;
    for (var i = attrs.length; i--; ) {
      var attr = attrs[i];
      var name = attr.name;
      var value = attr.value;
      if (name === "style") {
        var parts = value.split(";");
        for (var j = parts.length; j--; ) {
          var part = parts[j];
          var index = part.indexOf(":");
          if (index !== -1) {
            var cssKey = part.slice(0, index).trim();
            var cssValue = part.slice(index + 1).trim();
            attrList = _List_Cons(A2(_VirtualDom_style, cssKey, cssValue), attrList);
          }
        }
        continue;
      }
      var namespaceURI = attr.namespaceURI;
      var propertyName = _VirtualDom_camelCaseBoolProperties[name] || name;
      var propertyValue = node[propertyName];
      attrList = _List_Cons(
        // `Html.Attributes.value` sets the `.value` property to a string, because thats the
        // only way to set the value of an input element. The `.value` property has no corresponding
        // attribute; the `value` attribute maps to the `.defaultValue` property. But when serializing,
        // the most likely way to do it is to serialize the `.value` property to the `value` attribute.
        name === "value" ? A2(_VirtualDom_property, name, value) : (
          // Try to guess if the attribute comes from one of the functions
          // implemented using `boolProperty` in `Html.Attributes`.
          // See `Html.Attributes.spellcheck` for that exception.
          typeof propertyValue === "boolean" && name !== "spellcheck" ? A2(_VirtualDom_property, propertyName, propertyValue) : (
            // Otherwise, guess that it is an attribute. The user might have used `Html.Attributes.property`,
            // but theres no way for us to know that.
            namespaceURI ? A3(_VirtualDom_attributeNS, namespaceURI, name, value) : A2(_VirtualDom_attribute, name, value)
          )
        ),
        attrList
      );
    }
    var namespace = node.namespaceURI === "http://www.w3.org/1999/xhtml" ? void 0 : node.namespaceURI;
    var kidList = [];
    if (node.localName === "textarea") {
      attrList = _List_Cons(
        A2(_VirtualDom_property, "value", node.value),
        attrList
      );
    } else {
      for (var kids = node.childNodes, len = kids.length, i = 0; i < len; i++) {
        var kid = kids[i];
        if (kid.nodeType === 1 && !kid.hasAttribute(_VirtualDom_markerProperty)) {
          continue;
        }
        var childTNode = _VirtualDom_createTNode(kid);
        var kidNode = _VirtualDom_virtualizeHelp(kid, childTNode);
        if (kidNode) {
          var length = kidList.push(kidNode);
          tNode.s[length - 1] = childTNode;
        }
      }
      if (_VirtualDom_divertHrefToApp && node.localName === "a") {
        node.addEventListener("click", _VirtualDom_divertHrefToApp(node));
      }
    }
    return {
      $: 1,
      c: tag,
      d: _VirtualDom_organizeFacts(attrList),
      e: kidList,
      f: namespace,
      b: 0
    };
  }
  function _VirtualDom_upkey(node, keyedNode, tNode) {
    var kids = node.e;
    var keyedKids = keyedNode.e;
    var len = kids.length;
    var keyedLen = keyedKids.length;
    var newKeyedKids = new Array(len);
    var newKidsMap = /* @__PURE__ */ Object.create(null);
    var newChildren = /* @__PURE__ */ Object.create(null);
    for (var i = 0; i < len; i++) {
      var kid = kids[i];
      var key;
      if (i < keyedLen) {
        key = keyedKids[i].a;
      } else {
        key = i + _VirtualDom_POSTFIX;
        while (key in newKidsMap) {
          key += _VirtualDom_POSTFIX;
        }
      }
      newKeyedKids[i] = _Utils_Tuple2(key, kid);
      newKidsMap[key] = kid;
      newChildren[key] = tNode.s[i];
    }
    tNode.s = newChildren;
    return {
      $: 2,
      c: node.c,
      d: node.d,
      e: newKeyedKids,
      t: newKidsMap,
      f: node.f,
      b: node.b
    };
  }
  function _VirtualDom_dekey(keyedNode, tNode) {
    var keyedKids = keyedNode.e;
    var len = keyedKids.length;
    var kids = new Array(len);
    var newChildren = /* @__PURE__ */ Object.create(null);
    for (var i = 0; i < len; i++) {
      var keyedKid = keyedKids[i];
      kids[i] = keyedKid.b;
      newChildren[i] = tNode.s[keyedKid.a];
    }
    tNode.s = newChildren;
    return {
      $: 1,
      c: keyedNode.c,
      d: keyedNode.d,
      e: kids,
      f: keyedNode.f,
      b: keyedNode.b
    };
  }
  var _Bitwise_and = F2(function(a, b) {
    return a & b;
  });
  var _Bitwise_or = F2(function(a, b) {
    return a | b;
  });
  var _Bitwise_xor = F2(function(a, b) {
    return a ^ b;
  });
  var _Bitwise_shiftLeftBy = F2(function(offset, a) {
    return a << offset;
  });
  var _Bitwise_shiftRightBy = F2(function(offset, a) {
    return a >> offset;
  });
  var _Bitwise_shiftRightZfBy = F2(function(offset, a) {
    return a >>> offset;
  });
  function _Debugger_unsafeCoerce(value) {
    return value;
  }
  var _Debugger_element = F4(function(impl, flagDecoder, debugMetadata, args) {
    return _Platform_initialize(
      flagDecoder,
      args,
      A3($elm$browser$Debugger$Main$wrapInit, _Json_wrap(debugMetadata), _Debugger_popout(), impl.init),
      $elm$browser$Debugger$Main$wrapUpdate(impl.update),
      $elm$browser$Debugger$Main$wrapSubs(impl.subscriptions),
      function(sendToApp, initialModel) {
        var view = impl.view;
        var domNode = args && args["node"] ? args["node"] : _Debug_crash(0);
        var currNode = _VirtualDom_virtualize(domNode);
        var currBlocker = $elm$browser$Debugger$Main$toBlockerType(initialModel);
        var currPopout;
        var cornerNode = _VirtualDom_doc.createElement("div");
        domNode.parentNode.insertBefore(cornerNode, domNode.nextSibling);
        var cornerCurr = _VirtualDom_virtualize(cornerNode);
        initialModel.popout.a = sendToApp;
        return _Browser_makeAnimator(initialModel, function(model) {
          var nextNode = A2(_VirtualDom_map, $elm$browser$Debugger$Main$UserMsg, view($elm$browser$Debugger$Main$getUserModel(model)));
          var patches = _VirtualDom_diff(currNode, nextNode);
          domNode = _VirtualDom_applyPatches(domNode, currNode, patches, sendToApp);
          currNode = nextNode;
          var nextBlocker = $elm$browser$Debugger$Main$toBlockerType(model);
          _Debugger_updateBlocker(currBlocker, nextBlocker);
          currBlocker = nextBlocker;
          var cornerNext = $elm$browser$Debugger$Main$cornerView(model);
          var cornerPatches = _VirtualDom_diff(cornerCurr, cornerNext);
          cornerNode = _VirtualDom_applyPatches(cornerNode, cornerCurr, cornerPatches, sendToApp);
          cornerCurr = cornerNext;
          if (!model.popout.b) {
            currPopout = void 0;
            return;
          }
          _VirtualDom_doc = model.popout.b;
          currPopout || (currPopout = _VirtualDom_virtualize(model.popout.b.body));
          var nextPopout = $elm$browser$Debugger$Main$popoutView(model);
          var popoutPatches = _VirtualDom_diff(currPopout, nextPopout);
          _VirtualDom_applyPatches(model.popout.b.body, currPopout, popoutPatches, sendToApp);
          currPopout = nextPopout;
          _VirtualDom_doc = document;
        });
      }
    );
  });
  var _Debugger_document = F4(function(impl, flagDecoder, debugMetadata, args) {
    return _Platform_initialize(
      flagDecoder,
      args,
      A3($elm$browser$Debugger$Main$wrapInit, _Json_wrap(debugMetadata), _Debugger_popout(), impl.init),
      $elm$browser$Debugger$Main$wrapUpdate(impl.update),
      $elm$browser$Debugger$Main$wrapSubs(impl.subscriptions),
      function(sendToApp, initialModel) {
        var divertHrefToApp = impl.setup && impl.setup(function(x) {
          return sendToApp($elm$browser$Debugger$Main$UserMsg(x));
        });
        var view = impl.view;
        var title = _VirtualDom_doc.title;
        var bodyNode = _VirtualDom_doc.body;
        _VirtualDom_divertHrefToApp = divertHrefToApp;
        var currNode = _VirtualDom_virtualize(bodyNode);
        _VirtualDom_divertHrefToApp = 0;
        var currBlocker = $elm$browser$Debugger$Main$toBlockerType(initialModel);
        var currPopout;
        initialModel.popout.a = sendToApp;
        return _Browser_makeAnimator(initialModel, function(model) {
          _VirtualDom_divertHrefToApp = divertHrefToApp;
          var doc = view($elm$browser$Debugger$Main$getUserModel(model));
          var nextNode = _VirtualDom_node("body")(_List_Nil)(
            _Utils_ap(
              A2($elm$core$List$map, _VirtualDom_map($elm$browser$Debugger$Main$UserMsg), doc.body),
              _List_Cons($elm$browser$Debugger$Main$cornerView(model), _List_Nil)
            )
          );
          var patches = _VirtualDom_diff(currNode, nextNode);
          bodyNode = _VirtualDom_applyPatches(bodyNode, currNode, patches, sendToApp);
          currNode = nextNode;
          _VirtualDom_divertHrefToApp = 0;
          title !== doc.title && (_VirtualDom_doc.title = title = doc.title);
          var nextBlocker = $elm$browser$Debugger$Main$toBlockerType(model);
          _Debugger_updateBlocker(currBlocker, nextBlocker);
          currBlocker = nextBlocker;
          if (!model.popout.b) {
            currPopout = void 0;
            return;
          }
          _VirtualDom_doc = model.popout.b;
          currPopout || (currPopout = _VirtualDom_virtualize(model.popout.b.body));
          var nextPopout = $elm$browser$Debugger$Main$popoutView(model);
          var popoutPatches = _VirtualDom_diff(currPopout, nextPopout);
          _VirtualDom_applyPatches(model.popout.b.body, currPopout, popoutPatches, sendToApp);
          currPopout = nextPopout;
          _VirtualDom_doc = document;
        });
      }
    );
  });
  function _Debugger_popout() {
    return {
      b: void 0,
      a: void 0
    };
  }
  function _Debugger_isOpen(popout) {
    return !!popout.b;
  }
  function _Debugger_open(popout) {
    return _Scheduler_binding(function(callback) {
      _Debugger_openWindow(popout);
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  }
  function _Debugger_openWindow(popout) {
    var w = $elm$browser$Debugger$Main$initialWindowWidth, h = $elm$browser$Debugger$Main$initialWindowHeight, x = screen.width - w, y = screen.height - h;
    var debuggerWindow = window.open("", "", "width=" + w + ",height=" + h + ",left=" + x + ",top=" + y);
    var doc = debuggerWindow.document;
    doc.title = "Elm Debugger";
    doc.addEventListener("keydown", function(event) {
      event.metaKey && event.which === 82 && window.location.reload();
      event.key === "ArrowUp" && (popout.a($elm$browser$Debugger$Main$Up), event.preventDefault());
      event.key === "ArrowDown" && (popout.a($elm$browser$Debugger$Main$Down), event.preventDefault());
    });
    window.addEventListener("unload", close);
    debuggerWindow.addEventListener("unload", function() {
      popout.b = void 0;
      popout.a($elm$browser$Debugger$Main$NoOp);
      window.removeEventListener("unload", close);
    });
    function close() {
      popout.b = void 0;
      popout.a($elm$browser$Debugger$Main$NoOp);
      debuggerWindow.close();
    }
    popout.b = doc;
  }
  function _Debugger_scroll(popout) {
    return _Scheduler_binding(function(callback) {
      if (popout.b) {
        var msgs = popout.b.getElementById("elm-debugger-sidebar");
        if (msgs && msgs.scrollTop !== 0) {
          msgs.scrollTop = 0;
        }
      }
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  }
  var _Debugger_scrollTo = F2(function(id, popout) {
    return _Scheduler_binding(function(callback) {
      if (popout.b) {
        var msg = popout.b.getElementById(id);
        if (msg) {
          msg.scrollIntoView(false);
        }
      }
      callback(_Scheduler_succeed(_Utils_Tuple0));
    });
  });
  function _Debugger_upload(popout) {
    return _Scheduler_binding(function(callback) {
      var doc = popout.b || document;
      var element = doc.createElement("input");
      element.setAttribute("type", "file");
      element.setAttribute("accept", "text/json");
      element.style.display = "none";
      element.addEventListener("change", function(event) {
        var fileReader = new FileReader();
        fileReader.onload = function(e) {
          callback(_Scheduler_succeed(e.target.result));
        };
        fileReader.readAsText(event.target.files[0]);
        doc.body.removeChild(element);
      });
      doc.body.appendChild(element);
      element.click();
    });
  }
  var _Debugger_download = F2(function(historyLength, json) {
    return _Scheduler_binding(function(callback) {
      var fileName = "history-" + historyLength + ".txt";
      var jsonString = JSON.stringify(json);
      var mime = "text/plain;charset=utf-8";
      var done = _Scheduler_succeed(_Utils_Tuple0);
      if (navigator.msSaveBlob) {
        navigator.msSaveBlob(new Blob([jsonString], { type: mime }), fileName);
        return callback(done);
      }
      var element = document.createElement("a");
      element.setAttribute("href", "data:" + mime + "," + encodeURIComponent(jsonString));
      element.setAttribute("download", fileName);
      element.style.display = "none";
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
      callback(done);
    });
  });
  function _Debugger_messageToString(value) {
    if (typeof value === "boolean") {
      return value ? "True" : "False";
    }
    if (typeof value === "number") {
      return value + "";
    }
    if (typeof value === "string") {
      return '"' + _Debugger_addSlashes(value, false) + '"';
    }
    if (value instanceof String) {
      return "'" + _Debugger_addSlashes(value, true) + "'";
    }
    if (typeof value !== "object" || value === null || !("$" in value)) {
      return "\u2026";
    }
    if (typeof value.$ === "number") {
      return "\u2026";
    }
    var code = value.$.charCodeAt(0);
    if (code === 35 || /* a */
    97 <= code && code <= 122) {
      return "\u2026";
    }
    if (["Array_elm_builtin", "Set_elm_builtin", "RBNode_elm_builtin", "RBEmpty_elm_builtin"].indexOf(value.$) >= 0) {
      return "\u2026";
    }
    var keys = Object.keys(value);
    switch (keys.length) {
      case 1:
        return value.$;
      case 2:
        return value.$ + " " + _Debugger_messageToString(value.a);
      default:
        return value.$ + " \u2026 " + _Debugger_messageToString(value[keys[keys.length - 1]]);
    }
  }
  function _Debugger_init(value) {
    if (typeof value === "boolean") {
      return A2($elm$browser$Debugger$Expando$Constructor, $elm$core$Maybe$Just(value ? "True" : "False"), _List_Nil);
    }
    if (typeof value === "number") {
      return $elm$browser$Debugger$Expando$Primitive(value + "");
    }
    if (typeof value === "string") {
      return $elm$browser$Debugger$Expando$S('"' + _Debugger_addSlashes(value, false) + '"');
    }
    if (value instanceof String) {
      return $elm$browser$Debugger$Expando$S("'" + _Debugger_addSlashes(value, true) + "'");
    }
    if (typeof value === "object" && "$" in value) {
      var tag = value.$;
      if (tag === "::" || tag === "[]") {
        return A2($elm$browser$Debugger$Expando$Sequence, $elm$browser$Debugger$Expando$ListSeq, value);
      }
      if (tag === "Set_elm_builtin") {
        return A2($elm$browser$Debugger$Expando$Sequence, $elm$browser$Debugger$Expando$SetSeq, $elm$core$Set$toList(value));
      }
      if (tag === "RBNode_elm_builtin" || tag == "RBEmpty_elm_builtin") {
        return $elm$browser$Debugger$Expando$Dictionary($elm$core$Dict$toList(value));
      }
      if (tag === "Array_elm_builtin") {
        return A2($elm$browser$Debugger$Expando$Sequence, $elm$browser$Debugger$Expando$ArraySeq, $elm$core$Array$toList(value));
      }
      if (typeof tag === "number") {
        return $elm$browser$Debugger$Expando$Primitive("<internals>");
      }
      var char = tag.charCodeAt(0);
      if (
        /* a */
        97 <= char && char <= 122
      ) {
        return $elm$browser$Debugger$Expando$Primitive("<internals>");
      }
      var list = _List_Nil;
      for (var i in value) {
        if (i === "$") continue;
        list = _List_Cons(value[i], list);
      }
      return A2($elm$browser$Debugger$Expando$Constructor, char === 35 ? $elm$core$Maybe$Nothing : $elm$core$Maybe$Just(tag), $elm$core$List$reverse(list));
    }
    if (typeof value === "object") {
      var dict = $elm$core$Dict$empty;
      for (var i in value) {
        dict = A3($elm$core$Dict$insert, i, value[i], dict);
      }
      return $elm$browser$Debugger$Expando$Record(dict);
    }
    return $elm$browser$Debugger$Expando$Primitive("<internals>");
  }
  function _Debugger_addSlashes(str, isChar) {
    var s = str.replace(/\\/g, "\\\\").replace(/\n/g, "\\n").replace(/\t/g, "\\t").replace(/\r/g, "\\r").replace(/\v/g, "\\v").replace(/\0/g, "\\0");
    if (isChar) {
      return s.replace(/\'/g, "\\'");
    } else {
      return s.replace(/\"/g, '\\"');
    }
  }
  function _Debugger_toUnexpanded(value) {
    return value;
  }
  function _Debugger_updateBlocker(oldBlocker, newBlocker) {
    if (oldBlocker === newBlocker) return;
    var oldEvents = _Debugger_blockerToEvents(oldBlocker);
    var newEvents = _Debugger_blockerToEvents(newBlocker);
    for (var i = 0; i < oldEvents.length; i++) {
      document.removeEventListener(oldEvents[i], _Debugger_blocker, true);
    }
    for (var i = 0; i < newEvents.length; i++) {
      document.addEventListener(newEvents[i], _Debugger_blocker, true);
    }
  }
  function _Debugger_blocker(event) {
    if (event.type === "keydown" && event.metaKey && event.which === 82) {
      return;
    }
    var isScroll = event.type === "scroll" || event.type === "wheel";
    for (var node = event.target; node; node = node.parentNode) {
      if (isScroll ? node.id === "elm-debugger-details" : node.id === "elm-debugger-overlay") {
        return;
      }
    }
    event.stopPropagation();
    event.preventDefault();
  }
  function _Debugger_blockerToEvents(blocker) {
    return blocker === $elm$browser$Debugger$Overlay$BlockNone ? [] : blocker === $elm$browser$Debugger$Overlay$BlockMost ? _Debugger_mostEvents : _Debugger_allEvents;
  }
  var _Debugger_mostEvents = [
    "click",
    "dblclick",
    "mousemove",
    "mouseup",
    "mousedown",
    "mouseenter",
    "mouseleave",
    "touchstart",
    "touchend",
    "touchcancel",
    "touchmove",
    "pointerdown",
    "pointerup",
    "pointerover",
    "pointerout",
    "pointerenter",
    "pointerleave",
    "pointermove",
    "pointercancel",
    "dragstart",
    "drag",
    "dragend",
    "dragenter",
    "dragover",
    "dragleave",
    "drop",
    "keyup",
    "keydown",
    "keypress",
    "input",
    "change",
    "focus",
    "blur"
  ];
  var _Debugger_allEvents = _Debugger_mostEvents.concat("wheel", "scroll");
  console.info("Using elm-janitor/browser@e694a49 instead of elm/browser@1.0.2");
  var _Debugger_element;
  var _Browser_element = _Debugger_element || F4(function(impl, flagDecoder, debugMetadata, args) {
    return _Platform_initialize(
      flagDecoder,
      args,
      impl.init,
      impl.update,
      impl.subscriptions,
      function(sendToApp, initialModel) {
        var view = impl.view;
        var domNode = args && args["node"] ? args["node"] : _Debug_crash(0);
        var currNode = _VirtualDom_virtualize(domNode);
        return _Browser_makeAnimator(initialModel, function(model) {
          var nextNode = view(model);
          var patches = _VirtualDom_diff(currNode, nextNode);
          domNode = _VirtualDom_applyPatches(domNode, currNode, patches, sendToApp);
          currNode = nextNode;
        });
      }
    );
  });
  var _Debugger_document;
  var _Browser_document = _Debugger_document || F4(function(impl, flagDecoder, debugMetadata, args) {
    return _Platform_initialize(
      flagDecoder,
      args,
      impl.init,
      impl.update,
      impl.subscriptions,
      function(sendToApp, initialModel) {
        var divertHrefToApp = impl.setup && impl.setup(sendToApp);
        var view = impl.view;
        var title = _VirtualDom_doc.title;
        var bodyNode = _VirtualDom_doc.body;
        _VirtualDom_divertHrefToApp = divertHrefToApp;
        var currNode = _VirtualDom_virtualize(bodyNode);
        _VirtualDom_divertHrefToApp = 0;
        return _Browser_makeAnimator(initialModel, function(model) {
          _VirtualDom_divertHrefToApp = divertHrefToApp;
          var doc = view(model);
          var nextNode = _VirtualDom_node("body")(_List_Nil)(doc.body);
          var patches = _VirtualDom_diff(currNode, nextNode);
          bodyNode = _VirtualDom_applyPatches(bodyNode, currNode, patches, sendToApp);
          currNode = nextNode;
          _VirtualDom_divertHrefToApp = 0;
          title !== doc.title && (_VirtualDom_doc.title = title = doc.title);
        });
      }
    );
  });
  var _Browser_requestAnimationFrame_queue = {};
  var _Browser_inAnimationFrame = false;
  var _Browser_pendingAnimationFrame = false;
  var _Browser_requestAnimationFrame_id = 0;
  function _Browser_requestAnimationFrame(callback) {
    var id = _Browser_requestAnimationFrame_id;
    _Browser_requestAnimationFrame_id++;
    _Browser_requestAnimationFrame_queue[id] = callback;
    if (!_Browser_pendingAnimationFrame) {
      _Browser_pendingAnimationFrame = true;
      _Browser_requestAnimationFrame_raw(function() {
        _Browser_pendingAnimationFrame = false;
        _Browser_inAnimationFrame = true;
        var maxId = _Browser_requestAnimationFrame_id;
        for (var id2 in _Browser_requestAnimationFrame_queue) {
          if (id2 >= maxId) {
            break;
          }
          var callback2 = _Browser_requestAnimationFrame_queue[id2];
          delete _Browser_requestAnimationFrame_queue[id2];
          callback2();
        }
        _Browser_inAnimationFrame = false;
      });
    }
    return id;
  }
  var _Browser_requestAnimationFrame_raw = typeof requestAnimationFrame !== "undefined" ? requestAnimationFrame : function(callback) {
    return setTimeout(callback, 1e3 / 60);
  };
  function _Browser_makeAnimator(model, draw) {
    var drawing = false;
    var pendingFrame = false;
    var pendingSync = false;
    function drawHelp() {
      if (drawing) {
        pendingSync = true;
        return;
      }
      pendingFrame = false;
      pendingSync = false;
      drawing = true;
      draw(model);
      drawing = false;
      if (pendingSync) {
        drawHelp();
      }
    }
    function updateIfNeeded() {
      if (pendingFrame) {
        drawHelp();
      }
    }
    drawHelp();
    return function(nextModel, isSync) {
      model = nextModel;
      if (isSync || _Browser_inAnimationFrame) {
        drawHelp();
      } else if (!pendingFrame) {
        pendingFrame = true;
        _Browser_requestAnimationFrame(updateIfNeeded);
      }
    };
  }
  var _Browser_go = F2(function(key, n) {
    return A2($elm$core$Task$perform, $elm$core$Basics$never, _Scheduler_binding(function() {
      n && history.go(n);
      key();
    }));
  });
  var _Browser_pushUrl = F2(function(key, url) {
    return A2($elm$core$Task$perform, $elm$core$Basics$never, _Scheduler_binding(function() {
      history.pushState({}, "", url);
      key();
    }));
  });
  var _Browser_replaceUrl = F2(function(key, url) {
    return A2($elm$core$Task$perform, $elm$core$Basics$never, _Scheduler_binding(function() {
      history.replaceState({}, "", url);
      key();
    }));
  });
  var _Browser_fakeNode = { addEventListener: function() {
  }, removeEventListener: function() {
  } };
  var _Browser_doc = typeof document !== "undefined" ? document : _Browser_fakeNode;
  var _Browser_window = typeof window !== "undefined" ? window : _Browser_fakeNode;
  var _Browser_on = F3(function(node, eventName, sendToSelf) {
    return _Scheduler_spawn(_Scheduler_binding(function(callback) {
      function handler(event) {
        _Scheduler_rawSpawn(sendToSelf(event));
      }
      node.addEventListener(eventName, handler, _VirtualDom_passiveSupported && { passive: true });
      return function() {
        node.removeEventListener(eventName, handler);
      };
    }));
  });
  var _Browser_decodeEvent = F2(function(decoder, event) {
    var result = _Json_runHelp(decoder, event);
    return $elm$core$Result$isOk(result) ? $elm$core$Maybe$Just(result.a) : $elm$core$Maybe$Nothing;
  });
  function _Browser_withNode(id, doStuff) {
    return _Scheduler_binding(function(callback) {
      _Browser_requestAnimationFrame(function() {
        var node = document.getElementById(id);
        callback(
          node ? _Scheduler_succeed(doStuff(node)) : _Scheduler_fail($elm$browser$Browser$Dom$NotFound(id))
        );
      });
    });
  }
  function _Browser_withWindow(doStuff) {
    return _Scheduler_binding(function(callback) {
      _Browser_requestAnimationFrame(function() {
        callback(_Scheduler_succeed(doStuff()));
      });
    });
  }
  var _Browser_call = F2(function(functionName, id) {
    return _Browser_withNode(id, function(node) {
      node[functionName]();
      return _Utils_Tuple0;
    });
  });
  function _Browser_getViewport() {
    return {
      scene: _Browser_getScene(),
      viewport: {
        x: _Browser_window.pageXOffset,
        y: _Browser_window.pageYOffset,
        width: _Browser_doc.documentElement.clientWidth,
        height: _Browser_doc.documentElement.clientHeight
      }
    };
  }
  function _Browser_getScene() {
    var body = _Browser_doc.body;
    var elem = _Browser_doc.documentElement;
    return {
      width: Math.max(body.scrollWidth, body.offsetWidth, elem.scrollWidth, elem.offsetWidth, elem.clientWidth),
      height: Math.max(body.scrollHeight, body.offsetHeight, elem.scrollHeight, elem.offsetHeight, elem.clientHeight)
    };
  }
  var _Browser_setViewport = F2(function(x, y) {
    return _Browser_withWindow(function() {
      _Browser_window.scroll(x, y);
      return _Utils_Tuple0;
    });
  });
  function _Browser_getViewportOf(id) {
    return _Browser_withNode(id, function(node) {
      return {
        scene: {
          width: node.scrollWidth,
          height: node.scrollHeight
        },
        viewport: {
          x: node.scrollLeft,
          y: node.scrollTop,
          width: node.clientWidth,
          height: node.clientHeight
        }
      };
    });
  }
  var _Browser_setViewportOf = F3(function(id, x, y) {
    return _Browser_withNode(id, function(node) {
      node.scrollLeft = x;
      node.scrollTop = y;
      return _Utils_Tuple0;
    });
  });
  function _Browser_getElement(id) {
    return _Browser_withNode(id, function(node) {
      var rect = node.getBoundingClientRect();
      var x = _Browser_window.pageXOffset;
      var y = _Browser_window.pageYOffset;
      return {
        scene: _Browser_getScene(),
        viewport: {
          x,
          y,
          width: _Browser_doc.documentElement.clientWidth,
          height: _Browser_doc.documentElement.clientHeight
        },
        element: {
          x: x + rect.left,
          y: y + rect.top,
          width: rect.width,
          height: rect.height
        }
      };
    });
  }
  console.info("Using elm-janitor/browser@e694a49 instead of elm/browser@1.0.2");
  var _Http_toTask = F3(function(router, toTask, request) {
    return _Scheduler_binding(function(callback) {
      function done(response) {
        callback(toTask(request.expect.a(response)));
      }
      var xhr = new XMLHttpRequest();
      xhr.addEventListener("error", function() {
        done($elm$http$Http$NetworkError_);
      });
      xhr.addEventListener("timeout", function() {
        done($elm$http$Http$Timeout_);
      });
      xhr.addEventListener("load", function() {
        done(_Http_toResponse(request.expect.b, xhr));
      });
      $elm$core$Maybe$isJust(request.tracker) && _Http_track(router, xhr, request.tracker.a);
      try {
        xhr.open(request.method, request.url, true);
      } catch (e) {
        return done($elm$http$Http$BadUrl_(request.url));
      }
      _Http_configureRequest(xhr, request);
      request.body.a && xhr.setRequestHeader("Content-Type", request.body.a);
      xhr.send(request.body.b);
      return function() {
        xhr.c = true;
        xhr.abort();
      };
    });
  });
  function _Http_configureRequest(xhr, request) {
    for (var headers = request.headers; headers.b; headers = headers.b) {
      xhr.setRequestHeader(headers.a.a, headers.a.b);
    }
    xhr.timeout = request.timeout.a || 0;
    xhr.responseType = request.expect.d;
    xhr.withCredentials = request.allowCookiesFromOtherDomains;
  }
  function _Http_toResponse(toBody, xhr) {
    return A2(
      200 <= xhr.status && xhr.status < 300 ? $elm$http$Http$GoodStatus_ : $elm$http$Http$BadStatus_,
      _Http_toMetadata(xhr),
      toBody(xhr.response)
    );
  }
  function _Http_toMetadata(xhr) {
    return {
      url: xhr.responseURL,
      statusCode: xhr.status,
      statusText: xhr.statusText,
      headers: _Http_parseHeaders(xhr.getAllResponseHeaders())
    };
  }
  function _Http_parseHeaders(rawHeaders) {
    if (!rawHeaders) {
      return $elm$core$Dict$empty;
    }
    var headers = $elm$core$Dict$empty;
    var headerPairs = rawHeaders.split("\r\n");
    for (var i = headerPairs.length; i--; ) {
      var headerPair = headerPairs[i];
      var index = headerPair.indexOf(": ");
      if (index > 0) {
        var key = headerPair.substring(0, index);
        var value = headerPair.substring(index + 2);
        headers = A3($elm$core$Dict$update, key, function(oldValue) {
          return $elm$core$Maybe$Just(
            $elm$core$Maybe$isJust(oldValue) ? value + ", " + oldValue.a : value
          );
        }, headers);
      }
    }
    return headers;
  }
  var _Http_expect = F3(function(type, toBody, toValue) {
    return {
      $: 0,
      d: type,
      b: toBody,
      a: toValue
    };
  });
  var _Http_mapExpect = F2(function(func, expect) {
    return {
      $: 0,
      d: expect.d,
      b: expect.b,
      a: function(x) {
        return func(expect.a(x));
      }
    };
  });
  var _Http_emptyBody = { $: 0 };
  var _Http_pair = F2(function(a, b) {
    return { $: 0, a, b };
  });
  var _Http_bytesToBlob = F2(function(mime, bytes) {
    return new Blob([bytes], { type: mime });
  });
  function _Http_track(router, xhr, tracker) {
    xhr.upload.addEventListener("progress", function(event) {
      if (xhr.c) {
        return;
      }
      _Scheduler_rawSpawn(A2($elm$core$Platform$sendToSelf, router, _Utils_Tuple2(tracker, $elm$http$Http$Sending({
        sent: event.loaded,
        size: event.total
      }))));
    });
    xhr.addEventListener("progress", function(event) {
      if (xhr.c) {
        return;
      }
      _Scheduler_rawSpawn(A2($elm$core$Platform$sendToSelf, router, _Utils_Tuple2(tracker, $elm$http$Http$Receiving({
        received: event.loaded,
        size: event.lengthComputable ? $elm$core$Maybe$Just(event.total) : $elm$core$Maybe$Nothing
      }))));
    });
  }
  var _Parser_isSubString = F5(function(smallString, offset, row, col, bigString) {
    var smallLength = smallString.length;
    var isGood = offset + smallLength <= bigString.length;
    for (var i = 0; isGood && i < smallLength; ) {
      var code = bigString.charCodeAt(offset);
      isGood = smallString[i++] === bigString[offset++] && (code === 10 ? (row++, col = 1) : (col++, (code & 63488) === 55296 ? smallString[i++] === bigString[offset++] : 1));
    }
    return _Utils_Tuple3(isGood ? offset : -1, row, col);
  });
  var _Parser_isSubChar = F3(function(predicate, offset, string) {
    return string.length <= offset ? -1 : (string.charCodeAt(offset) & 63488) === 55296 ? predicate(_Utils_chr(string.substr(offset, 2))) ? offset + 2 : -1 : predicate(_Utils_chr(string[offset])) ? string[offset] === "\n" ? -2 : offset + 1 : -1;
  });
  var _Parser_isAsciiCode = F3(function(code, offset, string) {
    return string.charCodeAt(offset) === code;
  });
  var _Parser_chompBase10 = F2(function(offset, string) {
    for (; offset < string.length; offset++) {
      var code = string.charCodeAt(offset);
      if (code < 48 || 57 < code) {
        return offset;
      }
    }
    return offset;
  });
  var _Parser_consumeBase = F3(function(base, offset, string) {
    for (var total = 0; offset < string.length; offset++) {
      var digit = string.charCodeAt(offset) - 48;
      if (digit < 0 || base <= digit) break;
      total = base * total + digit;
    }
    return _Utils_Tuple2(offset, total);
  });
  var _Parser_consumeBase16 = F2(function(offset, string) {
    for (var total = 0; offset < string.length; offset++) {
      var code = string.charCodeAt(offset);
      if (48 <= code && code <= 57) {
        total = 16 * total + code - 48;
      } else if (65 <= code && code <= 70) {
        total = 16 * total + code - 55;
      } else if (97 <= code && code <= 102) {
        total = 16 * total + code - 87;
      } else {
        break;
      }
    }
    return _Utils_Tuple2(offset, total);
  });
  var _Parser_findSubString = F5(function(smallString, offset, row, col, bigString) {
    var index = bigString.indexOf(smallString, offset);
    var target = index < 0 ? bigString.length : index + smallString.length;
    while (offset < target) {
      var code = bigString.charCodeAt(offset++);
      code === 10 ? (col = 1, row++) : (col++, (code & 63488) === 55296 && offset++);
    }
    return _Utils_Tuple3(index < 0 ? -1 : target, row, col);
  });
  var $elm$core$List$cons = _List_cons;
  var $elm$core$Elm$JsArray$foldr = _JsArray_foldr;
  var $elm$core$Array$foldr = F3(
    function(func, baseCase, _v0) {
      var tree = _v0.c;
      var tail = _v0.d;
      var helper = F2(
        function(node, acc) {
          if (node.$ === "SubTree") {
            var subTree = node.a;
            return A3($elm$core$Elm$JsArray$foldr, helper, acc, subTree);
          } else {
            var values = node.a;
            return A3($elm$core$Elm$JsArray$foldr, func, acc, values);
          }
        }
      );
      return A3(
        $elm$core$Elm$JsArray$foldr,
        helper,
        A3($elm$core$Elm$JsArray$foldr, func, baseCase, tail),
        tree
      );
    }
  );
  var $elm$core$Array$toList = function(array) {
    return A3($elm$core$Array$foldr, $elm$core$List$cons, _List_Nil, array);
  };
  var $elm$core$Dict$foldr = F3(
    function(func, acc, t) {
      foldr:
        while (true) {
          if (t.$ === "RBEmpty_elm_builtin") {
            return acc;
          } else {
            var key = t.b;
            var value = t.c;
            var left = t.d;
            var right = t.e;
            var $temp$func = func, $temp$acc = A3(
              func,
              key,
              value,
              A3($elm$core$Dict$foldr, func, acc, right)
            ), $temp$t = left;
            func = $temp$func;
            acc = $temp$acc;
            t = $temp$t;
            continue foldr;
          }
        }
    }
  );
  var $elm$core$Dict$toList = function(dict) {
    return A3(
      $elm$core$Dict$foldr,
      F3(
        function(key, value, list) {
          return A2(
            $elm$core$List$cons,
            _Utils_Tuple2(key, value),
            list
          );
        }
      ),
      _List_Nil,
      dict
    );
  };
  var $elm$core$Dict$keys = function(dict) {
    return A3(
      $elm$core$Dict$foldr,
      F3(
        function(key, value, keyList) {
          return A2($elm$core$List$cons, key, keyList);
        }
      ),
      _List_Nil,
      dict
    );
  };
  var $elm$core$Set$toList = function(_v0) {
    var dict = _v0.a;
    return $elm$core$Dict$keys(dict);
  };
  var $elm$core$Basics$EQ = { $: "EQ" };
  var $elm$core$Basics$GT = { $: "GT" };
  var $elm$core$Basics$LT = { $: "LT" };
  var $elm$core$Result$Err = function(a) {
    return { $: "Err", a };
  };
  var $elm$json$Json$Decode$Failure = F2(
    function(a, b) {
      return { $: "Failure", a, b };
    }
  );
  var $elm$json$Json$Decode$Field = F2(
    function(a, b) {
      return { $: "Field", a, b };
    }
  );
  var $elm$json$Json$Decode$Index = F2(
    function(a, b) {
      return { $: "Index", a, b };
    }
  );
  var $elm$core$Result$Ok = function(a) {
    return { $: "Ok", a };
  };
  var $elm$json$Json$Decode$OneOf = function(a) {
    return { $: "OneOf", a };
  };
  var $elm$core$Maybe$Just = function(a) {
    return { $: "Just", a };
  };
  var $elm$core$Maybe$Nothing = { $: "Nothing" };
  var $elm$core$String$all = _String_all;
  var $elm$json$Json$Encode$encode = _Json_encode;
  var $elm$core$String$fromInt = _String_fromNumber;
  var $elm$core$String$join = F2(
    function(sep, chunks) {
      return A2(
        _String_join,
        sep,
        _List_toArray(chunks)
      );
    }
  );
  var $elm$core$String$split = F2(
    function(sep, string) {
      return _List_fromArray(
        A2(_String_split, sep, string)
      );
    }
  );
  var $elm$json$Json$Decode$indent = function(str) {
    return A2(
      $elm$core$String$join,
      "\n    ",
      A2($elm$core$String$split, "\n", str)
    );
  };
  var $elm$core$List$foldl = F3(
    function(func, acc, list) {
      foldl:
        while (true) {
          if (!list.b) {
            return acc;
          } else {
            var x = list.a;
            var xs = list.b;
            var $temp$func = func, $temp$acc = A2(func, x, acc), $temp$list = xs;
            func = $temp$func;
            acc = $temp$acc;
            list = $temp$list;
            continue foldl;
          }
        }
    }
  );
  var $elm$core$List$length = function(xs) {
    return A3(
      $elm$core$List$foldl,
      F2(
        function(_v0, i) {
          return i + 1;
        }
      ),
      0,
      xs
    );
  };
  var $elm$core$List$map2 = _List_map2;
  var $elm$core$List$rangeHelp = F3(
    function(lo, hi, list) {
      rangeHelp:
        while (true) {
          if (_Utils_cmp(lo, hi) < 1) {
            var $temp$lo = lo, $temp$hi = hi - 1, $temp$list = A2($elm$core$List$cons, hi, list);
            lo = $temp$lo;
            hi = $temp$hi;
            list = $temp$list;
            continue rangeHelp;
          } else {
            return list;
          }
        }
    }
  );
  var $elm$core$List$range = F2(
    function(lo, hi) {
      return A3($elm$core$List$rangeHelp, lo, hi, _List_Nil);
    }
  );
  var $elm$core$List$indexedMap = F2(
    function(f, xs) {
      return A3(
        $elm$core$List$map2,
        f,
        A2(
          $elm$core$List$range,
          0,
          $elm$core$List$length(xs) - 1
        ),
        xs
      );
    }
  );
  var $elm$core$Basics$eq = _Utils_equal;
  var $elm$core$Basics$neq = _Utils_notEqual;
  var $elm$core$Char$toLower = _Char_toLower;
  var $elm$core$Char$toUpper = _Char_toUpper;
  var $elm$core$Char$isLower = function(_char) {
    return _Utils_eq(
      _char,
      $elm$core$Char$toLower(_char)
    ) && !_Utils_eq(
      _char,
      $elm$core$Char$toUpper(_char)
    );
  };
  var $elm$core$Char$isUpper = function(_char) {
    return _Utils_eq(
      _char,
      $elm$core$Char$toUpper(_char)
    ) && !_Utils_eq(
      _char,
      $elm$core$Char$toLower(_char)
    );
  };
  var $elm$core$Char$isAlpha = function(_char) {
    return $elm$core$Char$isLower(_char) || $elm$core$Char$isUpper(_char);
  };
  var $elm$core$Char$toCode = _Char_toCode;
  var $elm$core$Char$isDigit = function(_char) {
    var code = $elm$core$Char$toCode(_char);
    return code <= 57 && 48 <= code;
  };
  var $elm$core$Char$isAlphaNum = function(_char) {
    return $elm$core$Char$isLower(_char) || ($elm$core$Char$isUpper(_char) || $elm$core$Char$isDigit(_char));
  };
  var $elm$core$List$reverse = function(list) {
    return A3($elm$core$List$foldl, $elm$core$List$cons, _List_Nil, list);
  };
  var $elm$core$String$uncons = _String_uncons;
  var $elm$json$Json$Decode$errorOneOf = F2(
    function(i, error) {
      return "\n\n(" + ($elm$core$String$fromInt(i + 1) + (") " + $elm$json$Json$Decode$indent(
        $elm$json$Json$Decode$errorToString(error)
      )));
    }
  );
  var $elm$json$Json$Decode$errorToString = function(error) {
    return A2($elm$json$Json$Decode$errorToStringHelp, error, _List_Nil);
  };
  var $elm$json$Json$Decode$errorToStringHelp = F2(
    function(error, context) {
      errorToStringHelp:
        while (true) {
          switch (error.$) {
            case "Field":
              var f = error.a;
              var err = error.b;
              var isSimple = (function() {
                var _v1 = $elm$core$String$uncons(f);
                if (_v1.$ === "Nothing") {
                  return false;
                } else {
                  var _v2 = _v1.a;
                  var _char = _v2.a;
                  var rest = _v2.b;
                  return $elm$core$Char$isAlpha(_char) && A2($elm$core$String$all, $elm$core$Char$isAlphaNum, rest);
                }
              })();
              var fieldName = isSimple ? "." + f : "['" + (f + "']");
              var $temp$error = err, $temp$context = A2($elm$core$List$cons, fieldName, context);
              error = $temp$error;
              context = $temp$context;
              continue errorToStringHelp;
            case "Index":
              var i = error.a;
              var err = error.b;
              var indexName = "[" + ($elm$core$String$fromInt(i) + "]");
              var $temp$error = err, $temp$context = A2($elm$core$List$cons, indexName, context);
              error = $temp$error;
              context = $temp$context;
              continue errorToStringHelp;
            case "OneOf":
              var errors = error.a;
              if (!errors.b) {
                return "Ran into a Json.Decode.oneOf with no possibilities" + (function() {
                  if (!context.b) {
                    return "!";
                  } else {
                    return " at json" + A2(
                      $elm$core$String$join,
                      "",
                      $elm$core$List$reverse(context)
                    );
                  }
                })();
              } else {
                if (!errors.b.b) {
                  var err = errors.a;
                  var $temp$error = err, $temp$context = context;
                  error = $temp$error;
                  context = $temp$context;
                  continue errorToStringHelp;
                } else {
                  var starter = (function() {
                    if (!context.b) {
                      return "Json.Decode.oneOf";
                    } else {
                      return "The Json.Decode.oneOf at json" + A2(
                        $elm$core$String$join,
                        "",
                        $elm$core$List$reverse(context)
                      );
                    }
                  })();
                  var introduction = starter + (" failed in the following " + ($elm$core$String$fromInt(
                    $elm$core$List$length(errors)
                  ) + " ways:"));
                  return A2(
                    $elm$core$String$join,
                    "\n\n",
                    A2(
                      $elm$core$List$cons,
                      introduction,
                      A2($elm$core$List$indexedMap, $elm$json$Json$Decode$errorOneOf, errors)
                    )
                  );
                }
              }
            default:
              var msg = error.a;
              var json = error.b;
              var introduction = (function() {
                if (!context.b) {
                  return "Problem with the given value:\n\n";
                } else {
                  return "Problem with the value at json" + (A2(
                    $elm$core$String$join,
                    "",
                    $elm$core$List$reverse(context)
                  ) + ":\n\n    ");
                }
              })();
              return introduction + ($elm$json$Json$Decode$indent(
                A2($elm$json$Json$Encode$encode, 4, json)
              ) + ("\n\n" + msg));
          }
        }
    }
  );
  var $elm$core$Array$branchFactor = 32;
  var $elm$core$Array$Array_elm_builtin = F4(
    function(a, b, c, d) {
      return { $: "Array_elm_builtin", a, b, c, d };
    }
  );
  var $elm$core$Elm$JsArray$empty = _JsArray_empty;
  var $elm$core$Basics$ceiling = _Basics_ceiling;
  var $elm$core$Basics$logBase = F2(
    function(base, number) {
      return _Basics_log(number) / _Basics_log(base);
    }
  );
  var $elm$core$Basics$toFloat = _Basics_toFloat;
  var $elm$core$Array$shiftStep = $elm$core$Basics$ceiling(
    A2($elm$core$Basics$logBase, 2, $elm$core$Array$branchFactor)
  );
  var $elm$core$Array$empty = A4($elm$core$Array$Array_elm_builtin, 0, $elm$core$Array$shiftStep, $elm$core$Elm$JsArray$empty, $elm$core$Elm$JsArray$empty);
  var $elm$core$Elm$JsArray$initialize = _JsArray_initialize;
  var $elm$core$Array$Leaf = function(a) {
    return { $: "Leaf", a };
  };
  var $elm$core$Basics$apL = F2(
    function(f, x) {
      return f(x);
    }
  );
  var $elm$core$Basics$apR = F2(
    function(x, f) {
      return f(x);
    }
  );
  var $elm$core$Basics$floor = _Basics_floor;
  var $elm$core$Elm$JsArray$length = _JsArray_length;
  var $elm$core$Basics$max = F2(
    function(x, y) {
      return _Utils_cmp(x, y) > 0 ? x : y;
    }
  );
  var $elm$core$Array$SubTree = function(a) {
    return { $: "SubTree", a };
  };
  var $elm$core$Elm$JsArray$initializeFromList = _JsArray_initializeFromList;
  var $elm$core$Array$compressNodes = F2(
    function(nodes, acc) {
      compressNodes:
        while (true) {
          var _v0 = A2($elm$core$Elm$JsArray$initializeFromList, $elm$core$Array$branchFactor, nodes);
          var node = _v0.a;
          var remainingNodes = _v0.b;
          var newAcc = A2(
            $elm$core$List$cons,
            $elm$core$Array$SubTree(node),
            acc
          );
          if (!remainingNodes.b) {
            return $elm$core$List$reverse(newAcc);
          } else {
            var $temp$nodes = remainingNodes, $temp$acc = newAcc;
            nodes = $temp$nodes;
            acc = $temp$acc;
            continue compressNodes;
          }
        }
    }
  );
  var $elm$core$Tuple$first = function(_v0) {
    var x = _v0.a;
    return x;
  };
  var $elm$core$Array$treeFromBuilder = F2(
    function(nodeList, nodeListSize) {
      treeFromBuilder:
        while (true) {
          var newNodeSize = $elm$core$Basics$ceiling(nodeListSize / $elm$core$Array$branchFactor);
          if (newNodeSize === 1) {
            return A2($elm$core$Elm$JsArray$initializeFromList, $elm$core$Array$branchFactor, nodeList).a;
          } else {
            var $temp$nodeList = A2($elm$core$Array$compressNodes, nodeList, _List_Nil), $temp$nodeListSize = newNodeSize;
            nodeList = $temp$nodeList;
            nodeListSize = $temp$nodeListSize;
            continue treeFromBuilder;
          }
        }
    }
  );
  var $elm$core$Array$builderToArray = F2(
    function(reverseNodeList, builder) {
      if (!builder.nodeListSize) {
        return A4(
          $elm$core$Array$Array_elm_builtin,
          $elm$core$Elm$JsArray$length(builder.tail),
          $elm$core$Array$shiftStep,
          $elm$core$Elm$JsArray$empty,
          builder.tail
        );
      } else {
        var treeLen = builder.nodeListSize * $elm$core$Array$branchFactor;
        var depth = $elm$core$Basics$floor(
          A2($elm$core$Basics$logBase, $elm$core$Array$branchFactor, treeLen - 1)
        );
        var correctNodeList = reverseNodeList ? $elm$core$List$reverse(builder.nodeList) : builder.nodeList;
        var tree = A2($elm$core$Array$treeFromBuilder, correctNodeList, builder.nodeListSize);
        return A4(
          $elm$core$Array$Array_elm_builtin,
          $elm$core$Elm$JsArray$length(builder.tail) + treeLen,
          A2($elm$core$Basics$max, 5, depth * $elm$core$Array$shiftStep),
          tree,
          builder.tail
        );
      }
    }
  );
  var $elm$core$Array$initializeHelp = F5(
    function(fn, fromIndex, len, nodeList, tail) {
      initializeHelp:
        while (true) {
          if (fromIndex < 0) {
            return A2(
              $elm$core$Array$builderToArray,
              false,
              { nodeList, nodeListSize: len / $elm$core$Array$branchFactor | 0, tail }
            );
          } else {
            var leaf = $elm$core$Array$Leaf(
              A3($elm$core$Elm$JsArray$initialize, $elm$core$Array$branchFactor, fromIndex, fn)
            );
            var $temp$fn = fn, $temp$fromIndex = fromIndex - $elm$core$Array$branchFactor, $temp$len = len, $temp$nodeList = A2($elm$core$List$cons, leaf, nodeList), $temp$tail = tail;
            fn = $temp$fn;
            fromIndex = $temp$fromIndex;
            len = $temp$len;
            nodeList = $temp$nodeList;
            tail = $temp$tail;
            continue initializeHelp;
          }
        }
    }
  );
  var $elm$core$Array$initialize = F2(
    function(len, fn) {
      if (len <= 0) {
        return $elm$core$Array$empty;
      } else {
        var tailLen = len % $elm$core$Array$branchFactor;
        var tail = A3($elm$core$Elm$JsArray$initialize, tailLen, len - tailLen, fn);
        var initialFromIndex = len - tailLen - $elm$core$Array$branchFactor;
        return A5($elm$core$Array$initializeHelp, fn, initialFromIndex, len, _List_Nil, tail);
      }
    }
  );
  var $elm$core$Result$isOk = function(result) {
    if (result.$ === "Ok") {
      return true;
    } else {
      return false;
    }
  };
  var $elm$json$Json$Decode$andThen = _Json_andThen;
  var $elm$json$Json$Decode$bool = _Json_decodeBool;
  var $elm$json$Json$Decode$map = _Json_map1;
  var $elm$json$Json$Decode$map2 = _Json_map2;
  var $elm$json$Json$Decode$succeed = _Json_succeed;
  var $elm$virtual_dom$VirtualDom$toHandlerInt = function(handler) {
    switch (handler.$) {
      case "Normal":
        return 0;
      case "MayStopPropagation":
        return 1;
      case "MayPreventDefault":
        return 2;
      default:
        return 3;
    }
  };
  var $elm$browser$Debugger$Expando$ArraySeq = { $: "ArraySeq" };
  var $elm$browser$Debugger$Overlay$BlockMost = { $: "BlockMost" };
  var $elm$browser$Debugger$Overlay$BlockNone = { $: "BlockNone" };
  var $elm$browser$Debugger$Expando$Constructor = F2(
    function(a, b) {
      return { $: "Constructor", a, b };
    }
  );
  var $elm$browser$Debugger$Expando$Dictionary = function(a) {
    return { $: "Dictionary", a };
  };
  var $elm$browser$Debugger$Main$Down = { $: "Down" };
  var $elm$browser$Debugger$Expando$ListSeq = { $: "ListSeq" };
  var $elm$browser$Debugger$Main$NoOp = { $: "NoOp" };
  var $elm$browser$Debugger$Expando$Primitive = function(a) {
    return { $: "Primitive", a };
  };
  var $elm$browser$Debugger$Expando$Record = function(a) {
    return { $: "Record", a };
  };
  var $elm$browser$Debugger$Expando$S = function(a) {
    return { $: "S", a };
  };
  var $elm$browser$Debugger$Expando$Sequence = F2(
    function(a, b) {
      return { $: "Sequence", a, b };
    }
  );
  var $elm$browser$Debugger$Expando$SetSeq = { $: "SetSeq" };
  var $elm$browser$Debugger$Main$Up = { $: "Up" };
  var $elm$browser$Debugger$Main$UserMsg = function(a) {
    return { $: "UserMsg", a };
  };
  var $elm$browser$Debugger$Main$Export = { $: "Export" };
  var $elm$browser$Debugger$Main$Import = { $: "Import" };
  var $elm$browser$Debugger$Main$Open = { $: "Open" };
  var $elm$browser$Debugger$Main$OverlayMsg = function(a) {
    return { $: "OverlayMsg", a };
  };
  var $elm$browser$Debugger$Main$Resume = { $: "Resume" };
  var $elm$browser$Debugger$Main$isPaused = function(state) {
    if (state.$ === "Running") {
      return false;
    } else {
      return true;
    }
  };
  var $elm$browser$Debugger$History$size = function(history2) {
    return history2.numMessages;
  };
  var $elm$browser$Debugger$Overlay$Accept = function(a) {
    return { $: "Accept", a };
  };
  var $elm$browser$Debugger$Overlay$Choose = F2(
    function(a, b) {
      return { $: "Choose", a, b };
    }
  );
  var $elm$html$Html$div = _VirtualDom_node("div");
  var $elm$html$Html$Attributes$id = _VirtualDom_attribute("id");
  var $elm$virtual_dom$VirtualDom$Normal = function(a) {
    return { $: "Normal", a };
  };
  var $elm$virtual_dom$VirtualDom$on = _VirtualDom_on;
  var $elm$html$Html$Events$on = F2(
    function(event, decoder) {
      return A2(
        $elm$virtual_dom$VirtualDom$on,
        event,
        $elm$virtual_dom$VirtualDom$Normal(decoder)
      );
    }
  );
  var $elm$html$Html$Events$onClick = function(msg) {
    return A2(
      $elm$html$Html$Events$on,
      "click",
      $elm$json$Json$Decode$succeed(msg)
    );
  };
  var $elm$html$Html$span = _VirtualDom_node("span");
  var $elm$virtual_dom$VirtualDom$style = _VirtualDom_style;
  var $elm$html$Html$Attributes$style = $elm$virtual_dom$VirtualDom$style;
  var $elm$virtual_dom$VirtualDom$text = _VirtualDom_text;
  var $elm$html$Html$text = $elm$virtual_dom$VirtualDom$text;
  var $elm$html$Html$a = _VirtualDom_node("a");
  var $elm$browser$Debugger$Overlay$goodNews1 = "\nThe good news is that having values like this in your message type is not\nso great in the long run. You are better off using simpler data, like\n";
  var $elm$browser$Debugger$Overlay$goodNews2 = "\nfunction can pattern match on that data and call whatever functions, JSON\ndecoders, etc. you need. This makes the code much more explicit and easy to\nfollow for other readers (or you in a few months!)\n";
  var $elm$html$Html$Attributes$href = function(url) {
    return A2(
      _VirtualDom_attribute,
      "href",
      _VirtualDom_noJavaScriptUri(url)
    );
  };
  var $elm$core$List$foldrHelper = F4(
    function(fn, acc, ctr, ls) {
      if (!ls.b) {
        return acc;
      } else {
        var a = ls.a;
        var r1 = ls.b;
        if (!r1.b) {
          return A2(fn, a, acc);
        } else {
          var b = r1.a;
          var r2 = r1.b;
          if (!r2.b) {
            return A2(
              fn,
              a,
              A2(fn, b, acc)
            );
          } else {
            var c = r2.a;
            var r3 = r2.b;
            if (!r3.b) {
              return A2(
                fn,
                a,
                A2(
                  fn,
                  b,
                  A2(fn, c, acc)
                )
              );
            } else {
              var d = r3.a;
              var r4 = r3.b;
              var res = ctr > 500 ? A3(
                $elm$core$List$foldl,
                fn,
                acc,
                $elm$core$List$reverse(r4)
              ) : A4($elm$core$List$foldrHelper, fn, acc, ctr + 1, r4);
              return A2(
                fn,
                a,
                A2(
                  fn,
                  b,
                  A2(
                    fn,
                    c,
                    A2(fn, d, res)
                  )
                )
              );
            }
          }
        }
      }
    }
  );
  var $elm$core$List$foldr = F3(
    function(fn, acc, ls) {
      return A4($elm$core$List$foldrHelper, fn, acc, 0, ls);
    }
  );
  var $elm$core$List$map = F2(
    function(f, xs) {
      return A3(
        $elm$core$List$foldr,
        F2(
          function(x, acc) {
            return A2(
              $elm$core$List$cons,
              f(x),
              acc
            );
          }
        ),
        _List_Nil,
        xs
      );
    }
  );
  var $elm$html$Html$p = _VirtualDom_node("p");
  var $elm$html$Html$ul = _VirtualDom_node("ul");
  var $elm$html$Html$code = _VirtualDom_node("code");
  var $elm$browser$Debugger$Overlay$viewCode = function(name) {
    return A2(
      $elm$html$Html$code,
      _List_Nil,
      _List_fromArray(
        [
          $elm$html$Html$text(name)
        ]
      )
    );
  };
  var $elm$browser$Debugger$Overlay$addCommas = function(items) {
    if (!items.b) {
      return "";
    } else {
      if (!items.b.b) {
        var item = items.a;
        return item;
      } else {
        if (!items.b.b.b) {
          var item1 = items.a;
          var _v1 = items.b;
          var item2 = _v1.a;
          return item1 + (" and " + item2);
        } else {
          var lastItem = items.a;
          var otherItems = items.b;
          return A2(
            $elm$core$String$join,
            ", ",
            _Utils_ap(
              otherItems,
              _List_fromArray(
                [" and " + lastItem]
              )
            )
          );
        }
      }
    }
  };
  var $elm$html$Html$li = _VirtualDom_node("li");
  var $elm$browser$Debugger$Overlay$problemToString = function(problem) {
    switch (problem.$) {
      case "Function":
        return "functions";
      case "Decoder":
        return "JSON decoders";
      case "Task":
        return "tasks";
      case "Process":
        return "processes";
      case "Socket":
        return "web sockets";
      case "Request":
        return "HTTP requests";
      case "Program":
        return "programs";
      default:
        return "virtual DOM values";
    }
  };
  var $elm$browser$Debugger$Overlay$viewProblemType = function(_v0) {
    var name = _v0.name;
    var problems = _v0.problems;
    return A2(
      $elm$html$Html$li,
      _List_Nil,
      _List_fromArray(
        [
          $elm$browser$Debugger$Overlay$viewCode(name),
          $elm$html$Html$text(
            " can contain " + ($elm$browser$Debugger$Overlay$addCommas(
              A2($elm$core$List$map, $elm$browser$Debugger$Overlay$problemToString, problems)
            ) + ".")
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Overlay$viewBadMetadata = function(_v0) {
    var message = _v0.message;
    var problems = _v0.problems;
    return _List_fromArray(
      [
        A2(
          $elm$html$Html$p,
          _List_Nil,
          _List_fromArray(
            [
              $elm$html$Html$text("The "),
              $elm$browser$Debugger$Overlay$viewCode(message),
              $elm$html$Html$text(" type of your program cannot be reliably serialized for history files.")
            ]
          )
        ),
        A2(
          $elm$html$Html$p,
          _List_Nil,
          _List_fromArray(
            [
              $elm$html$Html$text("Functions cannot be serialized, nor can values that contain functions. This is a problem in these places:")
            ]
          )
        ),
        A2(
          $elm$html$Html$ul,
          _List_Nil,
          A2($elm$core$List$map, $elm$browser$Debugger$Overlay$viewProblemType, problems)
        ),
        A2(
          $elm$html$Html$p,
          _List_Nil,
          _List_fromArray(
            [
              $elm$html$Html$text($elm$browser$Debugger$Overlay$goodNews1),
              A2(
                $elm$html$Html$a,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$href("https://guide.elm-lang.org/types/custom_types.html")
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text("custom types")
                  ]
                )
              ),
              $elm$html$Html$text(", in your messages. From there, your "),
              $elm$browser$Debugger$Overlay$viewCode("update"),
              $elm$html$Html$text($elm$browser$Debugger$Overlay$goodNews2)
            ]
          )
        )
      ]
    );
  };
  var $elm$virtual_dom$VirtualDom$map = _VirtualDom_map;
  var $elm$html$Html$map = $elm$virtual_dom$VirtualDom$map;
  var $elm$browser$Debugger$Overlay$Cancel = { $: "Cancel" };
  var $elm$browser$Debugger$Overlay$Proceed = { $: "Proceed" };
  var $elm$html$Html$button = _VirtualDom_node("button");
  var $elm$browser$Debugger$Overlay$viewButtons = function(buttons) {
    var btn = F2(
      function(msg, string) {
        return A2(
          $elm$html$Html$button,
          _List_fromArray(
            [
              A2($elm$html$Html$Attributes$style, "margin-right", "20px"),
              $elm$html$Html$Events$onClick(msg)
            ]
          ),
          _List_fromArray(
            [
              $elm$html$Html$text(string)
            ]
          )
        );
      }
    );
    var buttonNodes = (function() {
      if (buttons.$ === "Accept") {
        var proceed = buttons.a;
        return _List_fromArray(
          [
            A2(btn, $elm$browser$Debugger$Overlay$Proceed, proceed)
          ]
        );
      } else {
        var cancel = buttons.a;
        var proceed = buttons.b;
        return _List_fromArray(
          [
            A2(btn, $elm$browser$Debugger$Overlay$Cancel, cancel),
            A2(btn, $elm$browser$Debugger$Overlay$Proceed, proceed)
          ]
        );
      }
    })();
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "height", "60px"),
          A2($elm$html$Html$Attributes$style, "line-height", "60px"),
          A2($elm$html$Html$Attributes$style, "text-align", "right"),
          A2($elm$html$Html$Attributes$style, "background-color", "rgb(50, 50, 50)")
        ]
      ),
      buttonNodes
    );
  };
  var $elm$browser$Debugger$Overlay$viewMessage = F4(
    function(config, title, details, buttons) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$id("elm-debugger-overlay"),
            A2($elm$html$Html$Attributes$style, "position", "fixed"),
            A2($elm$html$Html$Attributes$style, "top", "0"),
            A2($elm$html$Html$Attributes$style, "left", "0"),
            A2($elm$html$Html$Attributes$style, "width", "100vw"),
            A2($elm$html$Html$Attributes$style, "height", "100vh"),
            A2($elm$html$Html$Attributes$style, "color", "white"),
            A2($elm$html$Html$Attributes$style, "pointer-events", "none"),
            A2($elm$html$Html$Attributes$style, "font-family", "'Trebuchet MS', 'Lucida Grande', 'Bitstream Vera Sans', 'Helvetica Neue', sans-serif"),
            A2($elm$html$Html$Attributes$style, "z-index", "2147483647")
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  A2($elm$html$Html$Attributes$style, "position", "absolute"),
                  A2($elm$html$Html$Attributes$style, "width", "600px"),
                  A2($elm$html$Html$Attributes$style, "height", "100vh"),
                  A2($elm$html$Html$Attributes$style, "padding-left", "calc(50% - 300px)"),
                  A2($elm$html$Html$Attributes$style, "padding-right", "calc(50% - 300px)"),
                  A2($elm$html$Html$Attributes$style, "background-color", "rgba(200, 200, 200, 0.7)"),
                  A2($elm$html$Html$Attributes$style, "pointer-events", "auto")
                ]
              ),
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        A2($elm$html$Html$Attributes$style, "font-size", "36px"),
                        A2($elm$html$Html$Attributes$style, "height", "80px"),
                        A2($elm$html$Html$Attributes$style, "background-color", "rgb(50, 50, 50)"),
                        A2($elm$html$Html$Attributes$style, "padding-left", "22px"),
                        A2($elm$html$Html$Attributes$style, "vertical-align", "middle"),
                        A2($elm$html$Html$Attributes$style, "line-height", "80px")
                      ]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text(title)
                      ]
                    )
                  ),
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$id("elm-debugger-details"),
                        A2($elm$html$Html$Attributes$style, "padding", " 8px 20px"),
                        A2($elm$html$Html$Attributes$style, "overflow-y", "auto"),
                        A2($elm$html$Html$Attributes$style, "max-height", "calc(100vh - 156px)"),
                        A2($elm$html$Html$Attributes$style, "background-color", "rgb(61, 61, 61)")
                      ]
                    ),
                    details
                  ),
                  A2(
                    $elm$html$Html$map,
                    config.wrap,
                    $elm$browser$Debugger$Overlay$viewButtons(buttons)
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $elm$virtual_dom$VirtualDom$attribute = F2(
    function(key, value) {
      return A2(
        _VirtualDom_attribute,
        _VirtualDom_noOnOrFormAction(key),
        _VirtualDom_noJavaScriptOrHtmlUri(value)
      );
    }
  );
  var $elm$core$Basics$negate = function(n) {
    return -n;
  };
  var $elm$virtual_dom$VirtualDom$nodeNS = F2(
    function(namespace, tag) {
      return A2(
        _VirtualDom_nodeNS,
        namespace,
        _VirtualDom_noScript(tag)
      );
    }
  );
  var $elm$core$String$fromFloat = _String_fromNumber;
  var $elm$browser$Debugger$Overlay$viewShape = F4(
    function(x, y, angle, coordinates) {
      return A4(
        $elm$virtual_dom$VirtualDom$nodeNS,
        "http://www.w3.org/2000/svg",
        "polygon",
        _List_fromArray(
          [
            A2($elm$virtual_dom$VirtualDom$attribute, "points", coordinates),
            A2(
              $elm$virtual_dom$VirtualDom$attribute,
              "transform",
              "translate(" + ($elm$core$String$fromFloat(x) + (" " + ($elm$core$String$fromFloat(y) + (") rotate(" + ($elm$core$String$fromFloat(-angle) + ")")))))
            )
          ]
        ),
        _List_Nil
      );
    }
  );
  var $elm$browser$Debugger$Overlay$elmLogo = A4(
    $elm$virtual_dom$VirtualDom$nodeNS,
    "http://www.w3.org/2000/svg",
    "svg",
    _List_fromArray(
      [
        A2($elm$virtual_dom$VirtualDom$attribute, "viewBox", "-300 -300 600 600"),
        A2($elm$virtual_dom$VirtualDom$attribute, "xmlns", "http://www.w3.org/2000/svg"),
        A2($elm$virtual_dom$VirtualDom$attribute, "fill", "currentColor"),
        A2($elm$virtual_dom$VirtualDom$attribute, "width", "24px"),
        A2($elm$virtual_dom$VirtualDom$attribute, "height", "24px")
      ]
    ),
    _List_fromArray(
      [
        A4(
          $elm$virtual_dom$VirtualDom$nodeNS,
          "http://www.w3.org/2000/svg",
          "g",
          _List_fromArray(
            [
              A2($elm$virtual_dom$VirtualDom$attribute, "transform", "scale(1 -1)")
            ]
          ),
          _List_fromArray(
            [
              A4($elm$browser$Debugger$Overlay$viewShape, 0, -210, 0, "-280,-90 0,190 280,-90"),
              A4($elm$browser$Debugger$Overlay$viewShape, -210, 0, 90, "-280,-90 0,190 280,-90"),
              A4($elm$browser$Debugger$Overlay$viewShape, 207, 207, 45, "-198,-66 0,132 198,-66"),
              A4($elm$browser$Debugger$Overlay$viewShape, 150, 0, 0, "-130,0 0,-130 130,0 0,130"),
              A4($elm$browser$Debugger$Overlay$viewShape, -89, 239, 0, "-191,61 69,61 191,-61 -69,-61"),
              A4($elm$browser$Debugger$Overlay$viewShape, 0, 106, 180, "-130,-44 0,86  130,-44"),
              A4($elm$browser$Debugger$Overlay$viewShape, 256, -150, 270, "-130,-44 0,86  130,-44")
            ]
          )
        )
      ]
    )
  );
  var $elm$core$String$length = _String_length;
  var $elm$browser$Debugger$Overlay$viewMiniControls = F2(
    function(config, numMsgs) {
      var string = $elm$core$String$fromInt(numMsgs);
      var width = $elm$core$String$fromInt(
        2 + $elm$core$String$length(string)
      );
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "position", "fixed"),
            A2($elm$html$Html$Attributes$style, "bottom", "2em"),
            A2($elm$html$Html$Attributes$style, "right", "2em"),
            A2($elm$html$Html$Attributes$style, "width", "calc(42px + " + (width + "ch)")),
            A2($elm$html$Html$Attributes$style, "height", "36px"),
            A2($elm$html$Html$Attributes$style, "background-color", "#1293D8"),
            A2($elm$html$Html$Attributes$style, "color", "white"),
            A2($elm$html$Html$Attributes$style, "font-family", "monospace"),
            A2($elm$html$Html$Attributes$style, "pointer-events", "auto"),
            A2($elm$html$Html$Attributes$style, "z-index", "2147483647"),
            A2($elm$html$Html$Attributes$style, "display", "flex"),
            A2($elm$html$Html$Attributes$style, "justify-content", "center"),
            A2($elm$html$Html$Attributes$style, "align-items", "center"),
            A2($elm$html$Html$Attributes$style, "cursor", "pointer"),
            $elm$html$Html$Events$onClick(config.open)
          ]
        ),
        _List_fromArray(
          [
            $elm$browser$Debugger$Overlay$elmLogo,
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [
                  A2($elm$html$Html$Attributes$style, "padding-left", "calc(1ch + 6px)"),
                  A2($elm$html$Html$Attributes$style, "padding-right", "1ch")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(string)
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Overlay$explanationBad = "\nThe messages in this history do not match the messages handled by your\nprogram. I noticed changes in the following types:\n";
  var $elm$browser$Debugger$Overlay$explanationRisky = "\nThis history seems old. It will work with this program, but some\nmessages have been added since the history was created:\n";
  var $elm$core$List$intersperse = F2(
    function(sep, xs) {
      if (!xs.b) {
        return _List_Nil;
      } else {
        var hd = xs.a;
        var tl = xs.b;
        var step = F2(
          function(x, rest) {
            return A2(
              $elm$core$List$cons,
              sep,
              A2($elm$core$List$cons, x, rest)
            );
          }
        );
        var spersed = A3($elm$core$List$foldr, step, _List_Nil, tl);
        return A2($elm$core$List$cons, hd, spersed);
      }
    }
  );
  var $elm$browser$Debugger$Overlay$viewMention = F2(
    function(tags, verbed) {
      var _v0 = A2(
        $elm$core$List$map,
        $elm$browser$Debugger$Overlay$viewCode,
        $elm$core$List$reverse(tags)
      );
      if (!_v0.b) {
        return $elm$html$Html$text("");
      } else {
        if (!_v0.b.b) {
          var tag = _v0.a;
          return A2(
            $elm$html$Html$li,
            _List_Nil,
            _List_fromArray(
              [
                $elm$html$Html$text(verbed),
                tag,
                $elm$html$Html$text(".")
              ]
            )
          );
        } else {
          if (!_v0.b.b.b) {
            var tag2 = _v0.a;
            var _v1 = _v0.b;
            var tag1 = _v1.a;
            return A2(
              $elm$html$Html$li,
              _List_Nil,
              _List_fromArray(
                [
                  $elm$html$Html$text(verbed),
                  tag1,
                  $elm$html$Html$text(" and "),
                  tag2,
                  $elm$html$Html$text(".")
                ]
              )
            );
          } else {
            var lastTag = _v0.a;
            var otherTags = _v0.b;
            return A2(
              $elm$html$Html$li,
              _List_Nil,
              A2(
                $elm$core$List$cons,
                $elm$html$Html$text(verbed),
                _Utils_ap(
                  A2(
                    $elm$core$List$intersperse,
                    $elm$html$Html$text(", "),
                    $elm$core$List$reverse(otherTags)
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(", and "),
                      lastTag,
                      $elm$html$Html$text(".")
                    ]
                  )
                )
              )
            );
          }
        }
      }
    }
  );
  var $elm$browser$Debugger$Overlay$viewChange = function(change) {
    return A2(
      $elm$html$Html$li,
      _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "margin", "8px 0")
        ]
      ),
      (function() {
        if (change.$ === "AliasChange") {
          var name = change.a;
          return _List_fromArray(
            [
              A2(
                $elm$html$Html$span,
                _List_fromArray(
                  [
                    A2($elm$html$Html$Attributes$style, "font-size", "1.5em")
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$browser$Debugger$Overlay$viewCode(name)
                  ]
                )
              )
            ]
          );
        } else {
          var name = change.a;
          var removed = change.b.removed;
          var changed = change.b.changed;
          var added = change.b.added;
          var argsMatch = change.b.argsMatch;
          return _List_fromArray(
            [
              A2(
                $elm$html$Html$span,
                _List_fromArray(
                  [
                    A2($elm$html$Html$Attributes$style, "font-size", "1.5em")
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$browser$Debugger$Overlay$viewCode(name)
                  ]
                )
              ),
              A2(
                $elm$html$Html$ul,
                _List_fromArray(
                  [
                    A2($elm$html$Html$Attributes$style, "list-style-type", "disc"),
                    A2($elm$html$Html$Attributes$style, "padding-left", "2em")
                  ]
                ),
                _List_fromArray(
                  [
                    A2($elm$browser$Debugger$Overlay$viewMention, removed, "Removed "),
                    A2($elm$browser$Debugger$Overlay$viewMention, changed, "Changed "),
                    A2($elm$browser$Debugger$Overlay$viewMention, added, "Added ")
                  ]
                )
              ),
              argsMatch ? $elm$html$Html$text("") : $elm$html$Html$text("This may be due to the fact that the type variable names changed.")
            ]
          );
        }
      })()
    );
  };
  var $elm$browser$Debugger$Overlay$viewReport = F2(
    function(isBad, report) {
      switch (report.$) {
        case "CorruptHistory":
          return _List_fromArray(
            [
              $elm$html$Html$text("Looks like this history file is corrupt. I cannot understand it.")
            ]
          );
        case "VersionChanged":
          var old = report.a;
          var _new = report.b;
          return _List_fromArray(
            [
              $elm$html$Html$text("This history was created with Elm " + (old + (", but you are using Elm " + (_new + " right now."))))
            ]
          );
        case "MessageChanged":
          var old = report.a;
          var _new = report.b;
          return _List_fromArray(
            [
              $elm$html$Html$text("To import some other history, the overall message type must be the same. The old history has "),
              $elm$browser$Debugger$Overlay$viewCode(old),
              $elm$html$Html$text(" messages, but the new program works with "),
              $elm$browser$Debugger$Overlay$viewCode(_new),
              $elm$html$Html$text(" messages.")
            ]
          );
        default:
          var changes = report.a;
          return _List_fromArray(
            [
              A2(
                $elm$html$Html$p,
                _List_Nil,
                _List_fromArray(
                  [
                    $elm$html$Html$text(
                      isBad ? $elm$browser$Debugger$Overlay$explanationBad : $elm$browser$Debugger$Overlay$explanationRisky
                    )
                  ]
                )
              ),
              A2(
                $elm$html$Html$ul,
                _List_fromArray(
                  [
                    A2($elm$html$Html$Attributes$style, "list-style-type", "none"),
                    A2($elm$html$Html$Attributes$style, "padding-left", "20px")
                  ]
                ),
                A2($elm$core$List$map, $elm$browser$Debugger$Overlay$viewChange, changes)
              )
            ]
          );
      }
    }
  );
  var $elm$browser$Debugger$Overlay$view = F5(
    function(config, isPaused, isOpen, numMsgs, state) {
      switch (state.$) {
        case "None":
          return isOpen ? $elm$html$Html$text("") : isPaused ? A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$id("elm-debugger-overlay"),
                A2($elm$html$Html$Attributes$style, "position", "fixed"),
                A2($elm$html$Html$Attributes$style, "top", "0"),
                A2($elm$html$Html$Attributes$style, "left", "0"),
                A2($elm$html$Html$Attributes$style, "width", "100vw"),
                A2($elm$html$Html$Attributes$style, "height", "100vh"),
                A2($elm$html$Html$Attributes$style, "cursor", "pointer"),
                A2($elm$html$Html$Attributes$style, "display", "flex"),
                A2($elm$html$Html$Attributes$style, "align-items", "center"),
                A2($elm$html$Html$Attributes$style, "justify-content", "center"),
                A2($elm$html$Html$Attributes$style, "pointer-events", "auto"),
                A2($elm$html$Html$Attributes$style, "background-color", "rgba(200, 200, 200, 0.7)"),
                A2($elm$html$Html$Attributes$style, "color", "white"),
                A2($elm$html$Html$Attributes$style, "font-family", "'Trebuchet MS', 'Lucida Grande', 'Bitstream Vera Sans', 'Helvetica Neue', sans-serif"),
                A2($elm$html$Html$Attributes$style, "z-index", "2147483646"),
                $elm$html$Html$Events$onClick(config.resume)
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      A2($elm$html$Html$Attributes$style, "font-size", "80px")
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Click to Resume")
                    ]
                  )
                ),
                A2($elm$browser$Debugger$Overlay$viewMiniControls, config, numMsgs)
              ]
            )
          ) : A2($elm$browser$Debugger$Overlay$viewMiniControls, config, numMsgs);
        case "BadMetadata":
          var badMetadata_ = state.a;
          return A4(
            $elm$browser$Debugger$Overlay$viewMessage,
            config,
            "Cannot use Import or Export",
            $elm$browser$Debugger$Overlay$viewBadMetadata(badMetadata_),
            $elm$browser$Debugger$Overlay$Accept("Ok")
          );
        case "BadImport":
          var report = state.a;
          return A4(
            $elm$browser$Debugger$Overlay$viewMessage,
            config,
            "Cannot Import History",
            A2($elm$browser$Debugger$Overlay$viewReport, true, report),
            $elm$browser$Debugger$Overlay$Accept("Ok")
          );
        default:
          var report = state.a;
          return A4(
            $elm$browser$Debugger$Overlay$viewMessage,
            config,
            "Warning",
            A2($elm$browser$Debugger$Overlay$viewReport, false, report),
            A2($elm$browser$Debugger$Overlay$Choose, "Cancel", "Import Anyway")
          );
      }
    }
  );
  var $elm$browser$Debugger$Main$cornerView = function(model) {
    return A5(
      $elm$browser$Debugger$Overlay$view,
      { exportHistory: $elm$browser$Debugger$Main$Export, importHistory: $elm$browser$Debugger$Main$Import, open: $elm$browser$Debugger$Main$Open, resume: $elm$browser$Debugger$Main$Resume, wrap: $elm$browser$Debugger$Main$OverlayMsg },
      $elm$browser$Debugger$Main$isPaused(model.state),
      _Debugger_isOpen(model.popout),
      $elm$browser$Debugger$History$size(model.history),
      model.overlay
    );
  };
  var $elm$core$Dict$RBEmpty_elm_builtin = { $: "RBEmpty_elm_builtin" };
  var $elm$core$Dict$empty = $elm$core$Dict$RBEmpty_elm_builtin;
  var $elm$browser$Debugger$Main$getCurrentModel = function(state) {
    if (state.$ === "Running") {
      var model = state.a;
      return model;
    } else {
      var model = state.b;
      return model;
    }
  };
  var $elm$browser$Debugger$Main$getUserModel = function(model) {
    return $elm$browser$Debugger$Main$getCurrentModel(model.state);
  };
  var $elm$browser$Debugger$Main$initialWindowHeight = 420;
  var $elm$browser$Debugger$Main$initialWindowWidth = 900;
  var $elm$core$Dict$Black = { $: "Black" };
  var $elm$core$Dict$RBNode_elm_builtin = F5(
    function(a, b, c, d, e) {
      return { $: "RBNode_elm_builtin", a, b, c, d, e };
    }
  );
  var $elm$core$Dict$Red = { $: "Red" };
  var $elm$core$Dict$balance = F5(
    function(color, key, value, left, right) {
      if (right.$ === "RBNode_elm_builtin" && right.a.$ === "Red") {
        var _v1 = right.a;
        var rK = right.b;
        var rV = right.c;
        var rLeft = right.d;
        var rRight = right.e;
        if (left.$ === "RBNode_elm_builtin" && left.a.$ === "Red") {
          var _v3 = left.a;
          var lK = left.b;
          var lV = left.c;
          var lLeft = left.d;
          var lRight = left.e;
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Red,
            key,
            value,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, lK, lV, lLeft, lRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, rK, rV, rLeft, rRight)
          );
        } else {
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            color,
            rK,
            rV,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, key, value, left, rLeft),
            rRight
          );
        }
      } else {
        if (left.$ === "RBNode_elm_builtin" && left.a.$ === "Red" && left.d.$ === "RBNode_elm_builtin" && left.d.a.$ === "Red") {
          var _v5 = left.a;
          var lK = left.b;
          var lV = left.c;
          var _v6 = left.d;
          var _v7 = _v6.a;
          var llK = _v6.b;
          var llV = _v6.c;
          var llLeft = _v6.d;
          var llRight = _v6.e;
          var lRight = left.e;
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Red,
            lK,
            lV,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, llK, llV, llLeft, llRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, key, value, lRight, right)
          );
        } else {
          return A5($elm$core$Dict$RBNode_elm_builtin, color, key, value, left, right);
        }
      }
    }
  );
  var $elm$core$Basics$compare = _Utils_compare;
  var $elm$core$Dict$insertHelp = F3(
    function(key, value, dict) {
      if (dict.$ === "RBEmpty_elm_builtin") {
        return A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, key, value, $elm$core$Dict$RBEmpty_elm_builtin, $elm$core$Dict$RBEmpty_elm_builtin);
      } else {
        var nColor = dict.a;
        var nKey = dict.b;
        var nValue = dict.c;
        var nLeft = dict.d;
        var nRight = dict.e;
        var _v1 = A2($elm$core$Basics$compare, key, nKey);
        switch (_v1.$) {
          case "LT":
            return A5(
              $elm$core$Dict$balance,
              nColor,
              nKey,
              nValue,
              A3($elm$core$Dict$insertHelp, key, value, nLeft),
              nRight
            );
          case "EQ":
            return A5($elm$core$Dict$RBNode_elm_builtin, nColor, nKey, value, nLeft, nRight);
          default:
            return A5(
              $elm$core$Dict$balance,
              nColor,
              nKey,
              nValue,
              nLeft,
              A3($elm$core$Dict$insertHelp, key, value, nRight)
            );
        }
      }
    }
  );
  var $elm$core$Dict$insert = F3(
    function(key, value, dict) {
      var _v0 = A3($elm$core$Dict$insertHelp, key, value, dict);
      if (_v0.$ === "RBNode_elm_builtin" && _v0.a.$ === "Red") {
        var _v1 = _v0.a;
        var k = _v0.b;
        var v = _v0.c;
        var l = _v0.d;
        var r = _v0.e;
        return A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, k, v, l, r);
      } else {
        var x = _v0;
        return x;
      }
    }
  );
  var $elm$browser$Debugger$Main$cachedHistory = function(model) {
    var _v0 = model.state;
    if (_v0.$ === "Running") {
      return model.history;
    } else {
      var history2 = _v0.e;
      return history2;
    }
  };
  var $elm$virtual_dom$VirtualDom$node = function(tag) {
    return _VirtualDom_node(
      _VirtualDom_noScript(tag)
    );
  };
  var $elm$html$Html$node = $elm$virtual_dom$VirtualDom$node;
  var $elm$browser$Debugger$Main$DragEnd = { $: "DragEnd" };
  var $elm$browser$Debugger$Main$getDragStatus = function(layout) {
    if (layout.$ === "Horizontal") {
      var status = layout.a;
      return status;
    } else {
      var status = layout.a;
      return status;
    }
  };
  var $elm$browser$Debugger$Main$Drag = function(a) {
    return { $: "Drag", a };
  };
  var $elm$browser$Debugger$Main$DragInfo = F5(
    function(x, y, down, width, height) {
      return { down, height, width, x, y };
    }
  );
  var $elm$json$Json$Decode$field = _Json_decodeField;
  var $elm$json$Json$Decode$at = F2(
    function(fields, decoder) {
      return A3($elm$core$List$foldr, $elm$json$Json$Decode$field, decoder, fields);
    }
  );
  var $elm$json$Json$Decode$float = _Json_decodeFloat;
  var $elm$browser$Debugger$Main$decodeDimension = function(field) {
    return A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["currentTarget", "ownerDocument", "defaultView", field]
      ),
      $elm$json$Json$Decode$float
    );
  };
  var $elm$json$Json$Decode$int = _Json_decodeInt;
  var $elm$json$Json$Decode$map5 = _Json_map5;
  var $elm$browser$Debugger$Main$onMouseMove = A2(
    $elm$html$Html$Events$on,
    "mousemove",
    A2(
      $elm$json$Json$Decode$map,
      $elm$browser$Debugger$Main$Drag,
      A6(
        $elm$json$Json$Decode$map5,
        $elm$browser$Debugger$Main$DragInfo,
        A2($elm$json$Json$Decode$field, "pageX", $elm$json$Json$Decode$float),
        A2($elm$json$Json$Decode$field, "pageY", $elm$json$Json$Decode$float),
        A2(
          $elm$json$Json$Decode$field,
          "buttons",
          A2(
            $elm$json$Json$Decode$map,
            function(v) {
              return v === 1;
            },
            $elm$json$Json$Decode$int
          )
        ),
        $elm$browser$Debugger$Main$decodeDimension("innerWidth"),
        $elm$browser$Debugger$Main$decodeDimension("innerHeight")
      )
    )
  );
  var $elm$html$Html$Events$onMouseUp = function(msg) {
    return A2(
      $elm$html$Html$Events$on,
      "mouseup",
      $elm$json$Json$Decode$succeed(msg)
    );
  };
  var $elm$browser$Debugger$Main$toDragListeners = function(layout) {
    var _v0 = $elm$browser$Debugger$Main$getDragStatus(layout);
    if (_v0.$ === "Static") {
      return _List_Nil;
    } else {
      return _List_fromArray(
        [
          $elm$browser$Debugger$Main$onMouseMove,
          $elm$html$Html$Events$onMouseUp($elm$browser$Debugger$Main$DragEnd)
        ]
      );
    }
  };
  var $elm$browser$Debugger$Main$toFlexDirection = function(layout) {
    if (layout.$ === "Horizontal") {
      return "row";
    } else {
      return "column-reverse";
    }
  };
  var $elm$browser$Debugger$Main$DragStart = { $: "DragStart" };
  var $elm$html$Html$Events$onMouseDown = function(msg) {
    return A2(
      $elm$html$Html$Events$on,
      "mousedown",
      $elm$json$Json$Decode$succeed(msg)
    );
  };
  var $elm$browser$Debugger$Main$toPercent = function(fraction) {
    return $elm$core$String$fromFloat(100 * fraction) + "%";
  };
  var $elm$browser$Debugger$Main$viewDragZone = function(layout) {
    if (layout.$ === "Horizontal") {
      var x = layout.b;
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "position", "absolute"),
            A2($elm$html$Html$Attributes$style, "top", "0"),
            A2(
              $elm$html$Html$Attributes$style,
              "left",
              $elm$browser$Debugger$Main$toPercent(x)
            ),
            A2($elm$html$Html$Attributes$style, "margin-left", "-5px"),
            A2($elm$html$Html$Attributes$style, "width", "10px"),
            A2($elm$html$Html$Attributes$style, "height", "100%"),
            A2($elm$html$Html$Attributes$style, "cursor", "col-resize"),
            $elm$html$Html$Events$onMouseDown($elm$browser$Debugger$Main$DragStart)
          ]
        ),
        _List_Nil
      );
    } else {
      var y = layout.c;
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "position", "absolute"),
            A2(
              $elm$html$Html$Attributes$style,
              "top",
              $elm$browser$Debugger$Main$toPercent(y)
            ),
            A2($elm$html$Html$Attributes$style, "left", "0"),
            A2($elm$html$Html$Attributes$style, "margin-top", "-5px"),
            A2($elm$html$Html$Attributes$style, "width", "100%"),
            A2($elm$html$Html$Attributes$style, "height", "10px"),
            A2($elm$html$Html$Attributes$style, "cursor", "row-resize"),
            $elm$html$Html$Events$onMouseDown($elm$browser$Debugger$Main$DragStart)
          ]
        ),
        _List_Nil
      );
    }
  };
  var $elm$browser$Debugger$Main$TweakExpandoModel = function(a) {
    return { $: "TweakExpandoModel", a };
  };
  var $elm$browser$Debugger$Main$TweakExpandoMsg = function(a) {
    return { $: "TweakExpandoMsg", a };
  };
  var $elm$browser$Debugger$Main$toExpandoPercents = function(layout) {
    if (layout.$ === "Horizontal") {
      var x = layout.b;
      return _Utils_Tuple2(
        $elm$browser$Debugger$Main$toPercent(1 - x),
        "100%"
      );
    } else {
      var y = layout.c;
      return _Utils_Tuple2(
        "100%",
        $elm$browser$Debugger$Main$toPercent(y)
      );
    }
  };
  var $elm$browser$Debugger$Main$toMouseBlocker = function(layout) {
    var _v0 = $elm$browser$Debugger$Main$getDragStatus(layout);
    if (_v0.$ === "Static") {
      return "auto";
    } else {
      return "none";
    }
  };
  var $elm$browser$Debugger$Expando$Toggle = function(a) {
    return { $: "Toggle", a };
  };
  var $elm$browser$Debugger$Expando$blue = A2($elm$html$Html$Attributes$style, "color", "rgb(28, 0, 207)");
  var $elm$core$Basics$composeL = F3(
    function(g, f, x) {
      return g(
        f(x)
      );
    }
  );
  var $elm$core$List$head = function(list) {
    if (list.b) {
      var x = list.a;
      var xs = list.b;
      return $elm$core$Maybe$Just(x);
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $elm$browser$Debugger$Expando$leftPad = function(maybeKey) {
    if (maybeKey.$ === "Nothing") {
      return _List_Nil;
    } else {
      return _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "padding-left", "4ch")
        ]
      );
    }
  };
  var $elm$browser$Debugger$Expando$makeArrow = function(arrow) {
    return A2(
      $elm$html$Html$span,
      _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "color", "#777"),
          A2($elm$html$Html$Attributes$style, "padding-left", "2ch"),
          A2($elm$html$Html$Attributes$style, "width", "2ch"),
          A2($elm$html$Html$Attributes$style, "display", "inline-block")
        ]
      ),
      _List_fromArray(
        [
          $elm$html$Html$text(arrow)
        ]
      )
    );
  };
  var $elm$browser$Debugger$Expando$purple = A2($elm$html$Html$Attributes$style, "color", "rgb(136, 19, 145)");
  var $elm$browser$Debugger$Expando$lineStarter = F3(
    function(maybeKey, maybeIsClosed, description) {
      var arrow = (function() {
        if (maybeIsClosed.$ === "Nothing") {
          return $elm$browser$Debugger$Expando$makeArrow("");
        } else {
          if (maybeIsClosed.a) {
            return $elm$browser$Debugger$Expando$makeArrow("\u25B8");
          } else {
            return $elm$browser$Debugger$Expando$makeArrow("\u25BE");
          }
        }
      })();
      if (maybeKey.$ === "Nothing") {
        return A2($elm$core$List$cons, arrow, description);
      } else {
        var key = maybeKey.a;
        return A2(
          $elm$core$List$cons,
          arrow,
          A2(
            $elm$core$List$cons,
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [$elm$browser$Debugger$Expando$purple]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(key)
                ]
              )
            ),
            A2(
              $elm$core$List$cons,
              $elm$html$Html$text(" = "),
              description
            )
          )
        );
      }
    }
  );
  var $elm$core$Dict$get = F2(
    function(targetKey, dict) {
      get:
        while (true) {
          if (dict.$ === "RBEmpty_elm_builtin") {
            return $elm$core$Maybe$Nothing;
          } else {
            var key = dict.b;
            var value = dict.c;
            var left = dict.d;
            var right = dict.e;
            var _v1 = A2($elm$core$Basics$compare, targetKey, key);
            switch (_v1.$) {
              case "LT":
                var $temp$targetKey = targetKey, $temp$dict = left;
                targetKey = $temp$targetKey;
                dict = $temp$dict;
                continue get;
              case "EQ":
                return $elm$core$Maybe$Just(value);
              default:
                var $temp$targetKey = targetKey, $temp$dict = right;
                targetKey = $temp$targetKey;
                dict = $temp$dict;
                continue get;
            }
          }
        }
    }
  );
  var $elm$core$Maybe$withDefault = F2(
    function(_default, maybe) {
      if (maybe.$ === "Just") {
        var value = maybe.a;
        return value;
      } else {
        return _default;
      }
    }
  );
  var $elm$browser$Debugger$Expando$maximumItemsToView = F2(
    function(path, expando) {
      return A2(
        $elm$core$Maybe$withDefault,
        1,
        A2($elm$core$Dict$get, path, expando.viewMore)
      ) * 100;
    }
  );
  var $elm$core$Dict$member = F2(
    function(key, dict) {
      var _v0 = A2($elm$core$Dict$get, key, dict);
      if (_v0.$ === "Just") {
        return true;
      } else {
        return false;
      }
    }
  );
  var $elm$core$Set$member = F2(
    function(key, _v0) {
      var dict = _v0.a;
      return A2($elm$core$Dict$member, key, dict);
    }
  );
  var $elm$core$Basics$not = _Basics_not;
  var $elm$browser$Debugger$Expando$red = A2($elm$html$Html$Attributes$style, "color", "rgb(196, 26, 22)");
  var $elm$core$Tuple$second = function(_v0) {
    var y = _v0.b;
    return y;
  };
  var $elm$browser$Debugger$Expando$seqTypeToString = F2(
    function(n, seqType) {
      switch (seqType.$) {
        case "ListSeq":
          return "List(" + ($elm$core$String$fromInt(n) + ")");
        case "SetSeq":
          return "Set(" + ($elm$core$String$fromInt(n) + ")");
        default:
          return "Array(" + ($elm$core$String$fromInt(n) + ")");
      }
    }
  );
  var $elm$core$String$slice = _String_slice;
  var $elm$core$String$left = F2(
    function(n, string) {
      return n < 1 ? "" : A3($elm$core$String$slice, 0, n, string);
    }
  );
  var $elm$core$String$right = F2(
    function(n, string) {
      return n < 1 ? "" : A3(
        $elm$core$String$slice,
        -n,
        $elm$core$String$length(string),
        string
      );
    }
  );
  var $elm$browser$Debugger$Expando$elideMiddle = function(str) {
    return $elm$core$String$length(str) <= 18 ? str : A2($elm$core$String$left, 8, str) + ("..." + A2($elm$core$String$right, 8, str));
  };
  var $elm$core$Dict$isEmpty = function(dict) {
    if (dict.$ === "RBEmpty_elm_builtin") {
      return true;
    } else {
      return false;
    }
  };
  var $elm$browser$Debugger$Expando$viewExtraTinyRecord = F3(
    function(length, starter, entries) {
      if (!entries.b) {
        return _Utils_Tuple2(
          length + 1,
          _List_fromArray(
            [
              $elm$html$Html$text("}")
            ]
          )
        );
      } else {
        var field = entries.a;
        var rest = entries.b;
        var nextLength = length + $elm$core$String$length(field) + 1;
        if (nextLength > 18) {
          return _Utils_Tuple2(
            length + 2,
            _List_fromArray(
              [
                $elm$html$Html$text("\u2026}")
              ]
            )
          );
        } else {
          var _v1 = A3($elm$browser$Debugger$Expando$viewExtraTinyRecord, nextLength, ",", rest);
          var finalLength = _v1.a;
          var otherHtmls = _v1.b;
          return _Utils_Tuple2(
            finalLength,
            A2(
              $elm$core$List$cons,
              $elm$html$Html$text(starter),
              A2(
                $elm$core$List$cons,
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [$elm$browser$Debugger$Expando$purple]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(field)
                    ]
                  )
                ),
                otherHtmls
              )
            )
          );
        }
      }
    }
  );
  var $elm$browser$Debugger$Expando$viewTinyHelp = function(str) {
    return _Utils_Tuple2(
      $elm$core$String$length(str),
      _List_fromArray(
        [
          $elm$html$Html$text(str)
        ]
      )
    );
  };
  var $elm$browser$Debugger$Expando$viewExtraTiny = function(value) {
    var _v6 = _Debugger_init(value);
    if (_v6.$ === "Record") {
      var record = _v6.a;
      return A3(
        $elm$browser$Debugger$Expando$viewExtraTinyRecord,
        0,
        "{",
        $elm$core$Dict$keys(record)
      );
    } else {
      return $elm$browser$Debugger$Expando$viewTiny(value);
    }
  };
  var $elm$browser$Debugger$Expando$viewTiny = function(value) {
    var _v4 = _Debugger_init(value);
    switch (_v4.$) {
      case "S":
        var stringRep = _v4.a;
        var str = $elm$browser$Debugger$Expando$elideMiddle(stringRep);
        return _Utils_Tuple2(
          $elm$core$String$length(str),
          _List_fromArray(
            [
              A2(
                $elm$html$Html$span,
                _List_fromArray(
                  [$elm$browser$Debugger$Expando$red]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text(str)
                  ]
                )
              )
            ]
          )
        );
      case "Primitive":
        var stringRep = _v4.a;
        return _Utils_Tuple2(
          $elm$core$String$length(stringRep),
          _List_fromArray(
            [
              A2(
                $elm$html$Html$span,
                _List_fromArray(
                  [$elm$browser$Debugger$Expando$blue]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text(stringRep)
                  ]
                )
              )
            ]
          )
        );
      case "Sequence":
        var seqType = _v4.a;
        var valueList = _v4.b;
        return $elm$browser$Debugger$Expando$viewTinyHelp(
          A2(
            $elm$browser$Debugger$Expando$seqTypeToString,
            $elm$core$List$length(valueList),
            seqType
          )
        );
      case "Dictionary":
        var keyValuePairs = _v4.a;
        return $elm$browser$Debugger$Expando$viewTinyHelp(
          "Dict(" + ($elm$core$String$fromInt(
            $elm$core$List$length(keyValuePairs)
          ) + ")")
        );
      case "Record":
        var record = _v4.a;
        return $elm$browser$Debugger$Expando$viewTinyRecord(record);
      default:
        if (!_v4.b.b) {
          var maybeName = _v4.a;
          return $elm$browser$Debugger$Expando$viewTinyHelp(
            A2($elm$core$Maybe$withDefault, "Unit", maybeName)
          );
        } else {
          var maybeName = _v4.a;
          var valueList = _v4.b;
          return $elm$browser$Debugger$Expando$viewTinyHelp(
            (function() {
              if (maybeName.$ === "Nothing") {
                return "Tuple(" + ($elm$core$String$fromInt(
                  $elm$core$List$length(valueList)
                ) + ")");
              } else {
                var name = maybeName.a;
                return name + " \u2026";
              }
            })()
          );
        }
    }
  };
  var $elm$browser$Debugger$Expando$viewTinyRecord = function(record) {
    return $elm$core$Dict$isEmpty(record) ? _Utils_Tuple2(
      2,
      _List_fromArray(
        [
          $elm$html$Html$text("{}")
        ]
      )
    ) : A3(
      $elm$browser$Debugger$Expando$viewTinyRecordHelp,
      0,
      "{ ",
      $elm$core$Dict$toList(record)
    );
  };
  var $elm$browser$Debugger$Expando$viewTinyRecordHelp = F3(
    function(length, starter, entries) {
      if (!entries.b) {
        return _Utils_Tuple2(
          length + 2,
          _List_fromArray(
            [
              $elm$html$Html$text(" }")
            ]
          )
        );
      } else {
        var _v1 = entries.a;
        var field = _v1.a;
        var value = _v1.b;
        var rest = entries.b;
        var fieldLen = $elm$core$String$length(field);
        var _v2 = $elm$browser$Debugger$Expando$viewExtraTiny(value);
        var valueLen = _v2.a;
        var valueHtmls = _v2.b;
        var newLength = length + fieldLen + valueLen + 5;
        if (newLength > 60) {
          return _Utils_Tuple2(
            length + 4,
            _List_fromArray(
              [
                $elm$html$Html$text(", \u2026 }")
              ]
            )
          );
        } else {
          var _v3 = A3($elm$browser$Debugger$Expando$viewTinyRecordHelp, newLength, ", ", rest);
          var finalLength = _v3.a;
          var otherHtmls = _v3.b;
          return _Utils_Tuple2(
            finalLength,
            A2(
              $elm$core$List$cons,
              $elm$html$Html$text(starter),
              A2(
                $elm$core$List$cons,
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [$elm$browser$Debugger$Expando$purple]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(field)
                    ]
                  )
                ),
                A2(
                  $elm$core$List$cons,
                  $elm$html$Html$text(" = "),
                  A2(
                    $elm$core$List$cons,
                    A2($elm$html$Html$span, _List_Nil, valueHtmls),
                    otherHtmls
                  )
                )
              )
            )
          );
        }
      }
    }
  );
  var $elm$browser$Debugger$Expando$ViewMore = function(a) {
    return { $: "ViewMore", a };
  };
  var $elm$browser$Debugger$Expando$viewMoreButton = function(path) {
    return A2(
      $elm$html$Html$div,
      $elm$browser$Debugger$Expando$leftPad(
        $elm$core$List$head(path)
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            A2(
              $elm$core$List$cons,
              $elm$html$Html$Events$onClick(
                $elm$browser$Debugger$Expando$ViewMore(path)
              ),
              $elm$browser$Debugger$Expando$leftPad(
                $elm$core$Maybe$Just(_Utils_Tuple0)
              )
            ),
            _List_fromArray(
              [
                $elm$html$Html$text("View more")
              ]
            )
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Expando$view = F2(
    function(path, expando) {
      var maybeKey = $elm$core$List$head(path);
      var _v14 = _Debugger_init(expando.unexpanded);
      switch (_v14.$) {
        case "S":
          var stringRep = _v14.a;
          return A2(
            $elm$html$Html$div,
            $elm$browser$Debugger$Expando$leftPad(maybeKey),
            A3(
              $elm$browser$Debugger$Expando$lineStarter,
              maybeKey,
              $elm$core$Maybe$Nothing,
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$span,
                    _List_fromArray(
                      [$elm$browser$Debugger$Expando$red]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text(stringRep)
                      ]
                    )
                  )
                ]
              )
            )
          );
        case "Primitive":
          var stringRep = _v14.a;
          return A2(
            $elm$html$Html$div,
            $elm$browser$Debugger$Expando$leftPad(maybeKey),
            A3(
              $elm$browser$Debugger$Expando$lineStarter,
              maybeKey,
              $elm$core$Maybe$Nothing,
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$span,
                    _List_fromArray(
                      [$elm$browser$Debugger$Expando$blue]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text(stringRep)
                      ]
                    )
                  )
                ]
              )
            )
          );
        case "Sequence":
          var seqType = _v14.a;
          var valueList = _v14.b;
          return A4($elm$browser$Debugger$Expando$viewSequence, path, seqType, expando, valueList);
        case "Dictionary":
          var keyValuePairs = _v14.a;
          return A3($elm$browser$Debugger$Expando$viewDictionary, path, expando, keyValuePairs);
        case "Record":
          var valueDict = _v14.a;
          return A3($elm$browser$Debugger$Expando$viewRecord, path, expando, valueDict);
        default:
          var maybeName = _v14.a;
          var valueList = _v14.b;
          return A4($elm$browser$Debugger$Expando$viewConstructor, path, maybeName, expando, valueList);
      }
    }
  );
  var $elm$browser$Debugger$Expando$viewConstructor = F4(
    function(path, maybeName, expando, valueList) {
      var tinyArgs = A2(
        $elm$core$List$map,
        A2($elm$core$Basics$composeL, $elm$core$Tuple$second, $elm$browser$Debugger$Expando$viewExtraTiny),
        valueList
      );
      var maybeKey = $elm$core$List$head(path);
      var isClosed = !A2($elm$core$Set$member, path, expando.expanded);
      var description = (function() {
        var _v9 = _Utils_Tuple2(maybeName, tinyArgs);
        if (_v9.a.$ === "Nothing") {
          if (!_v9.b.b) {
            var _v10 = _v9.a;
            return _List_fromArray(
              [
                $elm$html$Html$text("()")
              ]
            );
          } else {
            var _v11 = _v9.a;
            var _v12 = _v9.b;
            var x = _v12.a;
            var xs = _v12.b;
            return A2(
              $elm$core$List$cons,
              $elm$html$Html$text("( "),
              A2(
                $elm$core$List$cons,
                A2($elm$html$Html$span, _List_Nil, x),
                A3(
                  $elm$core$List$foldr,
                  F2(
                    function(args, rest) {
                      return A2(
                        $elm$core$List$cons,
                        $elm$html$Html$text(", "),
                        A2(
                          $elm$core$List$cons,
                          A2($elm$html$Html$span, _List_Nil, args),
                          rest
                        )
                      );
                    }
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(" )")
                    ]
                  ),
                  xs
                )
              )
            );
          }
        } else {
          if (!_v9.b.b) {
            var name = _v9.a.a;
            return _List_fromArray(
              [
                $elm$html$Html$text(name)
              ]
            );
          } else {
            var name = _v9.a.a;
            var _v13 = _v9.b;
            var x = _v13.a;
            var xs = _v13.b;
            return A2(
              $elm$core$List$cons,
              $elm$html$Html$text(name + " "),
              A2(
                $elm$core$List$cons,
                A2($elm$html$Html$span, _List_Nil, x),
                A3(
                  $elm$core$List$foldr,
                  F2(
                    function(args, rest) {
                      return A2(
                        $elm$core$List$cons,
                        $elm$html$Html$text(" "),
                        A2(
                          $elm$core$List$cons,
                          A2($elm$html$Html$span, _List_Nil, args),
                          rest
                        )
                      );
                    }
                  ),
                  _List_Nil,
                  xs
                )
              )
            );
          }
        }
      })();
      var _v6 = (function() {
        if (!valueList.b) {
          return _Utils_Tuple2(
            $elm$core$Maybe$Nothing,
            A2($elm$html$Html$div, _List_Nil, _List_Nil)
          );
        } else {
          if (!valueList.b.b) {
            var entry = valueList.a;
            var _v8 = _Debugger_init(entry);
            switch (_v8.$) {
              case "S":
                return _Utils_Tuple2(
                  $elm$core$Maybe$Nothing,
                  A2($elm$html$Html$div, _List_Nil, _List_Nil)
                );
              case "Primitive":
                return _Utils_Tuple2(
                  $elm$core$Maybe$Nothing,
                  A2($elm$html$Html$div, _List_Nil, _List_Nil)
                );
              case "Sequence":
                var subValueList = _v8.b;
                return _Utils_Tuple2(
                  $elm$core$Maybe$Just(isClosed),
                  isClosed ? A2($elm$html$Html$div, _List_Nil, _List_Nil) : A3(
                    $elm$browser$Debugger$Expando$viewSequenceOpen,
                    A2($elm$core$List$cons, "0", path),
                    expando,
                    subValueList
                  )
                );
              case "Dictionary":
                var keyValuePairs = _v8.a;
                return _Utils_Tuple2(
                  $elm$core$Maybe$Just(isClosed),
                  isClosed ? A2($elm$html$Html$div, _List_Nil, _List_Nil) : A3(
                    $elm$browser$Debugger$Expando$viewDictionaryOpen,
                    A2($elm$core$List$cons, "0", path),
                    expando,
                    keyValuePairs
                  )
                );
              case "Record":
                var record = _v8.a;
                return _Utils_Tuple2(
                  $elm$core$Maybe$Just(isClosed),
                  isClosed ? A2($elm$html$Html$div, _List_Nil, _List_Nil) : A3(
                    $elm$browser$Debugger$Expando$viewRecordOpen,
                    A2($elm$core$List$cons, "0", path),
                    expando,
                    record
                  )
                );
              default:
                var subValueList = _v8.b;
                return _Utils_Tuple2(
                  $elm$core$Maybe$Just(isClosed),
                  isClosed ? A2($elm$html$Html$div, _List_Nil, _List_Nil) : A3(
                    $elm$browser$Debugger$Expando$viewConstructorOpen,
                    A2($elm$core$List$cons, "0", path),
                    expando,
                    subValueList
                  )
                );
            }
          } else {
            return _Utils_Tuple2(
              $elm$core$Maybe$Just(isClosed),
              isClosed ? A2($elm$html$Html$div, _List_Nil, _List_Nil) : A3(
                $elm$browser$Debugger$Expando$viewConstructorOpen,
                A2($elm$core$List$cons, "0", path),
                expando,
                valueList
              )
            );
          }
        }
      })();
      var maybeIsClosed = _v6.a;
      var openHtml = _v6.b;
      return A2(
        $elm$html$Html$div,
        $elm$browser$Debugger$Expando$leftPad(maybeKey),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Events$onClick(
                    $elm$browser$Debugger$Expando$Toggle(path)
                  )
                ]
              ),
              A3($elm$browser$Debugger$Expando$lineStarter, maybeKey, maybeIsClosed, description)
            ),
            openHtml
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewConstructorEntry = F4(
    function(path, expando, index, value) {
      return A2(
        $elm$browser$Debugger$Expando$view,
        A2(
          $elm$core$List$cons,
          $elm$core$String$fromInt(index),
          path
        ),
        _Utils_update(
          expando,
          { unexpanded: value }
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewConstructorOpen = F3(
    function(path, expando, valueList) {
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        A2(
          $elm$core$List$indexedMap,
          A2($elm$browser$Debugger$Expando$viewConstructorEntry, path, expando),
          valueList
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewDictionary = F3(
    function(path, expando, keyValuePairs) {
      var starter = "Dict(" + ($elm$core$String$fromInt(
        $elm$core$List$length(keyValuePairs)
      ) + ")");
      var maybeKey = $elm$core$List$head(path);
      var isClosed = !A2($elm$core$Set$member, path, expando.expanded);
      return A2(
        $elm$html$Html$div,
        $elm$browser$Debugger$Expando$leftPad(maybeKey),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Events$onClick(
                    $elm$browser$Debugger$Expando$Toggle(path)
                  )
                ]
              ),
              A3(
                $elm$browser$Debugger$Expando$lineStarter,
                maybeKey,
                $elm$core$Maybe$Just(isClosed),
                _List_fromArray(
                  [
                    $elm$html$Html$text(starter)
                  ]
                )
              )
            ),
            isClosed ? $elm$html$Html$text("") : A3($elm$browser$Debugger$Expando$viewDictionaryOpen, path, expando, keyValuePairs)
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewDictionaryEntry = F3(
    function(path, expando, _v4) {
      var key = _v4.a;
      var value = _v4.b;
      var _v5 = _Debugger_init(key);
      switch (_v5.$) {
        case "S":
          var stringRep = _v5.a;
          return A2(
            $elm$browser$Debugger$Expando$view,
            A2($elm$core$List$cons, stringRep, path),
            _Utils_update(
              expando,
              { unexpanded: value }
            )
          );
        case "Primitive":
          var stringRep = _v5.a;
          return A2(
            $elm$browser$Debugger$Expando$view,
            A2($elm$core$List$cons, stringRep, path),
            _Utils_update(
              expando,
              { unexpanded: value }
            )
          );
        default:
          return A2(
            $elm$html$Html$div,
            _List_Nil,
            _List_fromArray(
              [
                A2(
                  $elm$browser$Debugger$Expando$view,
                  A2($elm$core$List$cons, "key", path),
                  _Utils_update(
                    expando,
                    { unexpanded: key }
                  )
                ),
                A2(
                  $elm$browser$Debugger$Expando$view,
                  A2($elm$core$List$cons, "value", path),
                  _Utils_update(
                    expando,
                    { unexpanded: value }
                  )
                )
              ]
            )
          );
      }
    }
  );
  var $elm$browser$Debugger$Expando$viewDictionaryOpen = F3(
    function(path, expando, keyValuePairs) {
      var max = A2($elm$browser$Debugger$Expando$maximumItemsToView, path, expando);
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        A6($elm$browser$Debugger$Expando$viewDictionaryOpenHelp, path, expando, 0, max, keyValuePairs, _List_Nil)
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewDictionaryOpenHelp = F6(
    function(path, expando, index, max, keyValuePairs, acc) {
      viewDictionaryOpenHelp:
        while (true) {
          if (_Utils_cmp(index, max) < 0) {
            if (!keyValuePairs.b) {
              return $elm$core$List$reverse(acc);
            } else {
              var keyValue = keyValuePairs.a;
              var rest = keyValuePairs.b;
              var $temp$path = path, $temp$expando = expando, $temp$index = index + 1, $temp$max = max, $temp$keyValuePairs = rest, $temp$acc = A2(
                $elm$core$List$cons,
                A3(
                  $elm$browser$Debugger$Expando$viewDictionaryEntry,
                  A2(
                    $elm$core$List$cons,
                    $elm$core$String$fromInt(index),
                    path
                  ),
                  expando,
                  keyValue
                ),
                acc
              );
              path = $temp$path;
              expando = $temp$expando;
              index = $temp$index;
              max = $temp$max;
              keyValuePairs = $temp$keyValuePairs;
              acc = $temp$acc;
              continue viewDictionaryOpenHelp;
            }
          } else {
            return $elm$core$List$reverse(
              A2(
                $elm$core$List$cons,
                $elm$browser$Debugger$Expando$viewMoreButton(path),
                acc
              )
            );
          }
        }
    }
  );
  var $elm$browser$Debugger$Expando$viewRecord = F3(
    function(path, expando, record) {
      var maybeKey = $elm$core$List$head(path);
      var isClosed = !A2($elm$core$Set$member, path, expando.expanded);
      var _v2 = isClosed ? _Utils_Tuple3(
        $elm$browser$Debugger$Expando$viewTinyRecord(record).b,
        $elm$html$Html$text(""),
        $elm$html$Html$text("")
      ) : _Utils_Tuple3(
        _List_fromArray(
          [
            $elm$html$Html$text("{")
          ]
        ),
        A3($elm$browser$Debugger$Expando$viewRecordOpen, path, expando, record),
        A2(
          $elm$html$Html$div,
          $elm$browser$Debugger$Expando$leftPad(
            $elm$core$Maybe$Just(_Utils_Tuple0)
          ),
          _List_fromArray(
            [
              $elm$html$Html$text("}")
            ]
          )
        )
      );
      var start = _v2.a;
      var middle = _v2.b;
      var end = _v2.c;
      return A2(
        $elm$html$Html$div,
        $elm$browser$Debugger$Expando$leftPad(maybeKey),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Events$onClick(
                    $elm$browser$Debugger$Expando$Toggle(path)
                  )
                ]
              ),
              A3(
                $elm$browser$Debugger$Expando$lineStarter,
                maybeKey,
                $elm$core$Maybe$Just(isClosed),
                start
              )
            ),
            middle,
            end
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewRecordEntry = F3(
    function(path, expando, _v1) {
      var field = _v1.a;
      var value = _v1.b;
      return A2(
        $elm$browser$Debugger$Expando$view,
        A2($elm$core$List$cons, field, path),
        _Utils_update(
          expando,
          { unexpanded: value }
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewRecordOpen = F3(
    function(path, expando, record) {
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        A2(
          $elm$core$List$map,
          A2($elm$browser$Debugger$Expando$viewRecordEntry, path, expando),
          $elm$core$Dict$toList(record)
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewSequence = F4(
    function(path, seqType, expando, valueList) {
      var starter = A2(
        $elm$browser$Debugger$Expando$seqTypeToString,
        $elm$core$List$length(valueList),
        seqType
      );
      var maybeKey = $elm$core$List$head(path);
      var isClosed = !A2($elm$core$Set$member, path, expando.expanded);
      return A2(
        $elm$html$Html$div,
        $elm$browser$Debugger$Expando$leftPad(maybeKey),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Events$onClick(
                    $elm$browser$Debugger$Expando$Toggle(path)
                  )
                ]
              ),
              A3(
                $elm$browser$Debugger$Expando$lineStarter,
                maybeKey,
                $elm$core$Maybe$Just(isClosed),
                _List_fromArray(
                  [
                    $elm$html$Html$text(starter)
                  ]
                )
              )
            ),
            isClosed ? $elm$html$Html$text("") : A3($elm$browser$Debugger$Expando$viewSequenceOpen, path, expando, valueList)
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewSequenceOpen = F3(
    function(path, expando, values) {
      var max = A2($elm$browser$Debugger$Expando$maximumItemsToView, path, expando);
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        A6($elm$browser$Debugger$Expando$viewSequenceOpenHelp, path, expando, 0, max, values, _List_Nil)
      );
    }
  );
  var $elm$browser$Debugger$Expando$viewSequenceOpenHelp = F6(
    function(path, expando, index, max, values, acc) {
      viewSequenceOpenHelp:
        while (true) {
          if (_Utils_cmp(index, max) < 0) {
            if (!values.b) {
              return $elm$core$List$reverse(acc);
            } else {
              var value = values.a;
              var rest = values.b;
              var $temp$path = path, $temp$expando = expando, $temp$index = index + 1, $temp$max = max, $temp$values = rest, $temp$acc = A2(
                $elm$core$List$cons,
                A4($elm$browser$Debugger$Expando$viewConstructorEntry, path, expando, index, value),
                acc
              );
              path = $temp$path;
              expando = $temp$expando;
              index = $temp$index;
              max = $temp$max;
              values = $temp$values;
              acc = $temp$acc;
              continue viewSequenceOpenHelp;
            }
          } else {
            return $elm$core$List$reverse(
              A2(
                $elm$core$List$cons,
                $elm$browser$Debugger$Expando$viewMoreButton(path),
                acc
              )
            );
          }
        }
    }
  );
  var $elm$browser$Debugger$Main$viewExpando = F3(
    function(expandoMsg, expandoModel, layout) {
      var block = $elm$browser$Debugger$Main$toMouseBlocker(layout);
      var _v0 = $elm$browser$Debugger$Main$toExpandoPercents(layout);
      var w = _v0.a;
      var h = _v0.b;
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "display", "block"),
            A2($elm$html$Html$Attributes$style, "width", "calc(" + (w + " - 4em)")),
            A2($elm$html$Html$Attributes$style, "height", "calc(" + (h + " - 4em)")),
            A2($elm$html$Html$Attributes$style, "padding", "2em"),
            A2($elm$html$Html$Attributes$style, "margin", "0"),
            A2($elm$html$Html$Attributes$style, "overflow", "auto"),
            A2($elm$html$Html$Attributes$style, "pointer-events", block),
            A2($elm$html$Html$Attributes$style, "-webkit-user-select", block),
            A2($elm$html$Html$Attributes$style, "-moz-user-select", block),
            A2($elm$html$Html$Attributes$style, "-ms-user-select", block),
            A2($elm$html$Html$Attributes$style, "user-select", block)
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  A2($elm$html$Html$Attributes$style, "color", "#ccc"),
                  A2($elm$html$Html$Attributes$style, "padding", "0 0 1em 0")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text("-- MESSAGE")
                ]
              )
            ),
            A2(
              $elm$html$Html$map,
              $elm$browser$Debugger$Main$TweakExpandoMsg,
              A2($elm$browser$Debugger$Expando$view, _List_Nil, expandoMsg)
            ),
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  A2($elm$html$Html$Attributes$style, "color", "#ccc"),
                  A2($elm$html$Html$Attributes$style, "padding", "1em 0")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text("-- MODEL")
                ]
              )
            ),
            A2(
              $elm$html$Html$map,
              $elm$browser$Debugger$Main$TweakExpandoModel,
              A2($elm$browser$Debugger$Expando$view, _List_Nil, expandoModel)
            )
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$Jump = function(a) {
    return { $: "Jump", a };
  };
  var $elm$virtual_dom$VirtualDom$lazy = _VirtualDom_lazy;
  var $elm$html$Html$Lazy$lazy = $elm$virtual_dom$VirtualDom$lazy;
  var $elm$browser$Debugger$Main$toHistoryPercents = function(layout) {
    if (layout.$ === "Horizontal") {
      var x = layout.b;
      return _Utils_Tuple2(
        $elm$browser$Debugger$Main$toPercent(x),
        "100%"
      );
    } else {
      var y = layout.c;
      return _Utils_Tuple2(
        "100%",
        $elm$browser$Debugger$Main$toPercent(1 - y)
      );
    }
  };
  var $elm$virtual_dom$VirtualDom$lazy3 = _VirtualDom_lazy3;
  var $elm$html$Html$Lazy$lazy3 = $elm$virtual_dom$VirtualDom$lazy3;
  var $elm$html$Html$Attributes$class = _VirtualDom_attribute("class");
  var $elm$browser$Debugger$History$idForMessageIndex = function(index) {
    return "msg-" + $elm$core$String$fromInt(index);
  };
  var $elm$html$Html$Attributes$title = _VirtualDom_attribute("title");
  var $elm$browser$Debugger$History$viewMessage = F3(
    function(currentIndex, index, msg) {
      var messageName = _Debugger_messageToString(msg);
      var className = _Utils_eq(currentIndex, index) ? "elm-debugger-entry elm-debugger-entry-selected" : "elm-debugger-entry";
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$id(
              $elm$browser$Debugger$History$idForMessageIndex(index)
            ),
            $elm$html$Html$Attributes$class(className),
            $elm$html$Html$Events$onClick(index)
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$title(messageName),
                  $elm$html$Html$Attributes$class("elm-debugger-entry-content")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(messageName)
                ]
              )
            ),
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$class("elm-debugger-entry-index")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(
                    $elm$core$String$fromInt(index)
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$History$consMsg = F3(
    function(currentIndex, msg, _v0) {
      var index = _v0.a;
      var rest = _v0.b;
      return _Utils_Tuple2(
        index + 1,
        A2(
          $elm$core$List$cons,
          _Utils_Tuple2(
            $elm$core$String$fromInt(index),
            A4($elm$html$Html$Lazy$lazy3, $elm$browser$Debugger$History$viewMessage, currentIndex, index, msg)
          ),
          rest
        )
      );
    }
  );
  var $elm$core$Array$length = function(_v0) {
    var len = _v0.a;
    return len;
  };
  var $elm$virtual_dom$VirtualDom$keyedNode = function(tag) {
    return _VirtualDom_keyedNode(
      _VirtualDom_noScript(tag)
    );
  };
  var $elm$html$Html$Keyed$node = $elm$virtual_dom$VirtualDom$keyedNode;
  var $elm$browser$Debugger$History$maxSnapshotSize = 31;
  var $elm$browser$Debugger$History$showMoreButton = function(numMessages) {
    var nextIndex = numMessages - 1 - $elm$browser$Debugger$History$maxSnapshotSize * 2;
    var labelText = "View more messages";
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$class("elm-debugger-entry"),
          $elm$html$Html$Events$onClick(nextIndex)
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$span,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$title(labelText),
                $elm$html$Html$Attributes$class("elm-debugger-entry-content")
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(labelText)
              ]
            )
          ),
          A2(
            $elm$html$Html$span,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$class("elm-debugger-entry-index")
              ]
            ),
            _List_Nil
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$History$styles = A3(
    $elm$html$Html$node,
    "style",
    _List_Nil,
    _List_fromArray(
      [
        $elm$html$Html$text("\n\n.elm-debugger-entry {\n  cursor: pointer;\n  width: 100%;\n  box-sizing: border-box;\n  padding: 8px;\n}\n\n.elm-debugger-entry:hover {\n  background-color: rgb(41, 41, 41);\n}\n\n.elm-debugger-entry-selected, .elm-debugger-entry-selected:hover {\n  background-color: rgb(10, 10, 10);\n}\n\n.elm-debugger-entry-content {\n  width: calc(100% - 40px);\n  padding: 0 5px;\n  box-sizing: border-box;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  display: inline-block;\n}\n\n.elm-debugger-entry-index {\n  color: #666;\n  width: 40px;\n  text-align: right;\n  display: block;\n  float: right;\n}\n\n")
      ]
    )
  );
  var $elm$browser$Debugger$History$viewSnapshot = F3(
    function(selectedIndex, index, _v0) {
      var messages = _v0.messages;
      return A3(
        $elm$html$Html$Keyed$node,
        "div",
        _List_Nil,
        A3(
          $elm$core$Array$foldr,
          $elm$browser$Debugger$History$consMsg(selectedIndex),
          _Utils_Tuple2(index, _List_Nil),
          messages
        ).b
      );
    }
  );
  var $elm$browser$Debugger$History$consSnapshot = F3(
    function(selectedIndex, snapshot, _v0) {
      var index = _v0.a;
      var rest = _v0.b;
      var nextIndex = index + $elm$core$Array$length(snapshot.messages);
      var selectedIndexHelp = _Utils_cmp(nextIndex, selectedIndex) > 0 && _Utils_cmp(selectedIndex, index) > -1 ? selectedIndex : -1;
      return _Utils_Tuple2(
        nextIndex,
        A2(
          $elm$core$List$cons,
          A4($elm$html$Html$Lazy$lazy3, $elm$browser$Debugger$History$viewSnapshot, selectedIndexHelp, index, snapshot),
          rest
        )
      );
    }
  );
  var $elm$core$Elm$JsArray$foldl = _JsArray_foldl;
  var $elm$core$Array$foldl = F3(
    function(func, baseCase, _v0) {
      var tree = _v0.c;
      var tail = _v0.d;
      var helper = F2(
        function(node, acc) {
          if (node.$ === "SubTree") {
            var subTree = node.a;
            return A3($elm$core$Elm$JsArray$foldl, helper, acc, subTree);
          } else {
            var values = node.a;
            return A3($elm$core$Elm$JsArray$foldl, func, acc, values);
          }
        }
      );
      return A3(
        $elm$core$Elm$JsArray$foldl,
        func,
        A3($elm$core$Elm$JsArray$foldl, helper, baseCase, tree),
        tail
      );
    }
  );
  var $elm$browser$Debugger$History$viewAllSnapshots = F3(
    function(selectedIndex, startIndex, snapshots) {
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        A3(
          $elm$core$Array$foldl,
          $elm$browser$Debugger$History$consSnapshot(selectedIndex),
          _Utils_Tuple2(startIndex, _List_Nil),
          snapshots
        ).b
      );
    }
  );
  var $elm$core$Array$fromListHelp = F3(
    function(list, nodeList, nodeListSize) {
      fromListHelp:
        while (true) {
          var _v0 = A2($elm$core$Elm$JsArray$initializeFromList, $elm$core$Array$branchFactor, list);
          var jsArray = _v0.a;
          var remainingItems = _v0.b;
          if (_Utils_cmp(
            $elm$core$Elm$JsArray$length(jsArray),
            $elm$core$Array$branchFactor
          ) < 0) {
            return A2(
              $elm$core$Array$builderToArray,
              true,
              { nodeList, nodeListSize, tail: jsArray }
            );
          } else {
            var $temp$list = remainingItems, $temp$nodeList = A2(
              $elm$core$List$cons,
              $elm$core$Array$Leaf(jsArray),
              nodeList
            ), $temp$nodeListSize = nodeListSize + 1;
            list = $temp$list;
            nodeList = $temp$nodeList;
            nodeListSize = $temp$nodeListSize;
            continue fromListHelp;
          }
        }
    }
  );
  var $elm$core$Array$fromList = function(list) {
    if (!list.b) {
      return $elm$core$Array$empty;
    } else {
      return A3($elm$core$Array$fromListHelp, list, _List_Nil, 0);
    }
  };
  var $elm$core$Array$bitMask = 4294967295 >>> 32 - $elm$core$Array$shiftStep;
  var $elm$core$Elm$JsArray$unsafeGet = _JsArray_unsafeGet;
  var $elm$core$Array$getHelp = F3(
    function(shift, index, tree) {
      getHelp:
        while (true) {
          var pos = $elm$core$Array$bitMask & index >>> shift;
          var _v0 = A2($elm$core$Elm$JsArray$unsafeGet, pos, tree);
          if (_v0.$ === "SubTree") {
            var subTree = _v0.a;
            var $temp$shift = shift - $elm$core$Array$shiftStep, $temp$index = index, $temp$tree = subTree;
            shift = $temp$shift;
            index = $temp$index;
            tree = $temp$tree;
            continue getHelp;
          } else {
            var values = _v0.a;
            return A2($elm$core$Elm$JsArray$unsafeGet, $elm$core$Array$bitMask & index, values);
          }
        }
    }
  );
  var $elm$core$Array$tailIndex = function(len) {
    return len >>> 5 << 5;
  };
  var $elm$core$Array$get = F2(
    function(index, _v0) {
      var len = _v0.a;
      var startShift = _v0.b;
      var tree = _v0.c;
      var tail = _v0.d;
      return index < 0 || _Utils_cmp(index, len) > -1 ? $elm$core$Maybe$Nothing : _Utils_cmp(
        index,
        $elm$core$Array$tailIndex(len)
      ) > -1 ? $elm$core$Maybe$Just(
        A2($elm$core$Elm$JsArray$unsafeGet, $elm$core$Array$bitMask & index, tail)
      ) : $elm$core$Maybe$Just(
        A3($elm$core$Array$getHelp, startShift, index, tree)
      );
    }
  );
  var $elm$core$Elm$JsArray$appendN = _JsArray_appendN;
  var $elm$core$Elm$JsArray$slice = _JsArray_slice;
  var $elm$core$Array$appendHelpBuilder = F2(
    function(tail, builder) {
      var tailLen = $elm$core$Elm$JsArray$length(tail);
      var notAppended = $elm$core$Array$branchFactor - $elm$core$Elm$JsArray$length(builder.tail) - tailLen;
      var appended = A3($elm$core$Elm$JsArray$appendN, $elm$core$Array$branchFactor, builder.tail, tail);
      return notAppended < 0 ? {
        nodeList: A2(
          $elm$core$List$cons,
          $elm$core$Array$Leaf(appended),
          builder.nodeList
        ),
        nodeListSize: builder.nodeListSize + 1,
        tail: A3($elm$core$Elm$JsArray$slice, notAppended, tailLen, tail)
      } : !notAppended ? {
        nodeList: A2(
          $elm$core$List$cons,
          $elm$core$Array$Leaf(appended),
          builder.nodeList
        ),
        nodeListSize: builder.nodeListSize + 1,
        tail: $elm$core$Elm$JsArray$empty
      } : { nodeList: builder.nodeList, nodeListSize: builder.nodeListSize, tail: appended };
    }
  );
  var $elm$core$List$drop = F2(
    function(n, list) {
      drop:
        while (true) {
          if (n <= 0) {
            return list;
          } else {
            if (!list.b) {
              return list;
            } else {
              var x = list.a;
              var xs = list.b;
              var $temp$n = n - 1, $temp$list = xs;
              n = $temp$n;
              list = $temp$list;
              continue drop;
            }
          }
        }
    }
  );
  var $elm$core$Array$sliceLeft = F2(
    function(from, array) {
      var len = array.a;
      var tree = array.c;
      var tail = array.d;
      if (!from) {
        return array;
      } else {
        if (_Utils_cmp(
          from,
          $elm$core$Array$tailIndex(len)
        ) > -1) {
          return A4(
            $elm$core$Array$Array_elm_builtin,
            len - from,
            $elm$core$Array$shiftStep,
            $elm$core$Elm$JsArray$empty,
            A3(
              $elm$core$Elm$JsArray$slice,
              from - $elm$core$Array$tailIndex(len),
              $elm$core$Elm$JsArray$length(tail),
              tail
            )
          );
        } else {
          var skipNodes = from / $elm$core$Array$branchFactor | 0;
          var helper = F2(
            function(node, acc) {
              if (node.$ === "SubTree") {
                var subTree = node.a;
                return A3($elm$core$Elm$JsArray$foldr, helper, acc, subTree);
              } else {
                var leaf = node.a;
                return A2($elm$core$List$cons, leaf, acc);
              }
            }
          );
          var leafNodes = A3(
            $elm$core$Elm$JsArray$foldr,
            helper,
            _List_fromArray(
              [tail]
            ),
            tree
          );
          var nodesToInsert = A2($elm$core$List$drop, skipNodes, leafNodes);
          if (!nodesToInsert.b) {
            return $elm$core$Array$empty;
          } else {
            var head = nodesToInsert.a;
            var rest = nodesToInsert.b;
            var firstSlice = from - skipNodes * $elm$core$Array$branchFactor;
            var initialBuilder = {
              nodeList: _List_Nil,
              nodeListSize: 0,
              tail: A3(
                $elm$core$Elm$JsArray$slice,
                firstSlice,
                $elm$core$Elm$JsArray$length(head),
                head
              )
            };
            return A2(
              $elm$core$Array$builderToArray,
              true,
              A3($elm$core$List$foldl, $elm$core$Array$appendHelpBuilder, initialBuilder, rest)
            );
          }
        }
      }
    }
  );
  var $elm$core$Array$fetchNewTail = F4(
    function(shift, end, treeEnd, tree) {
      fetchNewTail:
        while (true) {
          var pos = $elm$core$Array$bitMask & treeEnd >>> shift;
          var _v0 = A2($elm$core$Elm$JsArray$unsafeGet, pos, tree);
          if (_v0.$ === "SubTree") {
            var sub = _v0.a;
            var $temp$shift = shift - $elm$core$Array$shiftStep, $temp$end = end, $temp$treeEnd = treeEnd, $temp$tree = sub;
            shift = $temp$shift;
            end = $temp$end;
            treeEnd = $temp$treeEnd;
            tree = $temp$tree;
            continue fetchNewTail;
          } else {
            var values = _v0.a;
            return A3($elm$core$Elm$JsArray$slice, 0, $elm$core$Array$bitMask & end, values);
          }
        }
    }
  );
  var $elm$core$Array$hoistTree = F3(
    function(oldShift, newShift, tree) {
      hoistTree:
        while (true) {
          if (_Utils_cmp(oldShift, newShift) < 1 || !$elm$core$Elm$JsArray$length(tree)) {
            return tree;
          } else {
            var _v0 = A2($elm$core$Elm$JsArray$unsafeGet, 0, tree);
            if (_v0.$ === "SubTree") {
              var sub = _v0.a;
              var $temp$oldShift = oldShift - $elm$core$Array$shiftStep, $temp$newShift = newShift, $temp$tree = sub;
              oldShift = $temp$oldShift;
              newShift = $temp$newShift;
              tree = $temp$tree;
              continue hoistTree;
            } else {
              return tree;
            }
          }
        }
    }
  );
  var $elm$core$Elm$JsArray$unsafeSet = _JsArray_unsafeSet;
  var $elm$core$Array$sliceTree = F3(
    function(shift, endIdx, tree) {
      var lastPos = $elm$core$Array$bitMask & endIdx >>> shift;
      var _v0 = A2($elm$core$Elm$JsArray$unsafeGet, lastPos, tree);
      if (_v0.$ === "SubTree") {
        var sub = _v0.a;
        var newSub = A3($elm$core$Array$sliceTree, shift - $elm$core$Array$shiftStep, endIdx, sub);
        return !$elm$core$Elm$JsArray$length(newSub) ? A3($elm$core$Elm$JsArray$slice, 0, lastPos, tree) : A3(
          $elm$core$Elm$JsArray$unsafeSet,
          lastPos,
          $elm$core$Array$SubTree(newSub),
          A3($elm$core$Elm$JsArray$slice, 0, lastPos + 1, tree)
        );
      } else {
        return A3($elm$core$Elm$JsArray$slice, 0, lastPos, tree);
      }
    }
  );
  var $elm$core$Array$sliceRight = F2(
    function(end, array) {
      var len = array.a;
      var startShift = array.b;
      var tree = array.c;
      var tail = array.d;
      if (_Utils_eq(end, len)) {
        return array;
      } else {
        if (_Utils_cmp(
          end,
          $elm$core$Array$tailIndex(len)
        ) > -1) {
          return A4(
            $elm$core$Array$Array_elm_builtin,
            end,
            startShift,
            tree,
            A3($elm$core$Elm$JsArray$slice, 0, $elm$core$Array$bitMask & end, tail)
          );
        } else {
          var endIdx = $elm$core$Array$tailIndex(end);
          var depth = $elm$core$Basics$floor(
            A2(
              $elm$core$Basics$logBase,
              $elm$core$Array$branchFactor,
              A2($elm$core$Basics$max, 1, endIdx - 1)
            )
          );
          var newShift = A2($elm$core$Basics$max, 5, depth * $elm$core$Array$shiftStep);
          return A4(
            $elm$core$Array$Array_elm_builtin,
            end,
            newShift,
            A3(
              $elm$core$Array$hoistTree,
              startShift,
              newShift,
              A3($elm$core$Array$sliceTree, startShift, endIdx, tree)
            ),
            A4($elm$core$Array$fetchNewTail, startShift, end, endIdx, tree)
          );
        }
      }
    }
  );
  var $elm$core$Array$translateIndex = F2(
    function(index, _v0) {
      var len = _v0.a;
      var posIndex = index < 0 ? len + index : index;
      return posIndex < 0 ? 0 : _Utils_cmp(posIndex, len) > 0 ? len : posIndex;
    }
  );
  var $elm$core$Array$slice = F3(
    function(from, to, array) {
      var correctTo = A2($elm$core$Array$translateIndex, to, array);
      var correctFrom = A2($elm$core$Array$translateIndex, from, array);
      return _Utils_cmp(correctFrom, correctTo) > 0 ? $elm$core$Array$empty : A2(
        $elm$core$Array$sliceLeft,
        correctFrom,
        A2($elm$core$Array$sliceRight, correctTo, array)
      );
    }
  );
  var $elm$browser$Debugger$History$viewRecentSnapshots = F3(
    function(selectedIndex, recentMessagesNum, snapshots) {
      var messagesToFill = $elm$browser$Debugger$History$maxSnapshotSize - recentMessagesNum;
      var arrayLength = $elm$core$Array$length(snapshots);
      var snapshotsToRender = (function() {
        var _v0 = _Utils_Tuple2(
          A2($elm$core$Array$get, arrayLength - 2, snapshots),
          A2($elm$core$Array$get, arrayLength - 1, snapshots)
        );
        if (_v0.a.$ === "Just" && _v0.b.$ === "Just") {
          var fillerSnapshot = _v0.a.a;
          var recentSnapshot = _v0.b.a;
          return $elm$core$Array$fromList(
            _List_fromArray(
              [
                {
                  messages: A3($elm$core$Array$slice, 0, messagesToFill, fillerSnapshot.messages),
                  model: fillerSnapshot.model
                },
                recentSnapshot
              ]
            )
          );
        } else {
          return snapshots;
        }
      })();
      var startingIndex = arrayLength * $elm$browser$Debugger$History$maxSnapshotSize - $elm$browser$Debugger$History$maxSnapshotSize - messagesToFill;
      return A3($elm$browser$Debugger$History$viewAllSnapshots, selectedIndex, startingIndex, snapshotsToRender);
    }
  );
  var $elm$browser$Debugger$History$view = F2(
    function(maybeIndex, _v0) {
      var snapshots = _v0.snapshots;
      var recent = _v0.recent;
      var numMessages = _v0.numMessages;
      var recentMessageStartIndex = numMessages - recent.numMessages;
      var index = A2($elm$core$Maybe$withDefault, -1, maybeIndex);
      var newStuff = A3(
        $elm$html$Html$Keyed$node,
        "div",
        _List_Nil,
        A3(
          $elm$core$List$foldr,
          $elm$browser$Debugger$History$consMsg(index),
          _Utils_Tuple2(recentMessageStartIndex, _List_Nil),
          recent.messages
        ).b
      );
      var onlyRenderRecentMessages = !_Utils_eq(index, -1) || $elm$core$Array$length(snapshots) < 2;
      var oldStuff = onlyRenderRecentMessages ? A4($elm$html$Html$Lazy$lazy3, $elm$browser$Debugger$History$viewAllSnapshots, index, 0, snapshots) : A4($elm$html$Html$Lazy$lazy3, $elm$browser$Debugger$History$viewRecentSnapshots, index, recent.numMessages, snapshots);
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$id("elm-debugger-sidebar"),
            A2($elm$html$Html$Attributes$style, "width", "100%"),
            A2($elm$html$Html$Attributes$style, "overflow-y", "auto"),
            A2($elm$html$Html$Attributes$style, "height", "calc(100% - 72px)")
          ]
        ),
        A2(
          $elm$core$List$cons,
          $elm$browser$Debugger$History$styles,
          A2(
            $elm$core$List$cons,
            newStuff,
            A2(
              $elm$core$List$cons,
              oldStuff,
              onlyRenderRecentMessages ? _List_Nil : _List_fromArray(
                [
                  $elm$browser$Debugger$History$showMoreButton(numMessages)
                ]
              )
            )
          )
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$SwapLayout = { $: "SwapLayout" };
  var $elm$browser$Debugger$Main$toHistoryIcon = function(layout) {
    if (layout.$ === "Horizontal") {
      return "M13 1a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3h-10a3 3 0 0 1-3-3v-8a3 3 0 0 1 3-3z M13 3h-10a1 1 0 0 0-1 1v5h12v-5a1 1 0 0 0-1-1z M14 10h-12v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1z";
    } else {
      return "M0 4a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3h-10a3 3 0 0 1-3-3z M2 4v8a1 1 0 0 0 1 1h2v-10h-2a1 1 0 0 0-1 1z M6 3v10h7a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1z";
    }
  };
  var $elm$browser$Debugger$Main$icon = function(path) {
    return A4(
      $elm$virtual_dom$VirtualDom$nodeNS,
      "http://www.w3.org/2000/svg",
      "svg",
      _List_fromArray(
        [
          A2($elm$virtual_dom$VirtualDom$attribute, "viewBox", "0 0 16 16"),
          A2($elm$virtual_dom$VirtualDom$attribute, "xmlns", "http://www.w3.org/2000/svg"),
          A2($elm$virtual_dom$VirtualDom$attribute, "fill", "currentColor"),
          A2($elm$virtual_dom$VirtualDom$attribute, "width", "16px"),
          A2($elm$virtual_dom$VirtualDom$attribute, "height", "16px")
        ]
      ),
      _List_fromArray(
        [
          A4(
            $elm$virtual_dom$VirtualDom$nodeNS,
            "http://www.w3.org/2000/svg",
            "path",
            _List_fromArray(
              [
                A2($elm$virtual_dom$VirtualDom$attribute, "d", path)
              ]
            ),
            _List_Nil
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Main$viewHistoryButton = F3(
    function(label, msg, path) {
      return A2(
        $elm$html$Html$button,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "display", "flex"),
            A2($elm$html$Html$Attributes$style, "flex-direction", "row"),
            A2($elm$html$Html$Attributes$style, "align-items", "center"),
            A2($elm$html$Html$Attributes$style, "background", "none"),
            A2($elm$html$Html$Attributes$style, "border", "none"),
            A2($elm$html$Html$Attributes$style, "color", "inherit"),
            A2($elm$html$Html$Attributes$style, "cursor", "pointer"),
            $elm$html$Html$Events$onClick(msg)
          ]
        ),
        _List_fromArray(
          [
            $elm$browser$Debugger$Main$icon(path),
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [
                  A2($elm$html$Html$Attributes$style, "padding-left", "6px")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(label)
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$viewHistoryOptions = function(layout) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "width", "100%"),
          A2($elm$html$Html$Attributes$style, "height", "36px"),
          A2($elm$html$Html$Attributes$style, "display", "flex"),
          A2($elm$html$Html$Attributes$style, "flex-direction", "row"),
          A2($elm$html$Html$Attributes$style, "align-items", "center"),
          A2($elm$html$Html$Attributes$style, "justify-content", "space-between"),
          A2($elm$html$Html$Attributes$style, "background-color", "rgb(50, 50, 50)")
        ]
      ),
      _List_fromArray(
        [
          A3(
            $elm$browser$Debugger$Main$viewHistoryButton,
            "Swap Layout",
            $elm$browser$Debugger$Main$SwapLayout,
            $elm$browser$Debugger$Main$toHistoryIcon(layout)
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                A2($elm$html$Html$Attributes$style, "display", "flex"),
                A2($elm$html$Html$Attributes$style, "flex-direction", "row"),
                A2($elm$html$Html$Attributes$style, "align-items", "center"),
                A2($elm$html$Html$Attributes$style, "justify-content", "space-between")
              ]
            ),
            _List_fromArray(
              [
                A3($elm$browser$Debugger$Main$viewHistoryButton, "Import", $elm$browser$Debugger$Main$Import, "M5 1a1 1 0 0 1 0 2h-2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1a1 1 0 0 1 2 0a3 3 0 0 1-3 3h-10a3 3 0 0 1-3-3v-8a3 3 0 0 1 3-3z M10 2a1 1 0 0 0 -2 0v6a1 1 0 0 0 1 1h6a1 1 0 0 0 0-2h-3.586l4.293-4.293a1 1 0 0 0-1.414-1.414l-4.293 4.293z"),
                A3($elm$browser$Debugger$Main$viewHistoryButton, "Export", $elm$browser$Debugger$Main$Export, "M5 1a1 1 0 0 1 0 2h-2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1 a1 1 0 0 1 2 0a3 3 0 0 1-3 3h-10a3 3 0 0 1-3-3v-8a3 3 0 0 1 3-3z M9 3a1 1 0 1 1 0-2h6a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0v-3.586l-5.293 5.293 a1 1 0 0 1-1.414-1.414l5.293 -5.293z")
              ]
            )
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Main$SliderJump = function(a) {
    return { $: "SliderJump", a };
  };
  var $elm$core$Basics$composeR = F3(
    function(f, g, x) {
      return g(
        f(x)
      );
    }
  );
  var $elm$html$Html$input = _VirtualDom_node("input");
  var $elm$browser$Debugger$Main$isPlaying = function(maybeIndex) {
    if (maybeIndex.$ === "Nothing") {
      return true;
    } else {
      return false;
    }
  };
  var $elm$html$Html$Attributes$max = _VirtualDom_attribute("max");
  var $elm$html$Html$Attributes$min = _VirtualDom_attribute("min");
  var $elm$html$Html$Events$alwaysStop = function(x) {
    return _Utils_Tuple2(x, true);
  };
  var $elm$virtual_dom$VirtualDom$MayStopPropagation = function(a) {
    return { $: "MayStopPropagation", a };
  };
  var $elm$html$Html$Events$stopPropagationOn = F2(
    function(event, decoder) {
      return A2(
        $elm$virtual_dom$VirtualDom$on,
        event,
        $elm$virtual_dom$VirtualDom$MayStopPropagation(decoder)
      );
    }
  );
  var $elm$json$Json$Decode$string = _Json_decodeString;
  var $elm$html$Html$Events$targetValue = A2(
    $elm$json$Json$Decode$at,
    _List_fromArray(
      ["target", "value"]
    ),
    $elm$json$Json$Decode$string
  );
  var $elm$html$Html$Events$onInput = function(tagger) {
    return A2(
      $elm$html$Html$Events$stopPropagationOn,
      "input",
      A2(
        $elm$json$Json$Decode$map,
        $elm$html$Html$Events$alwaysStop,
        A2($elm$json$Json$Decode$map, tagger, $elm$html$Html$Events$targetValue)
      )
    );
  };
  var $elm$core$String$toInt = _String_toInt;
  var $elm$html$Html$Attributes$type_ = _VirtualDom_attribute("type");
  var $elm$json$Json$Encode$string = _Json_wrap;
  var $elm$html$Html$Attributes$value = function(string) {
    return A2(
      _VirtualDom_property,
      "value",
      $elm$json$Json$Encode$string(string)
    );
  };
  var $elm$browser$Debugger$Main$Pause = { $: "Pause" };
  var $elm$browser$Debugger$Main$viewPlayButton = function(playing) {
    return A2(
      $elm$html$Html$button,
      _List_fromArray(
        [
          A2($elm$html$Html$Attributes$style, "background", "#1293D8"),
          A2($elm$html$Html$Attributes$style, "border", "none"),
          A2($elm$html$Html$Attributes$style, "color", "white"),
          A2($elm$html$Html$Attributes$style, "cursor", "pointer"),
          A2($elm$html$Html$Attributes$style, "width", "36px"),
          A2($elm$html$Html$Attributes$style, "height", "36px"),
          $elm$html$Html$Events$onClick(
            playing ? $elm$browser$Debugger$Main$Pause : $elm$browser$Debugger$Main$Resume
          )
        ]
      ),
      _List_fromArray(
        [
          playing ? $elm$browser$Debugger$Main$icon("M2 2h4v12h-4v-12z M10 2h4v12h-4v-12z") : $elm$browser$Debugger$Main$icon("M2 2l12 7l-12 7z")
        ]
      )
    );
  };
  var $elm$browser$Debugger$Main$viewHistorySlider = F2(
    function(history2, maybeIndex) {
      var lastIndex = $elm$browser$Debugger$History$size(history2) - 1;
      var selectedIndex = A2($elm$core$Maybe$withDefault, lastIndex, maybeIndex);
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "display", "flex"),
            A2($elm$html$Html$Attributes$style, "flex-direction", "row"),
            A2($elm$html$Html$Attributes$style, "align-items", "center"),
            A2($elm$html$Html$Attributes$style, "width", "100%"),
            A2($elm$html$Html$Attributes$style, "height", "36px"),
            A2($elm$html$Html$Attributes$style, "background-color", "rgb(50, 50, 50)")
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$Lazy$lazy,
              $elm$browser$Debugger$Main$viewPlayButton,
              $elm$browser$Debugger$Main$isPlaying(maybeIndex)
            ),
            A2(
              $elm$html$Html$input,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$type_("range"),
                  A2($elm$html$Html$Attributes$style, "width", "calc(100% - 56px)"),
                  A2($elm$html$Html$Attributes$style, "height", "36px"),
                  A2($elm$html$Html$Attributes$style, "margin", "0 10px"),
                  $elm$html$Html$Attributes$min("0"),
                  $elm$html$Html$Attributes$max(
                    $elm$core$String$fromInt(lastIndex)
                  ),
                  $elm$html$Html$Attributes$value(
                    $elm$core$String$fromInt(selectedIndex)
                  ),
                  $elm$html$Html$Events$onInput(
                    A2(
                      $elm$core$Basics$composeR,
                      $elm$core$String$toInt,
                      A2(
                        $elm$core$Basics$composeR,
                        $elm$core$Maybe$withDefault(lastIndex),
                        $elm$browser$Debugger$Main$SliderJump
                      )
                    )
                  )
                ]
              ),
              _List_Nil
            )
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$viewHistory = F3(
    function(maybeIndex, history2, layout) {
      var block = $elm$browser$Debugger$Main$toMouseBlocker(layout);
      var _v0 = $elm$browser$Debugger$Main$toHistoryPercents(layout);
      var w = _v0.a;
      var h = _v0.b;
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "width", w),
            A2($elm$html$Html$Attributes$style, "height", h),
            A2($elm$html$Html$Attributes$style, "display", "flex"),
            A2($elm$html$Html$Attributes$style, "flex-direction", "column"),
            A2($elm$html$Html$Attributes$style, "color", "#DDDDDD"),
            A2($elm$html$Html$Attributes$style, "background-color", "rgb(61, 61, 61)"),
            A2($elm$html$Html$Attributes$style, "pointer-events", block),
            A2($elm$html$Html$Attributes$style, "user-select", block)
          ]
        ),
        _List_fromArray(
          [
            A2($elm$browser$Debugger$Main$viewHistorySlider, history2, maybeIndex),
            A2(
              $elm$html$Html$map,
              $elm$browser$Debugger$Main$Jump,
              A2($elm$browser$Debugger$History$view, maybeIndex, history2)
            ),
            A2($elm$html$Html$Lazy$lazy, $elm$browser$Debugger$Main$viewHistoryOptions, layout)
          ]
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$popoutView = function(model) {
    var maybeIndex = (function() {
      var _v0 = model.state;
      if (_v0.$ === "Running") {
        return $elm$core$Maybe$Nothing;
      } else {
        var index = _v0.a;
        return $elm$core$Maybe$Just(index);
      }
    })();
    var historyToRender = $elm$browser$Debugger$Main$cachedHistory(model);
    return A3(
      $elm$html$Html$node,
      "body",
      _Utils_ap(
        $elm$browser$Debugger$Main$toDragListeners(model.layout),
        _List_fromArray(
          [
            A2($elm$html$Html$Attributes$style, "margin", "0"),
            A2($elm$html$Html$Attributes$style, "padding", "0"),
            A2($elm$html$Html$Attributes$style, "width", "100%"),
            A2($elm$html$Html$Attributes$style, "height", "100%"),
            A2($elm$html$Html$Attributes$style, "font-family", "monospace"),
            A2($elm$html$Html$Attributes$style, "display", "flex"),
            A2($elm$html$Html$Attributes$style, "background-color", "white"),
            A2(
              $elm$html$Html$Attributes$style,
              "flex-direction",
              $elm$browser$Debugger$Main$toFlexDirection(model.layout)
            )
          ]
        )
      ),
      _List_fromArray(
        [
          A3($elm$browser$Debugger$Main$viewHistory, maybeIndex, historyToRender, model.layout),
          $elm$browser$Debugger$Main$viewDragZone(model.layout),
          A3($elm$browser$Debugger$Main$viewExpando, model.expandoMsg, model.expandoModel, model.layout)
        ]
      )
    );
  };
  var $elm$browser$Debugger$Overlay$BlockAll = { $: "BlockAll" };
  var $elm$browser$Debugger$Overlay$toBlockerType = F2(
    function(isPaused, state) {
      switch (state.$) {
        case "None":
          return isPaused ? $elm$browser$Debugger$Overlay$BlockAll : $elm$browser$Debugger$Overlay$BlockNone;
        case "BadMetadata":
          return $elm$browser$Debugger$Overlay$BlockMost;
        case "BadImport":
          return $elm$browser$Debugger$Overlay$BlockMost;
        default:
          return $elm$browser$Debugger$Overlay$BlockMost;
      }
    }
  );
  var $elm$browser$Debugger$Main$toBlockerType = function(model) {
    return A2(
      $elm$browser$Debugger$Overlay$toBlockerType,
      $elm$browser$Debugger$Main$isPaused(model.state),
      model.overlay
    );
  };
  var $elm$browser$Debugger$Main$Horizontal = F3(
    function(a, b, c) {
      return { $: "Horizontal", a, b, c };
    }
  );
  var $elm$browser$Debugger$Main$Running = function(a) {
    return { $: "Running", a };
  };
  var $elm$browser$Debugger$Main$Static = { $: "Static" };
  var $elm$browser$Debugger$Metadata$Error = F2(
    function(message, problems) {
      return { message, problems };
    }
  );
  var $elm$json$Json$Decode$decodeValue = _Json_run;
  var $elm$browser$Debugger$Metadata$Metadata = F2(
    function(versions, types) {
      return { types, versions };
    }
  );
  var $elm$browser$Debugger$Metadata$Types = F3(
    function(message, aliases, unions) {
      return { aliases, message, unions };
    }
  );
  var $elm$browser$Debugger$Metadata$Alias = F2(
    function(args, tipe) {
      return { args, tipe };
    }
  );
  var $elm$json$Json$Decode$list = _Json_decodeList;
  var $elm$browser$Debugger$Metadata$decodeAlias = A3(
    $elm$json$Json$Decode$map2,
    $elm$browser$Debugger$Metadata$Alias,
    A2(
      $elm$json$Json$Decode$field,
      "args",
      $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
    ),
    A2($elm$json$Json$Decode$field, "type", $elm$json$Json$Decode$string)
  );
  var $elm$browser$Debugger$Metadata$Union = F2(
    function(args, tags) {
      return { args, tags };
    }
  );
  var $elm$core$Dict$fromList = function(assocs) {
    return A3(
      $elm$core$List$foldl,
      F2(
        function(_v0, dict) {
          var key = _v0.a;
          var value = _v0.b;
          return A3($elm$core$Dict$insert, key, value, dict);
        }
      ),
      $elm$core$Dict$empty,
      assocs
    );
  };
  var $elm$json$Json$Decode$keyValuePairs = _Json_decodeKeyValuePairs;
  var $elm$json$Json$Decode$dict = function(decoder) {
    return A2(
      $elm$json$Json$Decode$map,
      $elm$core$Dict$fromList,
      $elm$json$Json$Decode$keyValuePairs(decoder)
    );
  };
  var $elm$browser$Debugger$Metadata$decodeUnion = A3(
    $elm$json$Json$Decode$map2,
    $elm$browser$Debugger$Metadata$Union,
    A2(
      $elm$json$Json$Decode$field,
      "args",
      $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
    ),
    A2(
      $elm$json$Json$Decode$field,
      "tags",
      $elm$json$Json$Decode$dict(
        $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
      )
    )
  );
  var $elm$json$Json$Decode$map3 = _Json_map3;
  var $elm$browser$Debugger$Metadata$decodeTypes = A4(
    $elm$json$Json$Decode$map3,
    $elm$browser$Debugger$Metadata$Types,
    A2($elm$json$Json$Decode$field, "message", $elm$json$Json$Decode$string),
    A2(
      $elm$json$Json$Decode$field,
      "aliases",
      $elm$json$Json$Decode$dict($elm$browser$Debugger$Metadata$decodeAlias)
    ),
    A2(
      $elm$json$Json$Decode$field,
      "unions",
      $elm$json$Json$Decode$dict($elm$browser$Debugger$Metadata$decodeUnion)
    )
  );
  var $elm$browser$Debugger$Metadata$Versions = function(elm) {
    return { elm };
  };
  var $elm$browser$Debugger$Metadata$decodeVersions = A2(
    $elm$json$Json$Decode$map,
    $elm$browser$Debugger$Metadata$Versions,
    A2($elm$json$Json$Decode$field, "elm", $elm$json$Json$Decode$string)
  );
  var $elm$browser$Debugger$Metadata$decoder = A3(
    $elm$json$Json$Decode$map2,
    $elm$browser$Debugger$Metadata$Metadata,
    A2($elm$json$Json$Decode$field, "versions", $elm$browser$Debugger$Metadata$decodeVersions),
    A2($elm$json$Json$Decode$field, "types", $elm$browser$Debugger$Metadata$decodeTypes)
  );
  var $elm$browser$Debugger$Metadata$ProblemType = F2(
    function(name, problems) {
      return { name, problems };
    }
  );
  var $elm$core$List$maybeCons = F3(
    function(f, mx, xs) {
      var _v0 = f(mx);
      if (_v0.$ === "Just") {
        var x = _v0.a;
        return A2($elm$core$List$cons, x, xs);
      } else {
        return xs;
      }
    }
  );
  var $elm$core$List$filterMap = F2(
    function(f, xs) {
      return A3(
        $elm$core$List$foldr,
        $elm$core$List$maybeCons(f),
        _List_Nil,
        xs
      );
    }
  );
  var $elm$core$String$contains = _String_contains;
  var $elm$browser$Debugger$Metadata$hasProblem = F2(
    function(tipe, _v0) {
      var problem = _v0.a;
      var token = _v0.b;
      return A2($elm$core$String$contains, token, tipe) ? $elm$core$Maybe$Just(problem) : $elm$core$Maybe$Nothing;
    }
  );
  var $elm$browser$Debugger$Metadata$Decoder = { $: "Decoder" };
  var $elm$browser$Debugger$Metadata$Function = { $: "Function" };
  var $elm$browser$Debugger$Metadata$Process = { $: "Process" };
  var $elm$browser$Debugger$Metadata$Program = { $: "Program" };
  var $elm$browser$Debugger$Metadata$Request = { $: "Request" };
  var $elm$browser$Debugger$Metadata$Socket = { $: "Socket" };
  var $elm$browser$Debugger$Metadata$Task = { $: "Task" };
  var $elm$browser$Debugger$Metadata$VirtualDom = { $: "VirtualDom" };
  var $elm$browser$Debugger$Metadata$problemTable = _List_fromArray(
    [
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Function, "->"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Decoder, "Json.Decode.Decoder"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Task, "Task.Task"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Process, "Process.Id"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Socket, "WebSocket.LowLevel.WebSocket"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Request, "Http.Request"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$Program, "Platform.Program"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$VirtualDom, "VirtualDom.Node"),
      _Utils_Tuple2($elm$browser$Debugger$Metadata$VirtualDom, "VirtualDom.Attribute")
    ]
  );
  var $elm$browser$Debugger$Metadata$findProblems = function(tipe) {
    return A2(
      $elm$core$List$filterMap,
      $elm$browser$Debugger$Metadata$hasProblem(tipe),
      $elm$browser$Debugger$Metadata$problemTable
    );
  };
  var $elm$browser$Debugger$Metadata$collectBadAliases = F3(
    function(name, _v0, list) {
      var tipe = _v0.tipe;
      var _v1 = $elm$browser$Debugger$Metadata$findProblems(tipe);
      if (!_v1.b) {
        return list;
      } else {
        var problems = _v1;
        return A2(
          $elm$core$List$cons,
          A2($elm$browser$Debugger$Metadata$ProblemType, name, problems),
          list
        );
      }
    }
  );
  var $elm$core$List$append = F2(
    function(xs, ys) {
      if (!ys.b) {
        return xs;
      } else {
        return A3($elm$core$List$foldr, $elm$core$List$cons, ys, xs);
      }
    }
  );
  var $elm$core$List$concat = function(lists) {
    return A3($elm$core$List$foldr, $elm$core$List$append, _List_Nil, lists);
  };
  var $elm$core$List$concatMap = F2(
    function(f, list) {
      return $elm$core$List$concat(
        A2($elm$core$List$map, f, list)
      );
    }
  );
  var $elm$core$Dict$values = function(dict) {
    return A3(
      $elm$core$Dict$foldr,
      F3(
        function(key, value, valueList) {
          return A2($elm$core$List$cons, value, valueList);
        }
      ),
      _List_Nil,
      dict
    );
  };
  var $elm$browser$Debugger$Metadata$collectBadUnions = F3(
    function(name, _v0, list) {
      var tags = _v0.tags;
      var _v1 = A2(
        $elm$core$List$concatMap,
        $elm$browser$Debugger$Metadata$findProblems,
        $elm$core$List$concat(
          $elm$core$Dict$values(tags)
        )
      );
      if (!_v1.b) {
        return list;
      } else {
        var problems = _v1;
        return A2(
          $elm$core$List$cons,
          A2($elm$browser$Debugger$Metadata$ProblemType, name, problems),
          list
        );
      }
    }
  );
  var $elm$core$Dict$foldl = F3(
    function(func, acc, dict) {
      foldl:
        while (true) {
          if (dict.$ === "RBEmpty_elm_builtin") {
            return acc;
          } else {
            var key = dict.b;
            var value = dict.c;
            var left = dict.d;
            var right = dict.e;
            var $temp$func = func, $temp$acc = A3(
              func,
              key,
              value,
              A3($elm$core$Dict$foldl, func, acc, left)
            ), $temp$dict = right;
            func = $temp$func;
            acc = $temp$acc;
            dict = $temp$dict;
            continue foldl;
          }
        }
    }
  );
  var $elm$browser$Debugger$Metadata$isPortable = function(_v0) {
    var types = _v0.types;
    var badAliases = A3($elm$core$Dict$foldl, $elm$browser$Debugger$Metadata$collectBadAliases, _List_Nil, types.aliases);
    var _v1 = A3($elm$core$Dict$foldl, $elm$browser$Debugger$Metadata$collectBadUnions, badAliases, types.unions);
    if (!_v1.b) {
      return $elm$core$Maybe$Nothing;
    } else {
      var problems = _v1;
      return $elm$core$Maybe$Just(
        A2($elm$browser$Debugger$Metadata$Error, types.message, problems)
      );
    }
  };
  var $elm$browser$Debugger$Metadata$decode = function(value) {
    var _v0 = A2($elm$json$Json$Decode$decodeValue, $elm$browser$Debugger$Metadata$decoder, value);
    if (_v0.$ === "Err") {
      return $elm$core$Result$Err(
        A2($elm$browser$Debugger$Metadata$Error, "The compiler is generating bad metadata. This is a compiler bug!", _List_Nil)
      );
    } else {
      var metadata = _v0.a;
      var _v1 = $elm$browser$Debugger$Metadata$isPortable(metadata);
      if (_v1.$ === "Nothing") {
        return $elm$core$Result$Ok(metadata);
      } else {
        var error = _v1.a;
        return $elm$core$Result$Err(error);
      }
    }
  };
  var $elm$browser$Debugger$History$History = F3(
    function(snapshots, recent, numMessages) {
      return { numMessages, recent, snapshots };
    }
  );
  var $elm$browser$Debugger$History$RecentHistory = F3(
    function(model, messages, numMessages) {
      return { messages, model, numMessages };
    }
  );
  var $elm$browser$Debugger$History$empty = function(model) {
    return A3(
      $elm$browser$Debugger$History$History,
      $elm$core$Array$empty,
      A3($elm$browser$Debugger$History$RecentHistory, model, _List_Nil, 0),
      0
    );
  };
  var $elm$core$Basics$identity = function(x) {
    return x;
  };
  var $elm$core$Set$Set_elm_builtin = function(a) {
    return { $: "Set_elm_builtin", a };
  };
  var $elm$core$Dict$singleton = F2(
    function(key, value) {
      return A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, key, value, $elm$core$Dict$RBEmpty_elm_builtin, $elm$core$Dict$RBEmpty_elm_builtin);
    }
  );
  var $elm$core$Set$singleton = function(key) {
    return $elm$core$Set$Set_elm_builtin(
      A2($elm$core$Dict$singleton, key, _Utils_Tuple0)
    );
  };
  var $elm$browser$Debugger$Expando$init = function(value) {
    return {
      expanded: $elm$core$Set$singleton(_List_Nil),
      unexpanded: _Debugger_toUnexpanded(value),
      viewMore: $elm$core$Dict$empty
    };
  };
  var $elm$core$Platform$Cmd$map = _Platform_map;
  var $elm$browser$Debugger$Overlay$None = { $: "None" };
  var $elm$browser$Debugger$Overlay$none = $elm$browser$Debugger$Overlay$None;
  var $elm$browser$Debugger$Main$wrapInit = F4(
    function(metadata, popout, init, flags) {
      var _v0 = init(flags);
      var userModel = _v0.a;
      var userCommands = _v0.b;
      return _Utils_Tuple2(
        {
          expandoModel: $elm$browser$Debugger$Expando$init(userModel),
          expandoMsg: $elm$browser$Debugger$Expando$init(_Utils_Tuple0),
          history: $elm$browser$Debugger$History$empty(userModel),
          layout: A3($elm$browser$Debugger$Main$Horizontal, $elm$browser$Debugger$Main$Static, 0.3, 0.5),
          metadata: $elm$browser$Debugger$Metadata$decode(metadata),
          overlay: $elm$browser$Debugger$Overlay$none,
          popout,
          state: $elm$browser$Debugger$Main$Running(userModel)
        },
        A2($elm$core$Platform$Cmd$map, $elm$browser$Debugger$Main$UserMsg, userCommands)
      );
    }
  );
  var $elm$browser$Debugger$Main$getLatestModel = function(state) {
    if (state.$ === "Running") {
      var model = state.a;
      return model;
    } else {
      var model = state.c;
      return model;
    }
  };
  var $elm$core$Platform$Sub$map = _Platform_map;
  var $elm$browser$Debugger$Main$wrapSubs = F2(
    function(subscriptions, model) {
      return A2(
        $elm$core$Platform$Sub$map,
        $elm$browser$Debugger$Main$UserMsg,
        subscriptions(
          $elm$browser$Debugger$Main$getLatestModel(model.state)
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$Moving = { $: "Moving" };
  var $elm$browser$Debugger$Main$Paused = F5(
    function(a, b, c, d, e) {
      return { $: "Paused", a, b, c, d, e };
    }
  );
  var $elm$browser$Debugger$History$Snapshot = F2(
    function(model, messages) {
      return { messages, model };
    }
  );
  var $elm$browser$Debugger$History$addRecent = F3(
    function(msg, newModel, _v0) {
      var model = _v0.model;
      var messages = _v0.messages;
      var numMessages = _v0.numMessages;
      return _Utils_eq(numMessages, $elm$browser$Debugger$History$maxSnapshotSize) ? _Utils_Tuple2(
        $elm$core$Maybe$Just(
          A2(
            $elm$browser$Debugger$History$Snapshot,
            model,
            $elm$core$Array$fromList(messages)
          )
        ),
        A3(
          $elm$browser$Debugger$History$RecentHistory,
          newModel,
          _List_fromArray(
            [msg]
          ),
          1
        )
      ) : _Utils_Tuple2(
        $elm$core$Maybe$Nothing,
        A3(
          $elm$browser$Debugger$History$RecentHistory,
          model,
          A2($elm$core$List$cons, msg, messages),
          numMessages + 1
        )
      );
    }
  );
  var $elm$core$Elm$JsArray$push = _JsArray_push;
  var $elm$core$Elm$JsArray$singleton = _JsArray_singleton;
  var $elm$core$Array$insertTailInTree = F4(
    function(shift, index, tail, tree) {
      var pos = $elm$core$Array$bitMask & index >>> shift;
      if (_Utils_cmp(
        pos,
        $elm$core$Elm$JsArray$length(tree)
      ) > -1) {
        if (shift === 5) {
          return A2(
            $elm$core$Elm$JsArray$push,
            $elm$core$Array$Leaf(tail),
            tree
          );
        } else {
          var newSub = $elm$core$Array$SubTree(
            A4($elm$core$Array$insertTailInTree, shift - $elm$core$Array$shiftStep, index, tail, $elm$core$Elm$JsArray$empty)
          );
          return A2($elm$core$Elm$JsArray$push, newSub, tree);
        }
      } else {
        var value = A2($elm$core$Elm$JsArray$unsafeGet, pos, tree);
        if (value.$ === "SubTree") {
          var subTree = value.a;
          var newSub = $elm$core$Array$SubTree(
            A4($elm$core$Array$insertTailInTree, shift - $elm$core$Array$shiftStep, index, tail, subTree)
          );
          return A3($elm$core$Elm$JsArray$unsafeSet, pos, newSub, tree);
        } else {
          var newSub = $elm$core$Array$SubTree(
            A4(
              $elm$core$Array$insertTailInTree,
              shift - $elm$core$Array$shiftStep,
              index,
              tail,
              $elm$core$Elm$JsArray$singleton(value)
            )
          );
          return A3($elm$core$Elm$JsArray$unsafeSet, pos, newSub, tree);
        }
      }
    }
  );
  var $elm$core$Array$unsafeReplaceTail = F2(
    function(newTail, _v0) {
      var len = _v0.a;
      var startShift = _v0.b;
      var tree = _v0.c;
      var tail = _v0.d;
      var originalTailLen = $elm$core$Elm$JsArray$length(tail);
      var newTailLen = $elm$core$Elm$JsArray$length(newTail);
      var newArrayLen = len + (newTailLen - originalTailLen);
      if (_Utils_eq(newTailLen, $elm$core$Array$branchFactor)) {
        var overflow = _Utils_cmp(newArrayLen >>> $elm$core$Array$shiftStep, 1 << startShift) > 0;
        if (overflow) {
          var newShift = startShift + $elm$core$Array$shiftStep;
          var newTree = A4(
            $elm$core$Array$insertTailInTree,
            newShift,
            len,
            newTail,
            $elm$core$Elm$JsArray$singleton(
              $elm$core$Array$SubTree(tree)
            )
          );
          return A4($elm$core$Array$Array_elm_builtin, newArrayLen, newShift, newTree, $elm$core$Elm$JsArray$empty);
        } else {
          return A4(
            $elm$core$Array$Array_elm_builtin,
            newArrayLen,
            startShift,
            A4($elm$core$Array$insertTailInTree, startShift, len, newTail, tree),
            $elm$core$Elm$JsArray$empty
          );
        }
      } else {
        return A4($elm$core$Array$Array_elm_builtin, newArrayLen, startShift, tree, newTail);
      }
    }
  );
  var $elm$core$Array$push = F2(
    function(a, array) {
      var tail = array.d;
      return A2(
        $elm$core$Array$unsafeReplaceTail,
        A2($elm$core$Elm$JsArray$push, a, tail),
        array
      );
    }
  );
  var $elm$browser$Debugger$History$add = F3(
    function(msg, model, _v0) {
      var snapshots = _v0.snapshots;
      var recent = _v0.recent;
      var numMessages = _v0.numMessages;
      var _v1 = A3($elm$browser$Debugger$History$addRecent, msg, model, recent);
      if (_v1.a.$ === "Just") {
        var snapshot = _v1.a.a;
        var newRecent = _v1.b;
        return A3(
          $elm$browser$Debugger$History$History,
          A2($elm$core$Array$push, snapshot, snapshots),
          newRecent,
          numMessages + 1
        );
      } else {
        var _v2 = _v1.a;
        var newRecent = _v1.b;
        return A3($elm$browser$Debugger$History$History, snapshots, newRecent, numMessages + 1);
      }
    }
  );
  var $elm$core$Basics$always = F2(
    function(a, _v0) {
      return a;
    }
  );
  var $elm$browser$Debugger$Overlay$BadImport = function(a) {
    return { $: "BadImport", a };
  };
  var $elm$browser$Debugger$Overlay$RiskyImport = F2(
    function(a, b) {
      return { $: "RiskyImport", a, b };
    }
  );
  var $elm$browser$Debugger$Report$VersionChanged = F2(
    function(a, b) {
      return { $: "VersionChanged", a, b };
    }
  );
  var $elm$browser$Debugger$Report$MessageChanged = F2(
    function(a, b) {
      return { $: "MessageChanged", a, b };
    }
  );
  var $elm$browser$Debugger$Report$SomethingChanged = function(a) {
    return { $: "SomethingChanged", a };
  };
  var $elm$browser$Debugger$Report$AliasChange = function(a) {
    return { $: "AliasChange", a };
  };
  var $elm$browser$Debugger$Metadata$checkAlias = F4(
    function(name, old, _new, changes) {
      return _Utils_eq(old.tipe, _new.tipe) && _Utils_eq(old.args, _new.args) ? changes : A2(
        $elm$core$List$cons,
        $elm$browser$Debugger$Report$AliasChange(name),
        changes
      );
    }
  );
  var $elm$browser$Debugger$Report$UnionChange = F2(
    function(a, b) {
      return { $: "UnionChange", a, b };
    }
  );
  var $elm$browser$Debugger$Metadata$addTag = F3(
    function(tag, _v0, changes) {
      return _Utils_update(
        changes,
        {
          added: A2($elm$core$List$cons, tag, changes.added)
        }
      );
    }
  );
  var $elm$browser$Debugger$Metadata$checkTag = F4(
    function(tag, old, _new, changes) {
      return _Utils_eq(old, _new) ? changes : _Utils_update(
        changes,
        {
          changed: A2($elm$core$List$cons, tag, changes.changed)
        }
      );
    }
  );
  var $elm$browser$Debugger$Report$TagChanges = F4(
    function(removed, changed, added, argsMatch) {
      return { added, argsMatch, changed, removed };
    }
  );
  var $elm$browser$Debugger$Report$emptyTagChanges = function(argsMatch) {
    return A4($elm$browser$Debugger$Report$TagChanges, _List_Nil, _List_Nil, _List_Nil, argsMatch);
  };
  var $elm$browser$Debugger$Report$hasTagChanges = function(tagChanges) {
    return _Utils_eq(
      tagChanges,
      A4($elm$browser$Debugger$Report$TagChanges, _List_Nil, _List_Nil, _List_Nil, true)
    );
  };
  var $elm$core$Dict$merge = F6(
    function(leftStep, bothStep, rightStep, leftDict, rightDict, initialResult) {
      var stepState = F3(
        function(rKey, rValue, _v0) {
          stepState:
            while (true) {
              var list = _v0.a;
              var result = _v0.b;
              if (!list.b) {
                return _Utils_Tuple2(
                  list,
                  A3(rightStep, rKey, rValue, result)
                );
              } else {
                var _v2 = list.a;
                var lKey = _v2.a;
                var lValue = _v2.b;
                var rest = list.b;
                if (_Utils_cmp(lKey, rKey) < 0) {
                  var $temp$rKey = rKey, $temp$rValue = rValue, $temp$_v0 = _Utils_Tuple2(
                    rest,
                    A3(leftStep, lKey, lValue, result)
                  );
                  rKey = $temp$rKey;
                  rValue = $temp$rValue;
                  _v0 = $temp$_v0;
                  continue stepState;
                } else {
                  if (_Utils_cmp(lKey, rKey) > 0) {
                    return _Utils_Tuple2(
                      list,
                      A3(rightStep, rKey, rValue, result)
                    );
                  } else {
                    return _Utils_Tuple2(
                      rest,
                      A4(bothStep, lKey, lValue, rValue, result)
                    );
                  }
                }
              }
            }
        }
      );
      var _v3 = A3(
        $elm$core$Dict$foldl,
        stepState,
        _Utils_Tuple2(
          $elm$core$Dict$toList(leftDict),
          initialResult
        ),
        rightDict
      );
      var leftovers = _v3.a;
      var intermediateResult = _v3.b;
      return A3(
        $elm$core$List$foldl,
        F2(
          function(_v4, result) {
            var k = _v4.a;
            var v = _v4.b;
            return A3(leftStep, k, v, result);
          }
        ),
        intermediateResult,
        leftovers
      );
    }
  );
  var $elm$browser$Debugger$Metadata$removeTag = F3(
    function(tag, _v0, changes) {
      return _Utils_update(
        changes,
        {
          removed: A2($elm$core$List$cons, tag, changes.removed)
        }
      );
    }
  );
  var $elm$browser$Debugger$Metadata$checkUnion = F4(
    function(name, old, _new, changes) {
      var tagChanges = A6(
        $elm$core$Dict$merge,
        $elm$browser$Debugger$Metadata$removeTag,
        $elm$browser$Debugger$Metadata$checkTag,
        $elm$browser$Debugger$Metadata$addTag,
        old.tags,
        _new.tags,
        $elm$browser$Debugger$Report$emptyTagChanges(
          _Utils_eq(old.args, _new.args)
        )
      );
      return $elm$browser$Debugger$Report$hasTagChanges(tagChanges) ? changes : A2(
        $elm$core$List$cons,
        A2($elm$browser$Debugger$Report$UnionChange, name, tagChanges),
        changes
      );
    }
  );
  var $elm$browser$Debugger$Metadata$ignore = F3(
    function(key, value, report) {
      return report;
    }
  );
  var $elm$browser$Debugger$Metadata$checkTypes = F2(
    function(old, _new) {
      return !_Utils_eq(old.message, _new.message) ? A2($elm$browser$Debugger$Report$MessageChanged, old.message, _new.message) : $elm$browser$Debugger$Report$SomethingChanged(
        A6(
          $elm$core$Dict$merge,
          $elm$browser$Debugger$Metadata$ignore,
          $elm$browser$Debugger$Metadata$checkUnion,
          $elm$browser$Debugger$Metadata$ignore,
          old.unions,
          _new.unions,
          A6($elm$core$Dict$merge, $elm$browser$Debugger$Metadata$ignore, $elm$browser$Debugger$Metadata$checkAlias, $elm$browser$Debugger$Metadata$ignore, old.aliases, _new.aliases, _List_Nil)
        )
      );
    }
  );
  var $elm$browser$Debugger$Metadata$check = F2(
    function(old, _new) {
      return !_Utils_eq(old.versions.elm, _new.versions.elm) ? A2($elm$browser$Debugger$Report$VersionChanged, old.versions.elm, _new.versions.elm) : A2($elm$browser$Debugger$Metadata$checkTypes, old.types, _new.types);
    }
  );
  var $elm$browser$Debugger$Report$CorruptHistory = { $: "CorruptHistory" };
  var $elm$browser$Debugger$Overlay$corruptImport = $elm$browser$Debugger$Overlay$BadImport($elm$browser$Debugger$Report$CorruptHistory);
  var $elm$json$Json$Decode$decodeString = _Json_runOnString;
  var $elm$browser$Debugger$Report$Fine = { $: "Fine" };
  var $elm$browser$Debugger$Report$Impossible = { $: "Impossible" };
  var $elm$browser$Debugger$Report$Risky = { $: "Risky" };
  var $elm$core$List$isEmpty = function(xs) {
    if (!xs.b) {
      return true;
    } else {
      return false;
    }
  };
  var $elm$browser$Debugger$Report$some = function(list) {
    return !$elm$core$List$isEmpty(list);
  };
  var $elm$browser$Debugger$Report$evaluateChange = function(change) {
    if (change.$ === "AliasChange") {
      return $elm$browser$Debugger$Report$Impossible;
    } else {
      var removed = change.b.removed;
      var changed = change.b.changed;
      var added = change.b.added;
      var argsMatch = change.b.argsMatch;
      return !argsMatch || ($elm$browser$Debugger$Report$some(changed) || $elm$browser$Debugger$Report$some(removed)) ? $elm$browser$Debugger$Report$Impossible : $elm$browser$Debugger$Report$some(added) ? $elm$browser$Debugger$Report$Risky : $elm$browser$Debugger$Report$Fine;
    }
  };
  var $elm$browser$Debugger$Report$worstCase = F2(
    function(status, statusList) {
      worstCase:
        while (true) {
          if (!statusList.b) {
            return status;
          } else {
            switch (statusList.a.$) {
              case "Impossible":
                var _v1 = statusList.a;
                return $elm$browser$Debugger$Report$Impossible;
              case "Risky":
                var _v2 = statusList.a;
                var rest = statusList.b;
                var $temp$status = $elm$browser$Debugger$Report$Risky, $temp$statusList = rest;
                status = $temp$status;
                statusList = $temp$statusList;
                continue worstCase;
              default:
                var _v3 = statusList.a;
                var rest = statusList.b;
                var $temp$status = status, $temp$statusList = rest;
                status = $temp$status;
                statusList = $temp$statusList;
                continue worstCase;
            }
          }
        }
    }
  );
  var $elm$browser$Debugger$Report$evaluate = function(report) {
    switch (report.$) {
      case "CorruptHistory":
        return $elm$browser$Debugger$Report$Impossible;
      case "VersionChanged":
        return $elm$browser$Debugger$Report$Impossible;
      case "MessageChanged":
        return $elm$browser$Debugger$Report$Impossible;
      default:
        var changes = report.a;
        return A2(
          $elm$browser$Debugger$Report$worstCase,
          $elm$browser$Debugger$Report$Fine,
          A2($elm$core$List$map, $elm$browser$Debugger$Report$evaluateChange, changes)
        );
    }
  };
  var $elm$json$Json$Decode$value = _Json_decodeValue;
  var $elm$browser$Debugger$Overlay$uploadDecoder = A3(
    $elm$json$Json$Decode$map2,
    F2(
      function(x, y) {
        return _Utils_Tuple2(x, y);
      }
    ),
    A2($elm$json$Json$Decode$field, "metadata", $elm$browser$Debugger$Metadata$decoder),
    A2($elm$json$Json$Decode$field, "history", $elm$json$Json$Decode$value)
  );
  var $elm$browser$Debugger$Overlay$assessImport = F2(
    function(metadata, jsonString) {
      var _v0 = A2($elm$json$Json$Decode$decodeString, $elm$browser$Debugger$Overlay$uploadDecoder, jsonString);
      if (_v0.$ === "Err") {
        return $elm$core$Result$Err($elm$browser$Debugger$Overlay$corruptImport);
      } else {
        var _v1 = _v0.a;
        var foreignMetadata = _v1.a;
        var rawHistory = _v1.b;
        var report = A2($elm$browser$Debugger$Metadata$check, foreignMetadata, metadata);
        var _v2 = $elm$browser$Debugger$Report$evaluate(report);
        switch (_v2.$) {
          case "Impossible":
            return $elm$core$Result$Err(
              $elm$browser$Debugger$Overlay$BadImport(report)
            );
          case "Risky":
            return $elm$core$Result$Err(
              A2($elm$browser$Debugger$Overlay$RiskyImport, report, rawHistory)
            );
          default:
            return $elm$core$Result$Ok(rawHistory);
        }
      }
    }
  );
  var $elm$core$Platform$Cmd$batch = _Platform_batch;
  var $elm$browser$Debugger$Overlay$close = F2(
    function(msg, state) {
      switch (state.$) {
        case "None":
          return $elm$core$Maybe$Nothing;
        case "BadMetadata":
          return $elm$core$Maybe$Nothing;
        case "BadImport":
          return $elm$core$Maybe$Nothing;
        default:
          var rawHistory = state.b;
          if (msg.$ === "Cancel") {
            return $elm$core$Maybe$Nothing;
          } else {
            return $elm$core$Maybe$Just(rawHistory);
          }
      }
    }
  );
  var $elm$browser$Debugger$History$elmToJs = A2($elm$core$Basics$composeR, _Json_wrap, _Debugger_unsafeCoerce);
  var $elm$browser$Debugger$History$encodeHelp = F2(
    function(snapshot, allMessages) {
      return A3($elm$core$Array$foldl, $elm$core$List$cons, allMessages, snapshot.messages);
    }
  );
  var $elm$json$Json$Encode$list = F2(
    function(func, entries) {
      return _Json_wrap(
        A3(
          $elm$core$List$foldl,
          _Json_addEntry(func),
          _Json_emptyArray(_Utils_Tuple0),
          entries
        )
      );
    }
  );
  var $elm$browser$Debugger$History$encode = function(_v0) {
    var snapshots = _v0.snapshots;
    var recent = _v0.recent;
    return A2(
      $elm$json$Json$Encode$list,
      $elm$browser$Debugger$History$elmToJs,
      A3(
        $elm$core$Array$foldr,
        $elm$browser$Debugger$History$encodeHelp,
        $elm$core$List$reverse(recent.messages),
        snapshots
      )
    );
  };
  var $elm$json$Json$Encode$object = function(pairs) {
    return _Json_wrap(
      A3(
        $elm$core$List$foldl,
        F2(
          function(_v0, obj) {
            var k = _v0.a;
            var v = _v0.b;
            return A3(_Json_addField, k, v, obj);
          }
        ),
        _Json_emptyObject(_Utils_Tuple0),
        pairs
      )
    );
  };
  var $elm$browser$Debugger$Metadata$encodeAlias = function(_v0) {
    var args = _v0.args;
    var tipe = _v0.tipe;
    return $elm$json$Json$Encode$object(
      _List_fromArray(
        [
          _Utils_Tuple2(
            "args",
            A2($elm$json$Json$Encode$list, $elm$json$Json$Encode$string, args)
          ),
          _Utils_Tuple2(
            "type",
            $elm$json$Json$Encode$string(tipe)
          )
        ]
      )
    );
  };
  var $elm$core$Dict$map = F2(
    function(func, dict) {
      if (dict.$ === "RBEmpty_elm_builtin") {
        return $elm$core$Dict$RBEmpty_elm_builtin;
      } else {
        var color = dict.a;
        var key = dict.b;
        var value = dict.c;
        var left = dict.d;
        var right = dict.e;
        return A5(
          $elm$core$Dict$RBNode_elm_builtin,
          color,
          key,
          A2(func, key, value),
          A2($elm$core$Dict$map, func, left),
          A2($elm$core$Dict$map, func, right)
        );
      }
    }
  );
  var $elm$browser$Debugger$Metadata$encodeDict = F2(
    function(f, dict) {
      return $elm$json$Json$Encode$object(
        $elm$core$Dict$toList(
          A2(
            $elm$core$Dict$map,
            F2(
              function(key, value) {
                return f(value);
              }
            ),
            dict
          )
        )
      );
    }
  );
  var $elm$browser$Debugger$Metadata$encodeUnion = function(_v0) {
    var args = _v0.args;
    var tags = _v0.tags;
    return $elm$json$Json$Encode$object(
      _List_fromArray(
        [
          _Utils_Tuple2(
            "args",
            A2($elm$json$Json$Encode$list, $elm$json$Json$Encode$string, args)
          ),
          _Utils_Tuple2(
            "tags",
            A2(
              $elm$browser$Debugger$Metadata$encodeDict,
              $elm$json$Json$Encode$list($elm$json$Json$Encode$string),
              tags
            )
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Metadata$encodeTypes = function(_v0) {
    var message = _v0.message;
    var unions = _v0.unions;
    var aliases = _v0.aliases;
    return $elm$json$Json$Encode$object(
      _List_fromArray(
        [
          _Utils_Tuple2(
            "message",
            $elm$json$Json$Encode$string(message)
          ),
          _Utils_Tuple2(
            "aliases",
            A2($elm$browser$Debugger$Metadata$encodeDict, $elm$browser$Debugger$Metadata$encodeAlias, aliases)
          ),
          _Utils_Tuple2(
            "unions",
            A2($elm$browser$Debugger$Metadata$encodeDict, $elm$browser$Debugger$Metadata$encodeUnion, unions)
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Metadata$encodeVersions = function(_v0) {
    var elm = _v0.elm;
    return $elm$json$Json$Encode$object(
      _List_fromArray(
        [
          _Utils_Tuple2(
            "elm",
            $elm$json$Json$Encode$string(elm)
          )
        ]
      )
    );
  };
  var $elm$browser$Debugger$Metadata$encode = function(_v0) {
    var versions = _v0.versions;
    var types = _v0.types;
    return $elm$json$Json$Encode$object(
      _List_fromArray(
        [
          _Utils_Tuple2(
            "versions",
            $elm$browser$Debugger$Metadata$encodeVersions(versions)
          ),
          _Utils_Tuple2(
            "types",
            $elm$browser$Debugger$Metadata$encodeTypes(types)
          )
        ]
      )
    );
  };
  var $elm$core$Task$Perform = function(a) {
    return { $: "Perform", a };
  };
  var $elm$core$Task$succeed = _Scheduler_succeed;
  var $elm$core$Task$init = $elm$core$Task$succeed(_Utils_Tuple0);
  var $elm$core$Task$andThen = _Scheduler_andThen;
  var $elm$core$Task$map = F2(
    function(func, taskA) {
      return A2(
        $elm$core$Task$andThen,
        function(a) {
          return $elm$core$Task$succeed(
            func(a)
          );
        },
        taskA
      );
    }
  );
  var $elm$core$Task$map2 = F3(
    function(func, taskA, taskB) {
      return A2(
        $elm$core$Task$andThen,
        function(a) {
          return A2(
            $elm$core$Task$andThen,
            function(b) {
              return $elm$core$Task$succeed(
                A2(func, a, b)
              );
            },
            taskB
          );
        },
        taskA
      );
    }
  );
  var $elm$core$Task$sequence = function(tasks) {
    return A3(
      $elm$core$List$foldr,
      $elm$core$Task$map2($elm$core$List$cons),
      $elm$core$Task$succeed(_List_Nil),
      tasks
    );
  };
  var $elm$core$Platform$sendToApp = _Platform_sendToApp;
  var $elm$core$Task$spawnCmd = F2(
    function(router, _v0) {
      var task = _v0.a;
      return _Scheduler_spawn(
        A2(
          $elm$core$Task$andThen,
          $elm$core$Platform$sendToApp(router),
          task
        )
      );
    }
  );
  var $elm$core$Task$onEffects = F3(
    function(router, commands, state) {
      return A2(
        $elm$core$Task$map,
        function(_v0) {
          return _Utils_Tuple0;
        },
        $elm$core$Task$sequence(
          A2(
            $elm$core$List$map,
            $elm$core$Task$spawnCmd(router),
            commands
          )
        )
      );
    }
  );
  var $elm$core$Task$onSelfMsg = F3(
    function(_v0, _v1, _v2) {
      return $elm$core$Task$succeed(_Utils_Tuple0);
    }
  );
  var $elm$core$Task$cmdMap = F2(
    function(tagger, _v0) {
      var task = _v0.a;
      return $elm$core$Task$Perform(
        A2($elm$core$Task$map, tagger, task)
      );
    }
  );
  _Platform_effectManagers["Task"] = _Platform_createManager($elm$core$Task$init, $elm$core$Task$onEffects, $elm$core$Task$onSelfMsg, $elm$core$Task$cmdMap);
  var $elm$core$Task$command = _Platform_leaf("Task");
  var $elm$core$Task$perform = F2(
    function(toMessage, task) {
      return $elm$core$Task$command(
        $elm$core$Task$Perform(
          A2($elm$core$Task$map, toMessage, task)
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$download = F2(
    function(metadata, history2) {
      var historyLength = $elm$browser$Debugger$History$size(history2);
      return A2(
        $elm$core$Task$perform,
        function(_v0) {
          return $elm$browser$Debugger$Main$NoOp;
        },
        A2(
          _Debugger_download,
          historyLength,
          _Json_unwrap(
            $elm$json$Json$Encode$object(
              _List_fromArray(
                [
                  _Utils_Tuple2(
                    "metadata",
                    $elm$browser$Debugger$Metadata$encode(metadata)
                  ),
                  _Utils_Tuple2(
                    "history",
                    $elm$browser$Debugger$History$encode(history2)
                  )
                ]
              )
            )
          )
        )
      );
    }
  );
  var $elm$browser$Debugger$Main$Vertical = F3(
    function(a, b, c) {
      return { $: "Vertical", a, b, c };
    }
  );
  var $elm$browser$Debugger$Main$drag = F2(
    function(info, layout) {
      if (layout.$ === "Horizontal") {
        var status = layout.a;
        var y = layout.c;
        return A3($elm$browser$Debugger$Main$Horizontal, status, info.x / info.width, y);
      } else {
        var status = layout.a;
        var x = layout.b;
        return A3($elm$browser$Debugger$Main$Vertical, status, x, info.y / info.height);
      }
    }
  );
  var $elm$browser$Debugger$History$Stepping = F2(
    function(a, b) {
      return { $: "Stepping", a, b };
    }
  );
  var $elm$browser$Debugger$History$Done = F2(
    function(a, b) {
      return { $: "Done", a, b };
    }
  );
  var $elm$browser$Debugger$History$getHelp = F3(
    function(update, msg, getResult) {
      if (getResult.$ === "Done") {
        return getResult;
      } else {
        var n = getResult.a;
        var model = getResult.b;
        return !n ? A2(
          $elm$browser$Debugger$History$Done,
          msg,
          A2(update, msg, model).a
        ) : A2(
          $elm$browser$Debugger$History$Stepping,
          n - 1,
          A2(update, msg, model).a
        );
      }
    }
  );
  var $elm$browser$Debugger$History$undone = function(getResult) {
    undone:
      while (true) {
        if (getResult.$ === "Done") {
          var msg = getResult.a;
          var model = getResult.b;
          return _Utils_Tuple2(model, msg);
        } else {
          var $temp$getResult = getResult;
          getResult = $temp$getResult;
          continue undone;
        }
      }
  };
  var $elm$browser$Debugger$History$get = F3(
    function(update, index, history2) {
      get:
        while (true) {
          var recent = history2.recent;
          var snapshotMax = history2.numMessages - recent.numMessages;
          if (_Utils_cmp(index, snapshotMax) > -1) {
            return $elm$browser$Debugger$History$undone(
              A3(
                $elm$core$List$foldr,
                $elm$browser$Debugger$History$getHelp(update),
                A2($elm$browser$Debugger$History$Stepping, index - snapshotMax, recent.model),
                recent.messages
              )
            );
          } else {
            var _v0 = A2($elm$core$Array$get, index / $elm$browser$Debugger$History$maxSnapshotSize | 0, history2.snapshots);
            if (_v0.$ === "Nothing") {
              var $temp$update = update, $temp$index = index, $temp$history = history2;
              update = $temp$update;
              index = $temp$index;
              history2 = $temp$history;
              continue get;
            } else {
              var model = _v0.a.model;
              var messages = _v0.a.messages;
              return $elm$browser$Debugger$History$undone(
                A3(
                  $elm$core$Array$foldr,
                  $elm$browser$Debugger$History$getHelp(update),
                  A2($elm$browser$Debugger$History$Stepping, index % $elm$browser$Debugger$History$maxSnapshotSize, model),
                  messages
                )
              );
            }
          }
        }
    }
  );
  var $elm$browser$Debugger$History$getRecentMsg = function(history2) {
    getRecentMsg:
      while (true) {
        var _v0 = history2.recent.messages;
        if (!_v0.b) {
          var $temp$history = history2;
          history2 = $temp$history;
          continue getRecentMsg;
        } else {
          var first = _v0.a;
          return first;
        }
      }
  };
  var $elm$browser$Debugger$Expando$merge = F2(
    function(value, expando) {
      return _Utils_update(
        expando,
        {
          unexpanded: _Debugger_toUnexpanded(value)
        }
      );
    }
  );
  var $elm$browser$Debugger$Main$jumpUpdate = F3(
    function(update, index, model) {
      var history2 = $elm$browser$Debugger$Main$cachedHistory(model);
      var currentMsg = $elm$browser$Debugger$History$getRecentMsg(history2);
      var currentModel = $elm$browser$Debugger$Main$getLatestModel(model.state);
      var _v0 = A3($elm$browser$Debugger$History$get, update, index, history2);
      var indexModel = _v0.a;
      var indexMsg = _v0.b;
      return _Utils_update(
        model,
        {
          expandoModel: A2($elm$browser$Debugger$Expando$merge, indexModel, model.expandoModel),
          expandoMsg: A2($elm$browser$Debugger$Expando$merge, indexMsg, model.expandoMsg),
          state: A5($elm$browser$Debugger$Main$Paused, index, indexModel, currentModel, currentMsg, history2)
        }
      );
    }
  );
  var $elm$browser$Debugger$History$jsToElm = A2($elm$core$Basics$composeR, _Json_unwrap, _Debugger_unsafeCoerce);
  var $elm$browser$Debugger$History$decoder = F2(
    function(initialModel, update) {
      var addMessage = F2(
        function(rawMsg, _v0) {
          var model = _v0.a;
          var history2 = _v0.b;
          var msg = $elm$browser$Debugger$History$jsToElm(rawMsg);
          return _Utils_Tuple2(
            A2(update, msg, model),
            A3($elm$browser$Debugger$History$add, msg, model, history2)
          );
        }
      );
      var updateModel = function(rawMsgs) {
        return A3(
          $elm$core$List$foldl,
          addMessage,
          _Utils_Tuple2(
            initialModel,
            $elm$browser$Debugger$History$empty(initialModel)
          ),
          rawMsgs
        );
      };
      return A2(
        $elm$json$Json$Decode$map,
        updateModel,
        $elm$json$Json$Decode$list($elm$json$Json$Decode$value)
      );
    }
  );
  var $elm$browser$Debugger$History$getInitialModel = function(_v0) {
    var snapshots = _v0.snapshots;
    var recent = _v0.recent;
    var _v1 = A2($elm$core$Array$get, 0, snapshots);
    if (_v1.$ === "Just") {
      var model = _v1.a.model;
      return model;
    } else {
      return recent.model;
    }
  };
  var $elm$core$Platform$Cmd$none = $elm$core$Platform$Cmd$batch(_List_Nil);
  var $elm$browser$Debugger$Main$loadNewHistory = F3(
    function(rawHistory, update, model) {
      var pureUserUpdate = F2(
        function(msg, userModel) {
          return A2(update, msg, userModel).a;
        }
      );
      var initialUserModel = $elm$browser$Debugger$History$getInitialModel(model.history);
      var decoder = A2($elm$browser$Debugger$History$decoder, initialUserModel, pureUserUpdate);
      var _v0 = A2($elm$json$Json$Decode$decodeValue, decoder, rawHistory);
      if (_v0.$ === "Err") {
        return _Utils_Tuple2(
          _Utils_update(
            model,
            { overlay: $elm$browser$Debugger$Overlay$corruptImport }
          ),
          $elm$core$Platform$Cmd$none
        );
      } else {
        var _v1 = _v0.a;
        var latestUserModel = _v1.a;
        var newHistory = _v1.b;
        return _Utils_Tuple2(
          _Utils_update(
            model,
            {
              expandoModel: $elm$browser$Debugger$Expando$init(latestUserModel),
              expandoMsg: $elm$browser$Debugger$Expando$init(
                $elm$browser$Debugger$History$getRecentMsg(newHistory)
              ),
              history: newHistory,
              overlay: $elm$browser$Debugger$Overlay$none,
              state: $elm$browser$Debugger$Main$Running(latestUserModel)
            }
          ),
          $elm$core$Platform$Cmd$none
        );
      }
    }
  );
  var $elm$browser$Debugger$Main$scroll = function(popout) {
    return A2(
      $elm$core$Task$perform,
      $elm$core$Basics$always($elm$browser$Debugger$Main$NoOp),
      _Debugger_scroll(popout)
    );
  };
  var $elm$browser$Debugger$Main$scrollTo = F2(
    function(id, popout) {
      return A2(
        $elm$core$Task$perform,
        $elm$core$Basics$always($elm$browser$Debugger$Main$NoOp),
        A2(_Debugger_scrollTo, id, popout)
      );
    }
  );
  var $elm$browser$Debugger$Main$setDragStatus = F2(
    function(status, layout) {
      if (layout.$ === "Horizontal") {
        var x = layout.b;
        var y = layout.c;
        return A3($elm$browser$Debugger$Main$Horizontal, status, x, y);
      } else {
        var x = layout.b;
        var y = layout.c;
        return A3($elm$browser$Debugger$Main$Vertical, status, x, y);
      }
    }
  );
  var $elm$browser$Debugger$Main$swapLayout = function(layout) {
    if (layout.$ === "Horizontal") {
      var s = layout.a;
      var x = layout.b;
      var y = layout.c;
      return A3($elm$browser$Debugger$Main$Vertical, s, x, y);
    } else {
      var s = layout.a;
      var x = layout.b;
      var y = layout.c;
      return A3($elm$browser$Debugger$Main$Horizontal, s, x, y);
    }
  };
  var $elm$core$Set$insert = F2(
    function(key, _v0) {
      var dict = _v0.a;
      return $elm$core$Set$Set_elm_builtin(
        A3($elm$core$Dict$insert, key, _Utils_Tuple0, dict)
      );
    }
  );
  var $elm$core$Dict$getMin = function(dict) {
    getMin:
      while (true) {
        if (dict.$ === "RBNode_elm_builtin" && dict.d.$ === "RBNode_elm_builtin") {
          var left = dict.d;
          var $temp$dict = left;
          dict = $temp$dict;
          continue getMin;
        } else {
          return dict;
        }
      }
  };
  var $elm$core$Dict$moveRedLeft = function(dict) {
    if (dict.$ === "RBNode_elm_builtin" && dict.d.$ === "RBNode_elm_builtin" && dict.e.$ === "RBNode_elm_builtin") {
      if (dict.e.d.$ === "RBNode_elm_builtin" && dict.e.d.a.$ === "Red") {
        var clr = dict.a;
        var k = dict.b;
        var v = dict.c;
        var _v1 = dict.d;
        var lClr = _v1.a;
        var lK = _v1.b;
        var lV = _v1.c;
        var lLeft = _v1.d;
        var lRight = _v1.e;
        var _v2 = dict.e;
        var rClr = _v2.a;
        var rK = _v2.b;
        var rV = _v2.c;
        var rLeft = _v2.d;
        var _v3 = rLeft.a;
        var rlK = rLeft.b;
        var rlV = rLeft.c;
        var rlL = rLeft.d;
        var rlR = rLeft.e;
        var rRight = _v2.e;
        return A5(
          $elm$core$Dict$RBNode_elm_builtin,
          $elm$core$Dict$Red,
          rlK,
          rlV,
          A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, lK, lV, lLeft, lRight),
            rlL
          ),
          A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, rK, rV, rlR, rRight)
        );
      } else {
        var clr = dict.a;
        var k = dict.b;
        var v = dict.c;
        var _v4 = dict.d;
        var lClr = _v4.a;
        var lK = _v4.b;
        var lV = _v4.c;
        var lLeft = _v4.d;
        var lRight = _v4.e;
        var _v5 = dict.e;
        var rClr = _v5.a;
        var rK = _v5.b;
        var rV = _v5.c;
        var rLeft = _v5.d;
        var rRight = _v5.e;
        if (clr.$ === "Black") {
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, lK, lV, lLeft, lRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, rK, rV, rLeft, rRight)
          );
        } else {
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, lK, lV, lLeft, lRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, rK, rV, rLeft, rRight)
          );
        }
      }
    } else {
      return dict;
    }
  };
  var $elm$core$Dict$moveRedRight = function(dict) {
    if (dict.$ === "RBNode_elm_builtin" && dict.d.$ === "RBNode_elm_builtin" && dict.e.$ === "RBNode_elm_builtin") {
      if (dict.d.d.$ === "RBNode_elm_builtin" && dict.d.d.a.$ === "Red") {
        var clr = dict.a;
        var k = dict.b;
        var v = dict.c;
        var _v1 = dict.d;
        var lClr = _v1.a;
        var lK = _v1.b;
        var lV = _v1.c;
        var _v2 = _v1.d;
        var _v3 = _v2.a;
        var llK = _v2.b;
        var llV = _v2.c;
        var llLeft = _v2.d;
        var llRight = _v2.e;
        var lRight = _v1.e;
        var _v4 = dict.e;
        var rClr = _v4.a;
        var rK = _v4.b;
        var rV = _v4.c;
        var rLeft = _v4.d;
        var rRight = _v4.e;
        return A5(
          $elm$core$Dict$RBNode_elm_builtin,
          $elm$core$Dict$Red,
          lK,
          lV,
          A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, llK, llV, llLeft, llRight),
          A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            lRight,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, rK, rV, rLeft, rRight)
          )
        );
      } else {
        var clr = dict.a;
        var k = dict.b;
        var v = dict.c;
        var _v5 = dict.d;
        var lClr = _v5.a;
        var lK = _v5.b;
        var lV = _v5.c;
        var lLeft = _v5.d;
        var lRight = _v5.e;
        var _v6 = dict.e;
        var rClr = _v6.a;
        var rK = _v6.b;
        var rV = _v6.c;
        var rLeft = _v6.d;
        var rRight = _v6.e;
        if (clr.$ === "Black") {
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, lK, lV, lLeft, lRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, rK, rV, rLeft, rRight)
          );
        } else {
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            $elm$core$Dict$Black,
            k,
            v,
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, lK, lV, lLeft, lRight),
            A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, rK, rV, rLeft, rRight)
          );
        }
      }
    } else {
      return dict;
    }
  };
  var $elm$core$Dict$removeHelpPrepEQGT = F7(
    function(targetKey, dict, color, key, value, left, right) {
      if (left.$ === "RBNode_elm_builtin" && left.a.$ === "Red") {
        var _v1 = left.a;
        var lK = left.b;
        var lV = left.c;
        var lLeft = left.d;
        var lRight = left.e;
        return A5(
          $elm$core$Dict$RBNode_elm_builtin,
          color,
          lK,
          lV,
          lLeft,
          A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Red, key, value, lRight, right)
        );
      } else {
        _v2$2:
          while (true) {
            if (right.$ === "RBNode_elm_builtin" && right.a.$ === "Black") {
              if (right.d.$ === "RBNode_elm_builtin") {
                if (right.d.a.$ === "Black") {
                  var _v3 = right.a;
                  var _v4 = right.d;
                  var _v5 = _v4.a;
                  return $elm$core$Dict$moveRedRight(dict);
                } else {
                  break _v2$2;
                }
              } else {
                var _v6 = right.a;
                var _v7 = right.d;
                return $elm$core$Dict$moveRedRight(dict);
              }
            } else {
              break _v2$2;
            }
          }
        return dict;
      }
    }
  );
  var $elm$core$Dict$removeMin = function(dict) {
    if (dict.$ === "RBNode_elm_builtin" && dict.d.$ === "RBNode_elm_builtin") {
      var color = dict.a;
      var key = dict.b;
      var value = dict.c;
      var left = dict.d;
      var lColor = left.a;
      var lLeft = left.d;
      var right = dict.e;
      if (lColor.$ === "Black") {
        if (lLeft.$ === "RBNode_elm_builtin" && lLeft.a.$ === "Red") {
          var _v3 = lLeft.a;
          return A5(
            $elm$core$Dict$RBNode_elm_builtin,
            color,
            key,
            value,
            $elm$core$Dict$removeMin(left),
            right
          );
        } else {
          var _v4 = $elm$core$Dict$moveRedLeft(dict);
          if (_v4.$ === "RBNode_elm_builtin") {
            var nColor = _v4.a;
            var nKey = _v4.b;
            var nValue = _v4.c;
            var nLeft = _v4.d;
            var nRight = _v4.e;
            return A5(
              $elm$core$Dict$balance,
              nColor,
              nKey,
              nValue,
              $elm$core$Dict$removeMin(nLeft),
              nRight
            );
          } else {
            return $elm$core$Dict$RBEmpty_elm_builtin;
          }
        }
      } else {
        return A5(
          $elm$core$Dict$RBNode_elm_builtin,
          color,
          key,
          value,
          $elm$core$Dict$removeMin(left),
          right
        );
      }
    } else {
      return $elm$core$Dict$RBEmpty_elm_builtin;
    }
  };
  var $elm$core$Dict$removeHelp = F2(
    function(targetKey, dict) {
      if (dict.$ === "RBEmpty_elm_builtin") {
        return $elm$core$Dict$RBEmpty_elm_builtin;
      } else {
        var color = dict.a;
        var key = dict.b;
        var value = dict.c;
        var left = dict.d;
        var right = dict.e;
        if (_Utils_cmp(targetKey, key) < 0) {
          if (left.$ === "RBNode_elm_builtin" && left.a.$ === "Black") {
            var _v4 = left.a;
            var lLeft = left.d;
            if (lLeft.$ === "RBNode_elm_builtin" && lLeft.a.$ === "Red") {
              var _v6 = lLeft.a;
              return A5(
                $elm$core$Dict$RBNode_elm_builtin,
                color,
                key,
                value,
                A2($elm$core$Dict$removeHelp, targetKey, left),
                right
              );
            } else {
              var _v7 = $elm$core$Dict$moveRedLeft(dict);
              if (_v7.$ === "RBNode_elm_builtin") {
                var nColor = _v7.a;
                var nKey = _v7.b;
                var nValue = _v7.c;
                var nLeft = _v7.d;
                var nRight = _v7.e;
                return A5(
                  $elm$core$Dict$balance,
                  nColor,
                  nKey,
                  nValue,
                  A2($elm$core$Dict$removeHelp, targetKey, nLeft),
                  nRight
                );
              } else {
                return $elm$core$Dict$RBEmpty_elm_builtin;
              }
            }
          } else {
            return A5(
              $elm$core$Dict$RBNode_elm_builtin,
              color,
              key,
              value,
              A2($elm$core$Dict$removeHelp, targetKey, left),
              right
            );
          }
        } else {
          return A2(
            $elm$core$Dict$removeHelpEQGT,
            targetKey,
            A7($elm$core$Dict$removeHelpPrepEQGT, targetKey, dict, color, key, value, left, right)
          );
        }
      }
    }
  );
  var $elm$core$Dict$removeHelpEQGT = F2(
    function(targetKey, dict) {
      if (dict.$ === "RBNode_elm_builtin") {
        var color = dict.a;
        var key = dict.b;
        var value = dict.c;
        var left = dict.d;
        var right = dict.e;
        if (_Utils_eq(targetKey, key)) {
          var _v1 = $elm$core$Dict$getMin(right);
          if (_v1.$ === "RBNode_elm_builtin") {
            var minKey = _v1.b;
            var minValue = _v1.c;
            return A5(
              $elm$core$Dict$balance,
              color,
              minKey,
              minValue,
              left,
              $elm$core$Dict$removeMin(right)
            );
          } else {
            return $elm$core$Dict$RBEmpty_elm_builtin;
          }
        } else {
          return A5(
            $elm$core$Dict$balance,
            color,
            key,
            value,
            left,
            A2($elm$core$Dict$removeHelp, targetKey, right)
          );
        }
      } else {
        return $elm$core$Dict$RBEmpty_elm_builtin;
      }
    }
  );
  var $elm$core$Dict$remove = F2(
    function(key, dict) {
      var _v0 = A2($elm$core$Dict$removeHelp, key, dict);
      if (_v0.$ === "RBNode_elm_builtin" && _v0.a.$ === "Red") {
        var _v1 = _v0.a;
        var k = _v0.b;
        var v = _v0.c;
        var l = _v0.d;
        var r = _v0.e;
        return A5($elm$core$Dict$RBNode_elm_builtin, $elm$core$Dict$Black, k, v, l, r);
      } else {
        var x = _v0;
        return x;
      }
    }
  );
  var $elm$core$Set$remove = F2(
    function(key, _v0) {
      var dict = _v0.a;
      return $elm$core$Set$Set_elm_builtin(
        A2($elm$core$Dict$remove, key, dict)
      );
    }
  );
  var $elm$core$Dict$update = F3(
    function(targetKey, alter, dictionary) {
      var _v0 = alter(
        A2($elm$core$Dict$get, targetKey, dictionary)
      );
      if (_v0.$ === "Just") {
        var value = _v0.a;
        return A3($elm$core$Dict$insert, targetKey, value, dictionary);
      } else {
        return A2($elm$core$Dict$remove, targetKey, dictionary);
      }
    }
  );
  var $elm$browser$Debugger$Expando$updateViewMoreCount = function(maybeCount) {
    if (maybeCount.$ === "Just") {
      var count = maybeCount.a;
      return $elm$core$Maybe$Just(count + 1);
    } else {
      return $elm$core$Maybe$Just(2);
    }
  };
  var $elm$browser$Debugger$Expando$update = F2(
    function(msg, expando) {
      if (msg.$ === "Toggle") {
        var path = msg.a;
        return _Utils_update(
          expando,
          {
            expanded: A2($elm$core$Set$member, path, expando.expanded) ? A2($elm$core$Set$remove, path, expando.expanded) : A2($elm$core$Set$insert, path, expando.expanded)
          }
        );
      } else {
        var path = msg.a;
        return _Utils_update(
          expando,
          {
            viewMore: A3($elm$core$Dict$update, path, $elm$browser$Debugger$Expando$updateViewMoreCount, expando.viewMore)
          }
        );
      }
    }
  );
  var $elm$browser$Debugger$Main$Upload = function(a) {
    return { $: "Upload", a };
  };
  var $elm$browser$Debugger$Main$upload = function(popout) {
    return A2(
      $elm$core$Task$perform,
      $elm$browser$Debugger$Main$Upload,
      _Debugger_upload(popout)
    );
  };
  var $elm$browser$Debugger$Overlay$BadMetadata = function(a) {
    return { $: "BadMetadata", a };
  };
  var $elm$browser$Debugger$Overlay$badMetadata = $elm$browser$Debugger$Overlay$BadMetadata;
  var $elm$browser$Debugger$Main$withGoodMetadata = F2(
    function(model, func) {
      var _v0 = model.metadata;
      if (_v0.$ === "Ok") {
        var metadata = _v0.a;
        return func(metadata);
      } else {
        var error = _v0.a;
        return _Utils_Tuple2(
          _Utils_update(
            model,
            {
              overlay: $elm$browser$Debugger$Overlay$badMetadata(error)
            }
          ),
          $elm$core$Platform$Cmd$none
        );
      }
    }
  );
  var $elm$browser$Debugger$Main$wrapUpdate = F3(
    function(update, msg, model) {
      wrapUpdate:
        while (true) {
          switch (msg.$) {
            case "NoOp":
              return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
            case "UserMsg":
              var userMsg = msg.a;
              var userModel = $elm$browser$Debugger$Main$getLatestModel(model.state);
              var newHistory = A3($elm$browser$Debugger$History$add, userMsg, userModel, model.history);
              var _v1 = A2(update, userMsg, userModel);
              var newUserModel = _v1.a;
              var userCmds = _v1.b;
              var commands = A2($elm$core$Platform$Cmd$map, $elm$browser$Debugger$Main$UserMsg, userCmds);
              var _v2 = model.state;
              if (_v2.$ === "Running") {
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      expandoModel: A2($elm$browser$Debugger$Expando$merge, newUserModel, model.expandoModel),
                      expandoMsg: A2($elm$browser$Debugger$Expando$merge, userMsg, model.expandoMsg),
                      history: newHistory,
                      state: $elm$browser$Debugger$Main$Running(newUserModel)
                    }
                  ),
                  $elm$core$Platform$Cmd$batch(
                    _List_fromArray(
                      [
                        commands,
                        $elm$browser$Debugger$Main$scroll(model.popout)
                      ]
                    )
                  )
                );
              } else {
                var index = _v2.a;
                var indexModel = _v2.b;
                var history2 = _v2.e;
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      history: newHistory,
                      state: A5($elm$browser$Debugger$Main$Paused, index, indexModel, newUserModel, userMsg, history2)
                    }
                  ),
                  commands
                );
              }
            case "TweakExpandoMsg":
              var eMsg = msg.a;
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    expandoMsg: A2($elm$browser$Debugger$Expando$update, eMsg, model.expandoMsg)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            case "TweakExpandoModel":
              var eMsg = msg.a;
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    expandoModel: A2($elm$browser$Debugger$Expando$update, eMsg, model.expandoModel)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            case "Pause":
              var _v3 = model.state;
              if (_v3.$ === "Running") {
                var size = $elm$browser$Debugger$History$size(model.history);
                return !size ? _Utils_Tuple2(model, $elm$core$Platform$Cmd$none) : _Utils_Tuple2(
                  A3($elm$browser$Debugger$Main$jumpUpdate, update, size - 1, model),
                  $elm$core$Platform$Cmd$none
                );
              } else {
                var userModel = _v3.c;
                var userMsg = _v3.d;
                return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
              }
            case "Resume":
              var _v4 = model.state;
              if (_v4.$ === "Running") {
                return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
              } else {
                var userModel = _v4.c;
                var userMsg = _v4.d;
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      expandoModel: A2($elm$browser$Debugger$Expando$merge, userModel, model.expandoModel),
                      expandoMsg: A2($elm$browser$Debugger$Expando$merge, userMsg, model.expandoMsg),
                      state: $elm$browser$Debugger$Main$Running(userModel)
                    }
                  ),
                  $elm$browser$Debugger$Main$scroll(model.popout)
                );
              }
            case "Jump":
              var index = msg.a;
              return _Utils_Tuple2(
                A3($elm$browser$Debugger$Main$jumpUpdate, update, index, model),
                $elm$core$Platform$Cmd$none
              );
            case "SliderJump":
              var index = msg.a;
              return _Utils_Tuple2(
                A3($elm$browser$Debugger$Main$jumpUpdate, update, index, model),
                A2(
                  $elm$browser$Debugger$Main$scrollTo,
                  $elm$browser$Debugger$History$idForMessageIndex(index),
                  model.popout
                )
              );
            case "Open":
              return _Utils_Tuple2(
                model,
                A2(
                  $elm$core$Task$perform,
                  $elm$core$Basics$always($elm$browser$Debugger$Main$NoOp),
                  _Debugger_open(model.popout)
                )
              );
            case "Up":
              var _v5 = model.state;
              if (_v5.$ === "Running") {
                return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
              } else {
                var i = _v5.a;
                var history2 = _v5.e;
                var targetIndex = i + 1;
                if (_Utils_cmp(
                  targetIndex,
                  $elm$browser$Debugger$History$size(history2)
                ) < 0) {
                  var $temp$update = update, $temp$msg = $elm$browser$Debugger$Main$SliderJump(targetIndex), $temp$model = model;
                  update = $temp$update;
                  msg = $temp$msg;
                  model = $temp$model;
                  continue wrapUpdate;
                } else {
                  var $temp$update = update, $temp$msg = $elm$browser$Debugger$Main$Resume, $temp$model = model;
                  update = $temp$update;
                  msg = $temp$msg;
                  model = $temp$model;
                  continue wrapUpdate;
                }
              }
            case "Down":
              var _v6 = model.state;
              if (_v6.$ === "Running") {
                var $temp$update = update, $temp$msg = $elm$browser$Debugger$Main$Jump(
                  $elm$browser$Debugger$History$size(model.history) - 1
                ), $temp$model = model;
                update = $temp$update;
                msg = $temp$msg;
                model = $temp$model;
                continue wrapUpdate;
              } else {
                var index = _v6.a;
                if (index > 0) {
                  var $temp$update = update, $temp$msg = $elm$browser$Debugger$Main$SliderJump(index - 1), $temp$model = model;
                  update = $temp$update;
                  msg = $temp$msg;
                  model = $temp$model;
                  continue wrapUpdate;
                } else {
                  return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
                }
              }
            case "Import":
              return A2(
                $elm$browser$Debugger$Main$withGoodMetadata,
                model,
                function(_v7) {
                  return _Utils_Tuple2(
                    model,
                    $elm$browser$Debugger$Main$upload(model.popout)
                  );
                }
              );
            case "Export":
              return A2(
                $elm$browser$Debugger$Main$withGoodMetadata,
                model,
                function(metadata) {
                  return _Utils_Tuple2(
                    model,
                    A2($elm$browser$Debugger$Main$download, metadata, model.history)
                  );
                }
              );
            case "Upload":
              var jsonString = msg.a;
              return A2(
                $elm$browser$Debugger$Main$withGoodMetadata,
                model,
                function(metadata) {
                  var _v8 = A2($elm$browser$Debugger$Overlay$assessImport, metadata, jsonString);
                  if (_v8.$ === "Err") {
                    var newOverlay = _v8.a;
                    return _Utils_Tuple2(
                      _Utils_update(
                        model,
                        { overlay: newOverlay }
                      ),
                      $elm$core$Platform$Cmd$none
                    );
                  } else {
                    var rawHistory2 = _v8.a;
                    return A3($elm$browser$Debugger$Main$loadNewHistory, rawHistory2, update, model);
                  }
                }
              );
            case "OverlayMsg":
              var overlayMsg = msg.a;
              var _v9 = A2($elm$browser$Debugger$Overlay$close, overlayMsg, model.overlay);
              if (_v9.$ === "Nothing") {
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    { overlay: $elm$browser$Debugger$Overlay$none }
                  ),
                  $elm$core$Platform$Cmd$none
                );
              } else {
                var rawHistory = _v9.a;
                return A3($elm$browser$Debugger$Main$loadNewHistory, rawHistory, update, model);
              }
            case "SwapLayout":
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    layout: $elm$browser$Debugger$Main$swapLayout(model.layout)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            case "DragStart":
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    layout: A2($elm$browser$Debugger$Main$setDragStatus, $elm$browser$Debugger$Main$Moving, model.layout)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            case "Drag":
              var info = msg.a;
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    layout: A2($elm$browser$Debugger$Main$drag, info, model.layout)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            default:
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    layout: A2($elm$browser$Debugger$Main$setDragStatus, $elm$browser$Debugger$Main$Static, model.layout)
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
          }
        }
    }
  );
  var $elm$browser$Browser$Dom$NotFound = function(a) {
    return { $: "NotFound", a };
  };
  var $elm$url$Url$Http = { $: "Http" };
  var $elm$url$Url$Https = { $: "Https" };
  var $elm$url$Url$Url = F6(
    function(protocol, host, port_, path, query, fragment) {
      return { fragment, host, path, port_, protocol, query };
    }
  );
  var $elm$core$String$dropLeft = F2(
    function(n, string) {
      return n < 1 ? string : A3(
        $elm$core$String$slice,
        n,
        $elm$core$String$length(string),
        string
      );
    }
  );
  var $elm$core$String$indexes = _String_indexes;
  var $elm$core$String$isEmpty = function(string) {
    return string === "";
  };
  var $elm$url$Url$chompBeforePath = F5(
    function(protocol, path, params, frag, str) {
      if ($elm$core$String$isEmpty(str) || A2($elm$core$String$contains, "@", str)) {
        return $elm$core$Maybe$Nothing;
      } else {
        var _v0 = A2($elm$core$String$indexes, ":", str);
        if (!_v0.b) {
          return $elm$core$Maybe$Just(
            A6($elm$url$Url$Url, protocol, str, $elm$core$Maybe$Nothing, path, params, frag)
          );
        } else {
          if (!_v0.b.b) {
            var i = _v0.a;
            var _v1 = $elm$core$String$toInt(
              A2($elm$core$String$dropLeft, i + 1, str)
            );
            if (_v1.$ === "Nothing") {
              return $elm$core$Maybe$Nothing;
            } else {
              var port_ = _v1;
              return $elm$core$Maybe$Just(
                A6(
                  $elm$url$Url$Url,
                  protocol,
                  A2($elm$core$String$left, i, str),
                  port_,
                  path,
                  params,
                  frag
                )
              );
            }
          } else {
            return $elm$core$Maybe$Nothing;
          }
        }
      }
    }
  );
  var $elm$url$Url$chompBeforeQuery = F4(
    function(protocol, params, frag, str) {
      if ($elm$core$String$isEmpty(str)) {
        return $elm$core$Maybe$Nothing;
      } else {
        var _v0 = A2($elm$core$String$indexes, "/", str);
        if (!_v0.b) {
          return A5($elm$url$Url$chompBeforePath, protocol, "/", params, frag, str);
        } else {
          var i = _v0.a;
          return A5(
            $elm$url$Url$chompBeforePath,
            protocol,
            A2($elm$core$String$dropLeft, i, str),
            params,
            frag,
            A2($elm$core$String$left, i, str)
          );
        }
      }
    }
  );
  var $elm$url$Url$chompBeforeFragment = F3(
    function(protocol, frag, str) {
      if ($elm$core$String$isEmpty(str)) {
        return $elm$core$Maybe$Nothing;
      } else {
        var _v0 = A2($elm$core$String$indexes, "?", str);
        if (!_v0.b) {
          return A4($elm$url$Url$chompBeforeQuery, protocol, $elm$core$Maybe$Nothing, frag, str);
        } else {
          var i = _v0.a;
          return A4(
            $elm$url$Url$chompBeforeQuery,
            protocol,
            $elm$core$Maybe$Just(
              A2($elm$core$String$dropLeft, i + 1, str)
            ),
            frag,
            A2($elm$core$String$left, i, str)
          );
        }
      }
    }
  );
  var $elm$url$Url$chompAfterProtocol = F2(
    function(protocol, str) {
      if ($elm$core$String$isEmpty(str)) {
        return $elm$core$Maybe$Nothing;
      } else {
        var _v0 = A2($elm$core$String$indexes, "#", str);
        if (!_v0.b) {
          return A3($elm$url$Url$chompBeforeFragment, protocol, $elm$core$Maybe$Nothing, str);
        } else {
          var i = _v0.a;
          return A3(
            $elm$url$Url$chompBeforeFragment,
            protocol,
            $elm$core$Maybe$Just(
              A2($elm$core$String$dropLeft, i + 1, str)
            ),
            A2($elm$core$String$left, i, str)
          );
        }
      }
    }
  );
  var $elm$core$String$startsWith = _String_startsWith;
  var $elm$url$Url$fromString = function(str) {
    return A2($elm$core$String$startsWith, "http://", str) ? A2(
      $elm$url$Url$chompAfterProtocol,
      $elm$url$Url$Http,
      A2($elm$core$String$dropLeft, 7, str)
    ) : A2($elm$core$String$startsWith, "https://", str) ? A2(
      $elm$url$Url$chompAfterProtocol,
      $elm$url$Url$Https,
      A2($elm$core$String$dropLeft, 8, str)
    ) : $elm$core$Maybe$Nothing;
  };
  var $elm$core$Basics$never = function(_v0) {
    never:
      while (true) {
        var nvr = _v0.a;
        var $temp$_v0 = nvr;
        _v0 = $temp$_v0;
        continue never;
      }
  };
  var $elm$browser$Browser$element = _Browser_element;
  var $author$project$Model$ContentsIndex = { $: "ContentsIndex" };
  var $rism_digital$elm_iiif$IIIF$Language$LanguageCode = function(a) {
    return { $: "LanguageCode", a };
  };
  var $author$project$Model$NotRequested = { $: "NotRequested" };
  var $author$project$Model$OneUp = { $: "OneUp" };
  var $author$project$Model$ResourceNotRequested = { $: "ResourceNotRequested" };
  var $author$project$Msg$ServerRespondedWithResource = function(a) {
    return { $: "ServerRespondedWithResource", a };
  };
  var $author$project$Msg$SetResponseLoading = { $: "SetResponseLoading" };
  var $author$project$Model$SidebarHidden = { $: "SidebarHidden" };
  var $author$project$Model$SidebarThumbnails = { $: "SidebarThumbnails" };
  var $author$project$Msg$ViewportChanged = F2(
    function(a, b) {
      return { $: "ViewportChanged", a, b };
    }
  );
  var $elm$core$Set$empty = $elm$core$Set$Set_elm_builtin($elm$core$Dict$empty);
  var $elm$browser$Browser$Dom$getViewport = _Browser_withWindow(_Browser_getViewport);
  var $elm$http$Http$BadStatus_ = F2(
    function(a, b) {
      return { $: "BadStatus_", a, b };
    }
  );
  var $elm$http$Http$BadUrl_ = function(a) {
    return { $: "BadUrl_", a };
  };
  var $elm$http$Http$GoodStatus_ = F2(
    function(a, b) {
      return { $: "GoodStatus_", a, b };
    }
  );
  var $elm$http$Http$NetworkError_ = { $: "NetworkError_" };
  var $elm$http$Http$Receiving = function(a) {
    return { $: "Receiving", a };
  };
  var $elm$http$Http$Sending = function(a) {
    return { $: "Sending", a };
  };
  var $elm$http$Http$Timeout_ = { $: "Timeout_" };
  var $elm$core$Maybe$isJust = function(maybe) {
    if (maybe.$ === "Just") {
      return true;
    } else {
      return false;
    }
  };
  var $elm$core$Platform$sendToSelf = _Platform_sendToSelf;
  var $elm$http$Http$expectStringResponse = F2(
    function(toMsg, toResult) {
      return A3(
        _Http_expect,
        "",
        $elm$core$Basics$identity,
        A2($elm$core$Basics$composeR, toResult, toMsg)
      );
    }
  );
  var $elm$core$Result$mapError = F2(
    function(f, result) {
      if (result.$ === "Ok") {
        var v = result.a;
        return $elm$core$Result$Ok(v);
      } else {
        var e = result.a;
        return $elm$core$Result$Err(
          f(e)
        );
      }
    }
  );
  var $elm$http$Http$BadBody = function(a) {
    return { $: "BadBody", a };
  };
  var $elm$http$Http$BadStatus = function(a) {
    return { $: "BadStatus", a };
  };
  var $elm$http$Http$BadUrl = function(a) {
    return { $: "BadUrl", a };
  };
  var $elm$http$Http$NetworkError = { $: "NetworkError" };
  var $elm$http$Http$Timeout = { $: "Timeout" };
  var $elm$http$Http$resolve = F2(
    function(toResult, response) {
      switch (response.$) {
        case "BadUrl_":
          var url = response.a;
          return $elm$core$Result$Err(
            $elm$http$Http$BadUrl(url)
          );
        case "Timeout_":
          return $elm$core$Result$Err($elm$http$Http$Timeout);
        case "NetworkError_":
          return $elm$core$Result$Err($elm$http$Http$NetworkError);
        case "BadStatus_":
          var metadata = response.a;
          return $elm$core$Result$Err(
            $elm$http$Http$BadStatus(metadata.statusCode)
          );
        default:
          var body = response.b;
          return A2(
            $elm$core$Result$mapError,
            $elm$http$Http$BadBody,
            toResult(body)
          );
      }
    }
  );
  var $elm$http$Http$expectJson = F2(
    function(toMsg, decoder) {
      return A2(
        $elm$http$Http$expectStringResponse,
        toMsg,
        $elm$http$Http$resolve(
          function(string) {
            return A2(
              $elm$core$Result$mapError,
              $elm$json$Json$Decode$errorToString,
              A2($elm$json$Json$Decode$decodeString, decoder, string)
            );
          }
        )
      );
    }
  );
  var $elm$http$Http$emptyBody = _Http_emptyBody;
  var $elm$http$Http$Header = F2(
    function(a, b) {
      return { $: "Header", a, b };
    }
  );
  var $elm$http$Http$header = $elm$http$Http$Header;
  var $elm$http$Http$Request = function(a) {
    return { $: "Request", a };
  };
  var $elm$http$Http$State = F2(
    function(reqs, subs) {
      return { reqs, subs };
    }
  );
  var $elm$http$Http$init = $elm$core$Task$succeed(
    A2($elm$http$Http$State, $elm$core$Dict$empty, _List_Nil)
  );
  var $elm$core$Process$kill = _Scheduler_kill;
  var $elm$core$Process$spawn = _Scheduler_spawn;
  var $elm$http$Http$updateReqs = F3(
    function(router, cmds, reqs) {
      updateReqs:
        while (true) {
          if (!cmds.b) {
            return $elm$core$Task$succeed(reqs);
          } else {
            var cmd = cmds.a;
            var otherCmds = cmds.b;
            if (cmd.$ === "Cancel") {
              var tracker = cmd.a;
              var _v2 = A2($elm$core$Dict$get, tracker, reqs);
              if (_v2.$ === "Nothing") {
                var $temp$router = router, $temp$cmds = otherCmds, $temp$reqs = reqs;
                router = $temp$router;
                cmds = $temp$cmds;
                reqs = $temp$reqs;
                continue updateReqs;
              } else {
                var pid = _v2.a;
                return A2(
                  $elm$core$Task$andThen,
                  function(_v3) {
                    return A3(
                      $elm$http$Http$updateReqs,
                      router,
                      otherCmds,
                      A2($elm$core$Dict$remove, tracker, reqs)
                    );
                  },
                  $elm$core$Process$kill(pid)
                );
              }
            } else {
              var req = cmd.a;
              return A2(
                $elm$core$Task$andThen,
                function(pid2) {
                  var _v4 = req.tracker;
                  if (_v4.$ === "Nothing") {
                    return A3($elm$http$Http$updateReqs, router, otherCmds, reqs);
                  } else {
                    var tracker2 = _v4.a;
                    return A3(
                      $elm$http$Http$updateReqs,
                      router,
                      otherCmds,
                      A3($elm$core$Dict$insert, tracker2, pid2, reqs)
                    );
                  }
                },
                $elm$core$Process$spawn(
                  A3(
                    _Http_toTask,
                    router,
                    $elm$core$Platform$sendToApp(router),
                    req
                  )
                )
              );
            }
          }
        }
    }
  );
  var $elm$http$Http$onEffects = F4(
    function(router, cmds, subs, state) {
      return A2(
        $elm$core$Task$andThen,
        function(reqs) {
          return $elm$core$Task$succeed(
            A2($elm$http$Http$State, reqs, subs)
          );
        },
        A3($elm$http$Http$updateReqs, router, cmds, state.reqs)
      );
    }
  );
  var $elm$http$Http$maybeSend = F4(
    function(router, desiredTracker, progress, _v0) {
      var actualTracker = _v0.a;
      var toMsg = _v0.b;
      return _Utils_eq(desiredTracker, actualTracker) ? $elm$core$Maybe$Just(
        A2(
          $elm$core$Platform$sendToApp,
          router,
          toMsg(progress)
        )
      ) : $elm$core$Maybe$Nothing;
    }
  );
  var $elm$http$Http$onSelfMsg = F3(
    function(router, _v0, state) {
      var tracker = _v0.a;
      var progress = _v0.b;
      return A2(
        $elm$core$Task$andThen,
        function(_v1) {
          return $elm$core$Task$succeed(state);
        },
        $elm$core$Task$sequence(
          A2(
            $elm$core$List$filterMap,
            A3($elm$http$Http$maybeSend, router, tracker, progress),
            state.subs
          )
        )
      );
    }
  );
  var $elm$http$Http$Cancel = function(a) {
    return { $: "Cancel", a };
  };
  var $elm$http$Http$cmdMap = F2(
    function(func, cmd) {
      if (cmd.$ === "Cancel") {
        var tracker = cmd.a;
        return $elm$http$Http$Cancel(tracker);
      } else {
        var r = cmd.a;
        return $elm$http$Http$Request(
          {
            allowCookiesFromOtherDomains: r.allowCookiesFromOtherDomains,
            body: r.body,
            expect: A2(_Http_mapExpect, func, r.expect),
            headers: r.headers,
            method: r.method,
            timeout: r.timeout,
            tracker: r.tracker,
            url: r.url
          }
        );
      }
    }
  );
  var $elm$http$Http$MySub = F2(
    function(a, b) {
      return { $: "MySub", a, b };
    }
  );
  var $elm$http$Http$subMap = F2(
    function(func, _v0) {
      var tracker = _v0.a;
      var toMsg = _v0.b;
      return A2(
        $elm$http$Http$MySub,
        tracker,
        A2($elm$core$Basics$composeR, toMsg, func)
      );
    }
  );
  _Platform_effectManagers["Http"] = _Platform_createManager($elm$http$Http$init, $elm$http$Http$onEffects, $elm$http$Http$onSelfMsg, $elm$http$Http$cmdMap, $elm$http$Http$subMap);
  var $elm$http$Http$command = _Platform_leaf("Http");
  var $elm$http$Http$subscription = _Platform_leaf("Http");
  var $elm$http$Http$request = function(r) {
    return $elm$http$Http$command(
      $elm$http$Http$Request(
        { allowCookiesFromOtherDomains: false, body: r.body, expect: r.expect, headers: r.headers, method: r.method, timeout: r.timeout, tracker: r.tracker, url: r.url }
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Request$request = F3(
    function(acceptHeaders, expect, url) {
      return $elm$http$Http$request(
        {
          body: $elm$http$Http$emptyBody,
          expect,
          headers: A2(
            $elm$core$List$map,
            $elm$http$Http$header("Accept"),
            acceptHeaders
          ),
          method: "GET",
          timeout: $elm$core$Maybe$Nothing,
          tracker: $elm$core$Maybe$Nothing,
          url
        }
      );
    }
  );
  var $elm$json$Json$Decode$oneOf = _Json_oneOf;
  var $elm$json$Json$Decode$fail = _Json_fail;
  var $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV2PresentationContextString = "http://iiif.io/api/presentation/2/context.json";
  var $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV3PresentationContextString = "http://iiif.io/api/presentation/3/context.json";
  var $elm$core$List$any = F2(
    function(isOkay, list) {
      any:
        while (true) {
          if (!list.b) {
            return false;
          } else {
            var x = list.a;
            var xs = list.b;
            if (isOkay(x)) {
              return true;
            } else {
              var $temp$isOkay = isOkay, $temp$list = xs;
              isOkay = $temp$isOkay;
              list = $temp$list;
              continue any;
            }
          }
        }
    }
  );
  var $elm$core$List$member = F2(
    function(x, xs) {
      return A2(
        $elm$core$List$any,
        function(a) {
          return _Utils_eq(a, x);
        },
        xs
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$IIIFCanvas = F2(
    function(a, b) {
      return { $: "IIIFCanvas", a, b };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$IIIFCollection = F2(
    function(a, b) {
      return { $: "IIIFCollection", a, b };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest = F2(
    function(a, b) {
      return { $: "IIIFManifest", a, b };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$IIIFRange = F2(
    function(a, b) {
      return { $: "IIIFRange", a, b };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Version$IIIFV2 = { $: "IIIFV2" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ResourceCanvas = function(a) {
    return { $: "ResourceCanvas", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ResourceCollection = function(a) {
    return { $: "ResourceCollection", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ResourceManifest = function(a) {
    return { $: "ResourceManifest", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ResourceRange = function(a) {
    return { $: "ResourceRange", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$Canvas = F5(
    function(id, label, width, height, images) {
      return { height, id, images, label, width };
    }
  );
  var $elm$json$Json$Decode$maybe = function(decoder) {
    return $elm$json$Json$Decode$oneOf(
      _List_fromArray(
        [
          A2($elm$json$Json$Decode$map, $elm$core$Maybe$Just, decoder),
          $elm$json$Json$Decode$succeed($elm$core$Maybe$Nothing)
        ]
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder = F2(
    function(valueDecoder, pipeline) {
      return A3(
        $elm$json$Json$Decode$map2,
        F2(
          function(value, fn) {
            return fn(value);
          }
        ),
        valueDecoder,
        pipeline
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional = F4(
    function(field, decoder, fallback, pipeline) {
      var fieldDecoder = $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2($elm$json$Json$Decode$field, field, decoder),
            $elm$json$Json$Decode$succeed(fallback)
          ]
        )
      );
      return A2($rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder, fieldDecoder, pipeline);
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$required = F3(
    function(field, decoder, pipeline) {
      return A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder,
        A2($elm$json$Json$Decode$field, field, decoder),
        pipeline
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$unwrapDecoderLists = function(lists) {
    return $elm$json$Json$Decode$succeed(
      $elm$core$List$concat(lists)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ChoiceImage = { $: "ChoiceImage" };
  var $rism_digital$elm_iiif$IIIF$Presentation$Image = F4(
    function(id, label, imageType, service) {
      return { id, imageType, label, service };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage = { $: "PrimaryImage" };
  var $elm$core$Maybe$andThen = F2(
    function(callback, maybeValue) {
      if (maybeValue.$ === "Just") {
        var value = maybeValue.a;
        return callback(value);
      } else {
        return $elm$core$Maybe$Nothing;
      }
    }
  );
  var $elm$core$String$endsWith = _String_endsWith;
  var $rism_digital$elm_iiif$IIIF$Image$ImageRequestParameters = F7(
    function(host, prefix, region, size, rotation, quality, format) {
      return { format, host, prefix, quality, region, rotation, size };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$ImageUri = function(a) {
    return { $: "ImageUri", a };
  };
  var $elm$core$Maybe$map2 = F3(
    function(func, ma, mb) {
      if (ma.$ === "Nothing") {
        return $elm$core$Maybe$Nothing;
      } else {
        var a = ma.a;
        if (mb.$ === "Nothing") {
          return $elm$core$Maybe$Nothing;
        } else {
          var b = mb.a;
          return $elm$core$Maybe$Just(
            A2(func, a, b)
          );
        }
      }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe = F2(
    function(argParser, funcParser) {
      return A3($elm$core$Maybe$map2, $elm$core$Basics$apL, funcParser, argParser);
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$GifFormat = { $: "GifFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$Jp2Format = { $: "Jp2Format" };
  var $rism_digital$elm_iiif$IIIF$Image$JpegFormat = { $: "JpegFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$PdfFormat = { $: "PdfFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$PngFormat = { $: "PngFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$TiffFormat = { $: "TiffFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$WebpFormat = { $: "WebpFormat" };
  var $rism_digital$elm_iiif$IIIF$Image$formatParser = function(inp) {
    var _v0 = A2($elm$core$String$split, ".", inp);
    if (_v0.b && _v0.b.b && !_v0.b.b.b) {
      var _v1 = _v0.b;
      var format = _v1.a;
      return format === "jpg" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$JpegFormat) : format === "tif" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$TiffFormat) : format === "png" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$PngFormat) : format === "gif" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$GifFormat) : format === "jp2" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$Jp2Format) : format === "pdf" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$PdfFormat) : format === "webp" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$WebpFormat) : $elm$core$Maybe$Nothing;
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$FullRegion = { $: "FullRegion" };
  var $rism_digital$elm_iiif$IIIF$Image$SquareRegion = { $: "SquareRegion" };
  var $rism_digital$elm_iiif$IIIF$Image$fullSquareRegionParser = function(inp) {
    return inp === "full" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$FullRegion) : inp === "square" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$SquareRegion) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$oneOfMaybes = F2(
    function(fmbs, a) {
      oneOfMaybes:
        while (true) {
          if (!fmbs.b) {
            return $elm$core$Maybe$Nothing;
          } else {
            var fmb = fmbs.a;
            var rest = fmbs.b;
            var _v1 = fmb(a);
            if (_v1.$ === "Just") {
              var b = _v1.a;
              return $elm$core$Maybe$Just(b);
            } else {
              var $temp$fmbs = rest, $temp$a = a;
              fmbs = $temp$fmbs;
              a = $temp$a;
              continue oneOfMaybes;
            }
          }
        }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$PctSizeRegion = function(a) {
    return { $: "PctSizeRegion", a };
  };
  var $elm$core$String$toFloat = _String_toFloat;
  var $rism_digital$elm_iiif$IIIF$Image$pctSizeRegionParser = function(inp) {
    var transformedInput = A2(
      $elm$core$List$filterMap,
      $elm$core$String$toFloat,
      A2(
        $elm$core$String$split,
        ",",
        A2($elm$core$String$dropLeft, 4, inp)
      )
    );
    if (transformedInput.b && transformedInput.b.b && transformedInput.b.b.b && transformedInput.b.b.b.b && !transformedInput.b.b.b.b.b) {
      var x = transformedInput.a;
      var _v1 = transformedInput.b;
      var y = _v1.a;
      var _v2 = _v1.b;
      var w = _v2.a;
      var _v3 = _v2.b;
      var h = _v3.a;
      return $elm$core$Maybe$Just(
        $rism_digital$elm_iiif$IIIF$Image$PctSizeRegion(
          { h, w, x, y }
        )
      );
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$SizeRegion = function(a) {
    return { $: "SizeRegion", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$sizeRegionParser = function(inp) {
    var transformedInput = A2(
      $elm$core$List$filterMap,
      $elm$core$String$toInt,
      A2($elm$core$String$split, ",", inp)
    );
    if (transformedInput.b && transformedInput.b.b && transformedInput.b.b.b && transformedInput.b.b.b.b && !transformedInput.b.b.b.b.b) {
      var x = transformedInput.a;
      var _v1 = transformedInput.b;
      var y = _v1.a;
      var _v2 = _v1.b;
      var w = _v2.a;
      var _v3 = _v2.b;
      var h = _v3.a;
      return $elm$core$Maybe$Just(
        $rism_digital$elm_iiif$IIIF$Image$SizeRegion(
          { h, w, x, y }
        )
      );
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$imageRegionParser = function(inp) {
    return A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$oneOfMaybes,
      _List_fromArray(
        [$rism_digital$elm_iiif$IIIF$Image$fullSquareRegionParser, $rism_digital$elm_iiif$IIIF$Image$sizeRegionParser, $rism_digital$elm_iiif$IIIF$Image$pctSizeRegionParser]
      ),
      inp
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactHeightOnlySize = function(a) {
    return { $: "ExactHeightOnlySize", a };
  };
  var $elm$core$Maybe$map = F2(
    function(f, maybe) {
      if (maybe.$ === "Just") {
        var value = maybe.a;
        return $elm$core$Maybe$Just(
          f(value)
        );
      } else {
        return $elm$core$Maybe$Nothing;
      }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$exactHeightOnlySizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "^,", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ExactHeightOnlySize,
      $elm$core$String$toInt(
        A2($elm$core$String$dropLeft, 2, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactPercentSize = function(a) {
    return { $: "ExactPercentSize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$exactPercentSizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "^pct:", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ExactPercentSize,
      $elm$core$String$toFloat(
        A2($elm$core$String$dropLeft, 5, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactScaledWidthAndHeightSize = function(a) {
    return { $: "ExactScaledWidthAndHeightSize", a };
  };
  var $elm$core$Tuple$pair = F2(
    function(a, b) {
      return _Utils_Tuple2(a, b);
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$whSizeParser = function(inp) {
    var _v0 = A2($elm$core$String$split, ",", inp);
    if (_v0.b && _v0.b.b && !_v0.b.b.b) {
      var width = _v0.a;
      var _v1 = _v0.b;
      var height = _v1.a;
      return A3(
        $elm$core$Maybe$map2,
        $elm$core$Tuple$pair,
        $elm$core$String$toInt(width),
        $elm$core$String$toInt(height)
      );
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$exactScaledWidthAndHeightSizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "^!", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ExactScaledWidthAndHeightSize,
      $rism_digital$elm_iiif$IIIF$Image$whSizeParser(
        A2($elm$core$String$dropLeft, 2, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactWidthAndHeightSize = function(a) {
    return { $: "ExactWidthAndHeightSize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$exactWidthAndHeightSizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "^", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ExactWidthAndHeightSize,
      $rism_digital$elm_iiif$IIIF$Image$whSizeParser(
        A2($elm$core$String$dropLeft, 1, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactWidthOnlySize = function(a) {
    return { $: "ExactWidthOnlySize", a };
  };
  var $elm$core$String$dropRight = F2(
    function(n, string) {
      return n < 1 ? string : A3($elm$core$String$slice, 0, -n, string);
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$exactWidthOnlySizeParser = function(inp) {
    return A2($elm$core$String$endsWith, ",", inp) && A2($elm$core$String$startsWith, "^", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ExactWidthOnlySize,
      $elm$core$String$toInt(
        A2(
          $elm$core$String$dropLeft,
          1,
          A2($elm$core$String$dropRight, 1, inp)
        )
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$HeightOnlySize = function(a) {
    return { $: "HeightOnlySize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$heightOnlySizeParser = function(inp) {
    return A2($elm$core$String$startsWith, ",", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$HeightOnlySize,
      $elm$core$String$toInt(
        A2($elm$core$String$dropLeft, 1, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ExactMaxSize = { $: "ExactMaxSize" };
  var $rism_digital$elm_iiif$IIIF$Image$MaxSize = { $: "MaxSize" };
  var $rism_digital$elm_iiif$IIIF$Image$maxSizeParser = function(inp) {
    return inp === "max" || inp === "full" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$MaxSize) : inp === "^max" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$ExactMaxSize) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$PercentSize = function(a) {
    return { $: "PercentSize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$percentSizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "pct:", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$PercentSize,
      $elm$core$String$toFloat(
        A2($elm$core$String$dropLeft, 4, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$ScaledWidthAndHeightSize = function(a) {
    return { $: "ScaledWidthAndHeightSize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$scaledWidthAndHeightSizeParser = function(inp) {
    return A2($elm$core$String$startsWith, "!", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$ScaledWidthAndHeightSize,
      $rism_digital$elm_iiif$IIIF$Image$whSizeParser(
        A2($elm$core$String$dropLeft, 1, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$WidthAndHeightSize = function(a) {
    return { $: "WidthAndHeightSize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$widthAndHeightSizeParser = function(inp) {
    var _v0 = A2($elm$core$String$split, ",", inp);
    if (_v0.b && _v0.b.b && !_v0.b.b.b) {
      var _v1 = _v0.b;
      return A2(
        $elm$core$Maybe$map,
        $rism_digital$elm_iiif$IIIF$Image$WidthAndHeightSize,
        $rism_digital$elm_iiif$IIIF$Image$whSizeParser(inp)
      );
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$WidthOnlySize = function(a) {
    return { $: "WidthOnlySize", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$widthOnlySizeParser = function(inp) {
    return A2($elm$core$String$endsWith, ",", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$WidthOnlySize,
      $elm$core$String$toInt(
        A2($elm$core$String$dropRight, 1, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$imageSizeParser = function(inp) {
    return A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$oneOfMaybes,
      _List_fromArray(
        [$rism_digital$elm_iiif$IIIF$Image$maxSizeParser, $rism_digital$elm_iiif$IIIF$Image$widthOnlySizeParser, $rism_digital$elm_iiif$IIIF$Image$exactWidthOnlySizeParser, $rism_digital$elm_iiif$IIIF$Image$heightOnlySizeParser, $rism_digital$elm_iiif$IIIF$Image$exactHeightOnlySizeParser, $rism_digital$elm_iiif$IIIF$Image$percentSizeParser, $rism_digital$elm_iiif$IIIF$Image$exactPercentSizeParser, $rism_digital$elm_iiif$IIIF$Image$widthAndHeightSizeParser, $rism_digital$elm_iiif$IIIF$Image$exactWidthAndHeightSizeParser, $rism_digital$elm_iiif$IIIF$Image$scaledWidthAndHeightSizeParser, $rism_digital$elm_iiif$IIIF$Image$exactScaledWidthAndHeightSizeParser]
      ),
      inp
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$BiTonalQuality = { $: "BiTonalQuality" };
  var $rism_digital$elm_iiif$IIIF$Image$ColorQuality = { $: "ColorQuality" };
  var $rism_digital$elm_iiif$IIIF$Image$DefaultQuality = { $: "DefaultQuality" };
  var $rism_digital$elm_iiif$IIIF$Image$GrayQuality = { $: "GrayQuality" };
  var $rism_digital$elm_iiif$IIIF$Image$NativeQuality = { $: "NativeQuality" };
  var $rism_digital$elm_iiif$IIIF$Image$qualityParser = function(inp) {
    var _v0 = A2($elm$core$String$split, ".", inp);
    if (_v0.b && _v0.b.b && !_v0.b.b.b) {
      var quality = _v0.a;
      var _v1 = _v0.b;
      return quality === "default" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$DefaultQuality) : quality === "native" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$NativeQuality) : quality === "color" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$ColorQuality) : quality === "gray" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$GrayQuality) : quality === "bitonal" ? $elm$core$Maybe$Just($rism_digital$elm_iiif$IIIF$Image$BiTonalQuality) : $elm$core$Maybe$Nothing;
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$MirroredRotation = function(a) {
    return { $: "MirroredRotation", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$mirroredRotationParser = function(inp) {
    return A2($elm$core$String$startsWith, "!", inp) ? A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$MirroredRotation,
      $elm$core$String$toFloat(
        A2($elm$core$String$dropLeft, 1, inp)
      )
    ) : $elm$core$Maybe$Nothing;
  };
  var $rism_digital$elm_iiif$IIIF$Image$NormalRotation = function(a) {
    return { $: "NormalRotation", a };
  };
  var $rism_digital$elm_iiif$IIIF$Image$normalRotationParser = function(inp) {
    return A2(
      $elm$core$Maybe$map,
      $rism_digital$elm_iiif$IIIF$Image$NormalRotation,
      $elm$core$String$toFloat(inp)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$rotationParser = function(inp) {
    return A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$oneOfMaybes,
      _List_fromArray(
        [$rism_digital$elm_iiif$IIIF$Image$normalRotationParser, $rism_digital$elm_iiif$IIIF$Image$mirroredRotationParser]
      ),
      inp
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$imageUriFromComponents = F2(
    function(host, pathComponents) {
      var _v0 = $elm$core$List$reverse(pathComponents);
      if (_v0.b && _v0.b.b && _v0.b.b.b && _v0.b.b.b.b) {
        var qualityFormat = _v0.a;
        var _v1 = _v0.b;
        var rotation = _v1.a;
        var _v2 = _v1.b;
        var size = _v2.a;
        var _v3 = _v2.b;
        var region = _v3.a;
        var ident = _v3.b;
        var imageIdent = A2(
          $elm$core$String$join,
          "/",
          $elm$core$List$reverse(ident)
        );
        return A2(
          $elm$core$Maybe$map,
          $rism_digital$elm_iiif$IIIF$Image$ImageUri,
          A2(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe,
            $rism_digital$elm_iiif$IIIF$Image$formatParser(qualityFormat),
            A2(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe,
              $rism_digital$elm_iiif$IIIF$Image$qualityParser(qualityFormat),
              A2(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe,
                $rism_digital$elm_iiif$IIIF$Image$rotationParser(rotation),
                A2(
                  $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe,
                  $rism_digital$elm_iiif$IIIF$Image$imageSizeParser(size),
                  A2(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyMaybe,
                    $rism_digital$elm_iiif$IIIF$Image$imageRegionParser(region),
                    $elm$core$Maybe$Just(
                      A2($rism_digital$elm_iiif$IIIF$Image$ImageRequestParameters, host, imageIdent)
                    )
                  )
                )
              )
            )
          )
        );
      } else {
        return $elm$core$Maybe$Nothing;
      }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$InfoUri = function(a) {
    return { $: "InfoUri", a };
  };
  var $elm$core$List$filter = F2(
    function(isGood, list) {
      return A3(
        $elm$core$List$foldr,
        F2(
          function(x, xs) {
            return isGood(x) ? A2($elm$core$List$cons, x, xs) : xs;
          }
        ),
        _List_Nil,
        list
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$remove = F2(
    function(item, items) {
      return A2(
        $elm$core$List$filter,
        $elm$core$Basics$neq(item),
        items
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$infoUriFromComponents = F2(
    function(host, pathComponents) {
      var identifier = A2(
        $elm$core$String$join,
        "/",
        A2($rism_digital$elm_iiif$IIIF$Internal$Utilities$remove, "info.json", pathComponents)
      );
      return $elm$core$Maybe$Just(
        $rism_digital$elm_iiif$IIIF$Image$InfoUri(
          { host, prefix: identifier }
        )
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$cartesianProduct = function(lists) {
    return A3(
      $elm$core$List$foldr,
      F2(
        function(current, acc) {
          return A2(
            $elm$core$List$concatMap,
            function(item) {
              return A2(
                $elm$core$List$map,
                $elm$core$List$cons(item),
                acc
              );
            },
            current
          );
        }
      ),
      _List_fromArray(
        [_List_Nil]
      ),
      lists
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$possibleSuffixes = (function() {
    var qualitySuffixes = _List_fromArray(
      ["color", "gray", "bitonal", "default", "native"]
    );
    var formatSuffixes = _List_fromArray(
      ["jpg", "tif", "png", "gif", "jp2", "pdf", "webp"]
    );
    return A2(
      $elm$core$List$map,
      $elm$core$String$join("."),
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$cartesianProduct(
        _List_fromArray(
          [qualitySuffixes, formatSuffixes]
        )
      )
    );
  })();
  var $rism_digital$elm_iiif$IIIF$Image$parseImageUrl = function(_v0) {
    var protocol = _v0.protocol;
    var host = _v0.host;
    var port_ = _v0.port_;
    var path = _v0.path;
    var splitPath = A2($elm$core$String$split, "/", path);
    var protocolStr = (function() {
      if (protocol.$ === "Http") {
        return "http://";
      } else {
        return "https://";
      }
    })();
    var isImageApiUri = A2(
      $elm$core$List$any,
      function(s) {
        return A2($elm$core$String$endsWith, s, path);
      },
      $rism_digital$elm_iiif$IIIF$Image$possibleSuffixes
    );
    var addr = A2(
      $elm$core$Maybe$withDefault,
      _Utils_ap(protocolStr, host),
      A2(
        $elm$core$Maybe$map,
        function(p) {
          return protocolStr + (host + (":" + $elm$core$String$fromInt(p)));
        },
        port_
      )
    );
    return isImageApiUri ? A2($rism_digital$elm_iiif$IIIF$Image$imageUriFromComponents, addr, splitPath) : A2($rism_digital$elm_iiif$IIIF$Image$infoUriFromComponents, addr, splitPath);
  };
  var $rism_digital$elm_iiif$IIIF$Image$parseImageAddress = function(fullAddress) {
    return A2(
      $elm$core$Maybe$andThen,
      $rism_digital$elm_iiif$IIIF$Image$parseImageUrl,
      $elm$url$Url$fromString(fullAddress)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$convertImageIdToImageUri = function(idValue) {
    var _v0 = $rism_digital$elm_iiif$IIIF$Image$parseImageAddress(idValue);
    if (_v0.$ === "Just") {
      var url = _v0.a;
      return $elm$json$Json$Decode$succeed(url);
    } else {
      return $elm$json$Json$Decode$fail("Could not decode image Url");
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded = F2(
    function(value, pipeline) {
      return A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder,
        $elm$json$Json$Decode$succeed(value),
        pipeline
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$requiredAt = F3(
    function(path, decoder, pipeline) {
      return A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder,
        A2($elm$json$Json$Decode$at, path, decoder),
        pipeline
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Language$LanguageValues = F2(
    function(a, b) {
      return { $: "LanguageValues", a, b };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Language$None = { $: "None" };
  var $rism_digital$elm_iiif$IIIF$Language$parseLocaleToLanguage = function(locale) {
    return locale === "none" ? $rism_digital$elm_iiif$IIIF$Language$None : $rism_digital$elm_iiif$IIIF$Language$LanguageCode(locale);
  };
  var $rism_digital$elm_iiif$IIIF$Language$languageDecoder = function(locale) {
    return $elm$json$Json$Decode$succeed(
      $rism_digital$elm_iiif$IIIF$Language$parseLocaleToLanguage(locale)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Language$languageValuesDecoder = function(_v0) {
    var locale = _v0.a;
    var translations = _v0.b;
    return A2(
      $elm$json$Json$Decode$map,
      function(lang) {
        return A2($rism_digital$elm_iiif$IIIF$Language$LanguageValues, lang, translations);
      },
      $rism_digital$elm_iiif$IIIF$Language$languageDecoder(locale)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Language$languageMapDecoder = function(json) {
    return A3(
      $elm$core$List$foldl,
      F2(
        function(map, maps) {
          return A3(
            $elm$json$Json$Decode$map2,
            $elm$core$List$cons,
            $rism_digital$elm_iiif$IIIF$Language$languageValuesDecoder(map),
            maps
          );
        }
      ),
      $elm$json$Json$Decode$succeed(_List_Nil),
      json
    );
  };
  var $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Language$languageMapDecoder,
    $elm$json$Json$Decode$keyValuePairs(
      $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Language$Default = { $: "Default" };
  var $rism_digital$elm_iiif$IIIF$Language$stringToLanguageMapLabelDecoder = A2(
    $elm$json$Json$Decode$map,
    function(s) {
      return _List_fromArray(
        [
          A2(
            $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
            $rism_digital$elm_iiif$IIIF$Language$Default,
            _List_fromArray(
              [s]
            )
          )
        ]
      );
    },
    $elm$json$Json$Decode$string
  );
  var $rism_digital$elm_iiif$IIIF$Language$v2LanguageValueObjectDecoder = A3(
    $elm$json$Json$Decode$map2,
    F2(
      function(value, locale) {
        return _List_fromArray(
          [
            A2(
              $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
              $rism_digital$elm_iiif$IIIF$Language$parseLocaleToLanguage(locale),
              _List_fromArray(
                [value]
              )
            )
          ]
        );
      }
    ),
    A2($elm$json$Json$Decode$field, "@value", $elm$json$Json$Decode$string),
    $elm$json$Json$Decode$oneOf(
      _List_fromArray(
        [
          A2($elm$json$Json$Decode$field, "@language", $elm$json$Json$Decode$string),
          $elm$json$Json$Decode$succeed("none")
        ]
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Language$v2LanguageValueObjectListDecoder = A2(
    $elm$json$Json$Decode$map,
    $elm$core$List$concat,
    $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Language$v2LanguageValueObjectDecoder)
  );
  var $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [$rism_digital$elm_iiif$IIIF$Language$v2LanguageValueObjectDecoder, $rism_digital$elm_iiif$IIIF$Language$v2LanguageValueObjectListDecoder, $rism_digital$elm_iiif$IIIF$Language$stringToLanguageMapLabelDecoder, $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder]
    )
  );
  var $elm$core$List$singleton = function(value) {
    return _List_fromArray(
      [value]
    );
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$AuthLogoutService1 = { $: "AuthLogoutService1" };
  var $rism_digital$elm_iiif$IIIF$Presentation$AuthTokenService1 = { $: "AuthTokenService1" };
  var $rism_digital$elm_iiif$IIIF$Presentation$AutoCompleteService1 = { $: "AutoCompleteService1" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ImageService1 = { $: "ImageService1" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ImageService2 = { $: "ImageService2" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ImageService3 = { $: "ImageService3" };
  var $rism_digital$elm_iiif$IIIF$Presentation$SearchService1 = { $: "SearchService1" };
  var $rism_digital$elm_iiif$IIIF$Presentation$UnknownService = { $: "UnknownService" };
  var $rism_digital$elm_iiif$IIIF$Presentation$stringToServiceType = function(val) {
    switch (val) {
      case "AuthLogoutService1":
        return $rism_digital$elm_iiif$IIIF$Presentation$AuthLogoutService1;
      case "AuthTokenService1":
        return $rism_digital$elm_iiif$IIIF$Presentation$AuthTokenService1;
      case "AutoCompleteService1":
        return $rism_digital$elm_iiif$IIIF$Presentation$AutoCompleteService1;
      case "ImageService1":
        return $rism_digital$elm_iiif$IIIF$Presentation$ImageService1;
      case "ImageService2":
        return $rism_digital$elm_iiif$IIIF$Presentation$ImageService2;
      case "ImageService3":
        return $rism_digital$elm_iiif$IIIF$Presentation$ImageService3;
      case "SearchService1":
        return $rism_digital$elm_iiif$IIIF$Presentation$SearchService1;
      case "http://iiif.io/api/image/2/context.json":
        return $rism_digital$elm_iiif$IIIF$Presentation$ImageService2;
      case "http://iiif.io/api/image/3/context.json":
        return $rism_digital$elm_iiif$IIIF$Presentation$ImageService3;
      default:
        return $rism_digital$elm_iiif$IIIF$Presentation$UnknownService;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ServiceTypeDecoder = function(stype) {
    return $elm$json$Json$Decode$succeed(
      $elm$core$List$singleton(
        $rism_digital$elm_iiif$IIIF$Presentation$stringToServiceType(stype)
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$requiredAt,
    _List_fromArray(
      ["service", "@context"]
    ),
    A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ServiceTypeDecoder, $elm$json$Json$Decode$string),
    A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
      $rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage,
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "label",
        $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
        $elm$core$Maybe$Nothing,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$requiredAt,
          _List_fromArray(
            ["service", "@id"]
          ),
          A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$convertImageIdToImageUri, $elm$json$Json$Decode$string),
          $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Image)
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoderVaryingType = function(imgType) {
    return A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$requiredAt,
      _List_fromArray(
        ["service", "@context"]
      ),
      A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ServiceTypeDecoder, $elm$json$Json$Decode$string),
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
        imgType,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
          $elm$core$Maybe$Nothing,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "@id",
            A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$convertImageIdToImageUri, $elm$json$Json$Decode$string),
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Image)
          )
        )
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ChoiceObjectDecoder = A3(
    $elm$json$Json$Decode$map2,
    $elm$core$List$cons,
    A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["default"]
      ),
      $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder
    ),
    A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["item"]
      ),
      $elm$json$Json$Decode$list(
        $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoderVaryingType($rism_digital$elm_iiif$IIIF$Presentation$ChoiceImage)
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2AnnotationListDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        $elm$json$Json$Decode$list(
          A2(
            $elm$json$Json$Decode$at,
            _List_fromArray(
              ["resource"]
            ),
            $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder
          )
        ),
        A2(
          $elm$json$Json$Decode$andThen,
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$unwrapDecoderLists,
          $elm$json$Json$Decode$list(
            A2(
              $elm$json$Json$Decode$at,
              _List_fromArray(
                ["resource"]
              ),
              $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ChoiceObjectDecoder
            )
          )
        )
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CanvasDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
    "images",
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2AnnotationListDecoder,
    A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
      "height",
      $elm$json$Json$Decode$maybe($elm$json$Json$Decode$int),
      A3(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
        "width",
        $elm$json$Json$Decode$maybe($elm$json$Json$Decode$int),
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
          $elm$core$Maybe$Nothing,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "@id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Canvas)
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$Range = F4(
    function(id, label, items, metadata) {
      return { id, items, label, metadata };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$RangeCanvas = function(a) {
    return { $: "RangeCanvas", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$RangeRange = function(a) {
    return { $: "RangeRange", a };
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom = F2(
    function(decoder, pipeline) {
      return A2($rism_digital$elm_iiif$IIIF$Internal$Utilities$applyDecoder, decoder, pipeline);
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$defaultLabelMap = _List_fromArray(
    [
      A2(
        $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
        $rism_digital$elm_iiif$IIIF$Language$Default,
        _List_fromArray(
          ["Homepage"]
        )
      )
    ]
  );
  var $elm$json$Json$Decode$lazy = function(thunk) {
    return A2(
      $elm$json$Json$Decode$andThen,
      thunk,
      $elm$json$Json$Decode$succeed(_Utils_Tuple0)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Language$LabelValue = F2(
    function(label, value) {
      return { label, value };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Language$v2LabelValueDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
    "value",
    $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
    A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
      "label",
      $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
      $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Language$LabelValue)
    )
  );
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoderHelp() {
    return A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "metadata",
      $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Language$v2LabelValueDecoder),
      _List_Nil,
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
        $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeItemsDecoder(),
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$defaultLabelMap,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "@id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Range)
          )
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeItemsDecoder() {
    return A3(
      $elm$json$Json$Decode$map2,
      F2(
        function(subranges, canvases) {
          return _Utils_ap(
            A2($elm$core$List$map, $rism_digital$elm_iiif$IIIF$Presentation$RangeRange, subranges),
            A2($elm$core$List$map, $rism_digital$elm_iiif$IIIF$Presentation$RangeCanvas, canvases)
          );
        }
      ),
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2(
              $elm$json$Json$Decode$field,
              "ranges",
              $elm$json$Json$Decode$list(
                $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoder()
              )
            ),
            $elm$json$Json$Decode$succeed(_List_Nil)
          ]
        )
      ),
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2(
              $elm$json$Json$Decode$field,
              "canvases",
              $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
            ),
            $elm$json$Json$Decode$succeed(_List_Nil)
          ]
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoder() {
    return $elm$json$Json$Decode$lazy(
      function(_v0) {
        return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoderHelp();
      }
    );
  }
  try {
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoderHelp = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoderHelp();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoderHelp = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoderHelp;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeItemsDecoder = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeItemsDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeItemsDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeItemsDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoder = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2RangeDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoder;
    };
  } catch ($) {
    throw "Some top-level definitions from `IIIF.Internal.V2PresentationDecoders` are causing infinite recursion:\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    v2RangeDecoderHelp\n  \u2502     \u2193\n  \u2502    v2RangeItemsDecoder\n  \u2502     \u2193\n  \u2502    v2RangeDecoder\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.1/bad-recursion to learn how to fix it!";
  }
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoderHelp;
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeItemsDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoder;
  var $rism_digital$elm_iiif$IIIF$Presentation$Collection = F4(
    function(id, label, summary, items) {
      return { id, items, label, summary };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$ManifestItem = function(a) {
    return { $: "ManifestItem", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection = function(a) {
    return { $: "NestedCollection", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$IndividualsHint = { $: "IndividualsHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$LayoutV2 = function(a) {
    return { $: "LayoutV2", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight = { $: "LeftToRight" };
  var $rism_digital$elm_iiif$IIIF$Presentation$Manifest = function(id) {
    return function(label) {
      return function(metadata) {
        return function(viewingDirection) {
          return function(summary) {
            return function(viewingLayout) {
              return function(canvases) {
                return function(ranges) {
                  return function(homepage) {
                    return function(logo) {
                      return function(provider) {
                        return function(thumbnail) {
                          return function(requiredStatement) {
                            return { canvases, homepage, id, label, logo, metadata, provider, ranges, requiredStatement, summary, thumbnail, viewingDirection, viewingLayout };
                          };
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        };
      };
    };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$HomePage = F4(
    function(id, label, format, type_) {
      return { format, id, label, type_ };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$OtherFormat = function(a) {
    return { $: "OtherFormat", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$OtherResource = function(a) {
    return { $: "OtherResource", a };
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ImageJpeg = { $: "ImageJpeg" };
  var $rism_digital$elm_iiif$IIIF$Presentation$mediaFormatFromString = function(value) {
    if (value === "image/jpeg") {
      return $rism_digital$elm_iiif$IIIF$Presentation$ImageJpeg;
    } else {
      return $rism_digital$elm_iiif$IIIF$Presentation$OtherFormat(value);
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$formatDecoder = A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$mediaFormatFromString, $elm$json$Json$Decode$string);
  var $rism_digital$elm_iiif$IIIF$Presentation$Video = { $: "Video" };
  var $rism_digital$elm_iiif$IIIF$Presentation$resourceTypeFromString = function(value) {
    if (value === "Video") {
      return $rism_digital$elm_iiif$IIIF$Presentation$Video;
    } else {
      return $rism_digital$elm_iiif$IIIF$Presentation$OtherResource(value);
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder = A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$resourceTypeFromString, $elm$json$Json$Decode$string);
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "@type",
    $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder,
    $rism_digital$elm_iiif$IIIF$Presentation$OtherResource("Text"),
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "format",
      $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$formatDecoder,
      $rism_digital$elm_iiif$IIIF$Presentation$OtherFormat("text/html"),
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "label",
        $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
        $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$defaultLabelMap,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "@id",
          $elm$json$Json$Decode$string,
          $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$HomePage)
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageListDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageDecoder),
        A2($elm$json$Json$Decode$map, $elm$core$List$singleton, $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageDecoder)
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemManifestDecoder = A2(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "thumbnail",
      $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder),
      $elm$core$Maybe$Nothing,
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
        $elm$core$Maybe$Nothing,
        A2(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
          $elm$core$Maybe$Nothing,
          A4(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
            "rendering",
            $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageListDecoder),
            $elm$core$Maybe$Nothing,
            A2(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
              $elm$core$Maybe$Nothing,
              A2(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                _List_Nil,
                A2(
                  $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                  $rism_digital$elm_iiif$IIIF$Presentation$LayoutV2($rism_digital$elm_iiif$IIIF$Presentation$IndividualsHint),
                  A4(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                    "description",
                    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
                    $elm$core$Maybe$Nothing,
                    A2(
                      $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                      $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight,
                      A2(
                        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                        _List_Nil,
                        A3(
                          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                          "label",
                          $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
                          A3(
                            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                            "@id",
                            $elm$json$Json$Decode$string,
                            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Manifest)
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemFromType = function(itemType) {
    switch (itemType) {
      case "sc:Collection":
        return A2(
          $elm$json$Json$Decode$map,
          $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection,
          $elm$json$Json$Decode$lazy(
            function(_v1) {
              return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2iiifCollectionDecoder();
            }
          )
        );
      case "sc:Manifest":
        return A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$ManifestItem, $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemManifestDecoder);
      default:
        return $elm$json$Json$Decode$fail("Unknown collection item type: " + itemType);
    }
  };
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2iiifCollectionDecoder() {
    return A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
      $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemsDecoder(),
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "description",
        $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
        $elm$core$Maybe$Nothing,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "label",
          $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "@id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Collection)
          )
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemsDecoder() {
    return $elm$json$Json$Decode$oneOf(
      _List_fromArray(
        [
          A2(
            $elm$json$Json$Decode$field,
            "members",
            $elm$json$Json$Decode$list(
              $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemDecoder()
            )
          ),
          A3(
            $elm$json$Json$Decode$map2,
            F2(
              function(collections, manifests) {
                return _Utils_ap(collections, manifests);
              }
            ),
            $elm$json$Json$Decode$oneOf(
              _List_fromArray(
                [
                  A2(
                    $elm$json$Json$Decode$field,
                    "collections",
                    $elm$json$Json$Decode$list(
                      A2(
                        $elm$json$Json$Decode$map,
                        $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection,
                        $elm$json$Json$Decode$lazy(
                          function(_v2) {
                            return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2iiifCollectionDecoder();
                          }
                        )
                      )
                    )
                  ),
                  $elm$json$Json$Decode$succeed(_List_Nil)
                ]
              )
            ),
            $elm$json$Json$Decode$oneOf(
              _List_fromArray(
                [
                  A2(
                    $elm$json$Json$Decode$field,
                    "manifests",
                    $elm$json$Json$Decode$list(
                      A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$ManifestItem, $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemManifestDecoder)
                    )
                  ),
                  $elm$json$Json$Decode$succeed(_List_Nil)
                ]
              )
            )
          )
        ]
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemDecoder() {
    return A2(
      $elm$json$Json$Decode$andThen,
      $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemFromType,
      A2($elm$json$Json$Decode$field, "@type", $elm$json$Json$Decode$string)
    );
  }
  try {
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifCollectionDecoder = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2iiifCollectionDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2iiifCollectionDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifCollectionDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemsDecoder = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemsDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemsDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemsDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemDecoder = $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$cyclic$v2CollectionItemDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemDecoder;
    };
  } catch ($) {
    throw "Some top-level definitions from `IIIF.Internal.V2PresentationDecoders` are causing infinite recursion:\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    v2iiifCollectionDecoder\n  \u2502     \u2193\n  \u2502    v2CollectionItemsDecoder\n  \u2502     \u2193\n  \u2502    v2CollectionItemDecoder\n  \u2502     \u2193\n  \u2502    v2CollectionItemFromType\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.1/bad-recursion to learn how to fix it!";
  }
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifCollectionDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemsDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CollectionItemDecoder;
  var $rism_digital$elm_iiif$IIIF$Language$labelValueDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
    "value",
    $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
    A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
      "label",
      $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
      $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Language$LabelValue)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RequiredStatement = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        A2(
          $elm$json$Json$Decode$map,
          function(value) {
            return {
              label: _List_fromArray(
                [
                  A2(
                    $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
                    $rism_digital$elm_iiif$IIIF$Language$Default,
                    _List_fromArray(
                      ["Attribution"]
                    )
                  )
                ]
              ),
              value: _List_fromArray(
                [
                  A2(
                    $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
                    $rism_digital$elm_iiif$IIIF$Language$Default,
                    _List_fromArray(
                      [value]
                    )
                  )
                ]
              )
            };
          },
          $elm$json$Json$Decode$string
        ),
        $rism_digital$elm_iiif$IIIF$Language$labelValueDecoder,
        $rism_digital$elm_iiif$IIIF$Language$v2LabelValueDecoder
      ]
    )
  );
  var $elm$json$Json$Decode$index = _Json_decodeIndex;
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2SequencesDecoder = A2(
    $elm$json$Json$Decode$index,
    0,
    A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["canvases"]
      ),
      $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CanvasDecoder)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$BottomToTop = { $: "BottomToTop" };
  var $rism_digital$elm_iiif$IIIF$Presentation$RightToLeft = { $: "RightToLeft" };
  var $rism_digital$elm_iiif$IIIF$Presentation$TopToBottom = { $: "TopToBottom" };
  var $rism_digital$elm_iiif$IIIF$Presentation$stringToViewingDirection = function(direction) {
    switch (direction) {
      case "bottom-to-top":
        return $rism_digital$elm_iiif$IIIF$Presentation$BottomToTop;
      case "left-to-right":
        return $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight;
      case "right-to-left":
        return $rism_digital$elm_iiif$IIIF$Presentation$RightToLeft;
      case "top-to-bottom":
        return $rism_digital$elm_iiif$IIIF$Presentation$TopToBottom;
      default:
        return $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingDirectionValueConverter = function(direction) {
    return $elm$json$Json$Decode$succeed(
      $rism_digital$elm_iiif$IIIF$Presentation$stringToViewingDirection(direction)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingDirectionDecoder = A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingDirectionValueConverter, $elm$json$Json$Decode$string);
  var $rism_digital$elm_iiif$IIIF$Presentation$ContinuousHint = { $: "ContinuousHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$FacingPagesHint = { $: "FacingPagesHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$MultiPartHint = { $: "MultiPartHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$NonPagedHint = { $: "NonPagedHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$PagedHint = { $: "PagedHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$TopHint = { $: "TopHint" };
  var $rism_digital$elm_iiif$IIIF$Presentation$stringToViewingHint = function(hint) {
    switch (hint) {
      case "continuous":
        return $rism_digital$elm_iiif$IIIF$Presentation$ContinuousHint;
      case "facing-pages":
        return $rism_digital$elm_iiif$IIIF$Presentation$FacingPagesHint;
      case "individuals":
        return $rism_digital$elm_iiif$IIIF$Presentation$IndividualsHint;
      case "multi-part":
        return $rism_digital$elm_iiif$IIIF$Presentation$MultiPartHint;
      case "non-paged":
        return $rism_digital$elm_iiif$IIIF$Presentation$NonPagedHint;
      case "paged":
        return $rism_digital$elm_iiif$IIIF$Presentation$PagedHint;
      case "top":
        return $rism_digital$elm_iiif$IIIF$Presentation$TopHint;
      default:
        return $rism_digital$elm_iiif$IIIF$Presentation$PagedHint;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingHintValueConverter = function(hint) {
    return $elm$json$Json$Decode$succeed(
      $rism_digital$elm_iiif$IIIF$Presentation$stringToViewingHint(hint)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingHintDecoder = A2(
    $elm$json$Json$Decode$map,
    $rism_digital$elm_iiif$IIIF$Presentation$LayoutV2,
    A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingHintValueConverter, $elm$json$Json$Decode$string)
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifManifestDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "attribution",
    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RequiredStatement),
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "thumbnail",
      $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder),
      $elm$core$Maybe$Nothing,
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
        $elm$core$Maybe$Nothing,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "logo",
          $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ImageDecoder),
          $elm$core$Maybe$Nothing,
          A4(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
            "rendering",
            $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2HomePageListDecoder),
            $elm$core$Maybe$Nothing,
            A4(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
              "structures",
              $elm$json$Json$Decode$maybe(
                $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoder)
              ),
              $elm$core$Maybe$Nothing,
              A3(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                "sequences",
                $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2SequencesDecoder,
                A4(
                  $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                  "viewingHint",
                  $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingHintDecoder,
                  $rism_digital$elm_iiif$IIIF$Presentation$LayoutV2($rism_digital$elm_iiif$IIIF$Presentation$IndividualsHint),
                  A4(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                    "description",
                    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder),
                    $elm$core$Maybe$Nothing,
                    A4(
                      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                      "viewingDirection",
                      $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingDirectionDecoder,
                      $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight,
                      A4(
                        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                        "metadata",
                        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Language$v2LabelValueDecoder),
                        _List_Nil,
                        A3(
                          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                          "label",
                          $rism_digital$elm_iiif$IIIF$Language$v2LanguageMapLabelDecoder,
                          A3(
                            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                            "@id",
                            $elm$json$Json$Decode$string,
                            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Manifest)
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ResourceFromType = function(resourceType) {
    switch (resourceType) {
      case "sc:Canvas":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceCanvas,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFCanvas($rism_digital$elm_iiif$IIIF$Version$IIIFV2)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2CanvasDecoder
        );
      case "sc:Collection":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceCollection,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFCollection($rism_digital$elm_iiif$IIIF$Version$IIIFV2)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifCollectionDecoder
        );
      case "sc:Manifest":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceManifest,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV2)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifManifestDecoder
        );
      case "sc:Range":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceRange,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFRange($rism_digital$elm_iiif$IIIF$Version$IIIFV2)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2RangeDecoder
        );
      default:
        return $elm$json$Json$Decode$fail("Unknown IIIF v2 resource type: " + resourceType);
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ResourceTypeDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ResourceFromType,
    A2($elm$json$Json$Decode$field, "@type", $elm$json$Json$Decode$string)
  );
  var $rism_digital$elm_iiif$IIIF$Version$IIIFV3 = { $: "IIIFV3" };
  var $rism_digital$elm_iiif$IIIF$Image$imageUriToInfoUri = function(inp) {
    if (inp.$ === "InfoUri") {
      return inp;
    } else {
      var params = inp.a;
      return $rism_digital$elm_iiif$IIIF$Image$InfoUri(
        { host: params.host, prefix: params.prefix }
      );
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$selectServiceId = function(services) {
    var imageService3Id = A2(
      $elm$core$Maybe$map,
      function($) {
        return $.id;
      },
      $elm$core$List$head(
        A2(
          $elm$core$List$filter,
          function(s) {
            return _Utils_eq(s.serviceType, $rism_digital$elm_iiif$IIIF$Presentation$ImageService3);
          },
          services
        )
      )
    );
    if (imageService3Id.$ === "Just") {
      var id = imageService3Id.a;
      return $elm$core$Maybe$Just(id);
    } else {
      return A2(
        $elm$core$Maybe$map,
        function($) {
          return $.id;
        },
        $elm$core$List$head(services)
      );
    }
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$ServiceObject = F2(
    function(id, serviceType) {
      return { id, serviceType };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$serviceTypeDecoder = function(val) {
    return $elm$json$Json$Decode$succeed(
      $rism_digital$elm_iiif$IIIF$Presentation$stringToServiceType(val)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$serviceTypeDecoder,
    $elm$json$Json$Decode$oneOf(
      _List_fromArray(
        [
          A2($elm$json$Json$Decode$field, "@type", $elm$json$Json$Decode$string),
          A2($elm$json$Json$Decode$field, "type", $elm$json$Json$Decode$string)
        ]
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectDecoder = A2(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeDecoder,
    A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2($elm$json$Json$Decode$field, "id", $elm$json$Json$Decode$string),
            A2($elm$json$Json$Decode$field, "@id", $elm$json$Json$Decode$string)
          ]
        )
      ),
      $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$ServiceObject)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectListDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectDecoder),
        A2($elm$json$Json$Decode$map, $elm$core$List$singleton, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectDecoder)
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageIdFromServiceDecoder = A2(
    $elm$json$Json$Decode$andThen,
    function(services) {
      var _v0 = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$selectServiceId(services);
      if (_v0.$ === "Just") {
        var id = _v0.a;
        return A2(
          $elm$json$Json$Decode$map,
          $rism_digital$elm_iiif$IIIF$Image$imageUriToInfoUri,
          $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$convertImageIdToImageUri(id)
        );
      } else {
        return $elm$json$Json$Decode$fail("No valid service ID found in service array");
      }
    },
    A2($elm$json$Json$Decode$field, "service", $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectListDecoder)
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [$rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder, $rism_digital$elm_iiif$IIIF$Language$stringToLanguageMapLabelDecoder]
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeListDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeDecoder),
        A2($elm$json$Json$Decode$map, $elm$core$List$singleton, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeDecoder)
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder = function(imageType) {
    return A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "service",
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceTypeListDecoder,
      _List_Nil,
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
        imageType,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder),
          $elm$core$Maybe$Nothing,
          A2(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
            $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageIdFromServiceDecoder,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Image)
          )
        )
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ChoiceBodyDecoder = A2(
    $elm$json$Json$Decode$at,
    _List_fromArray(
      ["body", "items"]
    ),
    $elm$json$Json$Decode$list(
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder($rism_digital$elm_iiif$IIIF$Presentation$ChoiceImage)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationImageDecoder = function(imageUrl) {
    var _v0 = $rism_digital$elm_iiif$IIIF$Image$parseImageAddress(imageUrl);
    if (_v0.$ === "Just") {
      return A2(
        $elm$json$Json$Decode$map,
        $elm$core$List$singleton,
        A2(
          $elm$json$Json$Decode$field,
          "body",
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder($rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage)
        )
      );
    } else {
      return $elm$json$Json$Decode$fail("Could not decode image url");
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageBodyDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationImageDecoder,
    A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["body", "id"]
      ),
      $elm$json$Json$Decode$string
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationChoiceTypeDecoder = function(annotType) {
    return annotType === "Choice" ? $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ChoiceBodyDecoder : $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageBodyDecoder;
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationBodyDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationChoiceTypeDecoder,
    A2(
      $elm$json$Json$Decode$at,
      _List_fromArray(
        ["body", "type"]
      ),
      $elm$json$Json$Decode$string
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationPageDecoder = A2(
    $elm$json$Json$Decode$at,
    _List_fromArray(
      ["items"]
    ),
    A2($elm$json$Json$Decode$index, 0, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationBodyDecoder)
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CanvasDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
    "items",
    A2($elm$json$Json$Decode$index, 0, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3AnnotationPageDecoder),
    A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
      "height",
      $elm$json$Json$Decode$maybe($elm$json$Json$Decode$int),
      A3(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
        "width",
        $elm$json$Json$Decode$maybe($elm$json$Json$Decode$int),
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder),
          $elm$core$Maybe$Nothing,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Canvas)
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$defaultLabelMap = _List_fromArray(
    [
      A2(
        $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
        $rism_digital$elm_iiif$IIIF$Language$Default,
        _List_fromArray(
          ["Homepage"]
        )
      )
    ]
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeItemFromType = function(itemType) {
    switch (itemType) {
      case "Canvas":
        return A2(
          $elm$json$Json$Decode$map,
          $rism_digital$elm_iiif$IIIF$Presentation$RangeCanvas,
          A2($elm$json$Json$Decode$field, "id", $elm$json$Json$Decode$string)
        );
      case "Range":
        return A2(
          $elm$json$Json$Decode$map,
          $rism_digital$elm_iiif$IIIF$Presentation$RangeRange,
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeDecoder()
        );
      default:
        return $elm$json$Json$Decode$fail("Unsupported range item type");
    }
  };
  function $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeDecoder() {
    return A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "metadata",
      $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Language$labelValueDecoder),
      _List_Nil,
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "items",
        $elm$json$Json$Decode$list(
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeItemDecoder()
        ),
        _List_Nil,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "label",
          $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$defaultLabelMap,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Range)
          )
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeItemDecoder() {
    return A2(
      $elm$json$Json$Decode$andThen,
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeItemFromType,
      A2($elm$json$Json$Decode$field, "type", $elm$json$Json$Decode$string)
    );
  }
  try {
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeDecoder = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeItemDecoder = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeItemDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3RangeItemDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeItemDecoder;
    };
  } catch ($) {
    throw "Some top-level definitions from `IIIF.Internal.V3PresentationDecoders` are causing infinite recursion:\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    v3RangeDecoder\n  \u2502     \u2193\n  \u2502    v3RangeItemDecoder\n  \u2502     \u2193\n  \u2502    v3RangeItemFromType\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.1/bad-recursion to learn how to fix it!";
  }
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeItemDecoder;
  var $rism_digital$elm_iiif$IIIF$Presentation$IndividualsBehavior = { $: "IndividualsBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$LayoutV3 = function(a) {
    return { $: "LayoutV3", a };
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3HomePageDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "type",
    $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder,
    $rism_digital$elm_iiif$IIIF$Presentation$OtherResource("Text"),
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "format",
      $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$formatDecoder,
      $rism_digital$elm_iiif$IIIF$Presentation$OtherFormat("text/html"),
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "label",
        $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
        $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$defaultLabelMap,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "id",
          $elm$json$Json$Decode$string,
          $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$HomePage)
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemManifestDecoder = A2(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "thumbnail",
      $elm$json$Json$Decode$maybe(
        $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder($rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage)
      ),
      $elm$core$Maybe$Nothing,
      A2(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
        $elm$core$Maybe$Nothing,
        A2(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
          $elm$core$Maybe$Nothing,
          A4(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
            "homepage",
            $elm$json$Json$Decode$maybe(
              $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3HomePageDecoder)
            ),
            $elm$core$Maybe$Nothing,
            A2(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
              $elm$core$Maybe$Nothing,
              A2(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                _List_Nil,
                A2(
                  $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                  $rism_digital$elm_iiif$IIIF$Presentation$LayoutV3(
                    _List_fromArray(
                      [$rism_digital$elm_iiif$IIIF$Presentation$IndividualsBehavior]
                    )
                  ),
                  A4(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                    "summary",
                    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder),
                    $elm$core$Maybe$Nothing,
                    A2(
                      $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                      $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight,
                      A2(
                        $rism_digital$elm_iiif$IIIF$Internal$Utilities$hardcoded,
                        _List_Nil,
                        A3(
                          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                          "label",
                          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder,
                          A3(
                            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                            "id",
                            $elm$json$Json$Decode$string,
                            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Manifest)
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemFromType = function(itemType) {
    switch (itemType) {
      case "Collection":
        return A2(
          $elm$json$Json$Decode$map,
          $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection,
          $elm$json$Json$Decode$lazy(
            function(_v1) {
              return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3iiifCollectionDecoder();
            }
          )
        );
      case "Manifest":
        return A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$ManifestItem, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemManifestDecoder);
      default:
        return $elm$json$Json$Decode$fail("Unknown collection item type: " + itemType);
    }
  };
  function $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3iiifCollectionDecoder() {
    return A2(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$custom,
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemsDecoder(),
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "summary",
        $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder),
        $elm$core$Maybe$Nothing,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "label",
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "id",
            $elm$json$Json$Decode$string,
            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Collection)
          )
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemsDecoder() {
    return A4(
      $elm$json$Json$Decode$map3,
      F3(
        function(items, collections, manifests) {
          return $elm$core$List$isEmpty(items) ? _Utils_ap(collections, manifests) : _Utils_ap(
            items,
            _Utils_ap(collections, manifests)
          );
        }
      ),
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2(
              $elm$json$Json$Decode$field,
              "items",
              $elm$json$Json$Decode$list(
                $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemDecoder()
              )
            ),
            $elm$json$Json$Decode$succeed(_List_Nil)
          ]
        )
      ),
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2(
              $elm$json$Json$Decode$field,
              "collections",
              $elm$json$Json$Decode$list(
                A2(
                  $elm$json$Json$Decode$map,
                  $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection,
                  $elm$json$Json$Decode$lazy(
                    function(_v2) {
                      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3iiifCollectionDecoder();
                    }
                  )
                )
              )
            ),
            $elm$json$Json$Decode$succeed(_List_Nil)
          ]
        )
      ),
      $elm$json$Json$Decode$oneOf(
        _List_fromArray(
          [
            A2(
              $elm$json$Json$Decode$field,
              "manifests",
              $elm$json$Json$Decode$list(
                A2($elm$json$Json$Decode$map, $rism_digital$elm_iiif$IIIF$Presentation$ManifestItem, $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemManifestDecoder)
              )
            ),
            $elm$json$Json$Decode$succeed(_List_Nil)
          ]
        )
      )
    );
  }
  function $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemDecoder() {
    return A2(
      $elm$json$Json$Decode$andThen,
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemFromType,
      A2($elm$json$Json$Decode$field, "type", $elm$json$Json$Decode$string)
    );
  }
  try {
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifCollectionDecoder = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3iiifCollectionDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3iiifCollectionDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifCollectionDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemsDecoder = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemsDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemsDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemsDecoder;
    };
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemDecoder = $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemDecoder();
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$cyclic$v3CollectionItemDecoder = function() {
      return $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemDecoder;
    };
  } catch ($) {
    throw "Some top-level definitions from `IIIF.Internal.V3PresentationDecoders` are causing infinite recursion:\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    v3iiifCollectionDecoder\n  \u2502     \u2193\n  \u2502    v3CollectionItemsDecoder\n  \u2502     \u2193\n  \u2502    v3CollectionItemDecoder\n  \u2502     \u2193\n  \u2502    v3CollectionItemFromType\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.1/bad-recursion to learn how to fix it!";
  }
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifCollectionDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemsDecoder;
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CollectionItemDecoder;
  var $rism_digital$elm_iiif$IIIF$Presentation$AutoAdvanceBehavior = { $: "AutoAdvanceBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ContinuousBehavior = { $: "ContinuousBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$FacingPagesBehavior = { $: "FacingPagesBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$HiddenBehavior = { $: "HiddenBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$MultiPartBehavior = { $: "MultiPartBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$NoAutoAdvanceBehavior = { $: "NoAutoAdvanceBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$NoNavBehavior = { $: "NoNavBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$NoRepeatBehavior = { $: "NoRepeatBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$NonPagedBehavior = { $: "NonPagedBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$PagedBehavior = { $: "PagedBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$RepeatBehavior = { $: "RepeatBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$SequenceBehavior = { $: "SequenceBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$ThumbnailNavBehavior = { $: "ThumbnailNavBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$TogetherBehavior = { $: "TogetherBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$UnorderedBehavior = { $: "UnorderedBehavior" };
  var $rism_digital$elm_iiif$IIIF$Presentation$stringToBehavior = function(behavior) {
    switch (behavior) {
      case "auto-advance":
        return $rism_digital$elm_iiif$IIIF$Presentation$AutoAdvanceBehavior;
      case "continuous":
        return $rism_digital$elm_iiif$IIIF$Presentation$ContinuousBehavior;
      case "facing-pages":
        return $rism_digital$elm_iiif$IIIF$Presentation$FacingPagesBehavior;
      case "hidden":
        return $rism_digital$elm_iiif$IIIF$Presentation$HiddenBehavior;
      case "individuals":
        return $rism_digital$elm_iiif$IIIF$Presentation$IndividualsBehavior;
      case "multi-part":
        return $rism_digital$elm_iiif$IIIF$Presentation$MultiPartBehavior;
      case "no-auto-advance":
        return $rism_digital$elm_iiif$IIIF$Presentation$NoAutoAdvanceBehavior;
      case "no-nav":
        return $rism_digital$elm_iiif$IIIF$Presentation$NoNavBehavior;
      case "no-repeat":
        return $rism_digital$elm_iiif$IIIF$Presentation$NoRepeatBehavior;
      case "non-paged":
        return $rism_digital$elm_iiif$IIIF$Presentation$NonPagedBehavior;
      case "paged":
        return $rism_digital$elm_iiif$IIIF$Presentation$PagedBehavior;
      case "repeat":
        return $rism_digital$elm_iiif$IIIF$Presentation$RepeatBehavior;
      case "sequence":
        return $rism_digital$elm_iiif$IIIF$Presentation$SequenceBehavior;
      case "thumbnail-nav":
        return $rism_digital$elm_iiif$IIIF$Presentation$ThumbnailNavBehavior;
      case "together":
        return $rism_digital$elm_iiif$IIIF$Presentation$TogetherBehavior;
      case "unordered":
        return $rism_digital$elm_iiif$IIIF$Presentation$UnorderedBehavior;
      default:
        return $rism_digital$elm_iiif$IIIF$Presentation$PagedBehavior;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$behaviourValueConverter = function(behavior) {
    return $elm$json$Json$Decode$succeed(
      $rism_digital$elm_iiif$IIIF$Presentation$stringToBehavior(behavior)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$behaviourDecoder = A2(
    $elm$json$Json$Decode$map,
    $rism_digital$elm_iiif$IIIF$Presentation$LayoutV3,
    $elm$json$Json$Decode$list(
      A2($elm$json$Json$Decode$andThen, $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$behaviourValueConverter, $elm$json$Json$Decode$string)
    )
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$Provider = F6(
    function(id, label, type_, homepage, logo, seeAlso) {
      return { homepage, id, label, logo, seeAlso, type_ };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$Logo = F7(
    function(id, label, format, type_, width, height, service) {
      return { format, height, id, label, service, type_, width };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$defaultLogoLabelMap = _List_fromArray(
    [
      A2(
        $rism_digital$elm_iiif$IIIF$Language$LanguageValues,
        $rism_digital$elm_iiif$IIIF$Language$Default,
        _List_fromArray(
          ["Logo"]
        )
      )
    ]
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LogoDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "service",
    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ServiceObjectListDecoder),
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "height",
      $elm$json$Json$Decode$int,
      0,
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "width",
        $elm$json$Json$Decode$int,
        0,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "type",
          $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder,
          $rism_digital$elm_iiif$IIIF$Presentation$OtherResource("Image"),
          A4(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
            "format",
            $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$formatDecoder,
            $rism_digital$elm_iiif$IIIF$Presentation$OtherFormat("image/png"),
            A4(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
              "label",
              $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
              $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$defaultLogoLabelMap,
              A3(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                "id",
                $elm$json$Json$Decode$string,
                $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Logo)
              )
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$SeeAlso = F4(
    function(id, label, format, type_) {
      return { format, id, label, type_ };
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3SeeAlsoDecoder = A3(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
    "type_",
    $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder,
    A3(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
      "format",
      $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$formatDecoder,
      A3(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
        "label",
        $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "id",
          $elm$json$Json$Decode$string,
          $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$SeeAlso)
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ProviderDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "seeAlso",
    $elm$json$Json$Decode$maybe(
      $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3SeeAlsoDecoder)
    ),
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "logo",
      $elm$json$Json$Decode$maybe(
        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LogoDecoder)
      ),
      $elm$core$Maybe$Nothing,
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "homepage",
        $elm$json$Json$Decode$maybe(
          $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3HomePageDecoder)
        ),
        $elm$core$Maybe$Nothing,
        A3(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
          "type",
          $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$resourceTypeDecoder,
          A3(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
            "label",
            $rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder,
            A3(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
              "id",
              $elm$json$Json$Decode$string,
              $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Provider)
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifManifestDecoder = A4(
    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
    "requiredStatement",
    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$labelValueDecoder),
    $elm$core$Maybe$Nothing,
    A4(
      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
      "thumbnail",
      $elm$json$Json$Decode$maybe(
        $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder($rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage)
      ),
      $elm$core$Maybe$Nothing,
      A4(
        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
        "provider",
        $elm$json$Json$Decode$maybe(
          $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ProviderDecoder)
        ),
        $elm$core$Maybe$Nothing,
        A4(
          $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
          "logo",
          $elm$json$Json$Decode$maybe(
            $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ImageDecoder($rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage)
          ),
          $elm$core$Maybe$Nothing,
          A4(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
            "homepage",
            $elm$json$Json$Decode$maybe(
              $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3HomePageDecoder)
            ),
            $elm$core$Maybe$Nothing,
            A4(
              $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
              "structures",
              $elm$json$Json$Decode$maybe(
                $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeDecoder)
              ),
              $elm$core$Maybe$Nothing,
              A3(
                $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                "items",
                $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CanvasDecoder),
                A4(
                  $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                  "behavior",
                  $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$behaviourDecoder,
                  $rism_digital$elm_iiif$IIIF$Presentation$LayoutV3(
                    _List_fromArray(
                      [$rism_digital$elm_iiif$IIIF$Presentation$IndividualsBehavior]
                    )
                  ),
                  A4(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                    "summary",
                    $elm$json$Json$Decode$maybe($rism_digital$elm_iiif$IIIF$Language$languageMapLabelDecoder),
                    $elm$core$Maybe$Nothing,
                    A4(
                      $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                      "viewingDirection",
                      $rism_digital$elm_iiif$IIIF$Internal$SharedDecoders$viewingDirectionDecoder,
                      $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight,
                      A4(
                        $rism_digital$elm_iiif$IIIF$Internal$Utilities$optional,
                        "metadata",
                        $elm$json$Json$Decode$list($rism_digital$elm_iiif$IIIF$Language$labelValueDecoder),
                        _List_Nil,
                        A3(
                          $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                          "label",
                          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3LabelDecoder,
                          A3(
                            $rism_digital$elm_iiif$IIIF$Internal$Utilities$required,
                            "id",
                            $elm$json$Json$Decode$string,
                            $elm$json$Json$Decode$succeed($rism_digital$elm_iiif$IIIF$Presentation$Manifest)
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    )
  );
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ResourceFromType = function(resourceType) {
    switch (resourceType) {
      case "Canvas":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceCanvas,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFCanvas($rism_digital$elm_iiif$IIIF$Version$IIIFV3)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3CanvasDecoder
        );
      case "Collection":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceCollection,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFCollection($rism_digital$elm_iiif$IIIF$Version$IIIFV3)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifCollectionDecoder
        );
      case "Manifest":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceManifest,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV3)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifManifestDecoder
        );
      case "Range":
        return A2(
          $elm$json$Json$Decode$map,
          A2(
            $elm$core$Basics$composeL,
            $rism_digital$elm_iiif$IIIF$Presentation$ResourceRange,
            $rism_digital$elm_iiif$IIIF$Presentation$IIIFRange($rism_digital$elm_iiif$IIIF$Version$IIIFV3)
          ),
          $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3RangeDecoder
        );
      default:
        return $elm$json$Json$Decode$fail("Unknown IIIF v3 resource type: " + resourceType);
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ResourceTypeDecoder = A2(
    $elm$json$Json$Decode$andThen,
    $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ResourceFromType,
    A2($elm$json$Json$Decode$field, "type", $elm$json$Json$Decode$string)
  );
  var $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$resourceContextListDecoder = function(contextValues) {
    return A2($elm$core$List$member, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV3PresentationContextString, contextValues) ? $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ResourceTypeDecoder : A2($elm$core$List$member, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV2PresentationContextString, contextValues) ? $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ResourceTypeDecoder : $elm$json$Json$Decode$fail(
      "Context values contain an unknown IIIF version: " + A2($elm$core$String$join, ", ", contextValues)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$resourceContextStringDecoder = function(contextValue) {
    return _Utils_eq(contextValue, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV3PresentationContextString) ? $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3ResourceTypeDecoder : _Utils_eq(contextValue, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV2PresentationContextString) ? $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2ResourceTypeDecoder : $elm$json$Json$Decode$fail("Unknown resource context value: " + contextValue);
  };
  var $rism_digital$elm_iiif$IIIF$Decoders$resourceDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        A2(
          $elm$json$Json$Decode$andThen,
          $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$resourceContextStringDecoder,
          A2($elm$json$Json$Decode$field, "@context", $elm$json$Json$Decode$string)
        ),
        A2(
          $elm$json$Json$Decode$andThen,
          $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$resourceContextListDecoder,
          A2(
            $elm$json$Json$Decode$field,
            "@context",
            $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
          )
        )
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$requestResource = F3(
    function(responseMsg, acceptHeaders, url) {
      return A3(
        $rism_digital$elm_iiif$IIIF$Internal$Request$request,
        acceptHeaders,
        A2($elm$http$Http$expectJson, responseMsg, $rism_digital$elm_iiif$IIIF$Decoders$resourceDecoder),
        url
      );
    }
  );
  var $author$project$Filters$resetFilters = { adaptiveEnabled: false, adaptiveOffset: 10, adaptiveWindow: 15, altBlueGamma: 0, altBlueGammaEnabled: false, altBlueHue: 0, altBlueHueEnabled: false, altBlueHueWindow: 8, altBlueSigmoid: 0, altBlueSigmoidEnabled: false, altBlueVibrance: 0, altBlueVibranceEnabled: false, altGreenGamma: 0, altGreenGammaEnabled: false, altGreenHue: 0, altGreenHueEnabled: false, altGreenHueWindow: 8, altGreenSigmoid: 0, altGreenSigmoidEnabled: false, altGreenVibrance: 0, altGreenVibranceEnabled: false, altRedGamma: 0, altRedGammaEnabled: false, altRedHue: 0, altRedHueEnabled: false, altRedHueWindow: 8, altRedSigmoid: 0, altRedSigmoidEnabled: false, altRedVibrance: 0, altRedVibranceEnabled: false, brightness: 0, brightnessEnabled: false, ccBlue: 0, ccBlueEnabled: false, ccGreen: 0, ccGreenEnabled: false, ccRed: 0, ccRedEnabled: false, colourReplaceBlend: 1, colourReplaceEnabled: false, colourReplacePreserveLum: false, colourReplaceSource: "#ffffff", colourReplaceTarget: "#ffffff", colourReplaceTolerance: 24, colourmapCenter: 128, colourmapEnabled: false, colourmapPreset: "gray", contrast: 1, contrastEnabled: false, convolutionEnabled: false, convolutionPreset: "sharpen", flip: false, gamma: 1, gammaEnabled: false, grayscale: false, hue: 0, hueEnabled: false, invert: false, morphEnabled: false, morphKernel: 3, morphOperation: "erode", normalizeEnabled: false, normalizeStrength: 1, pcaEnabled: false, pcaMode: "pca-rgb", pseudoColourBlue: 1, pseudoColourEnabled: false, pseudoColourGreen: 1, pseudoColourMode: "rg", pseudoColourRed: 1, rotation: 0, saturation: 0, saturationEnabled: false, threshold: 128, thresholdEnabled: false, unsharpAmount: 1, unsharpEnabled: false, vibrance: 0, vibranceEnabled: false };
  var $elm$core$Basics$round = _Basics_round;
  var $author$project$Main$init = function(flags) {
    var userLanguage = $rism_digital$elm_iiif$IIIF$Language$LanguageCode(flags.userLanguage);
    var sidebarState = flags.showSidebar ? $author$project$Model$SidebarThumbnails : $author$project$Model$SidebarHidden;
    var manifestUrl = flags.objectData;
    return _Utils_Tuple2(
      { acceptHeaders: flags.acceptHeaders, canvasIndexMap: $elm$core$Dict$empty, collectionSidebarDrag: $elm$core$Maybe$Nothing, collectionSidebarVisible: true, collectionSidebarWidth: 400, contentsView: $author$project$Model$ContentsIndex, detectedLanguage: userLanguage, filterGroupExpanded: $elm$core$Set$empty, filters: $author$project$Filters$resetFilters, filtersJsonError: $elm$core$Maybe$Nothing, filtersJsonInput: "", fullscreen: false, isMobile: false, isViewerLoading: false, manifestInfoOpen: false, manifestUrl, mobileSidebarOpen: false, pageViewFullscreen: false, pageViewImageIndex: 0, pageViewOpen: false, pageViewSidebarVisible: true, pages: _List_Nil, pendingThumbScroll: $elm$core$Maybe$Nothing, rangeIndexMap: $elm$core$Dict$empty, resourceResponse: $author$project$Model$ResourceNotRequested, response: $author$project$Model$NotRequested, rootElementId: flags.rootElementId, selectedIndex: $elm$core$Maybe$Nothing, selectedRangeId: $elm$core$Maybe$Nothing, shiftByOne: false, showTitle: flags.showTitle, sidebarDrag: $elm$core$Maybe$Nothing, sidebarState, sidebarWidth: 320, thumbsInstantScroll: false, tileSources: _List_Nil, viewMode: $author$project$Model$OneUp, zoom: 1 },
      $elm$core$Platform$Cmd$batch(
        _List_fromArray(
          [
            A3($rism_digital$elm_iiif$IIIF$requestResource, $author$project$Msg$ServerRespondedWithResource, flags.acceptHeaders, manifestUrl),
            A2(
              $elm$core$Task$perform,
              function(_v0) {
                return $author$project$Msg$SetResponseLoading;
              },
              $elm$core$Task$succeed(_Utils_Tuple0)
            ),
            A2(
              $elm$core$Task$perform,
              function(viewport) {
                return A2(
                  $author$project$Msg$ViewportChanged,
                  $elm$core$Basics$round(viewport.viewport.width),
                  $elm$core$Basics$round(viewport.viewport.height)
                );
              },
              $elm$browser$Browser$Dom$getViewport
            )
          ]
        )
      )
    );
  };
  var $author$project$Msg$ClientNotifiedFullscreenChanged = function(a) {
    return { $: "ClientNotifiedFullscreenChanged", a };
  };
  var $author$project$Msg$ClientNotifiedPageChanged = function(a) {
    return { $: "ClientNotifiedPageChanged", a };
  };
  var $author$project$Msg$ClientNotifiedPageChangedInstant = function(a) {
    return { $: "ClientNotifiedPageChangedInstant", a };
  };
  var $author$project$Msg$UserChangedZoomLevel = function(a) {
    return { $: "UserChangedZoomLevel", a };
  };
  var $author$project$Msg$UserDraggedCollectionSidebarResize = function(a) {
    return { $: "UserDraggedCollectionSidebarResize", a };
  };
  var $author$project$Msg$UserDraggedSidebarResize = function(a) {
    return { $: "UserDraggedSidebarResize", a };
  };
  var $author$project$Msg$UserEndedCollectionSidebarResize = { $: "UserEndedCollectionSidebarResize" };
  var $author$project$Msg$UserEndedSidebarResize = { $: "UserEndedSidebarResize" };
  var $author$project$Msg$ViewerLoadingChanged = function(a) {
    return { $: "ViewerLoadingChanged", a };
  };
  var $elm$core$Platform$Sub$batch = _Platform_batch;
  var $author$project$Main$fullscreenChanged = _Platform_incomingPort("fullscreenChanged", $elm$json$Json$Decode$bool);
  var $elm$core$Platform$Sub$none = $elm$core$Platform$Sub$batch(_List_Nil);
  var $elm$browser$Browser$Events$Document = { $: "Document" };
  var $elm$browser$Browser$Events$MySub = F3(
    function(a, b, c) {
      return { $: "MySub", a, b, c };
    }
  );
  var $elm$browser$Browser$Events$State = F2(
    function(subs, pids) {
      return { pids, subs };
    }
  );
  var $elm$browser$Browser$Events$init = $elm$core$Task$succeed(
    A2($elm$browser$Browser$Events$State, _List_Nil, $elm$core$Dict$empty)
  );
  var $elm$browser$Browser$Events$nodeToKey = function(node) {
    if (node.$ === "Document") {
      return "d_";
    } else {
      return "w_";
    }
  };
  var $elm$browser$Browser$Events$addKey = function(sub) {
    var node = sub.a;
    var name = sub.b;
    return _Utils_Tuple2(
      _Utils_ap(
        $elm$browser$Browser$Events$nodeToKey(node),
        name
      ),
      sub
    );
  };
  var $elm$browser$Browser$Events$Event = F2(
    function(key, event) {
      return { event, key };
    }
  );
  var $elm$browser$Browser$Events$spawn = F3(
    function(router, key, _v0) {
      var node = _v0.a;
      var name = _v0.b;
      var actualNode = (function() {
        if (node.$ === "Document") {
          return _Browser_doc;
        } else {
          return _Browser_window;
        }
      })();
      return A2(
        $elm$core$Task$map,
        function(value) {
          return _Utils_Tuple2(key, value);
        },
        A3(
          _Browser_on,
          actualNode,
          name,
          function(event) {
            return A2(
              $elm$core$Platform$sendToSelf,
              router,
              A2($elm$browser$Browser$Events$Event, key, event)
            );
          }
        )
      );
    }
  );
  var $elm$core$Dict$union = F2(
    function(t1, t2) {
      return A3($elm$core$Dict$foldl, $elm$core$Dict$insert, t2, t1);
    }
  );
  var $elm$browser$Browser$Events$onEffects = F3(
    function(router, subs, state) {
      var stepRight = F3(
        function(key, sub, _v6) {
          var deads = _v6.a;
          var lives = _v6.b;
          var news = _v6.c;
          return _Utils_Tuple3(
            deads,
            lives,
            A2(
              $elm$core$List$cons,
              A3($elm$browser$Browser$Events$spawn, router, key, sub),
              news
            )
          );
        }
      );
      var stepLeft = F3(
        function(_v4, pid, _v5) {
          var deads = _v5.a;
          var lives = _v5.b;
          var news = _v5.c;
          return _Utils_Tuple3(
            A2($elm$core$List$cons, pid, deads),
            lives,
            news
          );
        }
      );
      var stepBoth = F4(
        function(key, pid, _v2, _v3) {
          var deads = _v3.a;
          var lives = _v3.b;
          var news = _v3.c;
          return _Utils_Tuple3(
            deads,
            A3($elm$core$Dict$insert, key, pid, lives),
            news
          );
        }
      );
      var newSubs = A2($elm$core$List$map, $elm$browser$Browser$Events$addKey, subs);
      var _v0 = A6(
        $elm$core$Dict$merge,
        stepLeft,
        stepBoth,
        stepRight,
        state.pids,
        $elm$core$Dict$fromList(newSubs),
        _Utils_Tuple3(_List_Nil, $elm$core$Dict$empty, _List_Nil)
      );
      var deadPids = _v0.a;
      var livePids = _v0.b;
      var makeNewPids = _v0.c;
      return A2(
        $elm$core$Task$andThen,
        function(pids) {
          return $elm$core$Task$succeed(
            A2(
              $elm$browser$Browser$Events$State,
              newSubs,
              A2(
                $elm$core$Dict$union,
                livePids,
                $elm$core$Dict$fromList(pids)
              )
            )
          );
        },
        A2(
          $elm$core$Task$andThen,
          function(_v1) {
            return $elm$core$Task$sequence(makeNewPids);
          },
          $elm$core$Task$sequence(
            A2($elm$core$List$map, $elm$core$Process$kill, deadPids)
          )
        )
      );
    }
  );
  var $elm$browser$Browser$Events$onSelfMsg = F3(
    function(router, _v0, state) {
      var key = _v0.key;
      var event = _v0.event;
      var toMessage = function(_v2) {
        var subKey = _v2.a;
        var _v3 = _v2.b;
        var node = _v3.a;
        var name = _v3.b;
        var decoder = _v3.c;
        return _Utils_eq(subKey, key) ? A2(_Browser_decodeEvent, decoder, event) : $elm$core$Maybe$Nothing;
      };
      var messages = A2($elm$core$List$filterMap, toMessage, state.subs);
      return A2(
        $elm$core$Task$andThen,
        function(_v1) {
          return $elm$core$Task$succeed(state);
        },
        $elm$core$Task$sequence(
          A2(
            $elm$core$List$map,
            $elm$core$Platform$sendToApp(router),
            messages
          )
        )
      );
    }
  );
  var $elm$browser$Browser$Events$subMap = F2(
    function(func, _v0) {
      var node = _v0.a;
      var name = _v0.b;
      var decoder = _v0.c;
      return A3(
        $elm$browser$Browser$Events$MySub,
        node,
        name,
        A2($elm$json$Json$Decode$map, func, decoder)
      );
    }
  );
  _Platform_effectManagers["Browser.Events"] = _Platform_createManager($elm$browser$Browser$Events$init, $elm$browser$Browser$Events$onEffects, $elm$browser$Browser$Events$onSelfMsg, 0, $elm$browser$Browser$Events$subMap);
  var $elm$browser$Browser$Events$subscription = _Platform_leaf("Browser.Events");
  var $elm$browser$Browser$Events$on = F3(
    function(node, name, decoder) {
      return $elm$browser$Browser$Events$subscription(
        A3($elm$browser$Browser$Events$MySub, node, name, decoder)
      );
    }
  );
  var $elm$browser$Browser$Events$onMouseMove = A2($elm$browser$Browser$Events$on, $elm$browser$Browser$Events$Document, "mousemove");
  var $elm$browser$Browser$Events$onMouseUp = A2($elm$browser$Browser$Events$on, $elm$browser$Browser$Events$Document, "mouseup");
  var $elm$browser$Browser$Events$Window = { $: "Window" };
  var $elm$browser$Browser$Events$onResize = function(func) {
    return A3(
      $elm$browser$Browser$Events$on,
      $elm$browser$Browser$Events$Window,
      "resize",
      A2(
        $elm$json$Json$Decode$field,
        "target",
        A3(
          $elm$json$Json$Decode$map2,
          func,
          A2($elm$json$Json$Decode$field, "innerWidth", $elm$json$Json$Decode$int),
          A2($elm$json$Json$Decode$field, "innerHeight", $elm$json$Json$Decode$int)
        )
      )
    );
  };
  var $author$project$Main$pageIndexChanged = _Platform_incomingPort("pageIndexChanged", $elm$json$Json$Decode$int);
  var $author$project$Main$pageIndexChangedInstant = _Platform_incomingPort("pageIndexChangedInstant", $elm$json$Json$Decode$int);
  var $author$project$Main$viewerLoadingChanged = _Platform_incomingPort("viewerLoadingChanged", $elm$json$Json$Decode$bool);
  var $author$project$Main$zoomChanged = _Platform_incomingPort("zoomChanged", $elm$json$Json$Decode$float);
  var $author$project$Main$subscriptions = function(model) {
    return $elm$core$Platform$Sub$batch(
      _List_fromArray(
        [
          $author$project$Main$pageIndexChanged($author$project$Msg$ClientNotifiedPageChanged),
          $author$project$Main$pageIndexChangedInstant($author$project$Msg$ClientNotifiedPageChangedInstant),
          $author$project$Main$fullscreenChanged($author$project$Msg$ClientNotifiedFullscreenChanged),
          $author$project$Main$zoomChanged($author$project$Msg$UserChangedZoomLevel),
          $author$project$Main$viewerLoadingChanged($author$project$Msg$ViewerLoadingChanged),
          $elm$browser$Browser$Events$onResize($author$project$Msg$ViewportChanged),
          (function() {
            var _v0 = model.sidebarDrag;
            if (_v0.$ === "Just") {
              return $elm$core$Platform$Sub$batch(
                _List_fromArray(
                  [
                    $elm$browser$Browser$Events$onMouseMove(
                      A2(
                        $elm$json$Json$Decode$map,
                        $author$project$Msg$UserDraggedSidebarResize,
                        A2($elm$json$Json$Decode$field, "clientX", $elm$json$Json$Decode$int)
                      )
                    ),
                    $elm$browser$Browser$Events$onMouseUp(
                      $elm$json$Json$Decode$succeed($author$project$Msg$UserEndedSidebarResize)
                    )
                  ]
                )
              );
            } else {
              return $elm$core$Platform$Sub$none;
            }
          })(),
          (function() {
            var _v1 = model.collectionSidebarDrag;
            if (_v1.$ === "Just") {
              return $elm$core$Platform$Sub$batch(
                _List_fromArray(
                  [
                    $elm$browser$Browser$Events$onMouseMove(
                      A2(
                        $elm$json$Json$Decode$map,
                        $author$project$Msg$UserDraggedCollectionSidebarResize,
                        A2($elm$json$Json$Decode$field, "clientX", $elm$json$Json$Decode$int)
                      )
                    ),
                    $elm$browser$Browser$Events$onMouseUp(
                      $elm$json$Json$Decode$succeed($author$project$Msg$UserEndedCollectionSidebarResize)
                    )
                  ]
                )
              );
            } else {
              return $elm$core$Platform$Sub$none;
            }
          })()
        ]
      )
    );
  };
  var $author$project$Model$ContentsPages = { $: "ContentsPages" };
  var $author$project$Model$Failed = function(a) {
    return { $: "Failed", a };
  };
  var $author$project$Model$Loading = { $: "Loading" };
  var $author$project$Model$ResourceFailed = function(a) {
    return { $: "ResourceFailed", a };
  };
  var $author$project$Model$ResourceLoadedCollection = function(a) {
    return { $: "ResourceLoadedCollection", a };
  };
  var $author$project$Model$ResourceLoadedManifest = function(a) {
    return { $: "ResourceLoadedManifest", a };
  };
  var $author$project$Model$ResourceLoading = { $: "ResourceLoading" };
  var $author$project$Msg$ServerRespondedWithCollectionItem = F2(
    function(a, b) {
      return { $: "ServerRespondedWithCollectionItem", a, b };
    }
  );
  var $author$project$Msg$ServerRespondedWithManifestFromCollection = function(a) {
    return { $: "ServerRespondedWithManifestFromCollection", a };
  };
  var $author$project$Model$SidebarContents = { $: "SidebarContents" };
  var $author$project$Model$SidebarMetadata = { $: "SidebarMetadata" };
  var $author$project$Model$TwoUp = { $: "TwoUp" };
  var $author$project$Filters$applyFilterToggle = F3(
    function(toggle, enabled, filters) {
      switch (toggle.$) {
        case "ToggleAdaptive":
          return _Utils_update(
            filters,
            { adaptiveEnabled: enabled }
          );
        case "ToggleAltBlueGamma":
          return _Utils_update(
            filters,
            { altBlueGammaEnabled: enabled }
          );
        case "ToggleAltBlueHue":
          return _Utils_update(
            filters,
            { altBlueHueEnabled: enabled }
          );
        case "ToggleAltBlueSigmoid":
          return _Utils_update(
            filters,
            { altBlueSigmoidEnabled: enabled }
          );
        case "ToggleAltBlueVibrance":
          return _Utils_update(
            filters,
            { altBlueVibranceEnabled: enabled }
          );
        case "ToggleAltGreenGamma":
          return _Utils_update(
            filters,
            { altGreenGammaEnabled: enabled }
          );
        case "ToggleAltGreenHue":
          return _Utils_update(
            filters,
            { altGreenHueEnabled: enabled }
          );
        case "ToggleAltGreenSigmoid":
          return _Utils_update(
            filters,
            { altGreenSigmoidEnabled: enabled }
          );
        case "ToggleAltGreenVibrance":
          return _Utils_update(
            filters,
            { altGreenVibranceEnabled: enabled }
          );
        case "ToggleAltRedGamma":
          return _Utils_update(
            filters,
            { altRedGammaEnabled: enabled }
          );
        case "ToggleAltRedHue":
          return _Utils_update(
            filters,
            { altRedHueEnabled: enabled }
          );
        case "ToggleAltRedSigmoid":
          return _Utils_update(
            filters,
            { altRedSigmoidEnabled: enabled }
          );
        case "ToggleAltRedVibrance":
          return _Utils_update(
            filters,
            { altRedVibranceEnabled: enabled }
          );
        case "ToggleBrightness":
          return _Utils_update(
            filters,
            { brightnessEnabled: enabled }
          );
        case "ToggleCcBlue":
          return _Utils_update(
            filters,
            { ccBlueEnabled: enabled }
          );
        case "ToggleCcGreen":
          return _Utils_update(
            filters,
            { ccGreenEnabled: enabled }
          );
        case "ToggleCcRed":
          return _Utils_update(
            filters,
            { ccRedEnabled: enabled }
          );
        case "ToggleColourmap":
          return _Utils_update(
            filters,
            { colourmapEnabled: enabled }
          );
        case "ToggleColourReplace":
          return _Utils_update(
            filters,
            { colourReplaceEnabled: enabled }
          );
        case "ToggleColourReplacePreserveLum":
          return _Utils_update(
            filters,
            { colourReplacePreserveLum: enabled }
          );
        case "ToggleContrast":
          return _Utils_update(
            filters,
            { contrastEnabled: enabled }
          );
        case "ToggleConvolution":
          return _Utils_update(
            filters,
            { convolutionEnabled: enabled }
          );
        case "ToggleFlip":
          return _Utils_update(
            filters,
            { flip: enabled }
          );
        case "ToggleGamma":
          return _Utils_update(
            filters,
            { gammaEnabled: enabled }
          );
        case "ToggleGrayscale":
          return _Utils_update(
            filters,
            { grayscale: enabled }
          );
        case "ToggleHue":
          return _Utils_update(
            filters,
            { hueEnabled: enabled }
          );
        case "ToggleInvert":
          return _Utils_update(
            filters,
            { invert: enabled }
          );
        case "ToggleMorph":
          return _Utils_update(
            filters,
            { morphEnabled: enabled }
          );
        case "ToggleNormalize":
          return _Utils_update(
            filters,
            { normalizeEnabled: enabled }
          );
        case "TogglePca":
          return _Utils_update(
            filters,
            { pcaEnabled: enabled }
          );
        case "TogglePseudoColour":
          return _Utils_update(
            filters,
            { pseudoColourEnabled: enabled }
          );
        case "ToggleSaturation":
          return _Utils_update(
            filters,
            { saturationEnabled: enabled }
          );
        case "ToggleThreshold":
          return _Utils_update(
            filters,
            { thresholdEnabled: enabled }
          );
        case "ToggleUnsharp":
          return _Utils_update(
            filters,
            { unsharpEnabled: enabled }
          );
        default:
          return _Utils_update(
            filters,
            { vibranceEnabled: enabled }
          );
      }
    }
  );
  var $elm$core$Basics$clamp = F3(
    function(low, high, number) {
      return _Utils_cmp(number, low) < 0 ? low : _Utils_cmp(number, high) > 0 ? high : number;
    }
  );
  var $author$project$Filters$floatFilterConfig = function(value) {
    switch (value.$) {
      case "FloatColourReplaceBlend":
        return {
          get: function($) {
            return $.colourReplaceBlend;
          },
          max: 1,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourReplaceBlend: v }
              );
            }
          )
        };
      case "FloatContrast":
        return {
          get: function($) {
            return $.contrast;
          },
          max: 4,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { contrast: v }
              );
            }
          )
        };
      case "FloatGamma":
        return {
          get: function($) {
            return $.gamma;
          },
          max: 4,
          min: 0.1,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { gamma: v }
              );
            }
          )
        };
      case "FloatNormalizeStrength":
        return {
          get: function($) {
            return $.normalizeStrength;
          },
          max: 2,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { normalizeStrength: v }
              );
            }
          )
        };
      case "FloatPseudoColourBlue":
        return {
          get: function($) {
            return $.pseudoColourBlue;
          },
          max: 2,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { pseudoColourBlue: v }
              );
            }
          )
        };
      case "FloatPseudoColourGreen":
        return {
          get: function($) {
            return $.pseudoColourGreen;
          },
          max: 2,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { pseudoColourGreen: v }
              );
            }
          )
        };
      case "FloatPseudoColourRed":
        return {
          get: function($) {
            return $.pseudoColourRed;
          },
          max: 2,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { pseudoColourRed: v }
              );
            }
          )
        };
      default:
        return {
          get: function($) {
            return $.unsharpAmount;
          },
          max: 3,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { unsharpAmount: v }
              );
            }
          )
        };
    }
  };
  var $author$project$Filters$applyFloatFilter = F3(
    function(filterValue, raw, filters) {
      var parsed = $elm$core$String$toFloat(raw);
      var config = $author$project$Filters$floatFilterConfig(filterValue);
      var nextValue = A2(
        $elm$core$Maybe$withDefault,
        config.get(filters),
        A2(
          $elm$core$Maybe$map,
          A2($elm$core$Basics$clamp, config.min, config.max),
          parsed
        )
      );
      return A2(config.set, nextValue, filters);
    }
  );
  var $elm$core$Basics$modBy = _Basics_modBy;
  var $author$project$Filters$ensureOdd = function(v) {
    return !A2($elm$core$Basics$modBy, 2, v) ? v + 1 : v;
  };
  var $author$project$Filters$validateMorphKernel = function(v) {
    return v === 3 || (v === 5 || v === 7) ? v : 3;
  };
  var $author$project$Filters$intFilterConfig = function(value) {
    switch (value.$) {
      case "IntAdaptiveOffset":
        return {
          get: function($) {
            return $.adaptiveOffset;
          },
          max: 50,
          min: -50,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { adaptiveOffset: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAdaptiveWindow":
        return {
          get: function($) {
            return $.adaptiveWindow;
          },
          max: 51,
          min: 3,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { adaptiveWindow: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Just($author$project$Filters$ensureOdd)
        };
      case "IntAltRedGamma":
        return {
          get: function($) {
            return $.altRedGamma;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altRedGamma: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltRedSigmoid":
        return {
          get: function($) {
            return $.altRedSigmoid;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altRedSigmoid: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltRedVibrance":
        return {
          get: function($) {
            return $.altRedVibrance;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altRedVibrance: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltRedHue":
        return {
          get: function($) {
            return $.altRedHue;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altRedHue: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltRedHueWindow":
        return {
          get: function($) {
            return $.altRedHueWindow;
          },
          max: 30,
          min: 2,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altRedHueWindow: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltGreenGamma":
        return {
          get: function($) {
            return $.altGreenGamma;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altGreenGamma: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltGreenSigmoid":
        return {
          get: function($) {
            return $.altGreenSigmoid;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altGreenSigmoid: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltGreenHue":
        return {
          get: function($) {
            return $.altGreenHue;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altGreenHue: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltGreenHueWindow":
        return {
          get: function($) {
            return $.altGreenHueWindow;
          },
          max: 30,
          min: 2,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altGreenHueWindow: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltGreenVibrance":
        return {
          get: function($) {
            return $.altGreenVibrance;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altGreenVibrance: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltBlueGamma":
        return {
          get: function($) {
            return $.altBlueGamma;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueGamma: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltBlueSigmoid":
        return {
          get: function($) {
            return $.altBlueSigmoid;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueSigmoid: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltBlueHue":
        return {
          get: function($) {
            return $.altBlueHue;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueHue: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltBlueHueWindow":
        return {
          get: function($) {
            return $.altBlueHueWindow;
          },
          max: 30,
          min: 2,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueHueWindow: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntAltBlueVibrance":
        return {
          get: function($) {
            return $.altBlueVibrance;
          },
          max: 100,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueVibrance: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntBrightness":
        return {
          get: function($) {
            return $.brightness;
          },
          max: 255,
          min: -255,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { brightness: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntCcBlue":
        return {
          get: function($) {
            return $.ccBlue;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { ccBlue: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntCcGreen":
        return {
          get: function($) {
            return $.ccGreen;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { ccGreen: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntCcRed":
        return {
          get: function($) {
            return $.ccRed;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { ccRed: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntColourmapCenter":
        return {
          get: function($) {
            return $.colourmapCenter;
          },
          max: 255,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourmapCenter: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntColourReplaceTolerance":
        return {
          get: function($) {
            return $.colourReplaceTolerance;
          },
          max: 255,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourReplaceTolerance: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntHue":
        return {
          get: function($) {
            return $.hue;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { hue: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntMorphKernel":
        return {
          get: function($) {
            return $.morphKernel;
          },
          max: 7,
          min: 3,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { morphKernel: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Just($author$project$Filters$validateMorphKernel)
        };
      case "IntRotation":
        return {
          get: function($) {
            return $.rotation;
          },
          max: 180,
          min: -180,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { rotation: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntSaturation":
        return {
          get: function($) {
            return $.saturation;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { saturation: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      case "IntThreshold":
        return {
          get: function($) {
            return $.threshold;
          },
          max: 255,
          min: 0,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { threshold: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
      default:
        return {
          get: function($) {
            return $.vibrance;
          },
          max: 100,
          min: -100,
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { vibrance: v }
              );
            }
          ),
          validate: $elm$core$Maybe$Nothing
        };
    }
  };
  var $author$project$Filters$applyIntFilter = F3(
    function(filterValue, raw, filters) {
      var parsed = $elm$core$String$toInt(raw);
      var config = $author$project$Filters$intFilterConfig(filterValue);
      var nextValue = (function() {
        if (parsed.$ === "Just") {
          var v = parsed.a;
          var clamped = A3($elm$core$Basics$clamp, config.min, config.max, v);
          var _v1 = config.validate;
          if (_v1.$ === "Just") {
            var validator = _v1.a;
            return validator(clamped);
          } else {
            return clamped;
          }
        } else {
          return config.get(filters);
        }
      })();
      return A2(config.set, nextValue, filters);
    }
  );
  var $author$project$Filters$stringFilterConfig = function(value) {
    switch (value.$) {
      case "StringColourmapPreset":
        return {
          get: function($) {
            return $.colourmapPreset;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourmapPreset: v }
              );
            }
          ),
          validate: function(v) {
            return A2(
              $elm$core$List$member,
              v,
              _List_fromArray(
                ["gray", "hot", "cool"]
              )
            );
          }
        };
      case "StringColourReplaceSource":
        return {
          get: function($) {
            return $.colourReplaceSource;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourReplaceSource: v }
              );
            }
          ),
          validate: $elm$core$Basics$always(true)
        };
      case "StringColourReplaceTarget":
        return {
          get: function($) {
            return $.colourReplaceTarget;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { colourReplaceTarget: v }
              );
            }
          ),
          validate: $elm$core$Basics$always(true)
        };
      case "StringConvolutionPreset":
        return {
          get: function($) {
            return $.convolutionPreset;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { convolutionPreset: v }
              );
            }
          ),
          validate: function(v) {
            return A2(
              $elm$core$List$member,
              v,
              _List_fromArray(
                ["sharpen", "blur", "edge", "emboss"]
              )
            );
          }
        };
      case "StringMorphOperation":
        return {
          get: function($) {
            return $.morphOperation;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { morphOperation: v }
              );
            }
          ),
          validate: function(v) {
            return v === "erode" || v === "dilate";
          }
        };
      case "StringPcaMode":
        return {
          get: function($) {
            return $.pcaMode;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { pcaMode: v }
              );
            }
          ),
          validate: function(v) {
            return A2(
              $elm$core$List$member,
              v,
              _List_fromArray(
                ["pca-rgb", "pca1", "pca2", "pca3"]
              )
            );
          }
        };
      default:
        return {
          get: function($) {
            return $.pseudoColourMode;
          },
          set: F2(
            function(v, f) {
              return _Utils_update(
                f,
                { pseudoColourMode: v }
              );
            }
          ),
          validate: function(v) {
            return A2(
              $elm$core$List$member,
              v,
              _List_fromArray(
                ["rg", "gb", "rb", "luma", "cmy", "heat"]
              )
            );
          }
        };
    }
  };
  var $author$project$Filters$applyStringFilter = F3(
    function(filterValue, raw, filters) {
      var config = $author$project$Filters$stringFilterConfig(filterValue);
      var nextValue = config.validate(raw) ? raw : config.get(filters);
      return A2(config.set, nextValue, filters);
    }
  );
  var $author$project$Main$copyToClipboard = _Platform_outgoingPort("copyToClipboard", $elm$json$Json$Encode$string);
  var $author$project$Filters$applyMaybe = F3(
    function(maybeValue, updater, filters) {
      if (maybeValue.$ === "Just") {
        var value = maybeValue.a;
        return A2(updater, value, filters);
      } else {
        return filters;
      }
    }
  );
  var $elm$core$Result$toMaybe = function(result) {
    if (result.$ === "Ok") {
      var v = result.a;
      return $elm$core$Maybe$Just(v);
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $author$project$Filters$decodeMaybe = F3(
    function(decoder, key, dict) {
      return A2(
        $elm$core$Maybe$andThen,
        function(value) {
          return $elm$core$Result$toMaybe(
            A2($elm$json$Json$Decode$decodeValue, decoder, value)
          );
        },
        A2($elm$core$Dict$get, key, dict)
      );
    }
  );
  var $author$project$Filters$decodeBool = F2(
    function(key, dict) {
      return A3($author$project$Filters$decodeMaybe, $elm$json$Json$Decode$bool, key, dict);
    }
  );
  var $author$project$Filters$decodeFloat = F2(
    function(key, dict) {
      return A3(
        $author$project$Filters$decodeMaybe,
        $elm$json$Json$Decode$oneOf(
          _List_fromArray(
            [
              $elm$json$Json$Decode$float,
              A2($elm$json$Json$Decode$map, $elm$core$Basics$toFloat, $elm$json$Json$Decode$int)
            ]
          )
        ),
        key,
        dict
      );
    }
  );
  var $author$project$Filters$decodeInt = F2(
    function(key, dict) {
      return A3($author$project$Filters$decodeMaybe, $elm$json$Json$Decode$int, key, dict);
    }
  );
  var $author$project$Filters$decodeString = F2(
    function(key, dict) {
      return A3($author$project$Filters$decodeMaybe, $elm$json$Json$Decode$string, key, dict);
    }
  );
  var $author$project$Filters$applyFilterPatch = function(dict) {
    var vibrance = A2($author$project$Filters$decodeInt, "vibrance", dict);
    var unsharpAmount = A2($author$project$Filters$decodeFloat, "unsharpAmount", dict);
    var threshold = A2($author$project$Filters$decodeInt, "threshold", dict);
    var saturation = A2($author$project$Filters$decodeInt, "saturation", dict);
    var rotation = A2($author$project$Filters$decodeInt, "rotation", dict);
    var pseudoColourRed = A2($author$project$Filters$decodeFloat, "pseudoColourRed", dict);
    var pseudoColourMode = A2($author$project$Filters$decodeString, "pseudoColourMode", dict);
    var pseudoColourGreen = A2($author$project$Filters$decodeFloat, "pseudoColourGreen", dict);
    var pseudoColourBlue = A2($author$project$Filters$decodeFloat, "pseudoColourBlue", dict);
    var pcaMode = A2($author$project$Filters$decodeString, "pcaMode", dict);
    var normalizeStrength = A2($author$project$Filters$decodeFloat, "normalizeStrength", dict);
    var morphOperation = A2($author$project$Filters$decodeString, "morphOperation", dict);
    var morphKernel = A2($author$project$Filters$decodeInt, "morphKernel", dict);
    var invert = A2($author$project$Filters$decodeBool, "invert", dict);
    var hue = A2($author$project$Filters$decodeInt, "hue", dict);
    var grayscale = A2($author$project$Filters$decodeBool, "grayscale", dict);
    var gamma = A2($author$project$Filters$decodeFloat, "gamma", dict);
    var flip = A2($author$project$Filters$decodeBool, "flip", dict);
    var convolutionPreset = A2($author$project$Filters$decodeString, "convolutionPreset", dict);
    var contrast = A2($author$project$Filters$decodeFloat, "contrast", dict);
    var colourmapPreset = A2($author$project$Filters$decodeString, "colourmapPreset", dict);
    var colourmapCenter = A2($author$project$Filters$decodeInt, "colourmapCenter", dict);
    var colourReplaceTolerance = A2($author$project$Filters$decodeInt, "colourReplaceTolerance", dict);
    var colourReplaceTarget = A2($author$project$Filters$decodeString, "colourReplaceTarget", dict);
    var colourReplaceSource = A2($author$project$Filters$decodeString, "colourReplaceSource", dict);
    var colourReplacePreserveLum = A2($author$project$Filters$decodeBool, "colourReplacePreserveLum", dict);
    var colourReplaceBlend = A2($author$project$Filters$decodeFloat, "colourReplaceBlend", dict);
    var ccRed = A2($author$project$Filters$decodeInt, "ccRed", dict);
    var ccGreen = A2($author$project$Filters$decodeInt, "ccGreen", dict);
    var ccBlue = A2($author$project$Filters$decodeInt, "ccBlue", dict);
    var brightness = A2($author$project$Filters$decodeInt, "brightness", dict);
    var base = $author$project$Filters$resetFilters;
    var altRedVibrance = A2($author$project$Filters$decodeInt, "altRedVibrance", dict);
    var altRedSigmoid = A2($author$project$Filters$decodeInt, "altRedSigmoid", dict);
    var altRedHueWindow = A2($author$project$Filters$decodeInt, "altRedHueWindow", dict);
    var altRedHue = A2($author$project$Filters$decodeInt, "altRedHue", dict);
    var altRedGamma = A2($author$project$Filters$decodeInt, "altRedGamma", dict);
    var altGreenVibrance = A2($author$project$Filters$decodeInt, "altGreenVibrance", dict);
    var altGreenSigmoid = A2($author$project$Filters$decodeInt, "altGreenSigmoid", dict);
    var altGreenHueWindow = A2($author$project$Filters$decodeInt, "altGreenHueWindow", dict);
    var altGreenHue = A2($author$project$Filters$decodeInt, "altGreenHue", dict);
    var altGreenGamma = A2($author$project$Filters$decodeInt, "altGreenGamma", dict);
    var altBlueVibrance = A2($author$project$Filters$decodeInt, "altBlueVibrance", dict);
    var altBlueSigmoid = A2($author$project$Filters$decodeInt, "altBlueSigmoid", dict);
    var altBlueHueWindow = A2($author$project$Filters$decodeInt, "altBlueHueWindow", dict);
    var altBlueHue = A2($author$project$Filters$decodeInt, "altBlueHue", dict);
    var altBlueGamma = A2($author$project$Filters$decodeInt, "altBlueGamma", dict);
    var adaptiveWindow = A2($author$project$Filters$decodeInt, "adaptiveWindow", dict);
    var adaptiveOffset = A2($author$project$Filters$decodeInt, "adaptiveOffset", dict);
    return A3(
      $author$project$Filters$applyMaybe,
      altBlueVibrance,
      F2(
        function(v, f) {
          return _Utils_update(
            f,
            { altBlueVibrance: v, altBlueVibranceEnabled: true }
          );
        }
      ),
      A3(
        $author$project$Filters$applyMaybe,
        altBlueHueWindow,
        F2(
          function(v, f) {
            return _Utils_update(
              f,
              { altBlueHueEnabled: true, altBlueHueWindow: v }
            );
          }
        ),
        A3(
          $author$project$Filters$applyMaybe,
          altBlueHue,
          F2(
            function(v, f) {
              return _Utils_update(
                f,
                { altBlueHue: v, altBlueHueEnabled: true }
              );
            }
          ),
          A3(
            $author$project$Filters$applyMaybe,
            altBlueSigmoid,
            F2(
              function(v, f) {
                return _Utils_update(
                  f,
                  { altBlueSigmoid: v, altBlueSigmoidEnabled: true }
                );
              }
            ),
            A3(
              $author$project$Filters$applyMaybe,
              altBlueGamma,
              F2(
                function(v, f) {
                  return _Utils_update(
                    f,
                    { altBlueGamma: v, altBlueGammaEnabled: true }
                  );
                }
              ),
              A3(
                $author$project$Filters$applyMaybe,
                altGreenVibrance,
                F2(
                  function(v, f) {
                    return _Utils_update(
                      f,
                      { altGreenVibrance: v, altGreenVibranceEnabled: true }
                    );
                  }
                ),
                A3(
                  $author$project$Filters$applyMaybe,
                  altGreenHueWindow,
                  F2(
                    function(v, f) {
                      return _Utils_update(
                        f,
                        { altGreenHueEnabled: true, altGreenHueWindow: v }
                      );
                    }
                  ),
                  A3(
                    $author$project$Filters$applyMaybe,
                    altGreenHue,
                    F2(
                      function(v, f) {
                        return _Utils_update(
                          f,
                          { altGreenHue: v, altGreenHueEnabled: true }
                        );
                      }
                    ),
                    A3(
                      $author$project$Filters$applyMaybe,
                      altGreenSigmoid,
                      F2(
                        function(v, f) {
                          return _Utils_update(
                            f,
                            { altGreenSigmoid: v, altGreenSigmoidEnabled: true }
                          );
                        }
                      ),
                      A3(
                        $author$project$Filters$applyMaybe,
                        altGreenGamma,
                        F2(
                          function(v, f) {
                            return _Utils_update(
                              f,
                              { altGreenGamma: v, altGreenGammaEnabled: true }
                            );
                          }
                        ),
                        A3(
                          $author$project$Filters$applyMaybe,
                          altRedVibrance,
                          F2(
                            function(v, f) {
                              return _Utils_update(
                                f,
                                { altRedVibrance: v, altRedVibranceEnabled: true }
                              );
                            }
                          ),
                          A3(
                            $author$project$Filters$applyMaybe,
                            altRedHueWindow,
                            F2(
                              function(v, f) {
                                return _Utils_update(
                                  f,
                                  { altRedHueEnabled: true, altRedHueWindow: v }
                                );
                              }
                            ),
                            A3(
                              $author$project$Filters$applyMaybe,
                              altRedHue,
                              F2(
                                function(v, f) {
                                  return _Utils_update(
                                    f,
                                    { altRedHue: v, altRedHueEnabled: true }
                                  );
                                }
                              ),
                              A3(
                                $author$project$Filters$applyMaybe,
                                altRedSigmoid,
                                F2(
                                  function(v, f) {
                                    return _Utils_update(
                                      f,
                                      { altRedSigmoid: v, altRedSigmoidEnabled: true }
                                    );
                                  }
                                ),
                                A3(
                                  $author$project$Filters$applyMaybe,
                                  altRedGamma,
                                  F2(
                                    function(v, f) {
                                      return _Utils_update(
                                        f,
                                        { altRedGamma: v, altRedGammaEnabled: true }
                                      );
                                    }
                                  ),
                                  A3(
                                    $author$project$Filters$applyMaybe,
                                    adaptiveOffset,
                                    F2(
                                      function(v, f) {
                                        return _Utils_update(
                                          f,
                                          { adaptiveEnabled: true, adaptiveOffset: v }
                                        );
                                      }
                                    ),
                                    A3(
                                      $author$project$Filters$applyMaybe,
                                      adaptiveWindow,
                                      F2(
                                        function(v, f) {
                                          return _Utils_update(
                                            f,
                                            { adaptiveEnabled: true, adaptiveWindow: v }
                                          );
                                        }
                                      ),
                                      A3(
                                        $author$project$Filters$applyMaybe,
                                        normalizeStrength,
                                        F2(
                                          function(v, f) {
                                            return _Utils_update(
                                              f,
                                              { normalizeEnabled: true, normalizeStrength: v }
                                            );
                                          }
                                        ),
                                        A3(
                                          $author$project$Filters$applyMaybe,
                                          unsharpAmount,
                                          F2(
                                            function(v, f) {
                                              return _Utils_update(
                                                f,
                                                { unsharpAmount: v, unsharpEnabled: true }
                                              );
                                            }
                                          ),
                                          A3(
                                            $author$project$Filters$applyMaybe,
                                            colourReplacePreserveLum,
                                            F2(
                                              function(v, f) {
                                                return _Utils_update(
                                                  f,
                                                  { colourReplaceEnabled: true, colourReplacePreserveLum: v }
                                                );
                                              }
                                            ),
                                            A3(
                                              $author$project$Filters$applyMaybe,
                                              colourReplaceBlend,
                                              F2(
                                                function(v, f) {
                                                  return _Utils_update(
                                                    f,
                                                    { colourReplaceBlend: v, colourReplaceEnabled: true }
                                                  );
                                                }
                                              ),
                                              A3(
                                                $author$project$Filters$applyMaybe,
                                                colourReplaceTolerance,
                                                F2(
                                                  function(v, f) {
                                                    return _Utils_update(
                                                      f,
                                                      { colourReplaceEnabled: true, colourReplaceTolerance: v }
                                                    );
                                                  }
                                                ),
                                                A3(
                                                  $author$project$Filters$applyMaybe,
                                                  colourReplaceTarget,
                                                  F2(
                                                    function(v, f) {
                                                      return _Utils_update(
                                                        f,
                                                        { colourReplaceEnabled: true, colourReplaceTarget: v }
                                                      );
                                                    }
                                                  ),
                                                  A3(
                                                    $author$project$Filters$applyMaybe,
                                                    colourReplaceSource,
                                                    F2(
                                                      function(v, f) {
                                                        return _Utils_update(
                                                          f,
                                                          { colourReplaceEnabled: true, colourReplaceSource: v }
                                                        );
                                                      }
                                                    ),
                                                    A3(
                                                      $author$project$Filters$applyMaybe,
                                                      pcaMode,
                                                      F2(
                                                        function(v, f) {
                                                          return _Utils_update(
                                                            f,
                                                            { pcaEnabled: true, pcaMode: v }
                                                          );
                                                        }
                                                      ),
                                                      A3(
                                                        $author$project$Filters$applyMaybe,
                                                        pseudoColourBlue,
                                                        F2(
                                                          function(v, f) {
                                                            return _Utils_update(
                                                              f,
                                                              { pseudoColourBlue: v, pseudoColourEnabled: true }
                                                            );
                                                          }
                                                        ),
                                                        A3(
                                                          $author$project$Filters$applyMaybe,
                                                          pseudoColourGreen,
                                                          F2(
                                                            function(v, f) {
                                                              return _Utils_update(
                                                                f,
                                                                { pseudoColourEnabled: true, pseudoColourGreen: v }
                                                              );
                                                            }
                                                          ),
                                                          A3(
                                                            $author$project$Filters$applyMaybe,
                                                            pseudoColourRed,
                                                            F2(
                                                              function(v, f) {
                                                                return _Utils_update(
                                                                  f,
                                                                  { pseudoColourEnabled: true, pseudoColourRed: v }
                                                                );
                                                              }
                                                            ),
                                                            A3(
                                                              $author$project$Filters$applyMaybe,
                                                              pseudoColourMode,
                                                              F2(
                                                                function(v, f) {
                                                                  return _Utils_update(
                                                                    f,
                                                                    { pseudoColourEnabled: true, pseudoColourMode: v }
                                                                  );
                                                                }
                                                              ),
                                                              A3(
                                                                $author$project$Filters$applyMaybe,
                                                                colourmapCenter,
                                                                F2(
                                                                  function(v, f) {
                                                                    return _Utils_update(
                                                                      f,
                                                                      { colourmapCenter: v, colourmapEnabled: true }
                                                                    );
                                                                  }
                                                                ),
                                                                A3(
                                                                  $author$project$Filters$applyMaybe,
                                                                  colourmapPreset,
                                                                  F2(
                                                                    function(v, f) {
                                                                      return _Utils_update(
                                                                        f,
                                                                        { colourmapEnabled: true, colourmapPreset: v }
                                                                      );
                                                                    }
                                                                  ),
                                                                  A3(
                                                                    $author$project$Filters$applyMaybe,
                                                                    convolutionPreset,
                                                                    F2(
                                                                      function(v, f) {
                                                                        return _Utils_update(
                                                                          f,
                                                                          { convolutionEnabled: true, convolutionPreset: v }
                                                                        );
                                                                      }
                                                                    ),
                                                                    A3(
                                                                      $author$project$Filters$applyMaybe,
                                                                      morphKernel,
                                                                      F2(
                                                                        function(v, f) {
                                                                          return _Utils_update(
                                                                            f,
                                                                            { morphEnabled: true, morphKernel: v }
                                                                          );
                                                                        }
                                                                      ),
                                                                      A3(
                                                                        $author$project$Filters$applyMaybe,
                                                                        morphOperation,
                                                                        F2(
                                                                          function(v, f) {
                                                                            return _Utils_update(
                                                                              f,
                                                                              { morphEnabled: true, morphOperation: v }
                                                                            );
                                                                          }
                                                                        ),
                                                                        A3(
                                                                          $author$project$Filters$applyMaybe,
                                                                          ccBlue,
                                                                          F2(
                                                                            function(v, f) {
                                                                              return _Utils_update(
                                                                                f,
                                                                                { ccBlue: v, ccBlueEnabled: true }
                                                                              );
                                                                            }
                                                                          ),
                                                                          A3(
                                                                            $author$project$Filters$applyMaybe,
                                                                            ccGreen,
                                                                            F2(
                                                                              function(v, f) {
                                                                                return _Utils_update(
                                                                                  f,
                                                                                  { ccGreen: v, ccGreenEnabled: true }
                                                                                );
                                                                              }
                                                                            ),
                                                                            A3(
                                                                              $author$project$Filters$applyMaybe,
                                                                              ccRed,
                                                                              F2(
                                                                                function(v, f) {
                                                                                  return _Utils_update(
                                                                                    f,
                                                                                    { ccRed: v, ccRedEnabled: true }
                                                                                  );
                                                                                }
                                                                              ),
                                                                              A3(
                                                                                $author$project$Filters$applyMaybe,
                                                                                hue,
                                                                                F2(
                                                                                  function(v, f) {
                                                                                    return _Utils_update(
                                                                                      f,
                                                                                      { hue: v, hueEnabled: true }
                                                                                    );
                                                                                  }
                                                                                ),
                                                                                A3(
                                                                                  $author$project$Filters$applyMaybe,
                                                                                  vibrance,
                                                                                  F2(
                                                                                    function(v, f) {
                                                                                      return _Utils_update(
                                                                                        f,
                                                                                        { vibrance: v, vibranceEnabled: true }
                                                                                      );
                                                                                    }
                                                                                  ),
                                                                                  A3(
                                                                                    $author$project$Filters$applyMaybe,
                                                                                    saturation,
                                                                                    F2(
                                                                                      function(v, f) {
                                                                                        return _Utils_update(
                                                                                          f,
                                                                                          { saturation: v, saturationEnabled: true }
                                                                                        );
                                                                                      }
                                                                                    ),
                                                                                    A3(
                                                                                      $author$project$Filters$applyMaybe,
                                                                                      gamma,
                                                                                      F2(
                                                                                        function(v, f) {
                                                                                          return _Utils_update(
                                                                                            f,
                                                                                            { gamma: v, gammaEnabled: true }
                                                                                          );
                                                                                        }
                                                                                      ),
                                                                                      A3(
                                                                                        $author$project$Filters$applyMaybe,
                                                                                        contrast,
                                                                                        F2(
                                                                                          function(v, f) {
                                                                                            return _Utils_update(
                                                                                              f,
                                                                                              { contrast: v, contrastEnabled: true }
                                                                                            );
                                                                                          }
                                                                                        ),
                                                                                        A3(
                                                                                          $author$project$Filters$applyMaybe,
                                                                                          brightness,
                                                                                          F2(
                                                                                            function(v, f) {
                                                                                              return _Utils_update(
                                                                                                f,
                                                                                                { brightness: v, brightnessEnabled: true }
                                                                                              );
                                                                                            }
                                                                                          ),
                                                                                          A3(
                                                                                            $author$project$Filters$applyMaybe,
                                                                                            threshold,
                                                                                            F2(
                                                                                              function(v, f) {
                                                                                                return _Utils_update(
                                                                                                  f,
                                                                                                  { threshold: v, thresholdEnabled: true }
                                                                                                );
                                                                                              }
                                                                                            ),
                                                                                            A3(
                                                                                              $author$project$Filters$applyMaybe,
                                                                                              invert,
                                                                                              F2(
                                                                                                function(v, f) {
                                                                                                  return _Utils_update(
                                                                                                    f,
                                                                                                    { invert: v }
                                                                                                  );
                                                                                                }
                                                                                              ),
                                                                                              A3(
                                                                                                $author$project$Filters$applyMaybe,
                                                                                                grayscale,
                                                                                                F2(
                                                                                                  function(v, f) {
                                                                                                    return _Utils_update(
                                                                                                      f,
                                                                                                      { grayscale: v }
                                                                                                    );
                                                                                                  }
                                                                                                ),
                                                                                                A3(
                                                                                                  $author$project$Filters$applyMaybe,
                                                                                                  flip,
                                                                                                  F2(
                                                                                                    function(v, f) {
                                                                                                      return _Utils_update(
                                                                                                        f,
                                                                                                        { flip: v }
                                                                                                      );
                                                                                                    }
                                                                                                  ),
                                                                                                  A3(
                                                                                                    $author$project$Filters$applyMaybe,
                                                                                                    rotation,
                                                                                                    F2(
                                                                                                      function(v, f) {
                                                                                                        return _Utils_update(
                                                                                                          f,
                                                                                                          { rotation: v }
                                                                                                        );
                                                                                                      }
                                                                                                    ),
                                                                                                    base
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    );
  };
  var $author$project$Filters$decodeFilterJson = function(raw) {
    var _v0 = A2(
      $elm$json$Json$Decode$decodeString,
      $elm$json$Json$Decode$dict($elm$json$Json$Decode$value),
      raw
    );
    if (_v0.$ === "Ok") {
      var dict = _v0.a;
      return $elm$core$Result$Ok(
        $author$project$Filters$applyFilterPatch(dict)
      );
    } else {
      var err = _v0.a;
      return $elm$core$Result$Err(
        $elm$json$Json$Decode$errorToString(err)
      );
    }
  };
  var $author$project$Filters$addIf = F4(
    function(condition, key, value, acc) {
      return condition ? A2(
        $elm$core$List$cons,
        _Utils_Tuple2(key, value),
        acc
      ) : acc;
    }
  );
  var $elm$json$Json$Encode$bool = _Json_wrap;
  var $elm$json$Json$Encode$float = _Json_wrap;
  var $elm$json$Json$Encode$int = _Json_wrap;
  var $author$project$Filters$encodeActiveFilters = function(filters) {
    var activeFields = A4(
      $author$project$Filters$addIf,
      filters.altBlueVibranceEnabled,
      "altBlueVibrance",
      $elm$json$Json$Encode$int(filters.altBlueVibrance),
      A4(
        $author$project$Filters$addIf,
        filters.altBlueHueEnabled,
        "altBlueHueWindow",
        $elm$json$Json$Encode$int(filters.altBlueHueWindow),
        A4(
          $author$project$Filters$addIf,
          filters.altBlueHueEnabled,
          "altBlueHue",
          $elm$json$Json$Encode$int(filters.altBlueHue),
          A4(
            $author$project$Filters$addIf,
            filters.altBlueSigmoidEnabled,
            "altBlueSigmoid",
            $elm$json$Json$Encode$int(filters.altBlueSigmoid),
            A4(
              $author$project$Filters$addIf,
              filters.altBlueGammaEnabled,
              "altBlueGamma",
              $elm$json$Json$Encode$int(filters.altBlueGamma),
              A4(
                $author$project$Filters$addIf,
                filters.altGreenVibranceEnabled,
                "altGreenVibrance",
                $elm$json$Json$Encode$int(filters.altGreenVibrance),
                A4(
                  $author$project$Filters$addIf,
                  filters.altGreenHueEnabled,
                  "altGreenHueWindow",
                  $elm$json$Json$Encode$int(filters.altGreenHueWindow),
                  A4(
                    $author$project$Filters$addIf,
                    filters.altGreenHueEnabled,
                    "altGreenHue",
                    $elm$json$Json$Encode$int(filters.altGreenHue),
                    A4(
                      $author$project$Filters$addIf,
                      filters.altGreenSigmoidEnabled,
                      "altGreenSigmoid",
                      $elm$json$Json$Encode$int(filters.altGreenSigmoid),
                      A4(
                        $author$project$Filters$addIf,
                        filters.altGreenGammaEnabled,
                        "altGreenGamma",
                        $elm$json$Json$Encode$int(filters.altGreenGamma),
                        A4(
                          $author$project$Filters$addIf,
                          filters.altRedVibranceEnabled,
                          "altRedVibrance",
                          $elm$json$Json$Encode$int(filters.altRedVibrance),
                          A4(
                            $author$project$Filters$addIf,
                            filters.altRedHueEnabled,
                            "altRedHueWindow",
                            $elm$json$Json$Encode$int(filters.altRedHueWindow),
                            A4(
                              $author$project$Filters$addIf,
                              filters.altRedHueEnabled,
                              "altRedHue",
                              $elm$json$Json$Encode$int(filters.altRedHue),
                              A4(
                                $author$project$Filters$addIf,
                                filters.altRedSigmoidEnabled,
                                "altRedSigmoid",
                                $elm$json$Json$Encode$int(filters.altRedSigmoid),
                                A4(
                                  $author$project$Filters$addIf,
                                  filters.altRedGammaEnabled,
                                  "altRedGamma",
                                  $elm$json$Json$Encode$int(filters.altRedGamma),
                                  A4(
                                    $author$project$Filters$addIf,
                                    filters.adaptiveEnabled,
                                    "adaptiveOffset",
                                    $elm$json$Json$Encode$int(filters.adaptiveOffset),
                                    A4(
                                      $author$project$Filters$addIf,
                                      filters.adaptiveEnabled,
                                      "adaptiveWindow",
                                      $elm$json$Json$Encode$int(filters.adaptiveWindow),
                                      A4(
                                        $author$project$Filters$addIf,
                                        filters.normalizeEnabled,
                                        "normalizeStrength",
                                        $elm$json$Json$Encode$float(filters.normalizeStrength),
                                        A4(
                                          $author$project$Filters$addIf,
                                          filters.unsharpEnabled,
                                          "unsharpAmount",
                                          $elm$json$Json$Encode$float(filters.unsharpAmount),
                                          A4(
                                            $author$project$Filters$addIf,
                                            filters.colourReplaceEnabled,
                                            "colourReplacePreserveLum",
                                            $elm$json$Json$Encode$bool(filters.colourReplacePreserveLum),
                                            A4(
                                              $author$project$Filters$addIf,
                                              filters.colourReplaceEnabled,
                                              "colourReplaceBlend",
                                              $elm$json$Json$Encode$float(filters.colourReplaceBlend),
                                              A4(
                                                $author$project$Filters$addIf,
                                                filters.colourReplaceEnabled,
                                                "colourReplaceTolerance",
                                                $elm$json$Json$Encode$int(filters.colourReplaceTolerance),
                                                A4(
                                                  $author$project$Filters$addIf,
                                                  filters.colourReplaceEnabled,
                                                  "colourReplaceTarget",
                                                  $elm$json$Json$Encode$string(filters.colourReplaceTarget),
                                                  A4(
                                                    $author$project$Filters$addIf,
                                                    filters.colourReplaceEnabled,
                                                    "colourReplaceSource",
                                                    $elm$json$Json$Encode$string(filters.colourReplaceSource),
                                                    A4(
                                                      $author$project$Filters$addIf,
                                                      filters.pcaEnabled,
                                                      "pcaMode",
                                                      $elm$json$Json$Encode$string(filters.pcaMode),
                                                      A4(
                                                        $author$project$Filters$addIf,
                                                        filters.pseudoColourEnabled,
                                                        "pseudoColourBlue",
                                                        $elm$json$Json$Encode$float(filters.pseudoColourBlue),
                                                        A4(
                                                          $author$project$Filters$addIf,
                                                          filters.pseudoColourEnabled,
                                                          "pseudoColourGreen",
                                                          $elm$json$Json$Encode$float(filters.pseudoColourGreen),
                                                          A4(
                                                            $author$project$Filters$addIf,
                                                            filters.pseudoColourEnabled,
                                                            "pseudoColourRed",
                                                            $elm$json$Json$Encode$float(filters.pseudoColourRed),
                                                            A4(
                                                              $author$project$Filters$addIf,
                                                              filters.pseudoColourEnabled,
                                                              "pseudoColourMode",
                                                              $elm$json$Json$Encode$string(filters.pseudoColourMode),
                                                              A4(
                                                                $author$project$Filters$addIf,
                                                                filters.colourmapEnabled,
                                                                "colourmapCenter",
                                                                $elm$json$Json$Encode$int(filters.colourmapCenter),
                                                                A4(
                                                                  $author$project$Filters$addIf,
                                                                  filters.colourmapEnabled,
                                                                  "colourmapPreset",
                                                                  $elm$json$Json$Encode$string(filters.colourmapPreset),
                                                                  A4(
                                                                    $author$project$Filters$addIf,
                                                                    filters.convolutionEnabled,
                                                                    "convolutionPreset",
                                                                    $elm$json$Json$Encode$string(filters.convolutionPreset),
                                                                    A4(
                                                                      $author$project$Filters$addIf,
                                                                      filters.morphEnabled,
                                                                      "morphKernel",
                                                                      $elm$json$Json$Encode$int(filters.morphKernel),
                                                                      A4(
                                                                        $author$project$Filters$addIf,
                                                                        filters.morphEnabled,
                                                                        "morphOperation",
                                                                        $elm$json$Json$Encode$string(filters.morphOperation),
                                                                        A4(
                                                                          $author$project$Filters$addIf,
                                                                          filters.ccBlueEnabled,
                                                                          "ccBlue",
                                                                          $elm$json$Json$Encode$int(filters.ccBlue),
                                                                          A4(
                                                                            $author$project$Filters$addIf,
                                                                            filters.ccGreenEnabled,
                                                                            "ccGreen",
                                                                            $elm$json$Json$Encode$int(filters.ccGreen),
                                                                            A4(
                                                                              $author$project$Filters$addIf,
                                                                              filters.ccRedEnabled,
                                                                              "ccRed",
                                                                              $elm$json$Json$Encode$int(filters.ccRed),
                                                                              A4(
                                                                                $author$project$Filters$addIf,
                                                                                filters.hueEnabled,
                                                                                "hue",
                                                                                $elm$json$Json$Encode$int(filters.hue),
                                                                                A4(
                                                                                  $author$project$Filters$addIf,
                                                                                  filters.vibranceEnabled,
                                                                                  "vibrance",
                                                                                  $elm$json$Json$Encode$int(filters.vibrance),
                                                                                  A4(
                                                                                    $author$project$Filters$addIf,
                                                                                    filters.saturationEnabled,
                                                                                    "saturation",
                                                                                    $elm$json$Json$Encode$int(filters.saturation),
                                                                                    A4(
                                                                                      $author$project$Filters$addIf,
                                                                                      filters.gammaEnabled,
                                                                                      "gamma",
                                                                                      $elm$json$Json$Encode$float(filters.gamma),
                                                                                      A4(
                                                                                        $author$project$Filters$addIf,
                                                                                        filters.contrastEnabled,
                                                                                        "contrast",
                                                                                        $elm$json$Json$Encode$float(filters.contrast),
                                                                                        A4(
                                                                                          $author$project$Filters$addIf,
                                                                                          filters.brightnessEnabled,
                                                                                          "brightness",
                                                                                          $elm$json$Json$Encode$int(filters.brightness),
                                                                                          A4(
                                                                                            $author$project$Filters$addIf,
                                                                                            filters.thresholdEnabled,
                                                                                            "threshold",
                                                                                            $elm$json$Json$Encode$int(filters.threshold),
                                                                                            A4(
                                                                                              $author$project$Filters$addIf,
                                                                                              filters.invert,
                                                                                              "invert",
                                                                                              $elm$json$Json$Encode$bool(true),
                                                                                              A4(
                                                                                                $author$project$Filters$addIf,
                                                                                                filters.grayscale,
                                                                                                "grayscale",
                                                                                                $elm$json$Json$Encode$bool(true),
                                                                                                A4(
                                                                                                  $author$project$Filters$addIf,
                                                                                                  filters.flip,
                                                                                                  "flip",
                                                                                                  $elm$json$Json$Encode$bool(true),
                                                                                                  A4(
                                                                                                    $author$project$Filters$addIf,
                                                                                                    !!filters.rotation,
                                                                                                    "rotation",
                                                                                                    $elm$json$Json$Encode$int(filters.rotation),
                                                                                                    _List_Nil
                                                                                                  )
                                                                                                )
                                                                                              )
                                                                                            )
                                                                                          )
                                                                                        )
                                                                                      )
                                                                                    )
                                                                                  )
                                                                                )
                                                                              )
                                                                            )
                                                                          )
                                                                        )
                                                                      )
                                                                    )
                                                                  )
                                                                )
                                                              )
                                                            )
                                                          )
                                                        )
                                                      )
                                                    )
                                                  )
                                                )
                                              )
                                            )
                                          )
                                        )
                                      )
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    );
    return A2(
      $elm$json$Json$Encode$encode,
      2,
      $elm$json$Json$Encode$object(activeFields)
    );
  };
  var $author$project$Main$ensureSidebarVisible = function(state) {
    if (state.$ === "SidebarHidden") {
      return $author$project$Model$SidebarThumbnails;
    } else {
      return state;
    }
  };
  var $author$project$Main$findCollectionById = F2(
    function(collectionId, collection) {
      var loop = F2(
        function(state, stack) {
          loop:
            while (true) {
              if (_Utils_eq(state.collection.id, collectionId)) {
                return $elm$core$Maybe$Just(state.collection);
              } else {
                var _v0 = state.rest;
                if (!_v0.b) {
                  if (!stack.b) {
                    return $elm$core$Maybe$Nothing;
                  } else {
                    var frame = stack.a;
                    var rest = stack.b;
                    var $temp$state = frame, $temp$stack = rest;
                    state = $temp$state;
                    stack = $temp$stack;
                    continue loop;
                  }
                } else {
                  var item = _v0.a;
                  var rest = _v0.b;
                  if (item.$ === "NestedCollection") {
                    var nested = item.a;
                    var $temp$state = { collection: nested, rest: nested.items }, $temp$stack = A2(
                      $elm$core$List$cons,
                      { collection: state.collection, rest },
                      stack
                    );
                    state = $temp$state;
                    stack = $temp$stack;
                    continue loop;
                  } else {
                    var $temp$state = _Utils_update(
                      state,
                      { rest }
                    ), $temp$stack = stack;
                    state = $temp$state;
                    stack = $temp$stack;
                    continue loop;
                  }
                }
              }
            }
        }
      );
      return A2(
        loop,
        { collection, rest: collection.items },
        _List_Nil
      );
    }
  );
  var $author$project$Model$Loaded = function(a) {
    return { $: "Loaded", a };
  };
  var $author$project$Main$rangeIndexMapForRange = F2(
    function(canvasIndex, range) {
      var _v4 = A2($author$project$Main$rangeItemsIndexMap, canvasIndex, range.items);
      var firstIndex = _v4.a;
      var childMap = _v4.b;
      return A3($elm$core$Dict$insert, range.id, firstIndex, childMap);
    }
  );
  var $author$project$Main$rangeItemsIndexMap = F2(
    function(canvasIndex, items) {
      return A3(
        $elm$core$List$foldl,
        F2(
          function(item, _v0) {
            var maybeFirst = _v0.a;
            var acc = _v0.b;
            if (item.$ === "RangeCanvas") {
              var canvasId = item.a;
              var nextFirst = (function() {
                if (maybeFirst.$ === "Just") {
                  return maybeFirst;
                } else {
                  return A2($elm$core$Dict$get, canvasId, canvasIndex);
                }
              })();
              return _Utils_Tuple2(nextFirst, acc);
            } else {
              var range = item.a;
              var rangeMap = A2($author$project$Main$rangeIndexMapForRange, canvasIndex, range);
              var nextFirst = (function() {
                if (maybeFirst.$ === "Just") {
                  return maybeFirst;
                } else {
                  return A2(
                    $elm$core$Maybe$withDefault,
                    $elm$core$Maybe$Nothing,
                    A2($elm$core$Dict$get, range.id, rangeMap)
                  );
                }
              })();
              return _Utils_Tuple2(
                nextFirst,
                A2($elm$core$Dict$union, rangeMap, acc)
              );
            }
          }
        ),
        _Utils_Tuple2($elm$core$Maybe$Nothing, $elm$core$Dict$empty),
        items
      );
    }
  );
  var $author$project$Main$buildRangeIndexMap = F2(
    function(canvasIndex, ranges) {
      return A3(
        $elm$core$List$foldl,
        F2(
          function(range, acc) {
            return A2(
              $elm$core$Dict$union,
              A2($author$project$Main$rangeIndexMapForRange, canvasIndex, range),
              acc
            );
          }
        ),
        $elm$core$Dict$empty,
        ranges
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$isPagedLayout = function(layout) {
    if (layout.$ === "LayoutV2") {
      var hint = layout.a;
      if (hint.$ === "PagedHint") {
        return true;
      } else {
        return false;
      }
    } else {
      var behaviour = layout.a;
      return A2($elm$core$List$member, $rism_digital$elm_iiif$IIIF$Presentation$PagedBehavior, behaviour);
    }
  };
  var $author$project$Main$layoutConfigUpdated = _Platform_outgoingPort(
    "layoutConfigUpdated",
    function($) {
      return $elm$json$Json$Encode$object(
        _List_fromArray(
          [
            _Utils_Tuple2(
              "direction",
              $elm$json$Json$Encode$string($.direction)
            ),
            _Utils_Tuple2(
              "mode",
              $elm$json$Json$Encode$string($.mode)
            )
          ]
        )
      );
    }
  );
  var $author$project$Main$layoutModeToString = F2(
    function(viewMode, shiftByOne) {
      if (viewMode.$ === "OneUp") {
        return "single";
      } else {
        return shiftByOne ? "spread-shift" : "spread";
      }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$canvasAspect = function(canvas) {
    var _v0 = _Utils_Tuple2(canvas.width, canvas.height);
    if (_v0.a.$ === "Just" && _v0.b.$ === "Just") {
      var w = _v0.a.a;
      var h = _v0.b.a;
      return w > 0 ? h / w : 1;
    } else {
      return 1;
    }
  };
  var $rism_digital$elm_iiif$IIIF$Internal$Utilities$find = F2(
    function(predicate, items) {
      find:
        while (true) {
          if (!items.b) {
            return $elm$core$Maybe$Nothing;
          } else {
            var x = items.a;
            var rest = items.b;
            if (predicate(x)) {
              return $elm$core$Maybe$Just(x);
            } else {
              var $temp$predicate = predicate, $temp$items = rest;
              predicate = $temp$predicate;
              items = $temp$items;
              continue find;
            }
          }
        }
    }
  );
  var $rism_digital$elm_iiif$IIIF$Language$extractTextFromLanguageMap = F2(
    function(lang, langMap) {
      return A2(
        $elm$core$Maybe$withDefault,
        _List_fromArray(
          ["[No language value found]"]
        ),
        A2(
          $elm$core$Maybe$map,
          function(_v8) {
            var v = _v8.b;
            return v;
          },
          A2(
            $rism_digital$elm_iiif$IIIF$Internal$Utilities$oneOfMaybes,
            _List_fromArray(
              [
                function(_v0) {
                  if (lang.$ === "LanguageCode") {
                    var code = lang.a;
                    return A2(
                      $rism_digital$elm_iiif$IIIF$Internal$Utilities$find,
                      function(languageValues) {
                        if (languageValues.a.$ === "LanguageCode") {
                          var l = languageValues.a.a;
                          return _Utils_eq(l, code);
                        } else {
                          return false;
                        }
                      },
                      langMap
                    );
                  } else {
                    return $elm$core$Maybe$Nothing;
                  }
                },
                function(_v3) {
                  return A2(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$find,
                    function(_v4) {
                      var l = _v4.a;
                      return _Utils_eq(l, $rism_digital$elm_iiif$IIIF$Language$None);
                    },
                    langMap
                  );
                },
                function(_v5) {
                  return A2(
                    $rism_digital$elm_iiif$IIIF$Internal$Utilities$find,
                    function(_v6) {
                      var l = _v6.a;
                      return _Utils_eq(l, $rism_digital$elm_iiif$IIIF$Language$Default);
                    },
                    langMap
                  );
                },
                function(_v7) {
                  return $elm$core$List$head(langMap);
                }
              ]
            ),
            langMap
          )
        )
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap = F2(
    function(lang, langMap) {
      return A2(
        $elm$core$String$join,
        "; ",
        A2($rism_digital$elm_iiif$IIIF$Language$extractTextFromLanguageMap, lang, langMap)
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$canvasLabel = function(canvas) {
    var _v0 = canvas.label;
    if (_v0.$ === "Just") {
      var langMap = _v0.a;
      return A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, $rism_digital$elm_iiif$IIIF$Language$Default, langMap);
    } else {
      return "Untitled";
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createFormatComponent = function(fmt) {
    switch (fmt.$) {
      case "JpegFormat":
        return "jpg";
      case "TiffFormat":
        return "tif";
      case "PngFormat":
        return "png";
      case "Jp2Format":
        return "jp2";
      case "GifFormat":
        return "gif";
      case "PdfFormat":
        return "pdf";
      default:
        return "webp";
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createQualityComponent = function(qual) {
    switch (qual.$) {
      case "ColorQuality":
        return "color";
      case "GrayQuality":
        return "gray";
      case "BiTonalQuality":
        return "bitonal";
      case "DefaultQuality":
        return "default";
      default:
        return "native";
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createRegionComponent = function(region) {
    switch (region.$) {
      case "FullRegion":
        return "full";
      case "SquareRegion":
        return "square";
      case "SizeRegion":
        var x = region.a.x;
        var y = region.a.y;
        var w = region.a.w;
        var h = region.a.h;
        return A2(
          $elm$core$String$join,
          ",",
          A2(
            $elm$core$List$map,
            $elm$core$String$fromInt,
            _List_fromArray(
              [x, y, w, h]
            )
          )
        );
      default:
        var x = region.a.x;
        var y = region.a.y;
        var w = region.a.w;
        var h = region.a.h;
        return A2(
          $elm$core$String$join,
          ",",
          A2(
            $elm$core$List$map,
            $elm$core$String$fromFloat,
            _List_fromArray(
              [x, y, w, h]
            )
          )
        );
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createRotationComponent = function(rot) {
    if (rot.$ === "NormalRotation") {
      var f = rot.a;
      return $elm$core$String$fromFloat(f);
    } else {
      var f = rot.a;
      return "!" + $elm$core$String$fromFloat(f);
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createSizeComponent = function(size) {
    switch (size.$) {
      case "MaxSize":
        return "max";
      case "ExactMaxSize":
        return "^max";
      case "WidthOnlySize":
        var w = size.a;
        return $elm$core$String$fromInt(w) + ",";
      case "ExactWidthOnlySize":
        var w = size.a;
        return "^" + ($elm$core$String$fromInt(w) + ",");
      case "HeightOnlySize":
        var h = size.a;
        return "," + $elm$core$String$fromInt(h);
      case "ExactHeightOnlySize":
        var h = size.a;
        return "^," + $elm$core$String$fromInt(h);
      case "PercentSize":
        var p = size.a;
        return "pct:" + $elm$core$String$fromFloat(p);
      case "ExactPercentSize":
        var p = size.a;
        return "^pct:" + $elm$core$String$fromFloat(p);
      case "WidthAndHeightSize":
        var _v1 = size.a;
        var w = _v1.a;
        var h = _v1.b;
        return $elm$core$String$fromInt(w) + ("," + $elm$core$String$fromInt(h));
      case "ExactWidthAndHeightSize":
        var _v2 = size.a;
        var w = _v2.a;
        var h = _v2.b;
        return "^" + ($elm$core$String$fromInt(w) + ("," + $elm$core$String$fromInt(h)));
      case "ScaledWidthAndHeightSize":
        var _v3 = size.a;
        var w = _v3.a;
        var h = _v3.b;
        return "!" + ($elm$core$String$fromInt(w) + ("," + $elm$core$String$fromInt(h)));
      default:
        var _v4 = size.a;
        var w = _v4.a;
        var h = _v4.b;
        return "^!" + ($elm$core$String$fromInt(w) + ("," + $elm$core$String$fromInt(h)));
    }
  };
  var $rism_digital$elm_iiif$IIIF$Image$createImageUri = function(params) {
    return A2(
      $elm$core$String$join,
      "/",
      _List_fromArray(
        [
          _Utils_ap(params.host, params.prefix),
          $rism_digital$elm_iiif$IIIF$Image$createRegionComponent(params.region),
          $rism_digital$elm_iiif$IIIF$Image$createSizeComponent(params.size),
          $rism_digital$elm_iiif$IIIF$Image$createRotationComponent(params.rotation),
          $rism_digital$elm_iiif$IIIF$Image$createQualityComponent(params.quality) + ("." + $rism_digital$elm_iiif$IIIF$Image$createFormatComponent(params.format))
        ]
      )
    );
  };
  var $rism_digital$elm_iiif$IIIF$Image$createInfoUri = function(params) {
    return params.host + (params.prefix + "/info.json");
  };
  var $rism_digital$elm_iiif$IIIF$Image$createImageAddress = function(iiifUri) {
    if (iiifUri.$ === "InfoUri") {
      var params = iiifUri.a;
      return $rism_digital$elm_iiif$IIIF$Image$createInfoUri(params);
    } else {
      var params = iiifUri.a;
      return $rism_digital$elm_iiif$IIIF$Image$createImageUri(params);
    }
  };
  var $author$project$Utilites$find = F2(
    function(predicate, list) {
      find:
        while (true) {
          if (!list.b) {
            return $elm$core$Maybe$Nothing;
          } else {
            var first = list.a;
            var rest = list.b;
            if (predicate(first)) {
              return $elm$core$Maybe$Just(first);
            } else {
              var $temp$predicate = predicate, $temp$list = rest;
              predicate = $temp$predicate;
              list = $temp$list;
              continue find;
            }
          }
        }
    }
  );
  var $author$project$Utilites$isJust = function(maybeVal) {
    if (maybeVal.$ === "Just") {
      return true;
    } else {
      return false;
    }
  };
  var $author$project$Utilites$isNothing = function(maybeVal) {
    return !$author$project$Utilites$isJust(maybeVal);
  };
  var $rism_digital$elm_iiif$IIIF$Image$imageServerToImageRequest = function(_v0) {
    var host = _v0.host;
    var prefix = _v0.prefix;
    return {
      format: $rism_digital$elm_iiif$IIIF$Image$JpegFormat,
      host,
      prefix,
      quality: $rism_digital$elm_iiif$IIIF$Image$DefaultQuality,
      region: $rism_digital$elm_iiif$IIIF$Image$FullRegion,
      rotation: $rism_digital$elm_iiif$IIIF$Image$NormalRotation(0),
      size: $rism_digital$elm_iiif$IIIF$Image$MaxSize
    };
  };
  var $rism_digital$elm_iiif$IIIF$Image$setImageUriSize = F2(
    function(size, uri) {
      var normParams = (function() {
        if (uri.$ === "InfoUri") {
          var p = uri.a;
          return $rism_digital$elm_iiif$IIIF$Image$imageServerToImageRequest(p);
        } else {
          var p = uri.a;
          return p;
        }
      })();
      return $rism_digital$elm_iiif$IIIF$Image$ImageUri(
        _Utils_update(
          normParams,
          { size }
        )
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Image$thumbnailUrlFromInfo = function(infoUrl) {
    var _v0 = $rism_digital$elm_iiif$IIIF$Image$parseImageAddress(infoUrl);
    if (_v0.$ === "Just") {
      var iiifUrl = _v0.a;
      return $rism_digital$elm_iiif$IIIF$Image$createImageAddress(
        A2(
          $rism_digital$elm_iiif$IIIF$Image$setImageUriSize,
          $rism_digital$elm_iiif$IIIF$Image$WidthOnlySize(180),
          iiifUrl
        )
      );
    } else {
      return infoUrl;
    }
  };
  var $author$project$Model$iiifImageToPageImage = F3(
    function(language, allImages, image) {
      var tileSource = $rism_digital$elm_iiif$IIIF$Image$createImageAddress(image.id);
      var thumbUrl = $rism_digital$elm_iiif$IIIF$Image$thumbnailUrlFromInfo(tileSource);
      var label = A2(
        $elm$core$Maybe$withDefault,
        "Image",
        A2(
          $elm$core$Maybe$map,
          $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap(language),
          image.label
        )
      );
      var isPrimaryImage = $author$project$Utilites$isNothing(
        A2(
          $author$project$Utilites$find,
          function(img) {
            return _Utils_eq(img.imageType, $rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage);
          },
          allImages
        )
      );
      var isFirst = _Utils_eq(
        $elm$core$Maybe$Just(image),
        $elm$core$List$head(allImages)
      );
      var isPrimary = _Utils_eq(image.imageType, $rism_digital$elm_iiif$IIIF$Presentation$PrimaryImage) || isPrimaryImage && isFirst;
      return { isPrimary, label, thumbUrl, tileSource };
    }
  );
  var $author$project$Model$canvasToPage = F2(
    function(language, canvas) {
      var images = A2(
        $elm$core$List$map,
        A2($author$project$Model$iiifImageToPageImage, language, canvas.images),
        canvas.images
      );
      return $elm$core$List$isEmpty(images) ? $elm$core$Maybe$Nothing : $elm$core$Maybe$Just(
        {
          aspect: $rism_digital$elm_iiif$IIIF$Presentation$canvasAspect(canvas),
          images,
          label: $rism_digital$elm_iiif$IIIF$Presentation$canvasLabel(canvas)
        }
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toManifest = function(_v0) {
    var iiifManifest = _v0.b;
    return iiifManifest;
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$withManifest = F2(
    function(accessor, manifest) {
      return accessor(
        $rism_digital$elm_iiif$IIIF$Presentation$toManifest(manifest)
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toCanvases = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.canvases;
    }
  );
  var $author$project$Model$manifestToPages = F2(
    function(language, iiifManifest) {
      return A2(
        $elm$core$List$filterMap,
        $author$project$Model$canvasToPage(language),
        $rism_digital$elm_iiif$IIIF$Presentation$toCanvases(iiifManifest)
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$manifestViewingLayout = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.viewingLayout;
    }
  );
  var $author$project$Main$pageAspectsUpdated = _Platform_outgoingPort(
    "pageAspectsUpdated",
    $elm$json$Json$Encode$list($elm$json$Json$Encode$float)
  );
  var $author$project$Utilites$orElse = F2(
    function(ma, mb) {
      if (mb.$ === "Just") {
        return mb;
      } else {
        return ma;
      }
    }
  );
  var $author$project$Model$primaryImage = function(page) {
    return A2(
      $author$project$Utilites$orElse,
      $elm$core$List$head(page.images),
      A2(
        $author$project$Utilites$find,
        function($) {
          return $.isPrimary;
        },
        page.images
      )
    );
  };
  var $author$project$Main$tileSourcesUpdated = _Platform_outgoingPort(
    "tileSourcesUpdated",
    $elm$json$Json$Encode$list($elm$json$Json$Encode$string)
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toRanges = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.ranges;
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toViewingDirection = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.viewingDirection;
    }
  );
  var $author$project$Main$viewingDirectionToString = function(direction) {
    switch (direction.$) {
      case "LeftToRight":
        return "ltr";
      case "RightToLeft":
        return "rtl";
      case "TopToBottom":
        return "ltr";
      default:
        return "ltr";
    }
  };
  var $author$project$Main$zoomLevelUpdated = _Platform_outgoingPort("zoomLevelUpdated", $elm$json$Json$Encode$float);
  var $author$project$Main$handleManifestLoaded = F2(
    function(model, manifest) {
      var viewingDirection = $rism_digital$elm_iiif$IIIF$Presentation$toViewingDirection(manifest);
      var pages = A2($author$project$Model$manifestToPages, model.detectedLanguage, manifest);
      var tileSources = A2(
        $elm$core$List$filterMap,
        A2(
          $elm$core$Basics$composeR,
          $author$project$Model$primaryImage,
          $elm$core$Maybe$map(
            function($) {
              return $.tileSource;
            }
          )
        ),
        pages
      );
      var pagedLayout = $rism_digital$elm_iiif$IIIF$Presentation$isPagedLayout(
        $rism_digital$elm_iiif$IIIF$Presentation$manifestViewingLayout(manifest)
      );
      var shiftByOne = pagedLayout || _Utils_eq(viewingDirection, $rism_digital$elm_iiif$IIIF$Presentation$RightToLeft);
      var viewMode = pagedLayout ? $author$project$Model$TwoUp : $author$project$Model$OneUp;
      var pageAspects = A2(
        $elm$core$List$map,
        function($) {
          return $.aspect;
        },
        pages
      );
      var layoutMode = A2($author$project$Main$layoutModeToString, viewMode, shiftByOne);
      var direction = $author$project$Main$viewingDirectionToString(viewingDirection);
      var canvasIndexMap = $elm$core$Dict$fromList(
        A2(
          $elm$core$List$indexedMap,
          F2(
            function(index, canvas) {
              return _Utils_Tuple2(canvas.id, index);
            }
          ),
          $rism_digital$elm_iiif$IIIF$Presentation$toCanvases(manifest)
        )
      );
      var rangeIndexMap = A2(
        $elm$core$Maybe$withDefault,
        $elm$core$Dict$empty,
        A2(
          $elm$core$Maybe$map,
          $author$project$Main$buildRangeIndexMap(canvasIndexMap),
          $rism_digital$elm_iiif$IIIF$Presentation$toRanges(manifest)
        )
      );
      return _Utils_Tuple2(
        _Utils_update(
          model,
          {
            canvasIndexMap,
            filters: $author$project$Filters$resetFilters,
            isViewerLoading: false,
            pages,
            rangeIndexMap,
            response: $author$project$Model$Loaded(manifest),
            selectedIndex: $elm$core$List$isEmpty(pages) ? $elm$core$Maybe$Nothing : $elm$core$Maybe$Just(0),
            shiftByOne,
            tileSources,
            viewMode
          }
        ),
        $elm$core$Platform$Cmd$batch(
          _List_fromArray(
            [
              $author$project$Main$tileSourcesUpdated(tileSources),
              $author$project$Main$pageAspectsUpdated(pageAspects),
              $author$project$Main$zoomLevelUpdated(1),
              $author$project$Main$layoutConfigUpdated(
                { direction, mode: layoutMode }
              )
            ]
          )
        )
      );
    }
  );
  var $author$project$Main$httpErrorToString = function(err) {
    switch (err.$) {
      case "BadUrl":
        var url = err.a;
        return "Bad URL: " + url;
      case "Timeout":
        return "Request timed out.";
      case "NetworkError":
        return "Network error.";
      case "BadStatus":
        var statusCode = err.a;
        return "HTTP error: " + $elm$core$String$fromInt(statusCode);
      default:
        var message = err.a;
        return "Bad response body: " + message;
    }
  };
  var $author$project$Main$layoutModeUpdated = _Platform_outgoingPort("layoutModeUpdated", $elm$json$Json$Encode$string);
  var $author$project$Main$replaceCollectionById = F3(
    function(collectionId, replacement, collection) {
      var rebuildUp = F2(
        function(updatedChild, stack) {
          rebuildUp:
            while (true) {
              if (!stack.b) {
                return updatedChild;
              } else {
                var frame = stack.a;
                var rest = stack.b;
                var baseCollection = frame.collection;
                var $temp$updatedChild = _Utils_update(
                  baseCollection,
                  {
                    items: _Utils_ap(
                      $elm$core$List$reverse(
                        A2(
                          $elm$core$List$cons,
                          $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection(updatedChild),
                          frame.beforeRev
                        )
                      ),
                      frame.rest
                    )
                  }
                ), $temp$stack = rest;
                updatedChild = $temp$updatedChild;
                stack = $temp$stack;
                continue rebuildUp;
              }
            }
        }
      );
      var continueSearch = F2(
        function(updatedChild, stack) {
          if (!stack.b) {
            return updatedChild;
          } else {
            var frame = stack.a;
            var rest = stack.b;
            return A2(
              loopSearch,
              {
                beforeRev: A2(
                  $elm$core$List$cons,
                  $rism_digital$elm_iiif$IIIF$Presentation$NestedCollection(updatedChild),
                  frame.beforeRev
                ),
                collection: frame.collection,
                rest: frame.rest
              },
              rest
            );
          }
        }
      );
      var loopSearch = F2(
        function(state, stack) {
          if (_Utils_eq(state.collection.id, collectionId)) {
            return A2(rebuildUp, replacement, stack);
          } else {
            var _v1 = state.rest;
            if (!_v1.b) {
              var baseCollection = state.collection;
              return A2(
                continueSearch,
                _Utils_update(
                  baseCollection,
                  {
                    items: $elm$core$List$reverse(state.beforeRev)
                  }
                ),
                stack
              );
            } else {
              var item = _v1.a;
              var rest = _v1.b;
              if (item.$ === "NestedCollection") {
                var nested = item.a;
                return A2(
                  loopSearch,
                  { beforeRev: _List_Nil, collection: nested, rest: nested.items },
                  A2(
                    $elm$core$List$cons,
                    { beforeRev: state.beforeRev, collection: state.collection, rest },
                    stack
                  )
                );
              } else {
                return A2(
                  loopSearch,
                  _Utils_update(
                    state,
                    {
                      beforeRev: A2($elm$core$List$cons, item, state.beforeRev),
                      rest
                    }
                  ),
                  stack
                );
              }
            }
          }
        }
      );
      return A2(
        loopSearch,
        { beforeRev: _List_Nil, collection, rest: collection.items },
        _List_Nil
      );
    }
  );
  var $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$contextListDecoder = function(contextValues) {
    return A2($elm$core$List$member, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV3PresentationContextString, contextValues) ? A2(
      $elm$json$Json$Decode$map,
      $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV3),
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifManifestDecoder
    ) : A2($elm$core$List$member, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV2PresentationContextString, contextValues) ? A2(
      $elm$json$Json$Decode$map,
      $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV2),
      $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifManifestDecoder
    ) : $elm$json$Json$Decode$fail(
      "Unknown IIIF Version in context values: " + A2($elm$core$String$join, ", ", contextValues)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$contextStringDecoder = function(contextValue) {
    return _Utils_eq(contextValue, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV3PresentationContextString) ? A2(
      $elm$json$Json$Decode$map,
      $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV3),
      $rism_digital$elm_iiif$IIIF$Internal$V3PresentationDecoders$v3iiifManifestDecoder
    ) : _Utils_eq(contextValue, $rism_digital$elm_iiif$IIIF$Internal$Contexts$iiifV2PresentationContextString) ? A2(
      $elm$json$Json$Decode$map,
      $rism_digital$elm_iiif$IIIF$Presentation$IIIFManifest($rism_digital$elm_iiif$IIIF$Version$IIIFV2),
      $rism_digital$elm_iiif$IIIF$Internal$V2PresentationDecoders$v2iiifManifestDecoder
    ) : $elm$json$Json$Decode$fail("Unknown IIIF Version: " + contextValue);
  };
  var $rism_digital$elm_iiif$IIIF$Decoders$manifestDecoder = $elm$json$Json$Decode$oneOf(
    _List_fromArray(
      [
        A2(
          $elm$json$Json$Decode$andThen,
          $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$contextStringDecoder,
          A2($elm$json$Json$Decode$field, "@context", $elm$json$Json$Decode$string)
        ),
        A2(
          $elm$json$Json$Decode$andThen,
          $rism_digital$elm_iiif$IIIF$Internal$CoreDecoders$contextListDecoder,
          A2(
            $elm$json$Json$Decode$field,
            "@context",
            $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
          )
        )
      ]
    )
  );
  var $rism_digital$elm_iiif$IIIF$requestManifest = F3(
    function(responseMsg, acceptHeaders, manifest) {
      return A3(
        $rism_digital$elm_iiif$IIIF$Internal$Request$request,
        acceptHeaders,
        A2($elm$http$Http$expectJson, responseMsg, $rism_digital$elm_iiif$IIIF$Decoders$manifestDecoder),
        manifest
      );
    }
  );
  var $author$project$Filters$resetAltColourAdjust = function(filters) {
    return _Utils_update(
      filters,
      { altBlueGamma: 0, altBlueGammaEnabled: false, altBlueHue: 0, altBlueHueEnabled: false, altBlueHueWindow: 8, altBlueSigmoid: 0, altBlueSigmoidEnabled: false, altBlueVibrance: 0, altBlueVibranceEnabled: false, altGreenGamma: 0, altGreenGammaEnabled: false, altGreenHue: 0, altGreenHueEnabled: false, altGreenHueWindow: 8, altGreenSigmoid: 0, altGreenSigmoidEnabled: false, altGreenVibrance: 0, altGreenVibranceEnabled: false, altRedGamma: 0, altRedGammaEnabled: false, altRedHue: 0, altRedHueEnabled: false, altRedHueWindow: 8, altRedSigmoid: 0, altRedSigmoidEnabled: false, altRedVibrance: 0, altRedVibranceEnabled: false }
    );
  };
  var $elm$json$Json$Encode$null = _Json_encodeNull;
  var $author$project$Main$saveFilteredImage = _Platform_outgoingPort(
    "saveFilteredImage",
    function($) {
      return $elm$json$Json$Encode$null;
    }
  );
  var $author$project$Msg$ClientNotifiedScrollThumbs = function(a) {
    return { $: "ClientNotifiedScrollThumbs", a };
  };
  var $elm$core$Task$onError = _Scheduler_onError;
  var $elm$core$Task$attempt = F2(
    function(resultToMessage, task) {
      return $elm$core$Task$command(
        $elm$core$Task$Perform(
          A2(
            $elm$core$Task$onError,
            A2(
              $elm$core$Basics$composeL,
              A2($elm$core$Basics$composeL, $elm$core$Task$succeed, resultToMessage),
              $elm$core$Result$Err
            ),
            A2(
              $elm$core$Task$andThen,
              A2(
                $elm$core$Basics$composeL,
                A2($elm$core$Basics$composeL, $elm$core$Task$succeed, resultToMessage),
                $elm$core$Result$Ok
              ),
              task
            )
          )
        )
      );
    }
  );
  var $elm$browser$Browser$Dom$getElement = _Browser_getElement;
  var $elm$browser$Browser$Dom$getViewportOf = _Browser_getViewportOf;
  var $elm$core$Task$map3 = F4(
    function(func, taskA, taskB, taskC) {
      return A2(
        $elm$core$Task$andThen,
        function(a) {
          return A2(
            $elm$core$Task$andThen,
            function(b) {
              return A2(
                $elm$core$Task$andThen,
                function(c) {
                  return $elm$core$Task$succeed(
                    A3(func, a, b, c)
                  );
                },
                taskC
              );
            },
            taskB
          );
        },
        taskA
      );
    }
  );
  var $elm$browser$Browser$Dom$setViewportOf = _Browser_setViewportOf;
  var $elm$core$Process$sleep = _Process_sleep;
  var $author$project$Main$scrollThumbsToIndex = F2(
    function(showThumbs, index) {
      if (showThumbs) {
        var delayedTask = A2(
          $elm$core$Task$andThen,
          function(_v0) {
            var thumbId = "thumb-" + $elm$core$String$fromInt(index);
            return A2(
              $elm$core$Task$andThen,
              $elm$core$Basics$identity,
              A4(
                $elm$core$Task$map3,
                F3(
                  function(thumb, container, viewport) {
                    return A3(
                      $elm$browser$Browser$Dom$setViewportOf,
                      "thumbs",
                      0,
                      A2($elm$core$Basics$max, 0, thumb.element.y - container.element.y + viewport.viewport.y)
                    );
                  }
                ),
                $elm$browser$Browser$Dom$getElement(thumbId),
                $elm$browser$Browser$Dom$getElement("thumbs"),
                $elm$browser$Browser$Dom$getViewportOf("thumbs")
              )
            );
          },
          $elm$core$Process$sleep(0)
        );
        return A2($elm$core$Task$attempt, $author$project$Msg$ClientNotifiedScrollThumbs, delayedTask);
      } else {
        return $elm$core$Platform$Cmd$none;
      }
    }
  );
  var $author$project$Main$scrollToIndex = _Platform_outgoingPort("scrollToIndex", $elm$json$Json$Encode$int);
  var $author$project$Main$filterPreviewUpdated = _Platform_outgoingPort(
    "filterPreviewUpdated",
    function($) {
      return $elm$json$Json$Encode$object(
        _List_fromArray(
          [
            _Utils_Tuple2(
              "aspect",
              $elm$json$Json$Encode$float($.aspect)
            ),
            _Utils_Tuple2(
              "filters",
              (function($2) {
                return $elm$json$Json$Encode$object(
                  _List_fromArray(
                    [
                      _Utils_Tuple2(
                        "adaptiveEnabled",
                        $elm$json$Json$Encode$bool($2.adaptiveEnabled)
                      ),
                      _Utils_Tuple2(
                        "adaptiveOffset",
                        $elm$json$Json$Encode$int($2.adaptiveOffset)
                      ),
                      _Utils_Tuple2(
                        "adaptiveWindow",
                        $elm$json$Json$Encode$int($2.adaptiveWindow)
                      ),
                      _Utils_Tuple2(
                        "altBlueGamma",
                        $elm$json$Json$Encode$int($2.altBlueGamma)
                      ),
                      _Utils_Tuple2(
                        "altBlueGammaEnabled",
                        $elm$json$Json$Encode$bool($2.altBlueGammaEnabled)
                      ),
                      _Utils_Tuple2(
                        "altBlueHue",
                        $elm$json$Json$Encode$int($2.altBlueHue)
                      ),
                      _Utils_Tuple2(
                        "altBlueHueEnabled",
                        $elm$json$Json$Encode$bool($2.altBlueHueEnabled)
                      ),
                      _Utils_Tuple2(
                        "altBlueHueWindow",
                        $elm$json$Json$Encode$int($2.altBlueHueWindow)
                      ),
                      _Utils_Tuple2(
                        "altBlueSigmoid",
                        $elm$json$Json$Encode$int($2.altBlueSigmoid)
                      ),
                      _Utils_Tuple2(
                        "altBlueSigmoidEnabled",
                        $elm$json$Json$Encode$bool($2.altBlueSigmoidEnabled)
                      ),
                      _Utils_Tuple2(
                        "altBlueVibrance",
                        $elm$json$Json$Encode$int($2.altBlueVibrance)
                      ),
                      _Utils_Tuple2(
                        "altBlueVibranceEnabled",
                        $elm$json$Json$Encode$bool($2.altBlueVibranceEnabled)
                      ),
                      _Utils_Tuple2(
                        "altGreenGamma",
                        $elm$json$Json$Encode$int($2.altGreenGamma)
                      ),
                      _Utils_Tuple2(
                        "altGreenGammaEnabled",
                        $elm$json$Json$Encode$bool($2.altGreenGammaEnabled)
                      ),
                      _Utils_Tuple2(
                        "altGreenHue",
                        $elm$json$Json$Encode$int($2.altGreenHue)
                      ),
                      _Utils_Tuple2(
                        "altGreenHueEnabled",
                        $elm$json$Json$Encode$bool($2.altGreenHueEnabled)
                      ),
                      _Utils_Tuple2(
                        "altGreenHueWindow",
                        $elm$json$Json$Encode$int($2.altGreenHueWindow)
                      ),
                      _Utils_Tuple2(
                        "altGreenSigmoid",
                        $elm$json$Json$Encode$int($2.altGreenSigmoid)
                      ),
                      _Utils_Tuple2(
                        "altGreenSigmoidEnabled",
                        $elm$json$Json$Encode$bool($2.altGreenSigmoidEnabled)
                      ),
                      _Utils_Tuple2(
                        "altGreenVibrance",
                        $elm$json$Json$Encode$int($2.altGreenVibrance)
                      ),
                      _Utils_Tuple2(
                        "altGreenVibranceEnabled",
                        $elm$json$Json$Encode$bool($2.altGreenVibranceEnabled)
                      ),
                      _Utils_Tuple2(
                        "altRedGamma",
                        $elm$json$Json$Encode$int($2.altRedGamma)
                      ),
                      _Utils_Tuple2(
                        "altRedGammaEnabled",
                        $elm$json$Json$Encode$bool($2.altRedGammaEnabled)
                      ),
                      _Utils_Tuple2(
                        "altRedHue",
                        $elm$json$Json$Encode$int($2.altRedHue)
                      ),
                      _Utils_Tuple2(
                        "altRedHueEnabled",
                        $elm$json$Json$Encode$bool($2.altRedHueEnabled)
                      ),
                      _Utils_Tuple2(
                        "altRedHueWindow",
                        $elm$json$Json$Encode$int($2.altRedHueWindow)
                      ),
                      _Utils_Tuple2(
                        "altRedSigmoid",
                        $elm$json$Json$Encode$int($2.altRedSigmoid)
                      ),
                      _Utils_Tuple2(
                        "altRedSigmoidEnabled",
                        $elm$json$Json$Encode$bool($2.altRedSigmoidEnabled)
                      ),
                      _Utils_Tuple2(
                        "altRedVibrance",
                        $elm$json$Json$Encode$int($2.altRedVibrance)
                      ),
                      _Utils_Tuple2(
                        "altRedVibranceEnabled",
                        $elm$json$Json$Encode$bool($2.altRedVibranceEnabled)
                      ),
                      _Utils_Tuple2(
                        "brightness",
                        $elm$json$Json$Encode$int($2.brightness)
                      ),
                      _Utils_Tuple2(
                        "brightnessEnabled",
                        $elm$json$Json$Encode$bool($2.brightnessEnabled)
                      ),
                      _Utils_Tuple2(
                        "ccBlue",
                        $elm$json$Json$Encode$int($2.ccBlue)
                      ),
                      _Utils_Tuple2(
                        "ccBlueEnabled",
                        $elm$json$Json$Encode$bool($2.ccBlueEnabled)
                      ),
                      _Utils_Tuple2(
                        "ccGreen",
                        $elm$json$Json$Encode$int($2.ccGreen)
                      ),
                      _Utils_Tuple2(
                        "ccGreenEnabled",
                        $elm$json$Json$Encode$bool($2.ccGreenEnabled)
                      ),
                      _Utils_Tuple2(
                        "ccRed",
                        $elm$json$Json$Encode$int($2.ccRed)
                      ),
                      _Utils_Tuple2(
                        "ccRedEnabled",
                        $elm$json$Json$Encode$bool($2.ccRedEnabled)
                      ),
                      _Utils_Tuple2(
                        "colourReplaceBlend",
                        $elm$json$Json$Encode$float($2.colourReplaceBlend)
                      ),
                      _Utils_Tuple2(
                        "colourReplaceEnabled",
                        $elm$json$Json$Encode$bool($2.colourReplaceEnabled)
                      ),
                      _Utils_Tuple2(
                        "colourReplacePreserveLum",
                        $elm$json$Json$Encode$bool($2.colourReplacePreserveLum)
                      ),
                      _Utils_Tuple2(
                        "colourReplaceSource",
                        $elm$json$Json$Encode$string($2.colourReplaceSource)
                      ),
                      _Utils_Tuple2(
                        "colourReplaceTarget",
                        $elm$json$Json$Encode$string($2.colourReplaceTarget)
                      ),
                      _Utils_Tuple2(
                        "colourReplaceTolerance",
                        $elm$json$Json$Encode$int($2.colourReplaceTolerance)
                      ),
                      _Utils_Tuple2(
                        "colourmapCenter",
                        $elm$json$Json$Encode$int($2.colourmapCenter)
                      ),
                      _Utils_Tuple2(
                        "colourmapEnabled",
                        $elm$json$Json$Encode$bool($2.colourmapEnabled)
                      ),
                      _Utils_Tuple2(
                        "colourmapPreset",
                        $elm$json$Json$Encode$string($2.colourmapPreset)
                      ),
                      _Utils_Tuple2(
                        "contrast",
                        $elm$json$Json$Encode$float($2.contrast)
                      ),
                      _Utils_Tuple2(
                        "contrastEnabled",
                        $elm$json$Json$Encode$bool($2.contrastEnabled)
                      ),
                      _Utils_Tuple2(
                        "convolutionEnabled",
                        $elm$json$Json$Encode$bool($2.convolutionEnabled)
                      ),
                      _Utils_Tuple2(
                        "convolutionPreset",
                        $elm$json$Json$Encode$string($2.convolutionPreset)
                      ),
                      _Utils_Tuple2(
                        "flip",
                        $elm$json$Json$Encode$bool($2.flip)
                      ),
                      _Utils_Tuple2(
                        "gamma",
                        $elm$json$Json$Encode$float($2.gamma)
                      ),
                      _Utils_Tuple2(
                        "gammaEnabled",
                        $elm$json$Json$Encode$bool($2.gammaEnabled)
                      ),
                      _Utils_Tuple2(
                        "grayscale",
                        $elm$json$Json$Encode$bool($2.grayscale)
                      ),
                      _Utils_Tuple2(
                        "hue",
                        $elm$json$Json$Encode$int($2.hue)
                      ),
                      _Utils_Tuple2(
                        "hueEnabled",
                        $elm$json$Json$Encode$bool($2.hueEnabled)
                      ),
                      _Utils_Tuple2(
                        "invert",
                        $elm$json$Json$Encode$bool($2.invert)
                      ),
                      _Utils_Tuple2(
                        "morphEnabled",
                        $elm$json$Json$Encode$bool($2.morphEnabled)
                      ),
                      _Utils_Tuple2(
                        "morphKernel",
                        $elm$json$Json$Encode$int($2.morphKernel)
                      ),
                      _Utils_Tuple2(
                        "morphOperation",
                        $elm$json$Json$Encode$string($2.morphOperation)
                      ),
                      _Utils_Tuple2(
                        "normalizeEnabled",
                        $elm$json$Json$Encode$bool($2.normalizeEnabled)
                      ),
                      _Utils_Tuple2(
                        "normalizeStrength",
                        $elm$json$Json$Encode$float($2.normalizeStrength)
                      ),
                      _Utils_Tuple2(
                        "pcaEnabled",
                        $elm$json$Json$Encode$bool($2.pcaEnabled)
                      ),
                      _Utils_Tuple2(
                        "pcaMode",
                        $elm$json$Json$Encode$string($2.pcaMode)
                      ),
                      _Utils_Tuple2(
                        "pseudoColourBlue",
                        $elm$json$Json$Encode$float($2.pseudoColourBlue)
                      ),
                      _Utils_Tuple2(
                        "pseudoColourEnabled",
                        $elm$json$Json$Encode$bool($2.pseudoColourEnabled)
                      ),
                      _Utils_Tuple2(
                        "pseudoColourGreen",
                        $elm$json$Json$Encode$float($2.pseudoColourGreen)
                      ),
                      _Utils_Tuple2(
                        "pseudoColourMode",
                        $elm$json$Json$Encode$string($2.pseudoColourMode)
                      ),
                      _Utils_Tuple2(
                        "pseudoColourRed",
                        $elm$json$Json$Encode$float($2.pseudoColourRed)
                      ),
                      _Utils_Tuple2(
                        "rotation",
                        $elm$json$Json$Encode$int($2.rotation)
                      ),
                      _Utils_Tuple2(
                        "saturation",
                        $elm$json$Json$Encode$int($2.saturation)
                      ),
                      _Utils_Tuple2(
                        "saturationEnabled",
                        $elm$json$Json$Encode$bool($2.saturationEnabled)
                      ),
                      _Utils_Tuple2(
                        "threshold",
                        $elm$json$Json$Encode$int($2.threshold)
                      ),
                      _Utils_Tuple2(
                        "thresholdEnabled",
                        $elm$json$Json$Encode$bool($2.thresholdEnabled)
                      ),
                      _Utils_Tuple2(
                        "unsharpAmount",
                        $elm$json$Json$Encode$float($2.unsharpAmount)
                      ),
                      _Utils_Tuple2(
                        "unsharpEnabled",
                        $elm$json$Json$Encode$bool($2.unsharpEnabled)
                      ),
                      _Utils_Tuple2(
                        "vibrance",
                        $elm$json$Json$Encode$int($2.vibrance)
                      ),
                      _Utils_Tuple2(
                        "vibranceEnabled",
                        $elm$json$Json$Encode$bool($2.vibranceEnabled)
                      )
                    ]
                  )
                );
              })($.filters)
            ),
            _Utils_Tuple2(
              "tileSource",
              $elm$json$Json$Encode$string($.tileSource)
            )
          ]
        )
      );
    }
  );
  var $author$project$Model$getPageAt = F2(
    function(index, pageList) {
      return $elm$core$List$head(
        A2($elm$core$List$drop, index, pageList)
      );
    }
  );
  var $author$project$Main$sendPageViewPreview = function(model) {
    return model.pageViewOpen ? A2(
      $elm$core$Maybe$withDefault,
      $elm$core$Platform$Cmd$none,
      A2(
        $elm$core$Maybe$andThen,
        function(page) {
          return A2(
            $elm$core$Maybe$map,
            function(image) {
              return $author$project$Main$filterPreviewUpdated(
                { aspect: page.aspect, filters: model.filters, tileSource: image.tileSource }
              );
            },
            $elm$core$List$head(
              A2($elm$core$List$drop, model.pageViewImageIndex, page.images)
            )
          );
        },
        A2(
          $elm$core$Maybe$andThen,
          function(index) {
            return A2($author$project$Model$getPageAt, index, model.pages);
          },
          model.selectedIndex
        )
      )
    ) : $elm$core$Platform$Cmd$none;
  };
  var $author$project$Main$setFullscreen = _Platform_outgoingPort("setFullscreen", $elm$json$Json$Encode$bool);
  var $author$project$Filters$updateFilters = F2(
    function(updater, model) {
      return _Utils_update(
        model,
        {
          filters: updater(model.filters)
        }
      );
    }
  );
  var $author$project$Main$zoomBy = _Platform_outgoingPort("zoomBy", $elm$json$Json$Encode$float);
  var $author$project$Main$updateZoom = F2(
    function(model, factor) {
      return _Utils_Tuple2(
        model,
        $author$project$Main$zoomBy(factor)
      );
    }
  );
  var $author$project$Main$zoomInFactor = 1.6;
  var $author$project$Main$zoomOutFactor = 1 / $author$project$Main$zoomInFactor;
  var $author$project$Main$update = F2(
    function(msg, model) {
      switch (msg.$) {
        case "ClientNotifiedFullscreenChanged":
          var enabled = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { fullscreen: enabled }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "ServerRespondedWithManifest":
          var result = msg.a;
          if (result.$ === "Ok") {
            var manifest = result.a;
            return A2($author$project$Main$handleManifestLoaded, model, manifest);
          } else {
            var err = result.a;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  isViewerLoading: false,
                  response: $author$project$Model$Failed(
                    $author$project$Main$httpErrorToString(err)
                  )
                }
              ),
              $elm$core$Platform$Cmd$none
            );
          }
        case "ServerRespondedWithResource":
          var result = msg.a;
          if (result.$ === "Ok") {
            var resource = result.a;
            switch (resource.$) {
              case "ResourceManifest":
                var manifest = resource.a;
                var _v4 = A2($author$project$Main$handleManifestLoaded, model, manifest);
                var nextModel = _v4.a;
                var cmd = _v4.b;
                return _Utils_Tuple2(
                  _Utils_update(
                    nextModel,
                    {
                      collectionSidebarVisible: false,
                      resourceResponse: $author$project$Model$ResourceLoadedManifest(manifest)
                    }
                  ),
                  cmd
                );
              case "ResourceCollection":
                var _v5 = resource.a;
                var version = _v5.a;
                var collection = _v5.b;
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      collectionSidebarVisible: true,
                      isViewerLoading: false,
                      resourceResponse: $author$project$Model$ResourceLoadedCollection(
                        {
                          collection: A2($rism_digital$elm_iiif$IIIF$Presentation$IIIFCollection, version, collection),
                          expandedIds: $elm$core$Set$empty,
                          loadedCollectionIds: $elm$core$Set$empty,
                          loadingCollectionIds: $elm$core$Set$empty,
                          selectedManifestId: $elm$core$Maybe$Nothing
                        }
                      ),
                      response: $author$project$Model$NotRequested
                    }
                  ),
                  $elm$core$Platform$Cmd$none
                );
              default:
                return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
            }
          } else {
            var err = result.a;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  isViewerLoading: false,
                  resourceResponse: $author$project$Model$ResourceFailed(
                    $author$project$Main$httpErrorToString(err)
                  )
                }
              ),
              $elm$core$Platform$Cmd$none
            );
          }
        case "UserClickedCollectionItem":
          var collectionId = msg.a;
          var _v6 = model.resourceResponse;
          if (_v6.$ === "ResourceLoadedCollection") {
            var collectionState = _v6.a;
            var isExpanded = A2($elm$core$Set$member, collectionId, collectionState.expandedIds);
            var nextExpandedIds = isExpanded ? A2($elm$core$Set$remove, collectionId, collectionState.expandedIds) : A2($elm$core$Set$insert, collectionId, collectionState.expandedIds);
            var _v7 = collectionState.collection;
            var rootCollection = _v7.b;
            var isItemsEmpty = A2(
              $elm$core$Maybe$withDefault,
              true,
              A2(
                $elm$core$Maybe$map,
                A2(
                  $elm$core$Basics$composeR,
                  function($) {
                    return $.items;
                  },
                  $elm$core$List$isEmpty
                ),
                A2($author$project$Main$findCollectionById, collectionId, rootCollection)
              )
            );
            var shouldRequest = isItemsEmpty && (!A2($elm$core$Set$member, collectionId, collectionState.loadedCollectionIds) && !A2($elm$core$Set$member, collectionId, collectionState.loadingCollectionIds));
            var nextLoadingIds = shouldRequest ? A2($elm$core$Set$insert, collectionId, collectionState.loadingCollectionIds) : collectionState.loadingCollectionIds;
            var nextState = _Utils_update(
              collectionState,
              { expandedIds: nextExpandedIds, loadingCollectionIds: nextLoadingIds }
            );
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  resourceResponse: $author$project$Model$ResourceLoadedCollection(nextState)
                }
              ),
              shouldRequest ? A3(
                $rism_digital$elm_iiif$IIIF$requestResource,
                $author$project$Msg$ServerRespondedWithCollectionItem(collectionId),
                model.acceptHeaders,
                collectionId
              ) : $elm$core$Platform$Cmd$none
            );
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "ServerRespondedWithCollectionItem":
          var collectionId = msg.a;
          var result = msg.b;
          var _v8 = model.resourceResponse;
          if (_v8.$ === "ResourceLoadedCollection") {
            var collectionState = _v8.a;
            var nextLoadingIds = A2($elm$core$Set$remove, collectionId, collectionState.loadingCollectionIds);
            if (result.$ === "Ok") {
              var resource = result.a;
              if (resource.$ === "ResourceCollection") {
                var _v11 = resource.a;
                var fetchedCollection = _v11.b;
                var _v12 = collectionState.collection;
                var rootVersion = _v12.a;
                var rootCollection = _v12.b;
                var nextCollection = A3($author$project$Main$replaceCollectionById, collectionId, fetchedCollection, rootCollection);
                var nextState = _Utils_update(
                  collectionState,
                  {
                    collection: A2($rism_digital$elm_iiif$IIIF$Presentation$IIIFCollection, rootVersion, nextCollection),
                    loadedCollectionIds: A2($elm$core$Set$insert, collectionId, collectionState.loadedCollectionIds),
                    loadingCollectionIds: nextLoadingIds
                  }
                );
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      resourceResponse: $author$project$Model$ResourceLoadedCollection(nextState)
                    }
                  ),
                  $elm$core$Platform$Cmd$none
                );
              } else {
                return _Utils_Tuple2(
                  _Utils_update(
                    model,
                    {
                      resourceResponse: $author$project$Model$ResourceLoadedCollection(
                        _Utils_update(
                          collectionState,
                          { loadingCollectionIds: nextLoadingIds }
                        )
                      )
                    }
                  ),
                  $elm$core$Platform$Cmd$none
                );
              }
            } else {
              return _Utils_Tuple2(
                _Utils_update(
                  model,
                  {
                    resourceResponse: $author$project$Model$ResourceLoadedCollection(
                      _Utils_update(
                        collectionState,
                        { loadingCollectionIds: nextLoadingIds }
                      )
                    )
                  }
                ),
                $elm$core$Platform$Cmd$none
              );
            }
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "UserClickedManifestItem":
          var manifestId = msg.a;
          var manifestUrl = msg.b;
          var _v13 = model.resourceResponse;
          if (_v13.$ === "ResourceLoadedCollection") {
            var collectionState = _v13.a;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  isViewerLoading: true,
                  resourceResponse: $author$project$Model$ResourceLoadedCollection(
                    _Utils_update(
                      collectionState,
                      {
                        selectedManifestId: $elm$core$Maybe$Just(manifestId)
                      }
                    )
                  ),
                  response: $author$project$Model$Loading
                }
              ),
              A3($rism_digital$elm_iiif$IIIF$requestManifest, $author$project$Msg$ServerRespondedWithManifestFromCollection, model.acceptHeaders, manifestUrl)
            );
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "ServerRespondedWithManifestFromCollection":
          var result = msg.a;
          if (result.$ === "Ok") {
            var manifest = result.a;
            return A2($author$project$Main$handleManifestLoaded, model, manifest);
          } else {
            var err = result.a;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  isViewerLoading: false,
                  response: $author$project$Model$Failed(
                    $author$project$Main$httpErrorToString(err)
                  )
                }
              ),
              $elm$core$Platform$Cmd$none
            );
          }
        case "UserToggledCollectionSidebar":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { collectionSidebarVisible: !model.collectionSidebarVisible }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserStartedCollectionSidebarResize":
          var clientX = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              {
                collectionSidebarDrag: $elm$core$Maybe$Just(
                  { startWidth: model.collectionSidebarWidth, startX: clientX }
                )
              }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserDraggedCollectionSidebarResize":
          var clientX = msg.a;
          var _v15 = model.collectionSidebarDrag;
          if (_v15.$ === "Just") {
            var drag = _v15.a;
            var nextWidth = A3($elm$core$Basics$clamp, 240, 480, drag.startWidth + (clientX - drag.startX));
            return _Utils_Tuple2(
              _Utils_update(
                model,
                { collectionSidebarWidth: nextWidth }
              ),
              $elm$core$Platform$Cmd$none
            );
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "UserEndedCollectionSidebarResize":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { collectionSidebarDrag: $elm$core$Maybe$Nothing }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "ClientNotifiedPageChanged":
          var index = msg.a;
          var nextModel = _Utils_update(
            model,
            {
              pageViewImageIndex: 0,
              selectedIndex: $elm$core$Maybe$Just(index),
              thumbsInstantScroll: false
            }
          );
          return _Utils_Tuple2(
            nextModel,
            $elm$core$Platform$Cmd$batch(
              _List_fromArray(
                [
                  A2(
                    $author$project$Main$scrollThumbsToIndex,
                    _Utils_eq(nextModel.sidebarState, $author$project$Model$SidebarThumbnails),
                    index
                  ),
                  $author$project$Main$sendPageViewPreview(nextModel)
                ]
              )
            )
          );
        case "ClientNotifiedPageChangedInstant":
          var index = msg.a;
          var nextModel = _Utils_update(
            model,
            {
              pageViewImageIndex: 0,
              selectedIndex: $elm$core$Maybe$Just(index),
              thumbsInstantScroll: true
            }
          );
          return _Utils_Tuple2(
            nextModel,
            $elm$core$Platform$Cmd$batch(
              _List_fromArray(
                [
                  A2(
                    $author$project$Main$scrollThumbsToIndex,
                    _Utils_eq(nextModel.sidebarState, $author$project$Model$SidebarThumbnails),
                    index
                  ),
                  $author$project$Main$sendPageViewPreview(nextModel)
                ]
              )
            )
          );
        case "ClientNotifiedScrollThumbs":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { thumbsInstantScroll: false }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "SetResponseLoading":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { resourceResponse: $author$project$Model$ResourceLoading, response: $author$project$Model$Loading }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClickedThumbnail":
          var index = msg.a;
          var nextModel = _Utils_update(
            model,
            {
              pageViewImageIndex: 0,
              selectedIndex: $elm$core$Maybe$Just(index),
              sidebarState: $author$project$Main$ensureSidebarVisible(model.sidebarState),
              thumbsInstantScroll: false
            }
          );
          return _Utils_Tuple2(
            nextModel,
            $elm$core$Platform$Cmd$batch(
              _List_fromArray(
                [
                  $author$project$Main$scrollToIndex(index),
                  A2(
                    $author$project$Main$scrollThumbsToIndex,
                    _Utils_eq(nextModel.sidebarState, $author$project$Model$SidebarThumbnails),
                    index
                  ),
                  $author$project$Main$sendPageViewPreview(nextModel)
                ]
              )
            )
          );
        case "UserToggledFilter":
          var toggle = msg.a;
          var enabled = msg.b;
          var nextModel = A2(
            $author$project$Filters$updateFilters,
            A2($author$project$Filters$applyFilterToggle, toggle, enabled),
            model
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserToggledContents":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { sidebarState: $author$project$Model$SidebarContents }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClickedOpenPageView":
          var nextModel = _Utils_update(
            model,
            {
              pageViewImageIndex: 0,
              pageViewOpen: true,
              pageViewSidebarVisible: true,
              sidebarState: $author$project$Main$ensureSidebarVisible(model.sidebarState)
            }
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserClickedClosePageView":
          var nextModel = _Utils_update(
            model,
            { filters: $author$project$Filters$resetFilters, pageViewFullscreen: false, pageViewImageIndex: 0, pageViewOpen: false }
          );
          return _Utils_Tuple2(nextModel, $elm$core$Platform$Cmd$none);
        case "UserClickedSaveFilteredImage":
          return _Utils_Tuple2(
            model,
            $author$project$Main$saveFilteredImage(_Utils_Tuple0)
          );
        case "UserToggledPageViewFullscreen":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { pageViewFullscreen: !model.pageViewFullscreen }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserToggledPageViewSidebar":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { pageViewSidebarVisible: !model.pageViewSidebarVisible }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClickedOpenManifestInfo":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { manifestInfoOpen: true }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClickedCloseManifestInfo":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { manifestInfoOpen: false }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserToggledMobileSidebar":
          return model.mobileSidebarOpen ? _Utils_Tuple2(
            _Utils_update(
              model,
              { mobileSidebarOpen: false, sidebarState: $author$project$Model$SidebarHidden }
            ),
            $elm$core$Platform$Cmd$none
          ) : _Utils_Tuple2(
            _Utils_update(
              model,
              {
                mobileSidebarOpen: true,
                sidebarState: $author$project$Main$ensureSidebarVisible(model.sidebarState)
              }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClosedMobileSidebar":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { mobileSidebarOpen: false, sidebarState: $author$project$Model$SidebarHidden }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserClickedPageViewPrev":
          var _v16 = model.selectedIndex;
          if (_v16.$ === "Just") {
            var index = _v16.a;
            if (index > 0) {
              var nextIndex = index - 1;
              var nextModel = _Utils_update(
                model,
                {
                  pageViewImageIndex: 0,
                  selectedIndex: $elm$core$Maybe$Just(nextIndex),
                  thumbsInstantScroll: false
                }
              );
              return _Utils_Tuple2(
                nextModel,
                $elm$core$Platform$Cmd$batch(
                  _List_fromArray(
                    [
                      $author$project$Main$scrollToIndex(nextIndex),
                      A2(
                        $author$project$Main$scrollThumbsToIndex,
                        _Utils_eq(nextModel.sidebarState, $author$project$Model$SidebarThumbnails),
                        nextIndex
                      ),
                      $author$project$Main$sendPageViewPreview(nextModel)
                    ]
                  )
                )
              );
            } else {
              return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
            }
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "UserClickedPageViewNext":
          var _v17 = model.selectedIndex;
          if (_v17.$ === "Just") {
            var index = _v17.a;
            var lastIndex = $elm$core$List$length(model.pages) - 1;
            if (_Utils_cmp(index, lastIndex) < 0) {
              var nextIndex = index + 1;
              var nextModel = _Utils_update(
                model,
                {
                  pageViewImageIndex: 0,
                  selectedIndex: $elm$core$Maybe$Just(nextIndex),
                  thumbsInstantScroll: false
                }
              );
              return _Utils_Tuple2(
                nextModel,
                $elm$core$Platform$Cmd$batch(
                  _List_fromArray(
                    [
                      $author$project$Main$scrollToIndex(nextIndex),
                      A2(
                        $author$project$Main$scrollThumbsToIndex,
                        _Utils_eq(nextModel.sidebarState, $author$project$Model$SidebarThumbnails),
                        nextIndex
                      ),
                      $author$project$Main$sendPageViewPreview(nextModel)
                    ]
                  )
                )
              );
            } else {
              return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
            }
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "UserResetAltColourAdjust":
          var nextModel = A2($author$project$Filters$updateFilters, $author$project$Filters$resetAltColourAdjust, model);
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserToggledFullscreen":
          var nextFullscreen = !model.fullscreen;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { fullscreen: nextFullscreen }
            ),
            $author$project$Main$setFullscreen(nextFullscreen)
          );
        case "UserClickedRange":
          var rangeId = msg.a;
          var maybeIndex = msg.b;
          var scrollCmd = (function() {
            if (maybeIndex.$ === "Just") {
              var index2 = maybeIndex.a;
              return $author$project$Main$scrollToIndex(index2);
            } else {
              return $elm$core$Platform$Cmd$none;
            }
          })();
          var nextModel = _Utils_update(
            model,
            {
              pendingThumbScroll: maybeIndex,
              selectedIndex: (function() {
                if (maybeIndex.$ === "Just") {
                  var index2 = maybeIndex.a;
                  return $elm$core$Maybe$Just(index2);
                } else {
                  return model.selectedIndex;
                }
              })(),
              selectedRangeId: $elm$core$Maybe$Just(rangeId),
              sidebarState: $author$project$Main$ensureSidebarVisible(model.sidebarState),
              thumbsInstantScroll: true
            }
          );
          return _Utils_Tuple2(
            nextModel,
            $elm$core$Platform$Cmd$batch(
              _List_fromArray(
                [
                  scrollCmd,
                  $author$project$Main$sendPageViewPreview(nextModel)
                ]
              )
            )
          );
        case "UserToggledMetadata":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { sidebarState: $author$project$Model$SidebarMetadata }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserSelectedContentsIndex":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { contentsView: $author$project$Model$ContentsIndex }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserSelectedContentsPages":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { contentsView: $author$project$Model$ContentsPages }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserToggledSidebar":
          return model.isMobile ? model.mobileSidebarOpen ? _Utils_Tuple2(
            _Utils_update(
              model,
              { mobileSidebarOpen: false, sidebarState: $author$project$Model$SidebarHidden }
            ),
            $elm$core$Platform$Cmd$none
          ) : _Utils_Tuple2(
            _Utils_update(
              model,
              {
                mobileSidebarOpen: true,
                sidebarState: $author$project$Main$ensureSidebarVisible(model.sidebarState)
              }
            ),
            $elm$core$Platform$Cmd$none
          ) : _Utils_eq(model.sidebarState, $author$project$Model$SidebarHidden) ? _Utils_Tuple2(
            _Utils_update(
              model,
              { sidebarState: $author$project$Model$SidebarThumbnails }
            ),
            $elm$core$Platform$Cmd$none
          ) : _Utils_Tuple2(
            _Utils_update(
              model,
              { sidebarState: $author$project$Model$SidebarHidden }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserToggledShiftByOne":
          var _v20 = model.viewMode;
          if (_v20.$ === "OneUp") {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          } else {
            var nextShift = !model.shiftByOne;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                { shiftByOne: nextShift }
              ),
              $author$project$Main$layoutModeUpdated(
                A2($author$project$Main$layoutModeToString, $author$project$Model$TwoUp, nextShift)
              )
            );
          }
        case "UserToggledThumbnails":
          var thumbCmd = (function() {
            var _v22 = _Utils_Tuple2(model.pendingThumbScroll, model.selectedIndex);
            if (_v22.a.$ === "Just") {
              var index2 = _v22.a.a;
              return A2($author$project$Main$scrollThumbsToIndex, true, index2);
            } else {
              if (_v22.b.$ === "Just") {
                var _v23 = _v22.a;
                var index2 = _v22.b.a;
                return A2($author$project$Main$scrollThumbsToIndex, true, index2);
              } else {
                return $elm$core$Platform$Cmd$none;
              }
            }
          })();
          var nextModel = _Utils_update(
            model,
            { sidebarState: $author$project$Model$SidebarThumbnails }
          );
          var nextInstant = (function() {
            var _v21 = model.pendingThumbScroll;
            if (_v21.$ === "Just") {
              return true;
            } else {
              return false;
            }
          })();
          return _Utils_Tuple2(
            _Utils_update(
              nextModel,
              { pendingThumbScroll: $elm$core$Maybe$Nothing, thumbsInstantScroll: nextInstant }
            ),
            thumbCmd
          );
        case "UserToggledTwoUp":
          var nextMode = (function() {
            var _v24 = model.viewMode;
            if (_v24.$ === "OneUp") {
              return $author$project$Model$TwoUp;
            } else {
              return $author$project$Model$OneUp;
            }
          })();
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { viewMode: nextMode }
            ),
            $author$project$Main$layoutModeUpdated(
              A2($author$project$Main$layoutModeToString, nextMode, model.shiftByOne)
            )
          );
        case "UserUpdatedFilterInt":
          var intFilter = msg.a;
          var raw = msg.b;
          var nextModel = A2(
            $author$project$Filters$updateFilters,
            A2($author$project$Filters$applyIntFilter, intFilter, raw),
            model
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserUpdatedFilterFloat":
          var floatFilter = msg.a;
          var raw = msg.b;
          var nextModel = A2(
            $author$project$Filters$updateFilters,
            A2($author$project$Filters$applyFloatFilter, floatFilter, raw),
            model
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserUpdatedFilterString":
          var stringFilter = msg.a;
          var raw = msg.b;
          var nextModel = A2(
            $author$project$Filters$updateFilters,
            A2($author$project$Filters$applyStringFilter, stringFilter, raw),
            model
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        case "UserUpdatedFilterJsonInput":
          var raw = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { filtersJsonError: $elm$core$Maybe$Nothing, filtersJsonInput: raw }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserAppliedFilterJson":
          var _v25 = $author$project$Filters$decodeFilterJson(model.filtersJsonInput);
          if (_v25.$ === "Ok") {
            var filters = _v25.a;
            var json = $author$project$Filters$encodeActiveFilters(filters);
            var nextModel = _Utils_update(
              model,
              { filters, filtersJsonError: $elm$core$Maybe$Nothing, filtersJsonInput: json }
            );
            return _Utils_Tuple2(
              nextModel,
              $author$project$Main$sendPageViewPreview(nextModel)
            );
          } else {
            var err = _v25.a;
            return _Utils_Tuple2(
              _Utils_update(
                model,
                {
                  filtersJsonError: $elm$core$Maybe$Just(err)
                }
              ),
              $elm$core$Platform$Cmd$none
            );
          }
        case "UserCopiedFilterJson":
          var json = $author$project$Filters$encodeActiveFilters(model.filters);
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { filtersJsonError: $elm$core$Maybe$Nothing, filtersJsonInput: json }
            ),
            $author$project$Main$copyToClipboard(json)
          );
        case "ViewerLoadingChanged":
          var isLoading = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { isViewerLoading: isLoading }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserDraggedSidebarResize":
          var clientX = msg.a;
          var _v26 = model.sidebarDrag;
          if (_v26.$ === "Just") {
            var drag = _v26.a;
            var delta = drag.startX - clientX;
            var nextWidth = A3($elm$core$Basics$clamp, 220, 520, drag.startWidth + delta);
            return _Utils_Tuple2(
              _Utils_update(
                model,
                { sidebarWidth: nextWidth }
              ),
              $elm$core$Platform$Cmd$none
            );
          } else {
            return _Utils_Tuple2(model, $elm$core$Platform$Cmd$none);
          }
        case "UserEndedSidebarResize":
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { sidebarDrag: $elm$core$Maybe$Nothing }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserStartedSidebarResize":
          var clientX = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              {
                sidebarDrag: $elm$core$Maybe$Just(
                  { startWidth: model.sidebarWidth, startX: clientX }
                )
              }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "UserChangedZoomLevel":
          var zoom = msg.a;
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { zoom }
            ),
            $elm$core$Platform$Cmd$none
          );
        case "ViewportChanged":
          var width = msg.a;
          var nextIsMobile = width <= 720;
          var nextModel = nextIsMobile ? _Utils_update(
            model,
            { isMobile: true, mobileSidebarOpen: false, sidebarState: $author$project$Model$SidebarHidden }
          ) : _Utils_update(
            model,
            { isMobile: false, mobileSidebarOpen: false }
          );
          return _Utils_Tuple2(nextModel, $elm$core$Platform$Cmd$none);
        case "UserClickedZoomIn":
          return A2($author$project$Main$updateZoom, model, $author$project$Main$zoomInFactor);
        case "UserClickedZoomOut":
          return A2($author$project$Main$updateZoom, model, $author$project$Main$zoomOutFactor);
        case "UserClickedPageViewImageChoice":
          var index = msg.a;
          var nextModel = _Utils_update(
            model,
            { pageViewImageIndex: index }
          );
          return _Utils_Tuple2(
            nextModel,
            $author$project$Main$sendPageViewPreview(nextModel)
          );
        default:
          var groupId = msg.a;
          var nextExpanded = A2($elm$core$Set$member, groupId, model.filterGroupExpanded) ? A2($elm$core$Set$remove, groupId, model.filterGroupExpanded) : A2($elm$core$Set$insert, groupId, model.filterGroupExpanded);
          return _Utils_Tuple2(
            _Utils_update(
              model,
              { filterGroupExpanded: nextExpanded }
            ),
            $elm$core$Platform$Cmd$none
          );
      }
    }
  );
  var $elm$html$Html$Attributes$classList = function(classes) {
    return $elm$html$Html$Attributes$class(
      A2(
        $elm$core$String$join,
        " ",
        A2(
          $elm$core$List$map,
          $elm$core$Tuple$first,
          A2($elm$core$List$filter, $elm$core$Tuple$second, classes)
        )
      )
    );
  };
  var $author$project$View$hasCollectionSidebar = function(model) {
    var _v0 = model.resourceResponse;
    if (_v0.$ === "ResourceLoadedCollection") {
      return model.collectionSidebarVisible;
    } else {
      return false;
    }
  };
  var $author$project$Utilites$choose = F3(
    function(predicate, isTrue, isFalse) {
      return predicate ? isTrue(_Utils_Tuple0) : isFalse(_Utils_Tuple0);
    }
  );
  var $author$project$View$Helpers$viewIf = F2(
    function(viewFunc, condition) {
      return A3(
        $author$project$Utilites$choose,
        condition,
        function(_v0) {
          return viewFunc;
        },
        function(_v1) {
          return $elm$html$Html$text("");
        }
      );
    }
  );
  var $author$project$View$viewThrobber = (function() {
    var delays = _List_fromArray(
      [0.2, 0.3, 0.4, 0.1, 0.2, 0.3, 0, 0.1, 0.2]
    );
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("throbber-overlay", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("throbber", true)
                    ]
                  )
                )
              ]
            ),
            A2(
              $elm$core$List$map,
              function(delay) {
                return A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("throbber-cube", true)
                          ]
                        )
                      ),
                      A2(
                        $elm$html$Html$Attributes$style,
                        "animation-delay",
                        $elm$core$String$fromFloat(delay) + "s"
                      )
                    ]
                  ),
                  _List_Nil
                );
              },
              delays
            )
          )
        ]
      )
    );
  })();
  var $author$project$View$viewCanvas = F3(
    function(fullscreen, isLoading, showCollectionSidebar) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("diva-canvas-wrapper", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A3(
              $elm$html$Html$node,
              "osd-viewer",
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("diva-canvas", true),
                        _Utils_Tuple2("is-fullscreen", fullscreen),
                        _Utils_Tuple2("has-collection", showCollectionSidebar)
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$id("main-viewer")
                ]
              ),
              _List_Nil
            ),
            A2($author$project$View$Helpers$viewIf, $author$project$View$viewThrobber, isLoading)
          ]
        )
      );
    }
  );
  var $author$project$Msg$UserStartedCollectionSidebarResize = function(a) {
    return { $: "UserStartedCollectionSidebarResize", a };
  };
  var $author$project$Utilites$unpack = F3(
    function(_default, f, m) {
      if (m.$ === "Just") {
        var a = m.a;
        return f(a);
      } else {
        return _default(_Utils_Tuple0);
      }
    }
  );
  var $author$project$View$Helpers$viewMaybe = F2(
    function(viewFunc, maybeBody) {
      return A3(
        $author$project$Utilites$unpack,
        function(_v0) {
          return $elm$html$Html$text("");
        },
        viewFunc,
        maybeBody
      );
    }
  );
  var $author$project$View$CollectionExplorer$viewCollectionResizer = function(model) {
    var maybeResizer = (function() {
      var _v0 = model.resourceResponse;
      if (_v0.$ === "ResourceLoadedCollection") {
        return $elm$core$Maybe$Just(
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("collection-resizer", true),
                      _Utils_Tuple2("is-hidden", !model.collectionSidebarVisible)
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$Events$on,
                  "mousedown",
                  A2(
                    $elm$json$Json$Decode$map,
                    $author$project$Msg$UserStartedCollectionSidebarResize,
                    A2($elm$json$Json$Decode$field, "clientX", $elm$json$Json$Decode$int)
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text("\u22EE")
              ]
            )
          )
        );
      } else {
        return $elm$core$Maybe$Nothing;
      }
    })();
    return A2($author$project$View$Helpers$viewMaybe, $elm$core$Basics$identity, maybeResizer);
  };
  var $author$project$Msg$UserClickedCollectionItem = function(a) {
    return { $: "UserClickedCollectionItem", a };
  };
  var $author$project$Msg$UserClickedManifestItem = F2(
    function(a, b) {
      return { $: "UserClickedManifestItem", a, b };
    }
  );
  var $author$project$View$CollectionExplorer$viewManifestItem = F3(
    function(language, collectionState, manifest) {
      var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, manifest.label);
      var isActive = _Utils_eq(
        collectionState.selectedManifestId,
        $elm$core$Maybe$Just(manifest.id)
      );
      return A2(
        $elm$html$Html$li,
        _List_Nil,
        _List_fromArray(
          [
            A2(
              $elm$html$Html$button,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("manifest-tree-item", true),
                        _Utils_Tuple2("ui-button", true),
                        _Utils_Tuple2("is-active", isActive)
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$type_("button"),
                  $elm$html$Html$Events$onClick(
                    A2($author$project$Msg$UserClickedManifestItem, manifest.id, manifest.id)
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(labelText)
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$CollectionExplorer$viewCollectionItem = F3(
    function(language, collectionState, item) {
      if (item.$ === "NestedCollection") {
        var collection = item.a;
        return A3($author$project$View$CollectionExplorer$viewNestedCollection, language, collectionState, collection);
      } else {
        var manifest = item.a;
        return A3($author$project$View$CollectionExplorer$viewManifestItem, language, collectionState, manifest);
      }
    }
  );
  var $author$project$View$CollectionExplorer$viewCollectionTree = F3(
    function(language, collectionState, items) {
      return A2(
        $elm$html$Html$ul,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("collection-list", true),
                  _Utils_Tuple2("list-reset", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$map,
          A3($elm$html$Html$Lazy$lazy3, $author$project$View$CollectionExplorer$viewCollectionItem, language, collectionState),
          items
        )
      );
    }
  );
  var $author$project$View$CollectionExplorer$viewNestedCollection = F3(
    function(language, collectionState, collection) {
      var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, collection.label);
      var isExpanded = A2($elm$core$Set$member, collection.id, collectionState.expandedIds);
      var expandIcon = isExpanded ? "\u25BC" : "\u25B6";
      var childrenView = (function() {
        if (isExpanded) {
          var isLoading = A2($elm$core$Set$member, collection.id, collectionState.loadingCollectionIds);
          var loadingView = isLoading ? _List_fromArray(
            [
              A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("contents-empty", true)
                        ]
                      )
                    )
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text("Loading\u2026")
                  ]
                )
              )
            ]
          ) : _List_Nil;
          return A2(
            $elm$core$List$cons,
            A3($author$project$View$CollectionExplorer$viewCollectionTree, language, collectionState, collection.items),
            loadingView
          );
        } else {
          return _List_Nil;
        }
      })();
      return A2(
        $elm$html$Html$li,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("collection-tree-item", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$cons,
          A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("collection-node-button", true),
                      _Utils_Tuple2("ui-button", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$type_("button"),
                $elm$html$Html$Events$onClick(
                  $author$project$Msg$UserClickedCollectionItem(collection.id)
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("collection-expand-icon", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(expandIcon)
                    ]
                  )
                ),
                $elm$html$Html$text(labelText)
              ]
            )
          ),
          childrenView
        )
      );
    }
  );
  var $author$project$View$CollectionExplorer$viewCollectionPanel = F2(
    function(model, collectionState) {
      var _v0 = collectionState.collection;
      var collection = _v0.b;
      var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, model.detectedLanguage, collection.label);
      var summaryText = A2(
        $elm$core$Maybe$map,
        $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap(model.detectedLanguage),
        collection.summary
      );
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("collection-panel", true),
                  _Utils_Tuple2("is-fullscreen", model.fullscreen),
                  _Utils_Tuple2("is-hidden", !model.collectionSidebarVisible)
                ]
              )
            ),
            A2(
              $elm$html$Html$Attributes$style,
              "width",
              model.collectionSidebarVisible ? $elm$core$String$fromInt(model.collectionSidebarWidth) + "px" : "0px"
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("collection-header", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$classList(
                          _List_fromArray(
                            [
                              _Utils_Tuple2("collection-title", true)
                            ]
                          )
                        )
                      ]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text(labelText)
                      ]
                    )
                  ),
                  A2(
                    $author$project$View$Helpers$viewMaybe,
                    function(summary) {
                      return A2(
                        $elm$html$Html$div,
                        _List_fromArray(
                          [
                            $elm$html$Html$Attributes$classList(
                              _List_fromArray(
                                [
                                  _Utils_Tuple2("collection-summary", true)
                                ]
                              )
                            )
                          ]
                        ),
                        _List_fromArray(
                          [
                            $elm$html$Html$text(summary)
                          ]
                        )
                      );
                    },
                    summaryText
                  )
                ]
              )
            ),
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("sidebar-content", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$classList(
                          _List_fromArray(
                            [
                              _Utils_Tuple2("sidebar-pane", true),
                              _Utils_Tuple2("is-scroll", true)
                            ]
                          )
                        )
                      ]
                    ),
                    _List_fromArray(
                      [
                        A3($author$project$View$CollectionExplorer$viewCollectionTree, model.detectedLanguage, collectionState, collection.items)
                      ]
                    )
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$CollectionExplorer$viewCollectionSidebar = function(model) {
    var maybeCollectionState = (function() {
      var _v0 = model.resourceResponse;
      if (_v0.$ === "ResourceLoadedCollection") {
        var collectionState = _v0.a;
        return $elm$core$Maybe$Just(collectionState);
      } else {
        return $elm$core$Maybe$Nothing;
      }
    })();
    return A2(
      $author$project$View$Helpers$viewMaybe,
      $author$project$View$CollectionExplorer$viewCollectionPanel(model),
      maybeCollectionState
    );
  };
  var $author$project$Model$currentManifest = function(model) {
    var _v0 = model.resourceResponse;
    switch (_v0.$) {
      case "ResourceLoadedManifest":
        var manifest = _v0.a;
        return $elm$core$Maybe$Just(manifest);
      case "ResourceLoadedCollection":
        var _v1 = model.response;
        if (_v1.$ === "Loaded") {
          var manifest = _v1.a;
          return $elm$core$Maybe$Just(manifest);
        } else {
          return $elm$core$Maybe$Nothing;
        }
      default:
        return $elm$core$Maybe$Nothing;
    }
  };
  var $author$project$View$ManifestInfoModal$languageLabel = function(language) {
    switch (language.$) {
      case "LanguageCode":
        var code = language.a;
        return code;
      case "None":
        return "none";
      default:
        return "default";
    }
  };
  var $elm$html$Html$Attributes$rel = _VirtualDom_attribute("rel");
  var $elm$core$String$replace = F3(
    function(before, after, string) {
      return A2(
        $elm$core$String$join,
        after,
        A2($elm$core$String$split, before, string)
      );
    }
  );
  var $author$project$View$HtmlRenderer$normalizeHtml = function(rawHtml) {
    return A3(
      $elm$core$String$replace,
      "</p></p>",
      "</p>",
      A3(
        $elm$core$String$replace,
        "<br />",
        "<br/>",
        A3($elm$core$String$replace, "<br>", "<br/>", rawHtml)
      )
    );
  };
  var $hecrj$html_parser$Html$Parser$Element = F3(
    function(a, b, c) {
      return { $: "Element", a, b, c };
    }
  );
  var $elm$parser$Parser$Advanced$Bad = F2(
    function(a, b) {
      return { $: "Bad", a, b };
    }
  );
  var $elm$parser$Parser$Advanced$Good = F3(
    function(a, b, c) {
      return { $: "Good", a, b, c };
    }
  );
  var $elm$parser$Parser$Advanced$Parser = function(a) {
    return { $: "Parser", a };
  };
  var $elm$parser$Parser$Advanced$andThen = F2(
    function(callback, _v0) {
      var parseA = _v0.a;
      return $elm$parser$Parser$Advanced$Parser(
        function(s0) {
          var _v1 = parseA(s0);
          if (_v1.$ === "Bad") {
            var p = _v1.a;
            var x = _v1.b;
            return A2($elm$parser$Parser$Advanced$Bad, p, x);
          } else {
            var p1 = _v1.a;
            var a = _v1.b;
            var s1 = _v1.c;
            var _v2 = callback(a);
            var parseB = _v2.a;
            var _v3 = parseB(s1);
            if (_v3.$ === "Bad") {
              var p2 = _v3.a;
              var x = _v3.b;
              return A2($elm$parser$Parser$Advanced$Bad, p1 || p2, x);
            } else {
              var p2 = _v3.a;
              var b = _v3.b;
              var s2 = _v3.c;
              return A3($elm$parser$Parser$Advanced$Good, p1 || p2, b, s2);
            }
          }
        }
      );
    }
  );
  var $elm$parser$Parser$andThen = $elm$parser$Parser$Advanced$andThen;
  var $elm$parser$Parser$Advanced$backtrackable = function(_v0) {
    var parse = _v0.a;
    return $elm$parser$Parser$Advanced$Parser(
      function(s0) {
        var _v1 = parse(s0);
        if (_v1.$ === "Bad") {
          var x = _v1.b;
          return A2($elm$parser$Parser$Advanced$Bad, false, x);
        } else {
          var a = _v1.b;
          var s1 = _v1.c;
          return A3($elm$parser$Parser$Advanced$Good, false, a, s1);
        }
      }
    );
  };
  var $elm$parser$Parser$backtrackable = $elm$parser$Parser$Advanced$backtrackable;
  var $elm$parser$Parser$UnexpectedChar = { $: "UnexpectedChar" };
  var $elm$parser$Parser$Advanced$AddRight = F2(
    function(a, b) {
      return { $: "AddRight", a, b };
    }
  );
  var $elm$parser$Parser$Advanced$DeadEnd = F4(
    function(row, col, problem, contextStack) {
      return { col, contextStack, problem, row };
    }
  );
  var $elm$parser$Parser$Advanced$Empty = { $: "Empty" };
  var $elm$parser$Parser$Advanced$fromState = F2(
    function(s, x) {
      return A2(
        $elm$parser$Parser$Advanced$AddRight,
        $elm$parser$Parser$Advanced$Empty,
        A4($elm$parser$Parser$Advanced$DeadEnd, s.row, s.col, x, s.context)
      );
    }
  );
  var $elm$parser$Parser$Advanced$isSubChar = _Parser_isSubChar;
  var $elm$parser$Parser$Advanced$chompIf = F2(
    function(isGood, expecting) {
      return $elm$parser$Parser$Advanced$Parser(
        function(s) {
          var newOffset = A3($elm$parser$Parser$Advanced$isSubChar, isGood, s.offset, s.src);
          return _Utils_eq(newOffset, -1) ? A2(
            $elm$parser$Parser$Advanced$Bad,
            false,
            A2($elm$parser$Parser$Advanced$fromState, s, expecting)
          ) : _Utils_eq(newOffset, -2) ? A3(
            $elm$parser$Parser$Advanced$Good,
            true,
            _Utils_Tuple0,
            { col: 1, context: s.context, indent: s.indent, offset: s.offset + 1, row: s.row + 1, src: s.src }
          ) : A3(
            $elm$parser$Parser$Advanced$Good,
            true,
            _Utils_Tuple0,
            { col: s.col + 1, context: s.context, indent: s.indent, offset: newOffset, row: s.row, src: s.src }
          );
        }
      );
    }
  );
  var $elm$parser$Parser$chompIf = function(isGood) {
    return A2($elm$parser$Parser$Advanced$chompIf, isGood, $elm$parser$Parser$UnexpectedChar);
  };
  var $elm$parser$Parser$Advanced$chompWhileHelp = F5(
    function(isGood, offset, row, col, s0) {
      chompWhileHelp:
        while (true) {
          var newOffset = A3($elm$parser$Parser$Advanced$isSubChar, isGood, offset, s0.src);
          if (_Utils_eq(newOffset, -1)) {
            return A3(
              $elm$parser$Parser$Advanced$Good,
              _Utils_cmp(s0.offset, offset) < 0,
              _Utils_Tuple0,
              { col, context: s0.context, indent: s0.indent, offset, row, src: s0.src }
            );
          } else {
            if (_Utils_eq(newOffset, -2)) {
              var $temp$isGood = isGood, $temp$offset = offset + 1, $temp$row = row + 1, $temp$col = 1, $temp$s0 = s0;
              isGood = $temp$isGood;
              offset = $temp$offset;
              row = $temp$row;
              col = $temp$col;
              s0 = $temp$s0;
              continue chompWhileHelp;
            } else {
              var $temp$isGood = isGood, $temp$offset = newOffset, $temp$row = row, $temp$col = col + 1, $temp$s0 = s0;
              isGood = $temp$isGood;
              offset = $temp$offset;
              row = $temp$row;
              col = $temp$col;
              s0 = $temp$s0;
              continue chompWhileHelp;
            }
          }
        }
    }
  );
  var $elm$parser$Parser$Advanced$chompWhile = function(isGood) {
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        return A5($elm$parser$Parser$Advanced$chompWhileHelp, isGood, s.offset, s.row, s.col, s);
      }
    );
  };
  var $elm$parser$Parser$chompWhile = $elm$parser$Parser$Advanced$chompWhile;
  var $elm$parser$Parser$Advanced$map2 = F3(
    function(func, _v0, _v1) {
      var parseA = _v0.a;
      var parseB = _v1.a;
      return $elm$parser$Parser$Advanced$Parser(
        function(s0) {
          var _v2 = parseA(s0);
          if (_v2.$ === "Bad") {
            var p = _v2.a;
            var x = _v2.b;
            return A2($elm$parser$Parser$Advanced$Bad, p, x);
          } else {
            var p1 = _v2.a;
            var a = _v2.b;
            var s1 = _v2.c;
            var _v3 = parseB(s1);
            if (_v3.$ === "Bad") {
              var p2 = _v3.a;
              var x = _v3.b;
              return A2($elm$parser$Parser$Advanced$Bad, p1 || p2, x);
            } else {
              var p2 = _v3.a;
              var b = _v3.b;
              var s2 = _v3.c;
              return A3(
                $elm$parser$Parser$Advanced$Good,
                p1 || p2,
                A2(func, a, b),
                s2
              );
            }
          }
        }
      );
    }
  );
  var $elm$parser$Parser$Advanced$ignorer = F2(
    function(keepParser, ignoreParser) {
      return A3($elm$parser$Parser$Advanced$map2, $elm$core$Basics$always, keepParser, ignoreParser);
    }
  );
  var $elm$parser$Parser$ignorer = $elm$parser$Parser$Advanced$ignorer;
  var $hecrj$html_parser$Html$Parser$chompOneOrMore = function(fn) {
    return A2(
      $elm$parser$Parser$ignorer,
      $elm$parser$Parser$chompIf(fn),
      $elm$parser$Parser$chompWhile(fn)
    );
  };
  var $elm$parser$Parser$Advanced$mapChompedString = F2(
    function(func, _v0) {
      var parse = _v0.a;
      return $elm$parser$Parser$Advanced$Parser(
        function(s0) {
          var _v1 = parse(s0);
          if (_v1.$ === "Bad") {
            var p = _v1.a;
            var x = _v1.b;
            return A2($elm$parser$Parser$Advanced$Bad, p, x);
          } else {
            var p = _v1.a;
            var a = _v1.b;
            var s1 = _v1.c;
            return A3(
              $elm$parser$Parser$Advanced$Good,
              p,
              A2(
                func,
                A3($elm$core$String$slice, s0.offset, s1.offset, s0.src),
                a
              ),
              s1
            );
          }
        }
      );
    }
  );
  var $elm$parser$Parser$Advanced$getChompedString = function(parser) {
    return A2($elm$parser$Parser$Advanced$mapChompedString, $elm$core$Basics$always, parser);
  };
  var $elm$parser$Parser$getChompedString = $elm$parser$Parser$Advanced$getChompedString;
  var $hecrj$html_parser$Html$Parser$isSpaceCharacter = function(c) {
    return _Utils_eq(
      c,
      _Utils_chr(" ")
    ) || (_Utils_eq(
      c,
      _Utils_chr("	")
    ) || (_Utils_eq(
      c,
      _Utils_chr("\n")
    ) || (_Utils_eq(
      c,
      _Utils_chr("\r")
    ) || (_Utils_eq(
      c,
      _Utils_chr("\f")
    ) || _Utils_eq(
      c,
      _Utils_chr("\xA0")
    )))));
  };
  var $elm$parser$Parser$Problem = function(a) {
    return { $: "Problem", a };
  };
  var $elm$parser$Parser$Advanced$problem = function(x) {
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        return A2(
          $elm$parser$Parser$Advanced$Bad,
          false,
          A2($elm$parser$Parser$Advanced$fromState, s, x)
        );
      }
    );
  };
  var $elm$parser$Parser$problem = function(msg) {
    return $elm$parser$Parser$Advanced$problem(
      $elm$parser$Parser$Problem(msg)
    );
  };
  var $elm$parser$Parser$Advanced$succeed = function(a) {
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        return A3($elm$parser$Parser$Advanced$Good, false, a, s);
      }
    );
  };
  var $elm$parser$Parser$succeed = $elm$parser$Parser$Advanced$succeed;
  var $elm$core$String$toLower = _String_toLower;
  var $hecrj$html_parser$Html$Parser$closingTag = function(name) {
    var chompName = A2(
      $elm$parser$Parser$andThen,
      function(closingName) {
        return _Utils_eq(
          $elm$core$String$toLower(closingName),
          name
        ) ? $elm$parser$Parser$succeed(_Utils_Tuple0) : $elm$parser$Parser$problem("closing tag does not match opening tag: " + name);
      },
      $elm$parser$Parser$getChompedString(
        $hecrj$html_parser$Html$Parser$chompOneOrMore(
          function(c) {
            return !$hecrj$html_parser$Html$Parser$isSpaceCharacter(c) && !_Utils_eq(
              c,
              _Utils_chr(">")
            );
          }
        )
      )
    );
    return A2(
      $elm$parser$Parser$ignorer,
      A2(
        $elm$parser$Parser$ignorer,
        A2(
          $elm$parser$Parser$ignorer,
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$chompIf(
              $elm$core$Basics$eq(
                _Utils_chr("<")
              )
            ),
            $elm$parser$Parser$chompIf(
              $elm$core$Basics$eq(
                _Utils_chr("/")
              )
            )
          ),
          chompName
        ),
        $elm$parser$Parser$chompWhile($hecrj$html_parser$Html$Parser$isSpaceCharacter)
      ),
      $elm$parser$Parser$chompIf(
        $elm$core$Basics$eq(
          _Utils_chr(">")
        )
      )
    );
  };
  var $hecrj$html_parser$Html$Parser$Comment = function(a) {
    return { $: "Comment", a };
  };
  var $elm$parser$Parser$Advanced$findSubString = _Parser_findSubString;
  var $elm$parser$Parser$Advanced$fromInfo = F4(
    function(row, col, x, context) {
      return A2(
        $elm$parser$Parser$Advanced$AddRight,
        $elm$parser$Parser$Advanced$Empty,
        A4($elm$parser$Parser$Advanced$DeadEnd, row, col, x, context)
      );
    }
  );
  var $elm$parser$Parser$Advanced$chompUntil = function(_v0) {
    var str = _v0.a;
    var expecting = _v0.b;
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        var _v1 = A5($elm$parser$Parser$Advanced$findSubString, str, s.offset, s.row, s.col, s.src);
        var newOffset = _v1.a;
        var newRow = _v1.b;
        var newCol = _v1.c;
        return _Utils_eq(newOffset, -1) ? A2(
          $elm$parser$Parser$Advanced$Bad,
          false,
          A4($elm$parser$Parser$Advanced$fromInfo, newRow, newCol, expecting, s.context)
        ) : A3(
          $elm$parser$Parser$Advanced$Good,
          _Utils_cmp(s.offset, newOffset) < 0,
          _Utils_Tuple0,
          { col: newCol, context: s.context, indent: s.indent, offset: newOffset, row: newRow, src: s.src }
        );
      }
    );
  };
  var $elm$parser$Parser$Expecting = function(a) {
    return { $: "Expecting", a };
  };
  var $elm$parser$Parser$Advanced$Token = F2(
    function(a, b) {
      return { $: "Token", a, b };
    }
  );
  var $elm$parser$Parser$toToken = function(str) {
    return A2(
      $elm$parser$Parser$Advanced$Token,
      str,
      $elm$parser$Parser$Expecting(str)
    );
  };
  var $elm$parser$Parser$chompUntil = function(str) {
    return $elm$parser$Parser$Advanced$chompUntil(
      $elm$parser$Parser$toToken(str)
    );
  };
  var $elm$parser$Parser$Advanced$keeper = F2(
    function(parseFunc, parseArg) {
      return A3($elm$parser$Parser$Advanced$map2, $elm$core$Basics$apL, parseFunc, parseArg);
    }
  );
  var $elm$parser$Parser$keeper = $elm$parser$Parser$Advanced$keeper;
  var $elm$parser$Parser$Advanced$isSubString = _Parser_isSubString;
  var $elm$parser$Parser$Advanced$token = function(_v0) {
    var str = _v0.a;
    var expecting = _v0.b;
    var progress = !$elm$core$String$isEmpty(str);
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        var _v1 = A5($elm$parser$Parser$Advanced$isSubString, str, s.offset, s.row, s.col, s.src);
        var newOffset = _v1.a;
        var newRow = _v1.b;
        var newCol = _v1.c;
        return _Utils_eq(newOffset, -1) ? A2(
          $elm$parser$Parser$Advanced$Bad,
          false,
          A2($elm$parser$Parser$Advanced$fromState, s, expecting)
        ) : A3(
          $elm$parser$Parser$Advanced$Good,
          progress,
          _Utils_Tuple0,
          { col: newCol, context: s.context, indent: s.indent, offset: newOffset, row: newRow, src: s.src }
        );
      }
    );
  };
  var $elm$parser$Parser$token = function(str) {
    return $elm$parser$Parser$Advanced$token(
      $elm$parser$Parser$toToken(str)
    );
  };
  var $hecrj$html_parser$Html$Parser$commentString = A2(
    $elm$parser$Parser$keeper,
    A2(
      $elm$parser$Parser$ignorer,
      A2(
        $elm$parser$Parser$ignorer,
        $elm$parser$Parser$succeed($elm$core$Basics$identity),
        $elm$parser$Parser$token("<!")
      ),
      $elm$parser$Parser$token("--")
    ),
    A2(
      $elm$parser$Parser$ignorer,
      $elm$parser$Parser$getChompedString(
        $elm$parser$Parser$chompUntil("-->")
      ),
      $elm$parser$Parser$token("-->")
    )
  );
  var $elm$parser$Parser$Advanced$map = F2(
    function(func, _v0) {
      var parse = _v0.a;
      return $elm$parser$Parser$Advanced$Parser(
        function(s0) {
          var _v1 = parse(s0);
          if (_v1.$ === "Good") {
            var p = _v1.a;
            var a = _v1.b;
            var s1 = _v1.c;
            return A3(
              $elm$parser$Parser$Advanced$Good,
              p,
              func(a),
              s1
            );
          } else {
            var p = _v1.a;
            var x = _v1.b;
            return A2($elm$parser$Parser$Advanced$Bad, p, x);
          }
        }
      );
    }
  );
  var $elm$parser$Parser$map = $elm$parser$Parser$Advanced$map;
  var $hecrj$html_parser$Html$Parser$comment = A2($elm$parser$Parser$map, $hecrj$html_parser$Html$Parser$Comment, $hecrj$html_parser$Html$Parser$commentString);
  var $hecrj$html_parser$Html$Parser$voidElements = _List_fromArray(
    ["area", "base", "br", "col", "embed", "hr", "img", "input", "link", "meta", "param", "source", "track", "wbr"]
  );
  var $hecrj$html_parser$Html$Parser$isVoidElement = function(name) {
    return A2($elm$core$List$member, name, $hecrj$html_parser$Html$Parser$voidElements);
  };
  var $elm$parser$Parser$Done = function(a) {
    return { $: "Done", a };
  };
  var $elm$parser$Parser$Loop = function(a) {
    return { $: "Loop", a };
  };
  var $elm$parser$Parser$Advanced$loopHelp = F4(
    function(p, state, callback, s0) {
      loopHelp:
        while (true) {
          var _v0 = callback(state);
          var parse = _v0.a;
          var _v1 = parse(s0);
          if (_v1.$ === "Good") {
            var p1 = _v1.a;
            var step = _v1.b;
            var s1 = _v1.c;
            if (step.$ === "Loop") {
              var newState = step.a;
              var $temp$p = p || p1, $temp$state = newState, $temp$callback = callback, $temp$s0 = s1;
              p = $temp$p;
              state = $temp$state;
              callback = $temp$callback;
              s0 = $temp$s0;
              continue loopHelp;
            } else {
              var result = step.a;
              return A3($elm$parser$Parser$Advanced$Good, p || p1, result, s1);
            }
          } else {
            var p1 = _v1.a;
            var x = _v1.b;
            return A2($elm$parser$Parser$Advanced$Bad, p || p1, x);
          }
        }
    }
  );
  var $elm$parser$Parser$Advanced$loop = F2(
    function(state, callback) {
      return $elm$parser$Parser$Advanced$Parser(
        function(s) {
          return A4($elm$parser$Parser$Advanced$loopHelp, false, state, callback, s);
        }
      );
    }
  );
  var $elm$parser$Parser$Advanced$Done = function(a) {
    return { $: "Done", a };
  };
  var $elm$parser$Parser$Advanced$Loop = function(a) {
    return { $: "Loop", a };
  };
  var $elm$parser$Parser$toAdvancedStep = function(step) {
    if (step.$ === "Loop") {
      var s = step.a;
      return $elm$parser$Parser$Advanced$Loop(s);
    } else {
      var a = step.a;
      return $elm$parser$Parser$Advanced$Done(a);
    }
  };
  var $elm$parser$Parser$loop = F2(
    function(state, callback) {
      return A2(
        $elm$parser$Parser$Advanced$loop,
        state,
        function(s) {
          return A2(
            $elm$parser$Parser$map,
            $elm$parser$Parser$toAdvancedStep,
            callback(s)
          );
        }
      );
    }
  );
  var $elm$parser$Parser$Advanced$Append = F2(
    function(a, b) {
      return { $: "Append", a, b };
    }
  );
  var $elm$parser$Parser$Advanced$oneOfHelp = F3(
    function(s0, bag, parsers) {
      oneOfHelp:
        while (true) {
          if (!parsers.b) {
            return A2($elm$parser$Parser$Advanced$Bad, false, bag);
          } else {
            var parse = parsers.a.a;
            var remainingParsers = parsers.b;
            var _v1 = parse(s0);
            if (_v1.$ === "Good") {
              var step = _v1;
              return step;
            } else {
              var step = _v1;
              var p = step.a;
              var x = step.b;
              if (p) {
                return step;
              } else {
                var $temp$s0 = s0, $temp$bag = A2($elm$parser$Parser$Advanced$Append, bag, x), $temp$parsers = remainingParsers;
                s0 = $temp$s0;
                bag = $temp$bag;
                parsers = $temp$parsers;
                continue oneOfHelp;
              }
            }
          }
        }
    }
  );
  var $elm$parser$Parser$Advanced$oneOf = function(parsers) {
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        return A3($elm$parser$Parser$Advanced$oneOfHelp, s, $elm$parser$Parser$Advanced$Empty, parsers);
      }
    );
  };
  var $elm$parser$Parser$oneOf = $elm$parser$Parser$Advanced$oneOf;
  var $hecrj$html_parser$Html$Parser$many = function(parser_) {
    return A2(
      $elm$parser$Parser$loop,
      _List_Nil,
      function(list) {
        return $elm$parser$Parser$oneOf(
          _List_fromArray(
            [
              A2(
                $elm$parser$Parser$map,
                function(_new) {
                  return $elm$parser$Parser$Loop(
                    A2($elm$core$List$cons, _new, list)
                  );
                },
                parser_
              ),
              $elm$parser$Parser$succeed(
                $elm$parser$Parser$Done(
                  $elm$core$List$reverse(list)
                )
              )
            ]
          )
        );
      }
    );
  };
  var $hecrj$html_parser$Html$Parser$isTagAttributeCharacter = function(c) {
    return !$hecrj$html_parser$Html$Parser$isSpaceCharacter(c) && (!_Utils_eq(
      c,
      _Utils_chr('"')
    ) && (!_Utils_eq(
      c,
      _Utils_chr("'")
    ) && (!_Utils_eq(
      c,
      _Utils_chr(">")
    ) && (!_Utils_eq(
      c,
      _Utils_chr("/")
    ) && !_Utils_eq(
      c,
      _Utils_chr("=")
    )))));
  };
  var $hecrj$html_parser$Html$Parser$tagAttributeName = A2(
    $elm$parser$Parser$map,
    $elm$core$String$toLower,
    $elm$parser$Parser$getChompedString(
      $hecrj$html_parser$Html$Parser$chompOneOrMore($hecrj$html_parser$Html$Parser$isTagAttributeCharacter)
    )
  );
  var $hecrj$html_parser$Html$Parser$chompSemicolon = $elm$parser$Parser$chompIf(
    $elm$core$Basics$eq(
      _Utils_chr(";")
    )
  );
  var $hecrj$html_parser$Html$Parser$NamedCharacterReferences$dict = $elm$core$Dict$fromList(
    _List_fromArray(
      [
        _Utils_Tuple2("Aacute", "\xC1"),
        _Utils_Tuple2("aacute", "\xE1"),
        _Utils_Tuple2("Abreve", "\u0102"),
        _Utils_Tuple2("abreve", "\u0103"),
        _Utils_Tuple2("ac", "\u223E"),
        _Utils_Tuple2("acd", "\u223F"),
        _Utils_Tuple2("acE", "\u223E\u0333"),
        _Utils_Tuple2("Acirc", "\xC2"),
        _Utils_Tuple2("acirc", "\xE2"),
        _Utils_Tuple2("acute", "\xB4"),
        _Utils_Tuple2("Acy", "\u0410"),
        _Utils_Tuple2("acy", "\u0430"),
        _Utils_Tuple2("AElig", "\xC6"),
        _Utils_Tuple2("aelig", "\xE6"),
        _Utils_Tuple2("af", "\u2061"),
        _Utils_Tuple2("Afr", "\u{1D504}"),
        _Utils_Tuple2("afr", "\u{1D51E}"),
        _Utils_Tuple2("Agrave", "\xC0"),
        _Utils_Tuple2("agrave", "\xE0"),
        _Utils_Tuple2("alefsym", "\u2135"),
        _Utils_Tuple2("aleph", "\u2135"),
        _Utils_Tuple2("Alpha", "\u0391"),
        _Utils_Tuple2("alpha", "\u03B1"),
        _Utils_Tuple2("Amacr", "\u0100"),
        _Utils_Tuple2("amacr", "\u0101"),
        _Utils_Tuple2("amalg", "\u2A3F"),
        _Utils_Tuple2("amp", "&"),
        _Utils_Tuple2("AMP", "&"),
        _Utils_Tuple2("andand", "\u2A55"),
        _Utils_Tuple2("And", "\u2A53"),
        _Utils_Tuple2("and", "\u2227"),
        _Utils_Tuple2("andd", "\u2A5C"),
        _Utils_Tuple2("andslope", "\u2A58"),
        _Utils_Tuple2("andv", "\u2A5A"),
        _Utils_Tuple2("ang", "\u2220"),
        _Utils_Tuple2("ange", "\u29A4"),
        _Utils_Tuple2("angle", "\u2220"),
        _Utils_Tuple2("angmsdaa", "\u29A8"),
        _Utils_Tuple2("angmsdab", "\u29A9"),
        _Utils_Tuple2("angmsdac", "\u29AA"),
        _Utils_Tuple2("angmsdad", "\u29AB"),
        _Utils_Tuple2("angmsdae", "\u29AC"),
        _Utils_Tuple2("angmsdaf", "\u29AD"),
        _Utils_Tuple2("angmsdag", "\u29AE"),
        _Utils_Tuple2("angmsdah", "\u29AF"),
        _Utils_Tuple2("angmsd", "\u2221"),
        _Utils_Tuple2("angrt", "\u221F"),
        _Utils_Tuple2("angrtvb", "\u22BE"),
        _Utils_Tuple2("angrtvbd", "\u299D"),
        _Utils_Tuple2("angsph", "\u2222"),
        _Utils_Tuple2("angst", "\xC5"),
        _Utils_Tuple2("angzarr", "\u237C"),
        _Utils_Tuple2("Aogon", "\u0104"),
        _Utils_Tuple2("aogon", "\u0105"),
        _Utils_Tuple2("Aopf", "\u{1D538}"),
        _Utils_Tuple2("aopf", "\u{1D552}"),
        _Utils_Tuple2("apacir", "\u2A6F"),
        _Utils_Tuple2("ap", "\u2248"),
        _Utils_Tuple2("apE", "\u2A70"),
        _Utils_Tuple2("ape", "\u224A"),
        _Utils_Tuple2("apid", "\u224B"),
        _Utils_Tuple2("apos", "'"),
        _Utils_Tuple2("ApplyFunction", "\u2061"),
        _Utils_Tuple2("approx", "\u2248"),
        _Utils_Tuple2("approxeq", "\u224A"),
        _Utils_Tuple2("Aring", "\xC5"),
        _Utils_Tuple2("aring", "\xE5"),
        _Utils_Tuple2("Ascr", "\u{1D49C}"),
        _Utils_Tuple2("ascr", "\u{1D4B6}"),
        _Utils_Tuple2("Assign", "\u2254"),
        _Utils_Tuple2("ast", "*"),
        _Utils_Tuple2("asymp", "\u2248"),
        _Utils_Tuple2("asympeq", "\u224D"),
        _Utils_Tuple2("Atilde", "\xC3"),
        _Utils_Tuple2("atilde", "\xE3"),
        _Utils_Tuple2("Auml", "\xC4"),
        _Utils_Tuple2("auml", "\xE4"),
        _Utils_Tuple2("awconint", "\u2233"),
        _Utils_Tuple2("awint", "\u2A11"),
        _Utils_Tuple2("backcong", "\u224C"),
        _Utils_Tuple2("backepsilon", "\u03F6"),
        _Utils_Tuple2("backprime", "\u2035"),
        _Utils_Tuple2("backsim", "\u223D"),
        _Utils_Tuple2("backsimeq", "\u22CD"),
        _Utils_Tuple2("Backslash", "\u2216"),
        _Utils_Tuple2("Barv", "\u2AE7"),
        _Utils_Tuple2("barvee", "\u22BD"),
        _Utils_Tuple2("barwed", "\u2305"),
        _Utils_Tuple2("Barwed", "\u2306"),
        _Utils_Tuple2("barwedge", "\u2305"),
        _Utils_Tuple2("bbrk", "\u23B5"),
        _Utils_Tuple2("bbrktbrk", "\u23B6"),
        _Utils_Tuple2("bcong", "\u224C"),
        _Utils_Tuple2("Bcy", "\u0411"),
        _Utils_Tuple2("bcy", "\u0431"),
        _Utils_Tuple2("bdquo", "\u201E"),
        _Utils_Tuple2("becaus", "\u2235"),
        _Utils_Tuple2("because", "\u2235"),
        _Utils_Tuple2("Because", "\u2235"),
        _Utils_Tuple2("bemptyv", "\u29B0"),
        _Utils_Tuple2("bepsi", "\u03F6"),
        _Utils_Tuple2("bernou", "\u212C"),
        _Utils_Tuple2("Bernoullis", "\u212C"),
        _Utils_Tuple2("Beta", "\u0392"),
        _Utils_Tuple2("beta", "\u03B2"),
        _Utils_Tuple2("beth", "\u2136"),
        _Utils_Tuple2("between", "\u226C"),
        _Utils_Tuple2("Bfr", "\u{1D505}"),
        _Utils_Tuple2("bfr", "\u{1D51F}"),
        _Utils_Tuple2("bigcap", "\u22C2"),
        _Utils_Tuple2("bigcirc", "\u25EF"),
        _Utils_Tuple2("bigcup", "\u22C3"),
        _Utils_Tuple2("bigodot", "\u2A00"),
        _Utils_Tuple2("bigoplus", "\u2A01"),
        _Utils_Tuple2("bigotimes", "\u2A02"),
        _Utils_Tuple2("bigsqcup", "\u2A06"),
        _Utils_Tuple2("bigstar", "\u2605"),
        _Utils_Tuple2("bigtriangledown", "\u25BD"),
        _Utils_Tuple2("bigtriangleup", "\u25B3"),
        _Utils_Tuple2("biguplus", "\u2A04"),
        _Utils_Tuple2("bigvee", "\u22C1"),
        _Utils_Tuple2("bigwedge", "\u22C0"),
        _Utils_Tuple2("bkarow", "\u290D"),
        _Utils_Tuple2("blacklozenge", "\u29EB"),
        _Utils_Tuple2("blacksquare", "\u25AA"),
        _Utils_Tuple2("blacktriangle", "\u25B4"),
        _Utils_Tuple2("blacktriangledown", "\u25BE"),
        _Utils_Tuple2("blacktriangleleft", "\u25C2"),
        _Utils_Tuple2("blacktriangleright", "\u25B8"),
        _Utils_Tuple2("blank", "\u2423"),
        _Utils_Tuple2("blk12", "\u2592"),
        _Utils_Tuple2("blk14", "\u2591"),
        _Utils_Tuple2("blk34", "\u2593"),
        _Utils_Tuple2("block", "\u2588"),
        _Utils_Tuple2("bne", "=\u20E5"),
        _Utils_Tuple2("bnequiv", "\u2261\u20E5"),
        _Utils_Tuple2("bNot", "\u2AED"),
        _Utils_Tuple2("bnot", "\u2310"),
        _Utils_Tuple2("Bopf", "\u{1D539}"),
        _Utils_Tuple2("bopf", "\u{1D553}"),
        _Utils_Tuple2("bot", "\u22A5"),
        _Utils_Tuple2("bottom", "\u22A5"),
        _Utils_Tuple2("bowtie", "\u22C8"),
        _Utils_Tuple2("boxbox", "\u29C9"),
        _Utils_Tuple2("boxdl", "\u2510"),
        _Utils_Tuple2("boxdL", "\u2555"),
        _Utils_Tuple2("boxDl", "\u2556"),
        _Utils_Tuple2("boxDL", "\u2557"),
        _Utils_Tuple2("boxdr", "\u250C"),
        _Utils_Tuple2("boxdR", "\u2552"),
        _Utils_Tuple2("boxDr", "\u2553"),
        _Utils_Tuple2("boxDR", "\u2554"),
        _Utils_Tuple2("boxh", "\u2500"),
        _Utils_Tuple2("boxH", "\u2550"),
        _Utils_Tuple2("boxhd", "\u252C"),
        _Utils_Tuple2("boxHd", "\u2564"),
        _Utils_Tuple2("boxhD", "\u2565"),
        _Utils_Tuple2("boxHD", "\u2566"),
        _Utils_Tuple2("boxhu", "\u2534"),
        _Utils_Tuple2("boxHu", "\u2567"),
        _Utils_Tuple2("boxhU", "\u2568"),
        _Utils_Tuple2("boxHU", "\u2569"),
        _Utils_Tuple2("boxminus", "\u229F"),
        _Utils_Tuple2("boxplus", "\u229E"),
        _Utils_Tuple2("boxtimes", "\u22A0"),
        _Utils_Tuple2("boxul", "\u2518"),
        _Utils_Tuple2("boxuL", "\u255B"),
        _Utils_Tuple2("boxUl", "\u255C"),
        _Utils_Tuple2("boxUL", "\u255D"),
        _Utils_Tuple2("boxur", "\u2514"),
        _Utils_Tuple2("boxuR", "\u2558"),
        _Utils_Tuple2("boxUr", "\u2559"),
        _Utils_Tuple2("boxUR", "\u255A"),
        _Utils_Tuple2("boxv", "\u2502"),
        _Utils_Tuple2("boxV", "\u2551"),
        _Utils_Tuple2("boxvh", "\u253C"),
        _Utils_Tuple2("boxvH", "\u256A"),
        _Utils_Tuple2("boxVh", "\u256B"),
        _Utils_Tuple2("boxVH", "\u256C"),
        _Utils_Tuple2("boxvl", "\u2524"),
        _Utils_Tuple2("boxvL", "\u2561"),
        _Utils_Tuple2("boxVl", "\u2562"),
        _Utils_Tuple2("boxVL", "\u2563"),
        _Utils_Tuple2("boxvr", "\u251C"),
        _Utils_Tuple2("boxvR", "\u255E"),
        _Utils_Tuple2("boxVr", "\u255F"),
        _Utils_Tuple2("boxVR", "\u2560"),
        _Utils_Tuple2("bprime", "\u2035"),
        _Utils_Tuple2("breve", "\u02D8"),
        _Utils_Tuple2("Breve", "\u02D8"),
        _Utils_Tuple2("brvbar", "\xA6"),
        _Utils_Tuple2("bscr", "\u{1D4B7}"),
        _Utils_Tuple2("Bscr", "\u212C"),
        _Utils_Tuple2("bsemi", "\u204F"),
        _Utils_Tuple2("bsim", "\u223D"),
        _Utils_Tuple2("bsime", "\u22CD"),
        _Utils_Tuple2("bsolb", "\u29C5"),
        _Utils_Tuple2("bsol", "\\"),
        _Utils_Tuple2("bsolhsub", "\u27C8"),
        _Utils_Tuple2("bull", "\u2022"),
        _Utils_Tuple2("bullet", "\u2022"),
        _Utils_Tuple2("bump", "\u224E"),
        _Utils_Tuple2("bumpE", "\u2AAE"),
        _Utils_Tuple2("bumpe", "\u224F"),
        _Utils_Tuple2("Bumpeq", "\u224E"),
        _Utils_Tuple2("bumpeq", "\u224F"),
        _Utils_Tuple2("Cacute", "\u0106"),
        _Utils_Tuple2("cacute", "\u0107"),
        _Utils_Tuple2("capand", "\u2A44"),
        _Utils_Tuple2("capbrcup", "\u2A49"),
        _Utils_Tuple2("capcap", "\u2A4B"),
        _Utils_Tuple2("cap", "\u2229"),
        _Utils_Tuple2("Cap", "\u22D2"),
        _Utils_Tuple2("capcup", "\u2A47"),
        _Utils_Tuple2("capdot", "\u2A40"),
        _Utils_Tuple2("CapitalDifferentialD", "\u2145"),
        _Utils_Tuple2("caps", "\u2229\uFE00"),
        _Utils_Tuple2("caret", "\u2041"),
        _Utils_Tuple2("caron", "\u02C7"),
        _Utils_Tuple2("Cayleys", "\u212D"),
        _Utils_Tuple2("ccaps", "\u2A4D"),
        _Utils_Tuple2("Ccaron", "\u010C"),
        _Utils_Tuple2("ccaron", "\u010D"),
        _Utils_Tuple2("Ccedil", "\xC7"),
        _Utils_Tuple2("ccedil", "\xE7"),
        _Utils_Tuple2("Ccirc", "\u0108"),
        _Utils_Tuple2("ccirc", "\u0109"),
        _Utils_Tuple2("Cconint", "\u2230"),
        _Utils_Tuple2("ccups", "\u2A4C"),
        _Utils_Tuple2("ccupssm", "\u2A50"),
        _Utils_Tuple2("Cdot", "\u010A"),
        _Utils_Tuple2("cdot", "\u010B"),
        _Utils_Tuple2("cedil", "\xB8"),
        _Utils_Tuple2("Cedilla", "\xB8"),
        _Utils_Tuple2("cemptyv", "\u29B2"),
        _Utils_Tuple2("cent", "\xA2"),
        _Utils_Tuple2("centerdot", "\xB7"),
        _Utils_Tuple2("CenterDot", "\xB7"),
        _Utils_Tuple2("cfr", "\u{1D520}"),
        _Utils_Tuple2("Cfr", "\u212D"),
        _Utils_Tuple2("CHcy", "\u0427"),
        _Utils_Tuple2("chcy", "\u0447"),
        _Utils_Tuple2("check", "\u2713"),
        _Utils_Tuple2("checkmark", "\u2713"),
        _Utils_Tuple2("Chi", "\u03A7"),
        _Utils_Tuple2("chi", "\u03C7"),
        _Utils_Tuple2("circ", "\u02C6"),
        _Utils_Tuple2("circeq", "\u2257"),
        _Utils_Tuple2("circlearrowleft", "\u21BA"),
        _Utils_Tuple2("circlearrowright", "\u21BB"),
        _Utils_Tuple2("circledast", "\u229B"),
        _Utils_Tuple2("circledcirc", "\u229A"),
        _Utils_Tuple2("circleddash", "\u229D"),
        _Utils_Tuple2("CircleDot", "\u2299"),
        _Utils_Tuple2("circledR", "\xAE"),
        _Utils_Tuple2("circledS", "\u24C8"),
        _Utils_Tuple2("CircleMinus", "\u2296"),
        _Utils_Tuple2("CirclePlus", "\u2295"),
        _Utils_Tuple2("CircleTimes", "\u2297"),
        _Utils_Tuple2("cir", "\u25CB"),
        _Utils_Tuple2("cirE", "\u29C3"),
        _Utils_Tuple2("cire", "\u2257"),
        _Utils_Tuple2("cirfnint", "\u2A10"),
        _Utils_Tuple2("cirmid", "\u2AEF"),
        _Utils_Tuple2("cirscir", "\u29C2"),
        _Utils_Tuple2("ClockwiseContourIntegral", "\u2232"),
        _Utils_Tuple2("CloseCurlyDoubleQuote", "\u201D"),
        _Utils_Tuple2("CloseCurlyQuote", "\u2019"),
        _Utils_Tuple2("clubs", "\u2663"),
        _Utils_Tuple2("clubsuit", "\u2663"),
        _Utils_Tuple2("colon", ":"),
        _Utils_Tuple2("Colon", "\u2237"),
        _Utils_Tuple2("Colone", "\u2A74"),
        _Utils_Tuple2("colone", "\u2254"),
        _Utils_Tuple2("coloneq", "\u2254"),
        _Utils_Tuple2("comma", ","),
        _Utils_Tuple2("commat", "@"),
        _Utils_Tuple2("comp", "\u2201"),
        _Utils_Tuple2("compfn", "\u2218"),
        _Utils_Tuple2("complement", "\u2201"),
        _Utils_Tuple2("complexes", "\u2102"),
        _Utils_Tuple2("cong", "\u2245"),
        _Utils_Tuple2("congdot", "\u2A6D"),
        _Utils_Tuple2("Congruent", "\u2261"),
        _Utils_Tuple2("conint", "\u222E"),
        _Utils_Tuple2("Conint", "\u222F"),
        _Utils_Tuple2("ContourIntegral", "\u222E"),
        _Utils_Tuple2("copf", "\u{1D554}"),
        _Utils_Tuple2("Copf", "\u2102"),
        _Utils_Tuple2("coprod", "\u2210"),
        _Utils_Tuple2("Coproduct", "\u2210"),
        _Utils_Tuple2("copy", "\xA9"),
        _Utils_Tuple2("COPY", "\xA9"),
        _Utils_Tuple2("copysr", "\u2117"),
        _Utils_Tuple2("CounterClockwiseContourIntegral", "\u2233"),
        _Utils_Tuple2("crarr", "\u21B5"),
        _Utils_Tuple2("cross", "\u2717"),
        _Utils_Tuple2("Cross", "\u2A2F"),
        _Utils_Tuple2("Cscr", "\u{1D49E}"),
        _Utils_Tuple2("cscr", "\u{1D4B8}"),
        _Utils_Tuple2("csub", "\u2ACF"),
        _Utils_Tuple2("csube", "\u2AD1"),
        _Utils_Tuple2("csup", "\u2AD0"),
        _Utils_Tuple2("csupe", "\u2AD2"),
        _Utils_Tuple2("ctdot", "\u22EF"),
        _Utils_Tuple2("cudarrl", "\u2938"),
        _Utils_Tuple2("cudarrr", "\u2935"),
        _Utils_Tuple2("cuepr", "\u22DE"),
        _Utils_Tuple2("cuesc", "\u22DF"),
        _Utils_Tuple2("cularr", "\u21B6"),
        _Utils_Tuple2("cularrp", "\u293D"),
        _Utils_Tuple2("cupbrcap", "\u2A48"),
        _Utils_Tuple2("cupcap", "\u2A46"),
        _Utils_Tuple2("CupCap", "\u224D"),
        _Utils_Tuple2("cup", "\u222A"),
        _Utils_Tuple2("Cup", "\u22D3"),
        _Utils_Tuple2("cupcup", "\u2A4A"),
        _Utils_Tuple2("cupdot", "\u228D"),
        _Utils_Tuple2("cupor", "\u2A45"),
        _Utils_Tuple2("cups", "\u222A\uFE00"),
        _Utils_Tuple2("curarr", "\u21B7"),
        _Utils_Tuple2("curarrm", "\u293C"),
        _Utils_Tuple2("curlyeqprec", "\u22DE"),
        _Utils_Tuple2("curlyeqsucc", "\u22DF"),
        _Utils_Tuple2("curlyvee", "\u22CE"),
        _Utils_Tuple2("curlywedge", "\u22CF"),
        _Utils_Tuple2("curren", "\xA4"),
        _Utils_Tuple2("curvearrowleft", "\u21B6"),
        _Utils_Tuple2("curvearrowright", "\u21B7"),
        _Utils_Tuple2("cuvee", "\u22CE"),
        _Utils_Tuple2("cuwed", "\u22CF"),
        _Utils_Tuple2("cwconint", "\u2232"),
        _Utils_Tuple2("cwint", "\u2231"),
        _Utils_Tuple2("cylcty", "\u232D"),
        _Utils_Tuple2("dagger", "\u2020"),
        _Utils_Tuple2("Dagger", "\u2021"),
        _Utils_Tuple2("daleth", "\u2138"),
        _Utils_Tuple2("darr", "\u2193"),
        _Utils_Tuple2("Darr", "\u21A1"),
        _Utils_Tuple2("dArr", "\u21D3"),
        _Utils_Tuple2("dash", "\u2010"),
        _Utils_Tuple2("Dashv", "\u2AE4"),
        _Utils_Tuple2("dashv", "\u22A3"),
        _Utils_Tuple2("dbkarow", "\u290F"),
        _Utils_Tuple2("dblac", "\u02DD"),
        _Utils_Tuple2("Dcaron", "\u010E"),
        _Utils_Tuple2("dcaron", "\u010F"),
        _Utils_Tuple2("Dcy", "\u0414"),
        _Utils_Tuple2("dcy", "\u0434"),
        _Utils_Tuple2("ddagger", "\u2021"),
        _Utils_Tuple2("ddarr", "\u21CA"),
        _Utils_Tuple2("DD", "\u2145"),
        _Utils_Tuple2("dd", "\u2146"),
        _Utils_Tuple2("DDotrahd", "\u2911"),
        _Utils_Tuple2("ddotseq", "\u2A77"),
        _Utils_Tuple2("deg", "\xB0"),
        _Utils_Tuple2("Del", "\u2207"),
        _Utils_Tuple2("Delta", "\u0394"),
        _Utils_Tuple2("delta", "\u03B4"),
        _Utils_Tuple2("demptyv", "\u29B1"),
        _Utils_Tuple2("dfisht", "\u297F"),
        _Utils_Tuple2("Dfr", "\u{1D507}"),
        _Utils_Tuple2("dfr", "\u{1D521}"),
        _Utils_Tuple2("dHar", "\u2965"),
        _Utils_Tuple2("dharl", "\u21C3"),
        _Utils_Tuple2("dharr", "\u21C2"),
        _Utils_Tuple2("DiacriticalAcute", "\xB4"),
        _Utils_Tuple2("DiacriticalDot", "\u02D9"),
        _Utils_Tuple2("DiacriticalDoubleAcute", "\u02DD"),
        _Utils_Tuple2("DiacriticalGrave", "`"),
        _Utils_Tuple2("DiacriticalTilde", "\u02DC"),
        _Utils_Tuple2("diam", "\u22C4"),
        _Utils_Tuple2("diamond", "\u22C4"),
        _Utils_Tuple2("Diamond", "\u22C4"),
        _Utils_Tuple2("diamondsuit", "\u2666"),
        _Utils_Tuple2("diams", "\u2666"),
        _Utils_Tuple2("die", "\xA8"),
        _Utils_Tuple2("DifferentialD", "\u2146"),
        _Utils_Tuple2("digamma", "\u03DD"),
        _Utils_Tuple2("disin", "\u22F2"),
        _Utils_Tuple2("div", "\xF7"),
        _Utils_Tuple2("divide", "\xF7"),
        _Utils_Tuple2("divideontimes", "\u22C7"),
        _Utils_Tuple2("divonx", "\u22C7"),
        _Utils_Tuple2("DJcy", "\u0402"),
        _Utils_Tuple2("djcy", "\u0452"),
        _Utils_Tuple2("dlcorn", "\u231E"),
        _Utils_Tuple2("dlcrop", "\u230D"),
        _Utils_Tuple2("dollar", "$"),
        _Utils_Tuple2("Dopf", "\u{1D53B}"),
        _Utils_Tuple2("dopf", "\u{1D555}"),
        _Utils_Tuple2("Dot", "\xA8"),
        _Utils_Tuple2("dot", "\u02D9"),
        _Utils_Tuple2("DotDot", "\u20DC"),
        _Utils_Tuple2("doteq", "\u2250"),
        _Utils_Tuple2("doteqdot", "\u2251"),
        _Utils_Tuple2("DotEqual", "\u2250"),
        _Utils_Tuple2("dotminus", "\u2238"),
        _Utils_Tuple2("dotplus", "\u2214"),
        _Utils_Tuple2("dotsquare", "\u22A1"),
        _Utils_Tuple2("doublebarwedge", "\u2306"),
        _Utils_Tuple2("DoubleContourIntegral", "\u222F"),
        _Utils_Tuple2("DoubleDot", "\xA8"),
        _Utils_Tuple2("DoubleDownArrow", "\u21D3"),
        _Utils_Tuple2("DoubleLeftArrow", "\u21D0"),
        _Utils_Tuple2("DoubleLeftRightArrow", "\u21D4"),
        _Utils_Tuple2("DoubleLeftTee", "\u2AE4"),
        _Utils_Tuple2("DoubleLongLeftArrow", "\u27F8"),
        _Utils_Tuple2("DoubleLongLeftRightArrow", "\u27FA"),
        _Utils_Tuple2("DoubleLongRightArrow", "\u27F9"),
        _Utils_Tuple2("DoubleRightArrow", "\u21D2"),
        _Utils_Tuple2("DoubleRightTee", "\u22A8"),
        _Utils_Tuple2("DoubleUpArrow", "\u21D1"),
        _Utils_Tuple2("DoubleUpDownArrow", "\u21D5"),
        _Utils_Tuple2("DoubleVerticalBar", "\u2225"),
        _Utils_Tuple2("DownArrowBar", "\u2913"),
        _Utils_Tuple2("downarrow", "\u2193"),
        _Utils_Tuple2("DownArrow", "\u2193"),
        _Utils_Tuple2("Downarrow", "\u21D3"),
        _Utils_Tuple2("DownArrowUpArrow", "\u21F5"),
        _Utils_Tuple2("DownBreve", "\u0311"),
        _Utils_Tuple2("downdownarrows", "\u21CA"),
        _Utils_Tuple2("downharpoonleft", "\u21C3"),
        _Utils_Tuple2("downharpoonright", "\u21C2"),
        _Utils_Tuple2("DownLeftRightVector", "\u2950"),
        _Utils_Tuple2("DownLeftTeeVector", "\u295E"),
        _Utils_Tuple2("DownLeftVectorBar", "\u2956"),
        _Utils_Tuple2("DownLeftVector", "\u21BD"),
        _Utils_Tuple2("DownRightTeeVector", "\u295F"),
        _Utils_Tuple2("DownRightVectorBar", "\u2957"),
        _Utils_Tuple2("DownRightVector", "\u21C1"),
        _Utils_Tuple2("DownTeeArrow", "\u21A7"),
        _Utils_Tuple2("DownTee", "\u22A4"),
        _Utils_Tuple2("drbkarow", "\u2910"),
        _Utils_Tuple2("drcorn", "\u231F"),
        _Utils_Tuple2("drcrop", "\u230C"),
        _Utils_Tuple2("Dscr", "\u{1D49F}"),
        _Utils_Tuple2("dscr", "\u{1D4B9}"),
        _Utils_Tuple2("DScy", "\u0405"),
        _Utils_Tuple2("dscy", "\u0455"),
        _Utils_Tuple2("dsol", "\u29F6"),
        _Utils_Tuple2("Dstrok", "\u0110"),
        _Utils_Tuple2("dstrok", "\u0111"),
        _Utils_Tuple2("dtdot", "\u22F1"),
        _Utils_Tuple2("dtri", "\u25BF"),
        _Utils_Tuple2("dtrif", "\u25BE"),
        _Utils_Tuple2("duarr", "\u21F5"),
        _Utils_Tuple2("duhar", "\u296F"),
        _Utils_Tuple2("dwangle", "\u29A6"),
        _Utils_Tuple2("DZcy", "\u040F"),
        _Utils_Tuple2("dzcy", "\u045F"),
        _Utils_Tuple2("dzigrarr", "\u27FF"),
        _Utils_Tuple2("Eacute", "\xC9"),
        _Utils_Tuple2("eacute", "\xE9"),
        _Utils_Tuple2("easter", "\u2A6E"),
        _Utils_Tuple2("Ecaron", "\u011A"),
        _Utils_Tuple2("ecaron", "\u011B"),
        _Utils_Tuple2("Ecirc", "\xCA"),
        _Utils_Tuple2("ecirc", "\xEA"),
        _Utils_Tuple2("ecir", "\u2256"),
        _Utils_Tuple2("ecolon", "\u2255"),
        _Utils_Tuple2("Ecy", "\u042D"),
        _Utils_Tuple2("ecy", "\u044D"),
        _Utils_Tuple2("eDDot", "\u2A77"),
        _Utils_Tuple2("Edot", "\u0116"),
        _Utils_Tuple2("edot", "\u0117"),
        _Utils_Tuple2("eDot", "\u2251"),
        _Utils_Tuple2("ee", "\u2147"),
        _Utils_Tuple2("efDot", "\u2252"),
        _Utils_Tuple2("Efr", "\u{1D508}"),
        _Utils_Tuple2("efr", "\u{1D522}"),
        _Utils_Tuple2("eg", "\u2A9A"),
        _Utils_Tuple2("Egrave", "\xC8"),
        _Utils_Tuple2("egrave", "\xE8"),
        _Utils_Tuple2("egs", "\u2A96"),
        _Utils_Tuple2("egsdot", "\u2A98"),
        _Utils_Tuple2("el", "\u2A99"),
        _Utils_Tuple2("Element", "\u2208"),
        _Utils_Tuple2("elinters", "\u23E7"),
        _Utils_Tuple2("ell", "\u2113"),
        _Utils_Tuple2("els", "\u2A95"),
        _Utils_Tuple2("elsdot", "\u2A97"),
        _Utils_Tuple2("Emacr", "\u0112"),
        _Utils_Tuple2("emacr", "\u0113"),
        _Utils_Tuple2("empty", "\u2205"),
        _Utils_Tuple2("emptyset", "\u2205"),
        _Utils_Tuple2("EmptySmallSquare", "\u25FB"),
        _Utils_Tuple2("emptyv", "\u2205"),
        _Utils_Tuple2("EmptyVerySmallSquare", "\u25AB"),
        _Utils_Tuple2("emsp13", "\u2004"),
        _Utils_Tuple2("emsp14", "\u2005"),
        _Utils_Tuple2("emsp", "\u2003"),
        _Utils_Tuple2("ENG", "\u014A"),
        _Utils_Tuple2("eng", "\u014B"),
        _Utils_Tuple2("ensp", "\u2002"),
        _Utils_Tuple2("Eogon", "\u0118"),
        _Utils_Tuple2("eogon", "\u0119"),
        _Utils_Tuple2("Eopf", "\u{1D53C}"),
        _Utils_Tuple2("eopf", "\u{1D556}"),
        _Utils_Tuple2("epar", "\u22D5"),
        _Utils_Tuple2("eparsl", "\u29E3"),
        _Utils_Tuple2("eplus", "\u2A71"),
        _Utils_Tuple2("epsi", "\u03B5"),
        _Utils_Tuple2("Epsilon", "\u0395"),
        _Utils_Tuple2("epsilon", "\u03B5"),
        _Utils_Tuple2("epsiv", "\u03F5"),
        _Utils_Tuple2("eqcirc", "\u2256"),
        _Utils_Tuple2("eqcolon", "\u2255"),
        _Utils_Tuple2("eqsim", "\u2242"),
        _Utils_Tuple2("eqslantgtr", "\u2A96"),
        _Utils_Tuple2("eqslantless", "\u2A95"),
        _Utils_Tuple2("Equal", "\u2A75"),
        _Utils_Tuple2("equals", "="),
        _Utils_Tuple2("EqualTilde", "\u2242"),
        _Utils_Tuple2("equest", "\u225F"),
        _Utils_Tuple2("Equilibrium", "\u21CC"),
        _Utils_Tuple2("equiv", "\u2261"),
        _Utils_Tuple2("equivDD", "\u2A78"),
        _Utils_Tuple2("eqvparsl", "\u29E5"),
        _Utils_Tuple2("erarr", "\u2971"),
        _Utils_Tuple2("erDot", "\u2253"),
        _Utils_Tuple2("escr", "\u212F"),
        _Utils_Tuple2("Escr", "\u2130"),
        _Utils_Tuple2("esdot", "\u2250"),
        _Utils_Tuple2("Esim", "\u2A73"),
        _Utils_Tuple2("esim", "\u2242"),
        _Utils_Tuple2("Eta", "\u0397"),
        _Utils_Tuple2("eta", "\u03B7"),
        _Utils_Tuple2("ETH", "\xD0"),
        _Utils_Tuple2("eth", "\xF0"),
        _Utils_Tuple2("Euml", "\xCB"),
        _Utils_Tuple2("euml", "\xEB"),
        _Utils_Tuple2("euro", "\u20AC"),
        _Utils_Tuple2("excl", "!"),
        _Utils_Tuple2("exist", "\u2203"),
        _Utils_Tuple2("Exists", "\u2203"),
        _Utils_Tuple2("expectation", "\u2130"),
        _Utils_Tuple2("exponentiale", "\u2147"),
        _Utils_Tuple2("ExponentialE", "\u2147"),
        _Utils_Tuple2("fallingdotseq", "\u2252"),
        _Utils_Tuple2("Fcy", "\u0424"),
        _Utils_Tuple2("fcy", "\u0444"),
        _Utils_Tuple2("female", "\u2640"),
        _Utils_Tuple2("ffilig", "\uFB03"),
        _Utils_Tuple2("fflig", "\uFB00"),
        _Utils_Tuple2("ffllig", "\uFB04"),
        _Utils_Tuple2("Ffr", "\u{1D509}"),
        _Utils_Tuple2("ffr", "\u{1D523}"),
        _Utils_Tuple2("filig", "\uFB01"),
        _Utils_Tuple2("FilledSmallSquare", "\u25FC"),
        _Utils_Tuple2("FilledVerySmallSquare", "\u25AA"),
        _Utils_Tuple2("fjlig", "fj"),
        _Utils_Tuple2("flat", "\u266D"),
        _Utils_Tuple2("fllig", "\uFB02"),
        _Utils_Tuple2("fltns", "\u25B1"),
        _Utils_Tuple2("fnof", "\u0192"),
        _Utils_Tuple2("Fopf", "\u{1D53D}"),
        _Utils_Tuple2("fopf", "\u{1D557}"),
        _Utils_Tuple2("forall", "\u2200"),
        _Utils_Tuple2("ForAll", "\u2200"),
        _Utils_Tuple2("fork", "\u22D4"),
        _Utils_Tuple2("forkv", "\u2AD9"),
        _Utils_Tuple2("Fouriertrf", "\u2131"),
        _Utils_Tuple2("fpartint", "\u2A0D"),
        _Utils_Tuple2("frac12", "\xBD"),
        _Utils_Tuple2("frac13", "\u2153"),
        _Utils_Tuple2("frac14", "\xBC"),
        _Utils_Tuple2("frac15", "\u2155"),
        _Utils_Tuple2("frac16", "\u2159"),
        _Utils_Tuple2("frac18", "\u215B"),
        _Utils_Tuple2("frac23", "\u2154"),
        _Utils_Tuple2("frac25", "\u2156"),
        _Utils_Tuple2("frac34", "\xBE"),
        _Utils_Tuple2("frac35", "\u2157"),
        _Utils_Tuple2("frac38", "\u215C"),
        _Utils_Tuple2("frac45", "\u2158"),
        _Utils_Tuple2("frac56", "\u215A"),
        _Utils_Tuple2("frac58", "\u215D"),
        _Utils_Tuple2("frac78", "\u215E"),
        _Utils_Tuple2("frasl", "\u2044"),
        _Utils_Tuple2("frown", "\u2322"),
        _Utils_Tuple2("fscr", "\u{1D4BB}"),
        _Utils_Tuple2("Fscr", "\u2131"),
        _Utils_Tuple2("gacute", "\u01F5"),
        _Utils_Tuple2("Gamma", "\u0393"),
        _Utils_Tuple2("gamma", "\u03B3"),
        _Utils_Tuple2("Gammad", "\u03DC"),
        _Utils_Tuple2("gammad", "\u03DD"),
        _Utils_Tuple2("gap", "\u2A86"),
        _Utils_Tuple2("Gbreve", "\u011E"),
        _Utils_Tuple2("gbreve", "\u011F"),
        _Utils_Tuple2("Gcedil", "\u0122"),
        _Utils_Tuple2("Gcirc", "\u011C"),
        _Utils_Tuple2("gcirc", "\u011D"),
        _Utils_Tuple2("Gcy", "\u0413"),
        _Utils_Tuple2("gcy", "\u0433"),
        _Utils_Tuple2("Gdot", "\u0120"),
        _Utils_Tuple2("gdot", "\u0121"),
        _Utils_Tuple2("ge", "\u2265"),
        _Utils_Tuple2("gE", "\u2267"),
        _Utils_Tuple2("gEl", "\u2A8C"),
        _Utils_Tuple2("gel", "\u22DB"),
        _Utils_Tuple2("geq", "\u2265"),
        _Utils_Tuple2("geqq", "\u2267"),
        _Utils_Tuple2("geqslant", "\u2A7E"),
        _Utils_Tuple2("gescc", "\u2AA9"),
        _Utils_Tuple2("ges", "\u2A7E"),
        _Utils_Tuple2("gesdot", "\u2A80"),
        _Utils_Tuple2("gesdoto", "\u2A82"),
        _Utils_Tuple2("gesdotol", "\u2A84"),
        _Utils_Tuple2("gesl", "\u22DB\uFE00"),
        _Utils_Tuple2("gesles", "\u2A94"),
        _Utils_Tuple2("Gfr", "\u{1D50A}"),
        _Utils_Tuple2("gfr", "\u{1D524}"),
        _Utils_Tuple2("gg", "\u226B"),
        _Utils_Tuple2("Gg", "\u22D9"),
        _Utils_Tuple2("ggg", "\u22D9"),
        _Utils_Tuple2("gimel", "\u2137"),
        _Utils_Tuple2("GJcy", "\u0403"),
        _Utils_Tuple2("gjcy", "\u0453"),
        _Utils_Tuple2("gla", "\u2AA5"),
        _Utils_Tuple2("gl", "\u2277"),
        _Utils_Tuple2("glE", "\u2A92"),
        _Utils_Tuple2("glj", "\u2AA4"),
        _Utils_Tuple2("gnap", "\u2A8A"),
        _Utils_Tuple2("gnapprox", "\u2A8A"),
        _Utils_Tuple2("gne", "\u2A88"),
        _Utils_Tuple2("gnE", "\u2269"),
        _Utils_Tuple2("gneq", "\u2A88"),
        _Utils_Tuple2("gneqq", "\u2269"),
        _Utils_Tuple2("gnsim", "\u22E7"),
        _Utils_Tuple2("Gopf", "\u{1D53E}"),
        _Utils_Tuple2("gopf", "\u{1D558}"),
        _Utils_Tuple2("grave", "`"),
        _Utils_Tuple2("GreaterEqual", "\u2265"),
        _Utils_Tuple2("GreaterEqualLess", "\u22DB"),
        _Utils_Tuple2("GreaterFullEqual", "\u2267"),
        _Utils_Tuple2("GreaterGreater", "\u2AA2"),
        _Utils_Tuple2("GreaterLess", "\u2277"),
        _Utils_Tuple2("GreaterSlantEqual", "\u2A7E"),
        _Utils_Tuple2("GreaterTilde", "\u2273"),
        _Utils_Tuple2("Gscr", "\u{1D4A2}"),
        _Utils_Tuple2("gscr", "\u210A"),
        _Utils_Tuple2("gsim", "\u2273"),
        _Utils_Tuple2("gsime", "\u2A8E"),
        _Utils_Tuple2("gsiml", "\u2A90"),
        _Utils_Tuple2("gtcc", "\u2AA7"),
        _Utils_Tuple2("gtcir", "\u2A7A"),
        _Utils_Tuple2("gt", ">"),
        _Utils_Tuple2("GT", ">"),
        _Utils_Tuple2("Gt", "\u226B"),
        _Utils_Tuple2("gtdot", "\u22D7"),
        _Utils_Tuple2("gtlPar", "\u2995"),
        _Utils_Tuple2("gtquest", "\u2A7C"),
        _Utils_Tuple2("gtrapprox", "\u2A86"),
        _Utils_Tuple2("gtrarr", "\u2978"),
        _Utils_Tuple2("gtrdot", "\u22D7"),
        _Utils_Tuple2("gtreqless", "\u22DB"),
        _Utils_Tuple2("gtreqqless", "\u2A8C"),
        _Utils_Tuple2("gtrless", "\u2277"),
        _Utils_Tuple2("gtrsim", "\u2273"),
        _Utils_Tuple2("gvertneqq", "\u2269\uFE00"),
        _Utils_Tuple2("gvnE", "\u2269\uFE00"),
        _Utils_Tuple2("Hacek", "\u02C7"),
        _Utils_Tuple2("hairsp", "\u200A"),
        _Utils_Tuple2("half", "\xBD"),
        _Utils_Tuple2("hamilt", "\u210B"),
        _Utils_Tuple2("HARDcy", "\u042A"),
        _Utils_Tuple2("hardcy", "\u044A"),
        _Utils_Tuple2("harrcir", "\u2948"),
        _Utils_Tuple2("harr", "\u2194"),
        _Utils_Tuple2("hArr", "\u21D4"),
        _Utils_Tuple2("harrw", "\u21AD"),
        _Utils_Tuple2("Hat", "^"),
        _Utils_Tuple2("hbar", "\u210F"),
        _Utils_Tuple2("Hcirc", "\u0124"),
        _Utils_Tuple2("hcirc", "\u0125"),
        _Utils_Tuple2("hearts", "\u2665"),
        _Utils_Tuple2("heartsuit", "\u2665"),
        _Utils_Tuple2("hellip", "\u2026"),
        _Utils_Tuple2("hercon", "\u22B9"),
        _Utils_Tuple2("hfr", "\u{1D525}"),
        _Utils_Tuple2("Hfr", "\u210C"),
        _Utils_Tuple2("HilbertSpace", "\u210B"),
        _Utils_Tuple2("hksearow", "\u2925"),
        _Utils_Tuple2("hkswarow", "\u2926"),
        _Utils_Tuple2("hoarr", "\u21FF"),
        _Utils_Tuple2("homtht", "\u223B"),
        _Utils_Tuple2("hookleftarrow", "\u21A9"),
        _Utils_Tuple2("hookrightarrow", "\u21AA"),
        _Utils_Tuple2("hopf", "\u{1D559}"),
        _Utils_Tuple2("Hopf", "\u210D"),
        _Utils_Tuple2("horbar", "\u2015"),
        _Utils_Tuple2("HorizontalLine", "\u2500"),
        _Utils_Tuple2("hscr", "\u{1D4BD}"),
        _Utils_Tuple2("Hscr", "\u210B"),
        _Utils_Tuple2("hslash", "\u210F"),
        _Utils_Tuple2("Hstrok", "\u0126"),
        _Utils_Tuple2("hstrok", "\u0127"),
        _Utils_Tuple2("HumpDownHump", "\u224E"),
        _Utils_Tuple2("HumpEqual", "\u224F"),
        _Utils_Tuple2("hybull", "\u2043"),
        _Utils_Tuple2("hyphen", "\u2010"),
        _Utils_Tuple2("Iacute", "\xCD"),
        _Utils_Tuple2("iacute", "\xED"),
        _Utils_Tuple2("ic", "\u2063"),
        _Utils_Tuple2("Icirc", "\xCE"),
        _Utils_Tuple2("icirc", "\xEE"),
        _Utils_Tuple2("Icy", "\u0418"),
        _Utils_Tuple2("icy", "\u0438"),
        _Utils_Tuple2("Idot", "\u0130"),
        _Utils_Tuple2("IEcy", "\u0415"),
        _Utils_Tuple2("iecy", "\u0435"),
        _Utils_Tuple2("iexcl", "\xA1"),
        _Utils_Tuple2("iff", "\u21D4"),
        _Utils_Tuple2("ifr", "\u{1D526}"),
        _Utils_Tuple2("Ifr", "\u2111"),
        _Utils_Tuple2("Igrave", "\xCC"),
        _Utils_Tuple2("igrave", "\xEC"),
        _Utils_Tuple2("ii", "\u2148"),
        _Utils_Tuple2("iiiint", "\u2A0C"),
        _Utils_Tuple2("iiint", "\u222D"),
        _Utils_Tuple2("iinfin", "\u29DC"),
        _Utils_Tuple2("iiota", "\u2129"),
        _Utils_Tuple2("IJlig", "\u0132"),
        _Utils_Tuple2("ijlig", "\u0133"),
        _Utils_Tuple2("Imacr", "\u012A"),
        _Utils_Tuple2("imacr", "\u012B"),
        _Utils_Tuple2("image", "\u2111"),
        _Utils_Tuple2("ImaginaryI", "\u2148"),
        _Utils_Tuple2("imagline", "\u2110"),
        _Utils_Tuple2("imagpart", "\u2111"),
        _Utils_Tuple2("imath", "\u0131"),
        _Utils_Tuple2("Im", "\u2111"),
        _Utils_Tuple2("imof", "\u22B7"),
        _Utils_Tuple2("imped", "\u01B5"),
        _Utils_Tuple2("Implies", "\u21D2"),
        _Utils_Tuple2("incare", "\u2105"),
        _Utils_Tuple2("in", "\u2208"),
        _Utils_Tuple2("infin", "\u221E"),
        _Utils_Tuple2("infintie", "\u29DD"),
        _Utils_Tuple2("inodot", "\u0131"),
        _Utils_Tuple2("intcal", "\u22BA"),
        _Utils_Tuple2("int", "\u222B"),
        _Utils_Tuple2("Int", "\u222C"),
        _Utils_Tuple2("integers", "\u2124"),
        _Utils_Tuple2("Integral", "\u222B"),
        _Utils_Tuple2("intercal", "\u22BA"),
        _Utils_Tuple2("Intersection", "\u22C2"),
        _Utils_Tuple2("intlarhk", "\u2A17"),
        _Utils_Tuple2("intprod", "\u2A3C"),
        _Utils_Tuple2("InvisibleComma", "\u2063"),
        _Utils_Tuple2("InvisibleTimes", "\u2062"),
        _Utils_Tuple2("IOcy", "\u0401"),
        _Utils_Tuple2("iocy", "\u0451"),
        _Utils_Tuple2("Iogon", "\u012E"),
        _Utils_Tuple2("iogon", "\u012F"),
        _Utils_Tuple2("Iopf", "\u{1D540}"),
        _Utils_Tuple2("iopf", "\u{1D55A}"),
        _Utils_Tuple2("Iota", "\u0399"),
        _Utils_Tuple2("iota", "\u03B9"),
        _Utils_Tuple2("iprod", "\u2A3C"),
        _Utils_Tuple2("iquest", "\xBF"),
        _Utils_Tuple2("iscr", "\u{1D4BE}"),
        _Utils_Tuple2("Iscr", "\u2110"),
        _Utils_Tuple2("isin", "\u2208"),
        _Utils_Tuple2("isindot", "\u22F5"),
        _Utils_Tuple2("isinE", "\u22F9"),
        _Utils_Tuple2("isins", "\u22F4"),
        _Utils_Tuple2("isinsv", "\u22F3"),
        _Utils_Tuple2("isinv", "\u2208"),
        _Utils_Tuple2("it", "\u2062"),
        _Utils_Tuple2("Itilde", "\u0128"),
        _Utils_Tuple2("itilde", "\u0129"),
        _Utils_Tuple2("Iukcy", "\u0406"),
        _Utils_Tuple2("iukcy", "\u0456"),
        _Utils_Tuple2("Iuml", "\xCF"),
        _Utils_Tuple2("iuml", "\xEF"),
        _Utils_Tuple2("Jcirc", "\u0134"),
        _Utils_Tuple2("jcirc", "\u0135"),
        _Utils_Tuple2("Jcy", "\u0419"),
        _Utils_Tuple2("jcy", "\u0439"),
        _Utils_Tuple2("Jfr", "\u{1D50D}"),
        _Utils_Tuple2("jfr", "\u{1D527}"),
        _Utils_Tuple2("jmath", "\u0237"),
        _Utils_Tuple2("Jopf", "\u{1D541}"),
        _Utils_Tuple2("jopf", "\u{1D55B}"),
        _Utils_Tuple2("Jscr", "\u{1D4A5}"),
        _Utils_Tuple2("jscr", "\u{1D4BF}"),
        _Utils_Tuple2("Jsercy", "\u0408"),
        _Utils_Tuple2("jsercy", "\u0458"),
        _Utils_Tuple2("Jukcy", "\u0404"),
        _Utils_Tuple2("jukcy", "\u0454"),
        _Utils_Tuple2("Kappa", "\u039A"),
        _Utils_Tuple2("kappa", "\u03BA"),
        _Utils_Tuple2("kappav", "\u03F0"),
        _Utils_Tuple2("Kcedil", "\u0136"),
        _Utils_Tuple2("kcedil", "\u0137"),
        _Utils_Tuple2("Kcy", "\u041A"),
        _Utils_Tuple2("kcy", "\u043A"),
        _Utils_Tuple2("Kfr", "\u{1D50E}"),
        _Utils_Tuple2("kfr", "\u{1D528}"),
        _Utils_Tuple2("kgreen", "\u0138"),
        _Utils_Tuple2("KHcy", "\u0425"),
        _Utils_Tuple2("khcy", "\u0445"),
        _Utils_Tuple2("KJcy", "\u040C"),
        _Utils_Tuple2("kjcy", "\u045C"),
        _Utils_Tuple2("Kopf", "\u{1D542}"),
        _Utils_Tuple2("kopf", "\u{1D55C}"),
        _Utils_Tuple2("Kscr", "\u{1D4A6}"),
        _Utils_Tuple2("kscr", "\u{1D4C0}"),
        _Utils_Tuple2("lAarr", "\u21DA"),
        _Utils_Tuple2("Lacute", "\u0139"),
        _Utils_Tuple2("lacute", "\u013A"),
        _Utils_Tuple2("laemptyv", "\u29B4"),
        _Utils_Tuple2("lagran", "\u2112"),
        _Utils_Tuple2("Lambda", "\u039B"),
        _Utils_Tuple2("lambda", "\u03BB"),
        _Utils_Tuple2("lang", "\u27E8"),
        _Utils_Tuple2("Lang", "\u27EA"),
        _Utils_Tuple2("langd", "\u2991"),
        _Utils_Tuple2("langle", "\u27E8"),
        _Utils_Tuple2("lap", "\u2A85"),
        _Utils_Tuple2("Laplacetrf", "\u2112"),
        _Utils_Tuple2("laquo", "\xAB"),
        _Utils_Tuple2("larrb", "\u21E4"),
        _Utils_Tuple2("larrbfs", "\u291F"),
        _Utils_Tuple2("larr", "\u2190"),
        _Utils_Tuple2("Larr", "\u219E"),
        _Utils_Tuple2("lArr", "\u21D0"),
        _Utils_Tuple2("larrfs", "\u291D"),
        _Utils_Tuple2("larrhk", "\u21A9"),
        _Utils_Tuple2("larrlp", "\u21AB"),
        _Utils_Tuple2("larrpl", "\u2939"),
        _Utils_Tuple2("larrsim", "\u2973"),
        _Utils_Tuple2("larrtl", "\u21A2"),
        _Utils_Tuple2("latail", "\u2919"),
        _Utils_Tuple2("lAtail", "\u291B"),
        _Utils_Tuple2("lat", "\u2AAB"),
        _Utils_Tuple2("late", "\u2AAD"),
        _Utils_Tuple2("lates", "\u2AAD\uFE00"),
        _Utils_Tuple2("lbarr", "\u290C"),
        _Utils_Tuple2("lBarr", "\u290E"),
        _Utils_Tuple2("lbbrk", "\u2772"),
        _Utils_Tuple2("lbrace", "{"),
        _Utils_Tuple2("lbrack", "["),
        _Utils_Tuple2("lbrke", "\u298B"),
        _Utils_Tuple2("lbrksld", "\u298F"),
        _Utils_Tuple2("lbrkslu", "\u298D"),
        _Utils_Tuple2("Lcaron", "\u013D"),
        _Utils_Tuple2("lcaron", "\u013E"),
        _Utils_Tuple2("Lcedil", "\u013B"),
        _Utils_Tuple2("lcedil", "\u013C"),
        _Utils_Tuple2("lceil", "\u2308"),
        _Utils_Tuple2("lcub", "{"),
        _Utils_Tuple2("Lcy", "\u041B"),
        _Utils_Tuple2("lcy", "\u043B"),
        _Utils_Tuple2("ldca", "\u2936"),
        _Utils_Tuple2("ldquo", "\u201C"),
        _Utils_Tuple2("ldquor", "\u201E"),
        _Utils_Tuple2("ldrdhar", "\u2967"),
        _Utils_Tuple2("ldrushar", "\u294B"),
        _Utils_Tuple2("ldsh", "\u21B2"),
        _Utils_Tuple2("le", "\u2264"),
        _Utils_Tuple2("lE", "\u2266"),
        _Utils_Tuple2("LeftAngleBracket", "\u27E8"),
        _Utils_Tuple2("LeftArrowBar", "\u21E4"),
        _Utils_Tuple2("leftarrow", "\u2190"),
        _Utils_Tuple2("LeftArrow", "\u2190"),
        _Utils_Tuple2("Leftarrow", "\u21D0"),
        _Utils_Tuple2("LeftArrowRightArrow", "\u21C6"),
        _Utils_Tuple2("leftarrowtail", "\u21A2"),
        _Utils_Tuple2("LeftCeiling", "\u2308"),
        _Utils_Tuple2("LeftDoubleBracket", "\u27E6"),
        _Utils_Tuple2("LeftDownTeeVector", "\u2961"),
        _Utils_Tuple2("LeftDownVectorBar", "\u2959"),
        _Utils_Tuple2("LeftDownVector", "\u21C3"),
        _Utils_Tuple2("LeftFloor", "\u230A"),
        _Utils_Tuple2("leftharpoondown", "\u21BD"),
        _Utils_Tuple2("leftharpoonup", "\u21BC"),
        _Utils_Tuple2("leftleftarrows", "\u21C7"),
        _Utils_Tuple2("leftrightarrow", "\u2194"),
        _Utils_Tuple2("LeftRightArrow", "\u2194"),
        _Utils_Tuple2("Leftrightarrow", "\u21D4"),
        _Utils_Tuple2("leftrightarrows", "\u21C6"),
        _Utils_Tuple2("leftrightharpoons", "\u21CB"),
        _Utils_Tuple2("leftrightsquigarrow", "\u21AD"),
        _Utils_Tuple2("LeftRightVector", "\u294E"),
        _Utils_Tuple2("LeftTeeArrow", "\u21A4"),
        _Utils_Tuple2("LeftTee", "\u22A3"),
        _Utils_Tuple2("LeftTeeVector", "\u295A"),
        _Utils_Tuple2("leftthreetimes", "\u22CB"),
        _Utils_Tuple2("LeftTriangleBar", "\u29CF"),
        _Utils_Tuple2("LeftTriangle", "\u22B2"),
        _Utils_Tuple2("LeftTriangleEqual", "\u22B4"),
        _Utils_Tuple2("LeftUpDownVector", "\u2951"),
        _Utils_Tuple2("LeftUpTeeVector", "\u2960"),
        _Utils_Tuple2("LeftUpVectorBar", "\u2958"),
        _Utils_Tuple2("LeftUpVector", "\u21BF"),
        _Utils_Tuple2("LeftVectorBar", "\u2952"),
        _Utils_Tuple2("LeftVector", "\u21BC"),
        _Utils_Tuple2("lEg", "\u2A8B"),
        _Utils_Tuple2("leg", "\u22DA"),
        _Utils_Tuple2("leq", "\u2264"),
        _Utils_Tuple2("leqq", "\u2266"),
        _Utils_Tuple2("leqslant", "\u2A7D"),
        _Utils_Tuple2("lescc", "\u2AA8"),
        _Utils_Tuple2("les", "\u2A7D"),
        _Utils_Tuple2("lesdot", "\u2A7F"),
        _Utils_Tuple2("lesdoto", "\u2A81"),
        _Utils_Tuple2("lesdotor", "\u2A83"),
        _Utils_Tuple2("lesg", "\u22DA\uFE00"),
        _Utils_Tuple2("lesges", "\u2A93"),
        _Utils_Tuple2("lessapprox", "\u2A85"),
        _Utils_Tuple2("lessdot", "\u22D6"),
        _Utils_Tuple2("lesseqgtr", "\u22DA"),
        _Utils_Tuple2("lesseqqgtr", "\u2A8B"),
        _Utils_Tuple2("LessEqualGreater", "\u22DA"),
        _Utils_Tuple2("LessFullEqual", "\u2266"),
        _Utils_Tuple2("LessGreater", "\u2276"),
        _Utils_Tuple2("lessgtr", "\u2276"),
        _Utils_Tuple2("LessLess", "\u2AA1"),
        _Utils_Tuple2("lesssim", "\u2272"),
        _Utils_Tuple2("LessSlantEqual", "\u2A7D"),
        _Utils_Tuple2("LessTilde", "\u2272"),
        _Utils_Tuple2("lfisht", "\u297C"),
        _Utils_Tuple2("lfloor", "\u230A"),
        _Utils_Tuple2("Lfr", "\u{1D50F}"),
        _Utils_Tuple2("lfr", "\u{1D529}"),
        _Utils_Tuple2("lg", "\u2276"),
        _Utils_Tuple2("lgE", "\u2A91"),
        _Utils_Tuple2("lHar", "\u2962"),
        _Utils_Tuple2("lhard", "\u21BD"),
        _Utils_Tuple2("lharu", "\u21BC"),
        _Utils_Tuple2("lharul", "\u296A"),
        _Utils_Tuple2("lhblk", "\u2584"),
        _Utils_Tuple2("LJcy", "\u0409"),
        _Utils_Tuple2("ljcy", "\u0459"),
        _Utils_Tuple2("llarr", "\u21C7"),
        _Utils_Tuple2("ll", "\u226A"),
        _Utils_Tuple2("Ll", "\u22D8"),
        _Utils_Tuple2("llcorner", "\u231E"),
        _Utils_Tuple2("Lleftarrow", "\u21DA"),
        _Utils_Tuple2("llhard", "\u296B"),
        _Utils_Tuple2("lltri", "\u25FA"),
        _Utils_Tuple2("Lmidot", "\u013F"),
        _Utils_Tuple2("lmidot", "\u0140"),
        _Utils_Tuple2("lmoustache", "\u23B0"),
        _Utils_Tuple2("lmoust", "\u23B0"),
        _Utils_Tuple2("lnap", "\u2A89"),
        _Utils_Tuple2("lnapprox", "\u2A89"),
        _Utils_Tuple2("lne", "\u2A87"),
        _Utils_Tuple2("lnE", "\u2268"),
        _Utils_Tuple2("lneq", "\u2A87"),
        _Utils_Tuple2("lneqq", "\u2268"),
        _Utils_Tuple2("lnsim", "\u22E6"),
        _Utils_Tuple2("loang", "\u27EC"),
        _Utils_Tuple2("loarr", "\u21FD"),
        _Utils_Tuple2("lobrk", "\u27E6"),
        _Utils_Tuple2("longleftarrow", "\u27F5"),
        _Utils_Tuple2("LongLeftArrow", "\u27F5"),
        _Utils_Tuple2("Longleftarrow", "\u27F8"),
        _Utils_Tuple2("longleftrightarrow", "\u27F7"),
        _Utils_Tuple2("LongLeftRightArrow", "\u27F7"),
        _Utils_Tuple2("Longleftrightarrow", "\u27FA"),
        _Utils_Tuple2("longmapsto", "\u27FC"),
        _Utils_Tuple2("longrightarrow", "\u27F6"),
        _Utils_Tuple2("LongRightArrow", "\u27F6"),
        _Utils_Tuple2("Longrightarrow", "\u27F9"),
        _Utils_Tuple2("looparrowleft", "\u21AB"),
        _Utils_Tuple2("looparrowright", "\u21AC"),
        _Utils_Tuple2("lopar", "\u2985"),
        _Utils_Tuple2("Lopf", "\u{1D543}"),
        _Utils_Tuple2("lopf", "\u{1D55D}"),
        _Utils_Tuple2("loplus", "\u2A2D"),
        _Utils_Tuple2("lotimes", "\u2A34"),
        _Utils_Tuple2("lowast", "\u2217"),
        _Utils_Tuple2("lowbar", "_"),
        _Utils_Tuple2("LowerLeftArrow", "\u2199"),
        _Utils_Tuple2("LowerRightArrow", "\u2198"),
        _Utils_Tuple2("loz", "\u25CA"),
        _Utils_Tuple2("lozenge", "\u25CA"),
        _Utils_Tuple2("lozf", "\u29EB"),
        _Utils_Tuple2("lpar", "("),
        _Utils_Tuple2("lparlt", "\u2993"),
        _Utils_Tuple2("lrarr", "\u21C6"),
        _Utils_Tuple2("lrcorner", "\u231F"),
        _Utils_Tuple2("lrhar", "\u21CB"),
        _Utils_Tuple2("lrhard", "\u296D"),
        _Utils_Tuple2("lrm", "\u200E"),
        _Utils_Tuple2("lrtri", "\u22BF"),
        _Utils_Tuple2("lsaquo", "\u2039"),
        _Utils_Tuple2("lscr", "\u{1D4C1}"),
        _Utils_Tuple2("Lscr", "\u2112"),
        _Utils_Tuple2("lsh", "\u21B0"),
        _Utils_Tuple2("Lsh", "\u21B0"),
        _Utils_Tuple2("lsim", "\u2272"),
        _Utils_Tuple2("lsime", "\u2A8D"),
        _Utils_Tuple2("lsimg", "\u2A8F"),
        _Utils_Tuple2("lsqb", "["),
        _Utils_Tuple2("lsquo", "\u2018"),
        _Utils_Tuple2("lsquor", "\u201A"),
        _Utils_Tuple2("Lstrok", "\u0141"),
        _Utils_Tuple2("lstrok", "\u0142"),
        _Utils_Tuple2("ltcc", "\u2AA6"),
        _Utils_Tuple2("ltcir", "\u2A79"),
        _Utils_Tuple2("lt", "<"),
        _Utils_Tuple2("LT", "<"),
        _Utils_Tuple2("Lt", "\u226A"),
        _Utils_Tuple2("ltdot", "\u22D6"),
        _Utils_Tuple2("lthree", "\u22CB"),
        _Utils_Tuple2("ltimes", "\u22C9"),
        _Utils_Tuple2("ltlarr", "\u2976"),
        _Utils_Tuple2("ltquest", "\u2A7B"),
        _Utils_Tuple2("ltri", "\u25C3"),
        _Utils_Tuple2("ltrie", "\u22B4"),
        _Utils_Tuple2("ltrif", "\u25C2"),
        _Utils_Tuple2("ltrPar", "\u2996"),
        _Utils_Tuple2("lurdshar", "\u294A"),
        _Utils_Tuple2("luruhar", "\u2966"),
        _Utils_Tuple2("lvertneqq", "\u2268\uFE00"),
        _Utils_Tuple2("lvnE", "\u2268\uFE00"),
        _Utils_Tuple2("macr", "\xAF"),
        _Utils_Tuple2("male", "\u2642"),
        _Utils_Tuple2("malt", "\u2720"),
        _Utils_Tuple2("maltese", "\u2720"),
        _Utils_Tuple2("Map", "\u2905"),
        _Utils_Tuple2("map", "\u21A6"),
        _Utils_Tuple2("mapsto", "\u21A6"),
        _Utils_Tuple2("mapstodown", "\u21A7"),
        _Utils_Tuple2("mapstoleft", "\u21A4"),
        _Utils_Tuple2("mapstoup", "\u21A5"),
        _Utils_Tuple2("marker", "\u25AE"),
        _Utils_Tuple2("mcomma", "\u2A29"),
        _Utils_Tuple2("Mcy", "\u041C"),
        _Utils_Tuple2("mcy", "\u043C"),
        _Utils_Tuple2("mdash", "\u2014"),
        _Utils_Tuple2("mDDot", "\u223A"),
        _Utils_Tuple2("measuredangle", "\u2221"),
        _Utils_Tuple2("MediumSpace", "\u205F"),
        _Utils_Tuple2("Mellintrf", "\u2133"),
        _Utils_Tuple2("Mfr", "\u{1D510}"),
        _Utils_Tuple2("mfr", "\u{1D52A}"),
        _Utils_Tuple2("mho", "\u2127"),
        _Utils_Tuple2("micro", "\xB5"),
        _Utils_Tuple2("midast", "*"),
        _Utils_Tuple2("midcir", "\u2AF0"),
        _Utils_Tuple2("mid", "\u2223"),
        _Utils_Tuple2("middot", "\xB7"),
        _Utils_Tuple2("minusb", "\u229F"),
        _Utils_Tuple2("minus", "\u2212"),
        _Utils_Tuple2("minusd", "\u2238"),
        _Utils_Tuple2("minusdu", "\u2A2A"),
        _Utils_Tuple2("MinusPlus", "\u2213"),
        _Utils_Tuple2("mlcp", "\u2ADB"),
        _Utils_Tuple2("mldr", "\u2026"),
        _Utils_Tuple2("mnplus", "\u2213"),
        _Utils_Tuple2("models", "\u22A7"),
        _Utils_Tuple2("Mopf", "\u{1D544}"),
        _Utils_Tuple2("mopf", "\u{1D55E}"),
        _Utils_Tuple2("mp", "\u2213"),
        _Utils_Tuple2("mscr", "\u{1D4C2}"),
        _Utils_Tuple2("Mscr", "\u2133"),
        _Utils_Tuple2("mstpos", "\u223E"),
        _Utils_Tuple2("Mu", "\u039C"),
        _Utils_Tuple2("mu", "\u03BC"),
        _Utils_Tuple2("multimap", "\u22B8"),
        _Utils_Tuple2("mumap", "\u22B8"),
        _Utils_Tuple2("nabla", "\u2207"),
        _Utils_Tuple2("Nacute", "\u0143"),
        _Utils_Tuple2("nacute", "\u0144"),
        _Utils_Tuple2("nang", "\u2220\u20D2"),
        _Utils_Tuple2("nap", "\u2249"),
        _Utils_Tuple2("napE", "\u2A70\u0338"),
        _Utils_Tuple2("napid", "\u224B\u0338"),
        _Utils_Tuple2("napos", "\u0149"),
        _Utils_Tuple2("napprox", "\u2249"),
        _Utils_Tuple2("natural", "\u266E"),
        _Utils_Tuple2("naturals", "\u2115"),
        _Utils_Tuple2("natur", "\u266E"),
        _Utils_Tuple2("nbsp", "\xA0"),
        _Utils_Tuple2("nbump", "\u224E\u0338"),
        _Utils_Tuple2("nbumpe", "\u224F\u0338"),
        _Utils_Tuple2("ncap", "\u2A43"),
        _Utils_Tuple2("Ncaron", "\u0147"),
        _Utils_Tuple2("ncaron", "\u0148"),
        _Utils_Tuple2("Ncedil", "\u0145"),
        _Utils_Tuple2("ncedil", "\u0146"),
        _Utils_Tuple2("ncong", "\u2247"),
        _Utils_Tuple2("ncongdot", "\u2A6D\u0338"),
        _Utils_Tuple2("ncup", "\u2A42"),
        _Utils_Tuple2("Ncy", "\u041D"),
        _Utils_Tuple2("ncy", "\u043D"),
        _Utils_Tuple2("ndash", "\u2013"),
        _Utils_Tuple2("nearhk", "\u2924"),
        _Utils_Tuple2("nearr", "\u2197"),
        _Utils_Tuple2("neArr", "\u21D7"),
        _Utils_Tuple2("nearrow", "\u2197"),
        _Utils_Tuple2("ne", "\u2260"),
        _Utils_Tuple2("nedot", "\u2250\u0338"),
        _Utils_Tuple2("NegativeMediumSpace", "\u200B"),
        _Utils_Tuple2("NegativeThickSpace", "\u200B"),
        _Utils_Tuple2("NegativeThinSpace", "\u200B"),
        _Utils_Tuple2("NegativeVeryThinSpace", "\u200B"),
        _Utils_Tuple2("nequiv", "\u2262"),
        _Utils_Tuple2("nesear", "\u2928"),
        _Utils_Tuple2("nesim", "\u2242\u0338"),
        _Utils_Tuple2("NestedGreaterGreater", "\u226B"),
        _Utils_Tuple2("NestedLessLess", "\u226A"),
        _Utils_Tuple2("NewLine", "\n"),
        _Utils_Tuple2("nexist", "\u2204"),
        _Utils_Tuple2("nexists", "\u2204"),
        _Utils_Tuple2("Nfr", "\u{1D511}"),
        _Utils_Tuple2("nfr", "\u{1D52B}"),
        _Utils_Tuple2("ngE", "\u2267\u0338"),
        _Utils_Tuple2("nge", "\u2271"),
        _Utils_Tuple2("ngeq", "\u2271"),
        _Utils_Tuple2("ngeqq", "\u2267\u0338"),
        _Utils_Tuple2("ngeqslant", "\u2A7E\u0338"),
        _Utils_Tuple2("nges", "\u2A7E\u0338"),
        _Utils_Tuple2("nGg", "\u22D9\u0338"),
        _Utils_Tuple2("ngsim", "\u2275"),
        _Utils_Tuple2("nGt", "\u226B\u20D2"),
        _Utils_Tuple2("ngt", "\u226F"),
        _Utils_Tuple2("ngtr", "\u226F"),
        _Utils_Tuple2("nGtv", "\u226B\u0338"),
        _Utils_Tuple2("nharr", "\u21AE"),
        _Utils_Tuple2("nhArr", "\u21CE"),
        _Utils_Tuple2("nhpar", "\u2AF2"),
        _Utils_Tuple2("ni", "\u220B"),
        _Utils_Tuple2("nis", "\u22FC"),
        _Utils_Tuple2("nisd", "\u22FA"),
        _Utils_Tuple2("niv", "\u220B"),
        _Utils_Tuple2("NJcy", "\u040A"),
        _Utils_Tuple2("njcy", "\u045A"),
        _Utils_Tuple2("nlarr", "\u219A"),
        _Utils_Tuple2("nlArr", "\u21CD"),
        _Utils_Tuple2("nldr", "\u2025"),
        _Utils_Tuple2("nlE", "\u2266\u0338"),
        _Utils_Tuple2("nle", "\u2270"),
        _Utils_Tuple2("nleftarrow", "\u219A"),
        _Utils_Tuple2("nLeftarrow", "\u21CD"),
        _Utils_Tuple2("nleftrightarrow", "\u21AE"),
        _Utils_Tuple2("nLeftrightarrow", "\u21CE"),
        _Utils_Tuple2("nleq", "\u2270"),
        _Utils_Tuple2("nleqq", "\u2266\u0338"),
        _Utils_Tuple2("nleqslant", "\u2A7D\u0338"),
        _Utils_Tuple2("nles", "\u2A7D\u0338"),
        _Utils_Tuple2("nless", "\u226E"),
        _Utils_Tuple2("nLl", "\u22D8\u0338"),
        _Utils_Tuple2("nlsim", "\u2274"),
        _Utils_Tuple2("nLt", "\u226A\u20D2"),
        _Utils_Tuple2("nlt", "\u226E"),
        _Utils_Tuple2("nltri", "\u22EA"),
        _Utils_Tuple2("nltrie", "\u22EC"),
        _Utils_Tuple2("nLtv", "\u226A\u0338"),
        _Utils_Tuple2("nmid", "\u2224"),
        _Utils_Tuple2("NoBreak", "\u2060"),
        _Utils_Tuple2("NonBreakingSpace", "\xA0"),
        _Utils_Tuple2("nopf", "\u{1D55F}"),
        _Utils_Tuple2("Nopf", "\u2115"),
        _Utils_Tuple2("Not", "\u2AEC"),
        _Utils_Tuple2("not", "\xAC"),
        _Utils_Tuple2("NotCongruent", "\u2262"),
        _Utils_Tuple2("NotCupCap", "\u226D"),
        _Utils_Tuple2("NotDoubleVerticalBar", "\u2226"),
        _Utils_Tuple2("NotElement", "\u2209"),
        _Utils_Tuple2("NotEqual", "\u2260"),
        _Utils_Tuple2("NotEqualTilde", "\u2242\u0338"),
        _Utils_Tuple2("NotExists", "\u2204"),
        _Utils_Tuple2("NotGreater", "\u226F"),
        _Utils_Tuple2("NotGreaterEqual", "\u2271"),
        _Utils_Tuple2("NotGreaterFullEqual", "\u2267\u0338"),
        _Utils_Tuple2("NotGreaterGreater", "\u226B\u0338"),
        _Utils_Tuple2("NotGreaterLess", "\u2279"),
        _Utils_Tuple2("NotGreaterSlantEqual", "\u2A7E\u0338"),
        _Utils_Tuple2("NotGreaterTilde", "\u2275"),
        _Utils_Tuple2("NotHumpDownHump", "\u224E\u0338"),
        _Utils_Tuple2("NotHumpEqual", "\u224F\u0338"),
        _Utils_Tuple2("notin", "\u2209"),
        _Utils_Tuple2("notindot", "\u22F5\u0338"),
        _Utils_Tuple2("notinE", "\u22F9\u0338"),
        _Utils_Tuple2("notinva", "\u2209"),
        _Utils_Tuple2("notinvb", "\u22F7"),
        _Utils_Tuple2("notinvc", "\u22F6"),
        _Utils_Tuple2("NotLeftTriangleBar", "\u29CF\u0338"),
        _Utils_Tuple2("NotLeftTriangle", "\u22EA"),
        _Utils_Tuple2("NotLeftTriangleEqual", "\u22EC"),
        _Utils_Tuple2("NotLess", "\u226E"),
        _Utils_Tuple2("NotLessEqual", "\u2270"),
        _Utils_Tuple2("NotLessGreater", "\u2278"),
        _Utils_Tuple2("NotLessLess", "\u226A\u0338"),
        _Utils_Tuple2("NotLessSlantEqual", "\u2A7D\u0338"),
        _Utils_Tuple2("NotLessTilde", "\u2274"),
        _Utils_Tuple2("NotNestedGreaterGreater", "\u2AA2\u0338"),
        _Utils_Tuple2("NotNestedLessLess", "\u2AA1\u0338"),
        _Utils_Tuple2("notni", "\u220C"),
        _Utils_Tuple2("notniva", "\u220C"),
        _Utils_Tuple2("notnivb", "\u22FE"),
        _Utils_Tuple2("notnivc", "\u22FD"),
        _Utils_Tuple2("NotPrecedes", "\u2280"),
        _Utils_Tuple2("NotPrecedesEqual", "\u2AAF\u0338"),
        _Utils_Tuple2("NotPrecedesSlantEqual", "\u22E0"),
        _Utils_Tuple2("NotReverseElement", "\u220C"),
        _Utils_Tuple2("NotRightTriangleBar", "\u29D0\u0338"),
        _Utils_Tuple2("NotRightTriangle", "\u22EB"),
        _Utils_Tuple2("NotRightTriangleEqual", "\u22ED"),
        _Utils_Tuple2("NotSquareSubset", "\u228F\u0338"),
        _Utils_Tuple2("NotSquareSubsetEqual", "\u22E2"),
        _Utils_Tuple2("NotSquareSuperset", "\u2290\u0338"),
        _Utils_Tuple2("NotSquareSupersetEqual", "\u22E3"),
        _Utils_Tuple2("NotSubset", "\u2282\u20D2"),
        _Utils_Tuple2("NotSubsetEqual", "\u2288"),
        _Utils_Tuple2("NotSucceeds", "\u2281"),
        _Utils_Tuple2("NotSucceedsEqual", "\u2AB0\u0338"),
        _Utils_Tuple2("NotSucceedsSlantEqual", "\u22E1"),
        _Utils_Tuple2("NotSucceedsTilde", "\u227F\u0338"),
        _Utils_Tuple2("NotSuperset", "\u2283\u20D2"),
        _Utils_Tuple2("NotSupersetEqual", "\u2289"),
        _Utils_Tuple2("NotTilde", "\u2241"),
        _Utils_Tuple2("NotTildeEqual", "\u2244"),
        _Utils_Tuple2("NotTildeFullEqual", "\u2247"),
        _Utils_Tuple2("NotTildeTilde", "\u2249"),
        _Utils_Tuple2("NotVerticalBar", "\u2224"),
        _Utils_Tuple2("nparallel", "\u2226"),
        _Utils_Tuple2("npar", "\u2226"),
        _Utils_Tuple2("nparsl", "\u2AFD\u20E5"),
        _Utils_Tuple2("npart", "\u2202\u0338"),
        _Utils_Tuple2("npolint", "\u2A14"),
        _Utils_Tuple2("npr", "\u2280"),
        _Utils_Tuple2("nprcue", "\u22E0"),
        _Utils_Tuple2("nprec", "\u2280"),
        _Utils_Tuple2("npreceq", "\u2AAF\u0338"),
        _Utils_Tuple2("npre", "\u2AAF\u0338"),
        _Utils_Tuple2("nrarrc", "\u2933\u0338"),
        _Utils_Tuple2("nrarr", "\u219B"),
        _Utils_Tuple2("nrArr", "\u21CF"),
        _Utils_Tuple2("nrarrw", "\u219D\u0338"),
        _Utils_Tuple2("nrightarrow", "\u219B"),
        _Utils_Tuple2("nRightarrow", "\u21CF"),
        _Utils_Tuple2("nrtri", "\u22EB"),
        _Utils_Tuple2("nrtrie", "\u22ED"),
        _Utils_Tuple2("nsc", "\u2281"),
        _Utils_Tuple2("nsccue", "\u22E1"),
        _Utils_Tuple2("nsce", "\u2AB0\u0338"),
        _Utils_Tuple2("Nscr", "\u{1D4A9}"),
        _Utils_Tuple2("nscr", "\u{1D4C3}"),
        _Utils_Tuple2("nshortmid", "\u2224"),
        _Utils_Tuple2("nshortparallel", "\u2226"),
        _Utils_Tuple2("nsim", "\u2241"),
        _Utils_Tuple2("nsime", "\u2244"),
        _Utils_Tuple2("nsimeq", "\u2244"),
        _Utils_Tuple2("nsmid", "\u2224"),
        _Utils_Tuple2("nspar", "\u2226"),
        _Utils_Tuple2("nsqsube", "\u22E2"),
        _Utils_Tuple2("nsqsupe", "\u22E3"),
        _Utils_Tuple2("nsub", "\u2284"),
        _Utils_Tuple2("nsubE", "\u2AC5\u0338"),
        _Utils_Tuple2("nsube", "\u2288"),
        _Utils_Tuple2("nsubset", "\u2282\u20D2"),
        _Utils_Tuple2("nsubseteq", "\u2288"),
        _Utils_Tuple2("nsubseteqq", "\u2AC5\u0338"),
        _Utils_Tuple2("nsucc", "\u2281"),
        _Utils_Tuple2("nsucceq", "\u2AB0\u0338"),
        _Utils_Tuple2("nsup", "\u2285"),
        _Utils_Tuple2("nsupE", "\u2AC6\u0338"),
        _Utils_Tuple2("nsupe", "\u2289"),
        _Utils_Tuple2("nsupset", "\u2283\u20D2"),
        _Utils_Tuple2("nsupseteq", "\u2289"),
        _Utils_Tuple2("nsupseteqq", "\u2AC6\u0338"),
        _Utils_Tuple2("ntgl", "\u2279"),
        _Utils_Tuple2("Ntilde", "\xD1"),
        _Utils_Tuple2("ntilde", "\xF1"),
        _Utils_Tuple2("ntlg", "\u2278"),
        _Utils_Tuple2("ntriangleleft", "\u22EA"),
        _Utils_Tuple2("ntrianglelefteq", "\u22EC"),
        _Utils_Tuple2("ntriangleright", "\u22EB"),
        _Utils_Tuple2("ntrianglerighteq", "\u22ED"),
        _Utils_Tuple2("Nu", "\u039D"),
        _Utils_Tuple2("nu", "\u03BD"),
        _Utils_Tuple2("num", "#"),
        _Utils_Tuple2("numero", "\u2116"),
        _Utils_Tuple2("numsp", "\u2007"),
        _Utils_Tuple2("nvap", "\u224D\u20D2"),
        _Utils_Tuple2("nvdash", "\u22AC"),
        _Utils_Tuple2("nvDash", "\u22AD"),
        _Utils_Tuple2("nVdash", "\u22AE"),
        _Utils_Tuple2("nVDash", "\u22AF"),
        _Utils_Tuple2("nvge", "\u2265\u20D2"),
        _Utils_Tuple2("nvgt", ">\u20D2"),
        _Utils_Tuple2("nvHarr", "\u2904"),
        _Utils_Tuple2("nvinfin", "\u29DE"),
        _Utils_Tuple2("nvlArr", "\u2902"),
        _Utils_Tuple2("nvle", "\u2264\u20D2"),
        _Utils_Tuple2("nvlt", "<\u20D2"),
        _Utils_Tuple2("nvltrie", "\u22B4\u20D2"),
        _Utils_Tuple2("nvrArr", "\u2903"),
        _Utils_Tuple2("nvrtrie", "\u22B5\u20D2"),
        _Utils_Tuple2("nvsim", "\u223C\u20D2"),
        _Utils_Tuple2("nwarhk", "\u2923"),
        _Utils_Tuple2("nwarr", "\u2196"),
        _Utils_Tuple2("nwArr", "\u21D6"),
        _Utils_Tuple2("nwarrow", "\u2196"),
        _Utils_Tuple2("nwnear", "\u2927"),
        _Utils_Tuple2("Oacute", "\xD3"),
        _Utils_Tuple2("oacute", "\xF3"),
        _Utils_Tuple2("oast", "\u229B"),
        _Utils_Tuple2("Ocirc", "\xD4"),
        _Utils_Tuple2("ocirc", "\xF4"),
        _Utils_Tuple2("ocir", "\u229A"),
        _Utils_Tuple2("Ocy", "\u041E"),
        _Utils_Tuple2("ocy", "\u043E"),
        _Utils_Tuple2("odash", "\u229D"),
        _Utils_Tuple2("Odblac", "\u0150"),
        _Utils_Tuple2("odblac", "\u0151"),
        _Utils_Tuple2("odiv", "\u2A38"),
        _Utils_Tuple2("odot", "\u2299"),
        _Utils_Tuple2("odsold", "\u29BC"),
        _Utils_Tuple2("OElig", "\u0152"),
        _Utils_Tuple2("oelig", "\u0153"),
        _Utils_Tuple2("ofcir", "\u29BF"),
        _Utils_Tuple2("Ofr", "\u{1D512}"),
        _Utils_Tuple2("ofr", "\u{1D52C}"),
        _Utils_Tuple2("ogon", "\u02DB"),
        _Utils_Tuple2("Ograve", "\xD2"),
        _Utils_Tuple2("ograve", "\xF2"),
        _Utils_Tuple2("ogt", "\u29C1"),
        _Utils_Tuple2("ohbar", "\u29B5"),
        _Utils_Tuple2("ohm", "\u03A9"),
        _Utils_Tuple2("oint", "\u222E"),
        _Utils_Tuple2("olarr", "\u21BA"),
        _Utils_Tuple2("olcir", "\u29BE"),
        _Utils_Tuple2("olcross", "\u29BB"),
        _Utils_Tuple2("oline", "\u203E"),
        _Utils_Tuple2("olt", "\u29C0"),
        _Utils_Tuple2("Omacr", "\u014C"),
        _Utils_Tuple2("omacr", "\u014D"),
        _Utils_Tuple2("Omega", "\u03A9"),
        _Utils_Tuple2("omega", "\u03C9"),
        _Utils_Tuple2("Omicron", "\u039F"),
        _Utils_Tuple2("omicron", "\u03BF"),
        _Utils_Tuple2("omid", "\u29B6"),
        _Utils_Tuple2("ominus", "\u2296"),
        _Utils_Tuple2("Oopf", "\u{1D546}"),
        _Utils_Tuple2("oopf", "\u{1D560}"),
        _Utils_Tuple2("opar", "\u29B7"),
        _Utils_Tuple2("OpenCurlyDoubleQuote", "\u201C"),
        _Utils_Tuple2("OpenCurlyQuote", "\u2018"),
        _Utils_Tuple2("operp", "\u29B9"),
        _Utils_Tuple2("oplus", "\u2295"),
        _Utils_Tuple2("orarr", "\u21BB"),
        _Utils_Tuple2("Or", "\u2A54"),
        _Utils_Tuple2("or", "\u2228"),
        _Utils_Tuple2("ord", "\u2A5D"),
        _Utils_Tuple2("order", "\u2134"),
        _Utils_Tuple2("orderof", "\u2134"),
        _Utils_Tuple2("ordf", "\xAA"),
        _Utils_Tuple2("ordm", "\xBA"),
        _Utils_Tuple2("origof", "\u22B6"),
        _Utils_Tuple2("oror", "\u2A56"),
        _Utils_Tuple2("orslope", "\u2A57"),
        _Utils_Tuple2("orv", "\u2A5B"),
        _Utils_Tuple2("oS", "\u24C8"),
        _Utils_Tuple2("Oscr", "\u{1D4AA}"),
        _Utils_Tuple2("oscr", "\u2134"),
        _Utils_Tuple2("Oslash", "\xD8"),
        _Utils_Tuple2("oslash", "\xF8"),
        _Utils_Tuple2("osol", "\u2298"),
        _Utils_Tuple2("Otilde", "\xD5"),
        _Utils_Tuple2("otilde", "\xF5"),
        _Utils_Tuple2("otimesas", "\u2A36"),
        _Utils_Tuple2("Otimes", "\u2A37"),
        _Utils_Tuple2("otimes", "\u2297"),
        _Utils_Tuple2("Ouml", "\xD6"),
        _Utils_Tuple2("ouml", "\xF6"),
        _Utils_Tuple2("ovbar", "\u233D"),
        _Utils_Tuple2("OverBar", "\u203E"),
        _Utils_Tuple2("OverBrace", "\u23DE"),
        _Utils_Tuple2("OverBracket", "\u23B4"),
        _Utils_Tuple2("OverParenthesis", "\u23DC"),
        _Utils_Tuple2("para", "\xB6"),
        _Utils_Tuple2("parallel", "\u2225"),
        _Utils_Tuple2("par", "\u2225"),
        _Utils_Tuple2("parsim", "\u2AF3"),
        _Utils_Tuple2("parsl", "\u2AFD"),
        _Utils_Tuple2("part", "\u2202"),
        _Utils_Tuple2("PartialD", "\u2202"),
        _Utils_Tuple2("Pcy", "\u041F"),
        _Utils_Tuple2("pcy", "\u043F"),
        _Utils_Tuple2("percnt", "%"),
        _Utils_Tuple2("period", "."),
        _Utils_Tuple2("permil", "\u2030"),
        _Utils_Tuple2("perp", "\u22A5"),
        _Utils_Tuple2("pertenk", "\u2031"),
        _Utils_Tuple2("Pfr", "\u{1D513}"),
        _Utils_Tuple2("pfr", "\u{1D52D}"),
        _Utils_Tuple2("Phi", "\u03A6"),
        _Utils_Tuple2("phi", "\u03C6"),
        _Utils_Tuple2("phiv", "\u03D5"),
        _Utils_Tuple2("phmmat", "\u2133"),
        _Utils_Tuple2("phone", "\u260E"),
        _Utils_Tuple2("Pi", "\u03A0"),
        _Utils_Tuple2("pi", "\u03C0"),
        _Utils_Tuple2("pitchfork", "\u22D4"),
        _Utils_Tuple2("piv", "\u03D6"),
        _Utils_Tuple2("planck", "\u210F"),
        _Utils_Tuple2("planckh", "\u210E"),
        _Utils_Tuple2("plankv", "\u210F"),
        _Utils_Tuple2("plusacir", "\u2A23"),
        _Utils_Tuple2("plusb", "\u229E"),
        _Utils_Tuple2("pluscir", "\u2A22"),
        _Utils_Tuple2("plus", "+"),
        _Utils_Tuple2("plusdo", "\u2214"),
        _Utils_Tuple2("plusdu", "\u2A25"),
        _Utils_Tuple2("pluse", "\u2A72"),
        _Utils_Tuple2("PlusMinus", "\xB1"),
        _Utils_Tuple2("plusmn", "\xB1"),
        _Utils_Tuple2("plussim", "\u2A26"),
        _Utils_Tuple2("plustwo", "\u2A27"),
        _Utils_Tuple2("pm", "\xB1"),
        _Utils_Tuple2("Poincareplane", "\u210C"),
        _Utils_Tuple2("pointint", "\u2A15"),
        _Utils_Tuple2("popf", "\u{1D561}"),
        _Utils_Tuple2("Popf", "\u2119"),
        _Utils_Tuple2("pound", "\xA3"),
        _Utils_Tuple2("prap", "\u2AB7"),
        _Utils_Tuple2("Pr", "\u2ABB"),
        _Utils_Tuple2("pr", "\u227A"),
        _Utils_Tuple2("prcue", "\u227C"),
        _Utils_Tuple2("precapprox", "\u2AB7"),
        _Utils_Tuple2("prec", "\u227A"),
        _Utils_Tuple2("preccurlyeq", "\u227C"),
        _Utils_Tuple2("Precedes", "\u227A"),
        _Utils_Tuple2("PrecedesEqual", "\u2AAF"),
        _Utils_Tuple2("PrecedesSlantEqual", "\u227C"),
        _Utils_Tuple2("PrecedesTilde", "\u227E"),
        _Utils_Tuple2("preceq", "\u2AAF"),
        _Utils_Tuple2("precnapprox", "\u2AB9"),
        _Utils_Tuple2("precneqq", "\u2AB5"),
        _Utils_Tuple2("precnsim", "\u22E8"),
        _Utils_Tuple2("pre", "\u2AAF"),
        _Utils_Tuple2("prE", "\u2AB3"),
        _Utils_Tuple2("precsim", "\u227E"),
        _Utils_Tuple2("prime", "\u2032"),
        _Utils_Tuple2("Prime", "\u2033"),
        _Utils_Tuple2("primes", "\u2119"),
        _Utils_Tuple2("prnap", "\u2AB9"),
        _Utils_Tuple2("prnE", "\u2AB5"),
        _Utils_Tuple2("prnsim", "\u22E8"),
        _Utils_Tuple2("prod", "\u220F"),
        _Utils_Tuple2("Product", "\u220F"),
        _Utils_Tuple2("profalar", "\u232E"),
        _Utils_Tuple2("profline", "\u2312"),
        _Utils_Tuple2("profsurf", "\u2313"),
        _Utils_Tuple2("prop", "\u221D"),
        _Utils_Tuple2("Proportional", "\u221D"),
        _Utils_Tuple2("Proportion", "\u2237"),
        _Utils_Tuple2("propto", "\u221D"),
        _Utils_Tuple2("prsim", "\u227E"),
        _Utils_Tuple2("prurel", "\u22B0"),
        _Utils_Tuple2("Pscr", "\u{1D4AB}"),
        _Utils_Tuple2("pscr", "\u{1D4C5}"),
        _Utils_Tuple2("Psi", "\u03A8"),
        _Utils_Tuple2("psi", "\u03C8"),
        _Utils_Tuple2("puncsp", "\u2008"),
        _Utils_Tuple2("Qfr", "\u{1D514}"),
        _Utils_Tuple2("qfr", "\u{1D52E}"),
        _Utils_Tuple2("qint", "\u2A0C"),
        _Utils_Tuple2("qopf", "\u{1D562}"),
        _Utils_Tuple2("Qopf", "\u211A"),
        _Utils_Tuple2("qprime", "\u2057"),
        _Utils_Tuple2("Qscr", "\u{1D4AC}"),
        _Utils_Tuple2("qscr", "\u{1D4C6}"),
        _Utils_Tuple2("quaternions", "\u210D"),
        _Utils_Tuple2("quatint", "\u2A16"),
        _Utils_Tuple2("quest", "?"),
        _Utils_Tuple2("questeq", "\u225F"),
        _Utils_Tuple2("quot", '"'),
        _Utils_Tuple2("QUOT", '"'),
        _Utils_Tuple2("rAarr", "\u21DB"),
        _Utils_Tuple2("race", "\u223D\u0331"),
        _Utils_Tuple2("Racute", "\u0154"),
        _Utils_Tuple2("racute", "\u0155"),
        _Utils_Tuple2("radic", "\u221A"),
        _Utils_Tuple2("raemptyv", "\u29B3"),
        _Utils_Tuple2("rang", "\u27E9"),
        _Utils_Tuple2("Rang", "\u27EB"),
        _Utils_Tuple2("rangd", "\u2992"),
        _Utils_Tuple2("range", "\u29A5"),
        _Utils_Tuple2("rangle", "\u27E9"),
        _Utils_Tuple2("raquo", "\xBB"),
        _Utils_Tuple2("rarrap", "\u2975"),
        _Utils_Tuple2("rarrb", "\u21E5"),
        _Utils_Tuple2("rarrbfs", "\u2920"),
        _Utils_Tuple2("rarrc", "\u2933"),
        _Utils_Tuple2("rarr", "\u2192"),
        _Utils_Tuple2("Rarr", "\u21A0"),
        _Utils_Tuple2("rArr", "\u21D2"),
        _Utils_Tuple2("rarrfs", "\u291E"),
        _Utils_Tuple2("rarrhk", "\u21AA"),
        _Utils_Tuple2("rarrlp", "\u21AC"),
        _Utils_Tuple2("rarrpl", "\u2945"),
        _Utils_Tuple2("rarrsim", "\u2974"),
        _Utils_Tuple2("Rarrtl", "\u2916"),
        _Utils_Tuple2("rarrtl", "\u21A3"),
        _Utils_Tuple2("rarrw", "\u219D"),
        _Utils_Tuple2("ratail", "\u291A"),
        _Utils_Tuple2("rAtail", "\u291C"),
        _Utils_Tuple2("ratio", "\u2236"),
        _Utils_Tuple2("rationals", "\u211A"),
        _Utils_Tuple2("rbarr", "\u290D"),
        _Utils_Tuple2("rBarr", "\u290F"),
        _Utils_Tuple2("RBarr", "\u2910"),
        _Utils_Tuple2("rbbrk", "\u2773"),
        _Utils_Tuple2("rbrace", "}"),
        _Utils_Tuple2("rbrack", "]"),
        _Utils_Tuple2("rbrke", "\u298C"),
        _Utils_Tuple2("rbrksld", "\u298E"),
        _Utils_Tuple2("rbrkslu", "\u2990"),
        _Utils_Tuple2("Rcaron", "\u0158"),
        _Utils_Tuple2("rcaron", "\u0159"),
        _Utils_Tuple2("Rcedil", "\u0156"),
        _Utils_Tuple2("rcedil", "\u0157"),
        _Utils_Tuple2("rceil", "\u2309"),
        _Utils_Tuple2("rcub", "}"),
        _Utils_Tuple2("Rcy", "\u0420"),
        _Utils_Tuple2("rcy", "\u0440"),
        _Utils_Tuple2("rdca", "\u2937"),
        _Utils_Tuple2("rdldhar", "\u2969"),
        _Utils_Tuple2("rdquo", "\u201D"),
        _Utils_Tuple2("rdquor", "\u201D"),
        _Utils_Tuple2("rdsh", "\u21B3"),
        _Utils_Tuple2("real", "\u211C"),
        _Utils_Tuple2("realine", "\u211B"),
        _Utils_Tuple2("realpart", "\u211C"),
        _Utils_Tuple2("reals", "\u211D"),
        _Utils_Tuple2("Re", "\u211C"),
        _Utils_Tuple2("rect", "\u25AD"),
        _Utils_Tuple2("reg", "\xAE"),
        _Utils_Tuple2("REG", "\xAE"),
        _Utils_Tuple2("ReverseElement", "\u220B"),
        _Utils_Tuple2("ReverseEquilibrium", "\u21CB"),
        _Utils_Tuple2("ReverseUpEquilibrium", "\u296F"),
        _Utils_Tuple2("rfisht", "\u297D"),
        _Utils_Tuple2("rfloor", "\u230B"),
        _Utils_Tuple2("rfr", "\u{1D52F}"),
        _Utils_Tuple2("Rfr", "\u211C"),
        _Utils_Tuple2("rHar", "\u2964"),
        _Utils_Tuple2("rhard", "\u21C1"),
        _Utils_Tuple2("rharu", "\u21C0"),
        _Utils_Tuple2("rharul", "\u296C"),
        _Utils_Tuple2("Rho", "\u03A1"),
        _Utils_Tuple2("rho", "\u03C1"),
        _Utils_Tuple2("rhov", "\u03F1"),
        _Utils_Tuple2("RightAngleBracket", "\u27E9"),
        _Utils_Tuple2("RightArrowBar", "\u21E5"),
        _Utils_Tuple2("rightarrow", "\u2192"),
        _Utils_Tuple2("RightArrow", "\u2192"),
        _Utils_Tuple2("Rightarrow", "\u21D2"),
        _Utils_Tuple2("RightArrowLeftArrow", "\u21C4"),
        _Utils_Tuple2("rightarrowtail", "\u21A3"),
        _Utils_Tuple2("RightCeiling", "\u2309"),
        _Utils_Tuple2("RightDoubleBracket", "\u27E7"),
        _Utils_Tuple2("RightDownTeeVector", "\u295D"),
        _Utils_Tuple2("RightDownVectorBar", "\u2955"),
        _Utils_Tuple2("RightDownVector", "\u21C2"),
        _Utils_Tuple2("RightFloor", "\u230B"),
        _Utils_Tuple2("rightharpoondown", "\u21C1"),
        _Utils_Tuple2("rightharpoonup", "\u21C0"),
        _Utils_Tuple2("rightleftarrows", "\u21C4"),
        _Utils_Tuple2("rightleftharpoons", "\u21CC"),
        _Utils_Tuple2("rightrightarrows", "\u21C9"),
        _Utils_Tuple2("rightsquigarrow", "\u219D"),
        _Utils_Tuple2("RightTeeArrow", "\u21A6"),
        _Utils_Tuple2("RightTee", "\u22A2"),
        _Utils_Tuple2("RightTeeVector", "\u295B"),
        _Utils_Tuple2("rightthreetimes", "\u22CC"),
        _Utils_Tuple2("RightTriangleBar", "\u29D0"),
        _Utils_Tuple2("RightTriangle", "\u22B3"),
        _Utils_Tuple2("RightTriangleEqual", "\u22B5"),
        _Utils_Tuple2("RightUpDownVector", "\u294F"),
        _Utils_Tuple2("RightUpTeeVector", "\u295C"),
        _Utils_Tuple2("RightUpVectorBar", "\u2954"),
        _Utils_Tuple2("RightUpVector", "\u21BE"),
        _Utils_Tuple2("RightVectorBar", "\u2953"),
        _Utils_Tuple2("RightVector", "\u21C0"),
        _Utils_Tuple2("ring", "\u02DA"),
        _Utils_Tuple2("risingdotseq", "\u2253"),
        _Utils_Tuple2("rlarr", "\u21C4"),
        _Utils_Tuple2("rlhar", "\u21CC"),
        _Utils_Tuple2("rlm", "\u200F"),
        _Utils_Tuple2("rmoustache", "\u23B1"),
        _Utils_Tuple2("rmoust", "\u23B1"),
        _Utils_Tuple2("rnmid", "\u2AEE"),
        _Utils_Tuple2("roang", "\u27ED"),
        _Utils_Tuple2("roarr", "\u21FE"),
        _Utils_Tuple2("robrk", "\u27E7"),
        _Utils_Tuple2("ropar", "\u2986"),
        _Utils_Tuple2("ropf", "\u{1D563}"),
        _Utils_Tuple2("Ropf", "\u211D"),
        _Utils_Tuple2("roplus", "\u2A2E"),
        _Utils_Tuple2("rotimes", "\u2A35"),
        _Utils_Tuple2("RoundImplies", "\u2970"),
        _Utils_Tuple2("rpar", ")"),
        _Utils_Tuple2("rpargt", "\u2994"),
        _Utils_Tuple2("rppolint", "\u2A12"),
        _Utils_Tuple2("rrarr", "\u21C9"),
        _Utils_Tuple2("Rrightarrow", "\u21DB"),
        _Utils_Tuple2("rsaquo", "\u203A"),
        _Utils_Tuple2("rscr", "\u{1D4C7}"),
        _Utils_Tuple2("Rscr", "\u211B"),
        _Utils_Tuple2("rsh", "\u21B1"),
        _Utils_Tuple2("Rsh", "\u21B1"),
        _Utils_Tuple2("rsqb", "]"),
        _Utils_Tuple2("rsquo", "\u2019"),
        _Utils_Tuple2("rsquor", "\u2019"),
        _Utils_Tuple2("rthree", "\u22CC"),
        _Utils_Tuple2("rtimes", "\u22CA"),
        _Utils_Tuple2("rtri", "\u25B9"),
        _Utils_Tuple2("rtrie", "\u22B5"),
        _Utils_Tuple2("rtrif", "\u25B8"),
        _Utils_Tuple2("rtriltri", "\u29CE"),
        _Utils_Tuple2("RuleDelayed", "\u29F4"),
        _Utils_Tuple2("ruluhar", "\u2968"),
        _Utils_Tuple2("rx", "\u211E"),
        _Utils_Tuple2("Sacute", "\u015A"),
        _Utils_Tuple2("sacute", "\u015B"),
        _Utils_Tuple2("sbquo", "\u201A"),
        _Utils_Tuple2("scap", "\u2AB8"),
        _Utils_Tuple2("Scaron", "\u0160"),
        _Utils_Tuple2("scaron", "\u0161"),
        _Utils_Tuple2("Sc", "\u2ABC"),
        _Utils_Tuple2("sc", "\u227B"),
        _Utils_Tuple2("sccue", "\u227D"),
        _Utils_Tuple2("sce", "\u2AB0"),
        _Utils_Tuple2("scE", "\u2AB4"),
        _Utils_Tuple2("Scedil", "\u015E"),
        _Utils_Tuple2("scedil", "\u015F"),
        _Utils_Tuple2("Scirc", "\u015C"),
        _Utils_Tuple2("scirc", "\u015D"),
        _Utils_Tuple2("scnap", "\u2ABA"),
        _Utils_Tuple2("scnE", "\u2AB6"),
        _Utils_Tuple2("scnsim", "\u22E9"),
        _Utils_Tuple2("scpolint", "\u2A13"),
        _Utils_Tuple2("scsim", "\u227F"),
        _Utils_Tuple2("Scy", "\u0421"),
        _Utils_Tuple2("scy", "\u0441"),
        _Utils_Tuple2("sdotb", "\u22A1"),
        _Utils_Tuple2("sdot", "\u22C5"),
        _Utils_Tuple2("sdote", "\u2A66"),
        _Utils_Tuple2("searhk", "\u2925"),
        _Utils_Tuple2("searr", "\u2198"),
        _Utils_Tuple2("seArr", "\u21D8"),
        _Utils_Tuple2("searrow", "\u2198"),
        _Utils_Tuple2("sect", "\xA7"),
        _Utils_Tuple2("semi", ";"),
        _Utils_Tuple2("seswar", "\u2929"),
        _Utils_Tuple2("setminus", "\u2216"),
        _Utils_Tuple2("setmn", "\u2216"),
        _Utils_Tuple2("sext", "\u2736"),
        _Utils_Tuple2("Sfr", "\u{1D516}"),
        _Utils_Tuple2("sfr", "\u{1D530}"),
        _Utils_Tuple2("sfrown", "\u2322"),
        _Utils_Tuple2("sharp", "\u266F"),
        _Utils_Tuple2("SHCHcy", "\u0429"),
        _Utils_Tuple2("shchcy", "\u0449"),
        _Utils_Tuple2("SHcy", "\u0428"),
        _Utils_Tuple2("shcy", "\u0448"),
        _Utils_Tuple2("ShortDownArrow", "\u2193"),
        _Utils_Tuple2("ShortLeftArrow", "\u2190"),
        _Utils_Tuple2("shortmid", "\u2223"),
        _Utils_Tuple2("shortparallel", "\u2225"),
        _Utils_Tuple2("ShortRightArrow", "\u2192"),
        _Utils_Tuple2("ShortUpArrow", "\u2191"),
        _Utils_Tuple2("shy", "\xAD"),
        _Utils_Tuple2("Sigma", "\u03A3"),
        _Utils_Tuple2("sigma", "\u03C3"),
        _Utils_Tuple2("sigmaf", "\u03C2"),
        _Utils_Tuple2("sigmav", "\u03C2"),
        _Utils_Tuple2("sim", "\u223C"),
        _Utils_Tuple2("simdot", "\u2A6A"),
        _Utils_Tuple2("sime", "\u2243"),
        _Utils_Tuple2("simeq", "\u2243"),
        _Utils_Tuple2("simg", "\u2A9E"),
        _Utils_Tuple2("simgE", "\u2AA0"),
        _Utils_Tuple2("siml", "\u2A9D"),
        _Utils_Tuple2("simlE", "\u2A9F"),
        _Utils_Tuple2("simne", "\u2246"),
        _Utils_Tuple2("simplus", "\u2A24"),
        _Utils_Tuple2("simrarr", "\u2972"),
        _Utils_Tuple2("slarr", "\u2190"),
        _Utils_Tuple2("SmallCircle", "\u2218"),
        _Utils_Tuple2("smallsetminus", "\u2216"),
        _Utils_Tuple2("smashp", "\u2A33"),
        _Utils_Tuple2("smeparsl", "\u29E4"),
        _Utils_Tuple2("smid", "\u2223"),
        _Utils_Tuple2("smile", "\u2323"),
        _Utils_Tuple2("smt", "\u2AAA"),
        _Utils_Tuple2("smte", "\u2AAC"),
        _Utils_Tuple2("smtes", "\u2AAC\uFE00"),
        _Utils_Tuple2("SOFTcy", "\u042C"),
        _Utils_Tuple2("softcy", "\u044C"),
        _Utils_Tuple2("solbar", "\u233F"),
        _Utils_Tuple2("solb", "\u29C4"),
        _Utils_Tuple2("sol", "/"),
        _Utils_Tuple2("Sopf", "\u{1D54A}"),
        _Utils_Tuple2("sopf", "\u{1D564}"),
        _Utils_Tuple2("spades", "\u2660"),
        _Utils_Tuple2("spadesuit", "\u2660"),
        _Utils_Tuple2("spar", "\u2225"),
        _Utils_Tuple2("sqcap", "\u2293"),
        _Utils_Tuple2("sqcaps", "\u2293\uFE00"),
        _Utils_Tuple2("sqcup", "\u2294"),
        _Utils_Tuple2("sqcups", "\u2294\uFE00"),
        _Utils_Tuple2("Sqrt", "\u221A"),
        _Utils_Tuple2("sqsub", "\u228F"),
        _Utils_Tuple2("sqsube", "\u2291"),
        _Utils_Tuple2("sqsubset", "\u228F"),
        _Utils_Tuple2("sqsubseteq", "\u2291"),
        _Utils_Tuple2("sqsup", "\u2290"),
        _Utils_Tuple2("sqsupe", "\u2292"),
        _Utils_Tuple2("sqsupset", "\u2290"),
        _Utils_Tuple2("sqsupseteq", "\u2292"),
        _Utils_Tuple2("square", "\u25A1"),
        _Utils_Tuple2("Square", "\u25A1"),
        _Utils_Tuple2("SquareIntersection", "\u2293"),
        _Utils_Tuple2("SquareSubset", "\u228F"),
        _Utils_Tuple2("SquareSubsetEqual", "\u2291"),
        _Utils_Tuple2("SquareSuperset", "\u2290"),
        _Utils_Tuple2("SquareSupersetEqual", "\u2292"),
        _Utils_Tuple2("SquareUnion", "\u2294"),
        _Utils_Tuple2("squarf", "\u25AA"),
        _Utils_Tuple2("squ", "\u25A1"),
        _Utils_Tuple2("squf", "\u25AA"),
        _Utils_Tuple2("srarr", "\u2192"),
        _Utils_Tuple2("Sscr", "\u{1D4AE}"),
        _Utils_Tuple2("sscr", "\u{1D4C8}"),
        _Utils_Tuple2("ssetmn", "\u2216"),
        _Utils_Tuple2("ssmile", "\u2323"),
        _Utils_Tuple2("sstarf", "\u22C6"),
        _Utils_Tuple2("Star", "\u22C6"),
        _Utils_Tuple2("star", "\u2606"),
        _Utils_Tuple2("starf", "\u2605"),
        _Utils_Tuple2("straightepsilon", "\u03F5"),
        _Utils_Tuple2("straightphi", "\u03D5"),
        _Utils_Tuple2("strns", "\xAF"),
        _Utils_Tuple2("sub", "\u2282"),
        _Utils_Tuple2("Sub", "\u22D0"),
        _Utils_Tuple2("subdot", "\u2ABD"),
        _Utils_Tuple2("subE", "\u2AC5"),
        _Utils_Tuple2("sube", "\u2286"),
        _Utils_Tuple2("subedot", "\u2AC3"),
        _Utils_Tuple2("submult", "\u2AC1"),
        _Utils_Tuple2("subnE", "\u2ACB"),
        _Utils_Tuple2("subne", "\u228A"),
        _Utils_Tuple2("subplus", "\u2ABF"),
        _Utils_Tuple2("subrarr", "\u2979"),
        _Utils_Tuple2("subset", "\u2282"),
        _Utils_Tuple2("Subset", "\u22D0"),
        _Utils_Tuple2("subseteq", "\u2286"),
        _Utils_Tuple2("subseteqq", "\u2AC5"),
        _Utils_Tuple2("SubsetEqual", "\u2286"),
        _Utils_Tuple2("subsetneq", "\u228A"),
        _Utils_Tuple2("subsetneqq", "\u2ACB"),
        _Utils_Tuple2("subsim", "\u2AC7"),
        _Utils_Tuple2("subsub", "\u2AD5"),
        _Utils_Tuple2("subsup", "\u2AD3"),
        _Utils_Tuple2("succapprox", "\u2AB8"),
        _Utils_Tuple2("succ", "\u227B"),
        _Utils_Tuple2("succcurlyeq", "\u227D"),
        _Utils_Tuple2("Succeeds", "\u227B"),
        _Utils_Tuple2("SucceedsEqual", "\u2AB0"),
        _Utils_Tuple2("SucceedsSlantEqual", "\u227D"),
        _Utils_Tuple2("SucceedsTilde", "\u227F"),
        _Utils_Tuple2("succeq", "\u2AB0"),
        _Utils_Tuple2("succnapprox", "\u2ABA"),
        _Utils_Tuple2("succneqq", "\u2AB6"),
        _Utils_Tuple2("succnsim", "\u22E9"),
        _Utils_Tuple2("succsim", "\u227F"),
        _Utils_Tuple2("SuchThat", "\u220B"),
        _Utils_Tuple2("sum", "\u2211"),
        _Utils_Tuple2("Sum", "\u2211"),
        _Utils_Tuple2("sung", "\u266A"),
        _Utils_Tuple2("sup1", "\xB9"),
        _Utils_Tuple2("sup2", "\xB2"),
        _Utils_Tuple2("sup3", "\xB3"),
        _Utils_Tuple2("sup", "\u2283"),
        _Utils_Tuple2("Sup", "\u22D1"),
        _Utils_Tuple2("supdot", "\u2ABE"),
        _Utils_Tuple2("supdsub", "\u2AD8"),
        _Utils_Tuple2("supE", "\u2AC6"),
        _Utils_Tuple2("supe", "\u2287"),
        _Utils_Tuple2("supedot", "\u2AC4"),
        _Utils_Tuple2("Superset", "\u2283"),
        _Utils_Tuple2("SupersetEqual", "\u2287"),
        _Utils_Tuple2("suphsol", "\u27C9"),
        _Utils_Tuple2("suphsub", "\u2AD7"),
        _Utils_Tuple2("suplarr", "\u297B"),
        _Utils_Tuple2("supmult", "\u2AC2"),
        _Utils_Tuple2("supnE", "\u2ACC"),
        _Utils_Tuple2("supne", "\u228B"),
        _Utils_Tuple2("supplus", "\u2AC0"),
        _Utils_Tuple2("supset", "\u2283"),
        _Utils_Tuple2("Supset", "\u22D1"),
        _Utils_Tuple2("supseteq", "\u2287"),
        _Utils_Tuple2("supseteqq", "\u2AC6"),
        _Utils_Tuple2("supsetneq", "\u228B"),
        _Utils_Tuple2("supsetneqq", "\u2ACC"),
        _Utils_Tuple2("supsim", "\u2AC8"),
        _Utils_Tuple2("supsub", "\u2AD4"),
        _Utils_Tuple2("supsup", "\u2AD6"),
        _Utils_Tuple2("swarhk", "\u2926"),
        _Utils_Tuple2("swarr", "\u2199"),
        _Utils_Tuple2("swArr", "\u21D9"),
        _Utils_Tuple2("swarrow", "\u2199"),
        _Utils_Tuple2("swnwar", "\u292A"),
        _Utils_Tuple2("szlig", "\xDF"),
        _Utils_Tuple2("Tab", "	"),
        _Utils_Tuple2("target", "\u2316"),
        _Utils_Tuple2("Tau", "\u03A4"),
        _Utils_Tuple2("tau", "\u03C4"),
        _Utils_Tuple2("tbrk", "\u23B4"),
        _Utils_Tuple2("Tcaron", "\u0164"),
        _Utils_Tuple2("tcaron", "\u0165"),
        _Utils_Tuple2("Tcedil", "\u0162"),
        _Utils_Tuple2("tcedil", "\u0163"),
        _Utils_Tuple2("Tcy", "\u0422"),
        _Utils_Tuple2("tcy", "\u0442"),
        _Utils_Tuple2("tdot", "\u20DB"),
        _Utils_Tuple2("telrec", "\u2315"),
        _Utils_Tuple2("Tfr", "\u{1D517}"),
        _Utils_Tuple2("tfr", "\u{1D531}"),
        _Utils_Tuple2("there4", "\u2234"),
        _Utils_Tuple2("therefore", "\u2234"),
        _Utils_Tuple2("Therefore", "\u2234"),
        _Utils_Tuple2("Theta", "\u0398"),
        _Utils_Tuple2("theta", "\u03B8"),
        _Utils_Tuple2("thetasym", "\u03D1"),
        _Utils_Tuple2("thetav", "\u03D1"),
        _Utils_Tuple2("thickapprox", "\u2248"),
        _Utils_Tuple2("thicksim", "\u223C"),
        _Utils_Tuple2("ThickSpace", "\u205F\u200A"),
        _Utils_Tuple2("ThinSpace", "\u2009"),
        _Utils_Tuple2("thinsp", "\u2009"),
        _Utils_Tuple2("thkap", "\u2248"),
        _Utils_Tuple2("thksim", "\u223C"),
        _Utils_Tuple2("THORN", "\xDE"),
        _Utils_Tuple2("thorn", "\xFE"),
        _Utils_Tuple2("tilde", "\u02DC"),
        _Utils_Tuple2("Tilde", "\u223C"),
        _Utils_Tuple2("TildeEqual", "\u2243"),
        _Utils_Tuple2("TildeFullEqual", "\u2245"),
        _Utils_Tuple2("TildeTilde", "\u2248"),
        _Utils_Tuple2("timesbar", "\u2A31"),
        _Utils_Tuple2("timesb", "\u22A0"),
        _Utils_Tuple2("times", "\xD7"),
        _Utils_Tuple2("timesd", "\u2A30"),
        _Utils_Tuple2("tint", "\u222D"),
        _Utils_Tuple2("toea", "\u2928"),
        _Utils_Tuple2("topbot", "\u2336"),
        _Utils_Tuple2("topcir", "\u2AF1"),
        _Utils_Tuple2("top", "\u22A4"),
        _Utils_Tuple2("Topf", "\u{1D54B}"),
        _Utils_Tuple2("topf", "\u{1D565}"),
        _Utils_Tuple2("topfork", "\u2ADA"),
        _Utils_Tuple2("tosa", "\u2929"),
        _Utils_Tuple2("tprime", "\u2034"),
        _Utils_Tuple2("trade", "\u2122"),
        _Utils_Tuple2("TRADE", "\u2122"),
        _Utils_Tuple2("triangle", "\u25B5"),
        _Utils_Tuple2("triangledown", "\u25BF"),
        _Utils_Tuple2("triangleleft", "\u25C3"),
        _Utils_Tuple2("trianglelefteq", "\u22B4"),
        _Utils_Tuple2("triangleq", "\u225C"),
        _Utils_Tuple2("triangleright", "\u25B9"),
        _Utils_Tuple2("trianglerighteq", "\u22B5"),
        _Utils_Tuple2("tridot", "\u25EC"),
        _Utils_Tuple2("trie", "\u225C"),
        _Utils_Tuple2("triminus", "\u2A3A"),
        _Utils_Tuple2("TripleDot", "\u20DB"),
        _Utils_Tuple2("triplus", "\u2A39"),
        _Utils_Tuple2("trisb", "\u29CD"),
        _Utils_Tuple2("tritime", "\u2A3B"),
        _Utils_Tuple2("trpezium", "\u23E2"),
        _Utils_Tuple2("Tscr", "\u{1D4AF}"),
        _Utils_Tuple2("tscr", "\u{1D4C9}"),
        _Utils_Tuple2("TScy", "\u0426"),
        _Utils_Tuple2("tscy", "\u0446"),
        _Utils_Tuple2("TSHcy", "\u040B"),
        _Utils_Tuple2("tshcy", "\u045B"),
        _Utils_Tuple2("Tstrok", "\u0166"),
        _Utils_Tuple2("tstrok", "\u0167"),
        _Utils_Tuple2("twixt", "\u226C"),
        _Utils_Tuple2("twoheadleftarrow", "\u219E"),
        _Utils_Tuple2("twoheadrightarrow", "\u21A0"),
        _Utils_Tuple2("Uacute", "\xDA"),
        _Utils_Tuple2("uacute", "\xFA"),
        _Utils_Tuple2("uarr", "\u2191"),
        _Utils_Tuple2("Uarr", "\u219F"),
        _Utils_Tuple2("uArr", "\u21D1"),
        _Utils_Tuple2("Uarrocir", "\u2949"),
        _Utils_Tuple2("Ubrcy", "\u040E"),
        _Utils_Tuple2("ubrcy", "\u045E"),
        _Utils_Tuple2("Ubreve", "\u016C"),
        _Utils_Tuple2("ubreve", "\u016D"),
        _Utils_Tuple2("Ucirc", "\xDB"),
        _Utils_Tuple2("ucirc", "\xFB"),
        _Utils_Tuple2("Ucy", "\u0423"),
        _Utils_Tuple2("ucy", "\u0443"),
        _Utils_Tuple2("udarr", "\u21C5"),
        _Utils_Tuple2("Udblac", "\u0170"),
        _Utils_Tuple2("udblac", "\u0171"),
        _Utils_Tuple2("udhar", "\u296E"),
        _Utils_Tuple2("ufisht", "\u297E"),
        _Utils_Tuple2("Ufr", "\u{1D518}"),
        _Utils_Tuple2("ufr", "\u{1D532}"),
        _Utils_Tuple2("Ugrave", "\xD9"),
        _Utils_Tuple2("ugrave", "\xF9"),
        _Utils_Tuple2("uHar", "\u2963"),
        _Utils_Tuple2("uharl", "\u21BF"),
        _Utils_Tuple2("uharr", "\u21BE"),
        _Utils_Tuple2("uhblk", "\u2580"),
        _Utils_Tuple2("ulcorn", "\u231C"),
        _Utils_Tuple2("ulcorner", "\u231C"),
        _Utils_Tuple2("ulcrop", "\u230F"),
        _Utils_Tuple2("ultri", "\u25F8"),
        _Utils_Tuple2("Umacr", "\u016A"),
        _Utils_Tuple2("umacr", "\u016B"),
        _Utils_Tuple2("uml", "\xA8"),
        _Utils_Tuple2("UnderBar", "_"),
        _Utils_Tuple2("UnderBrace", "\u23DF"),
        _Utils_Tuple2("UnderBracket", "\u23B5"),
        _Utils_Tuple2("UnderParenthesis", "\u23DD"),
        _Utils_Tuple2("Union", "\u22C3"),
        _Utils_Tuple2("UnionPlus", "\u228E"),
        _Utils_Tuple2("Uogon", "\u0172"),
        _Utils_Tuple2("uogon", "\u0173"),
        _Utils_Tuple2("Uopf", "\u{1D54C}"),
        _Utils_Tuple2("uopf", "\u{1D566}"),
        _Utils_Tuple2("UpArrowBar", "\u2912"),
        _Utils_Tuple2("uparrow", "\u2191"),
        _Utils_Tuple2("UpArrow", "\u2191"),
        _Utils_Tuple2("Uparrow", "\u21D1"),
        _Utils_Tuple2("UpArrowDownArrow", "\u21C5"),
        _Utils_Tuple2("updownarrow", "\u2195"),
        _Utils_Tuple2("UpDownArrow", "\u2195"),
        _Utils_Tuple2("Updownarrow", "\u21D5"),
        _Utils_Tuple2("UpEquilibrium", "\u296E"),
        _Utils_Tuple2("upharpoonleft", "\u21BF"),
        _Utils_Tuple2("upharpoonright", "\u21BE"),
        _Utils_Tuple2("uplus", "\u228E"),
        _Utils_Tuple2("UpperLeftArrow", "\u2196"),
        _Utils_Tuple2("UpperRightArrow", "\u2197"),
        _Utils_Tuple2("upsi", "\u03C5"),
        _Utils_Tuple2("Upsi", "\u03D2"),
        _Utils_Tuple2("upsih", "\u03D2"),
        _Utils_Tuple2("Upsilon", "\u03A5"),
        _Utils_Tuple2("upsilon", "\u03C5"),
        _Utils_Tuple2("UpTeeArrow", "\u21A5"),
        _Utils_Tuple2("UpTee", "\u22A5"),
        _Utils_Tuple2("upuparrows", "\u21C8"),
        _Utils_Tuple2("urcorn", "\u231D"),
        _Utils_Tuple2("urcorner", "\u231D"),
        _Utils_Tuple2("urcrop", "\u230E"),
        _Utils_Tuple2("Uring", "\u016E"),
        _Utils_Tuple2("uring", "\u016F"),
        _Utils_Tuple2("urtri", "\u25F9"),
        _Utils_Tuple2("Uscr", "\u{1D4B0}"),
        _Utils_Tuple2("uscr", "\u{1D4CA}"),
        _Utils_Tuple2("utdot", "\u22F0"),
        _Utils_Tuple2("Utilde", "\u0168"),
        _Utils_Tuple2("utilde", "\u0169"),
        _Utils_Tuple2("utri", "\u25B5"),
        _Utils_Tuple2("utrif", "\u25B4"),
        _Utils_Tuple2("uuarr", "\u21C8"),
        _Utils_Tuple2("Uuml", "\xDC"),
        _Utils_Tuple2("uuml", "\xFC"),
        _Utils_Tuple2("uwangle", "\u29A7"),
        _Utils_Tuple2("vangrt", "\u299C"),
        _Utils_Tuple2("varepsilon", "\u03F5"),
        _Utils_Tuple2("varkappa", "\u03F0"),
        _Utils_Tuple2("varnothing", "\u2205"),
        _Utils_Tuple2("varphi", "\u03D5"),
        _Utils_Tuple2("varpi", "\u03D6"),
        _Utils_Tuple2("varpropto", "\u221D"),
        _Utils_Tuple2("varr", "\u2195"),
        _Utils_Tuple2("vArr", "\u21D5"),
        _Utils_Tuple2("varrho", "\u03F1"),
        _Utils_Tuple2("varsigma", "\u03C2"),
        _Utils_Tuple2("varsubsetneq", "\u228A\uFE00"),
        _Utils_Tuple2("varsubsetneqq", "\u2ACB\uFE00"),
        _Utils_Tuple2("varsupsetneq", "\u228B\uFE00"),
        _Utils_Tuple2("varsupsetneqq", "\u2ACC\uFE00"),
        _Utils_Tuple2("vartheta", "\u03D1"),
        _Utils_Tuple2("vartriangleleft", "\u22B2"),
        _Utils_Tuple2("vartriangleright", "\u22B3"),
        _Utils_Tuple2("vBar", "\u2AE8"),
        _Utils_Tuple2("Vbar", "\u2AEB"),
        _Utils_Tuple2("vBarv", "\u2AE9"),
        _Utils_Tuple2("Vcy", "\u0412"),
        _Utils_Tuple2("vcy", "\u0432"),
        _Utils_Tuple2("vdash", "\u22A2"),
        _Utils_Tuple2("vDash", "\u22A8"),
        _Utils_Tuple2("Vdash", "\u22A9"),
        _Utils_Tuple2("VDash", "\u22AB"),
        _Utils_Tuple2("Vdashl", "\u2AE6"),
        _Utils_Tuple2("veebar", "\u22BB"),
        _Utils_Tuple2("vee", "\u2228"),
        _Utils_Tuple2("Vee", "\u22C1"),
        _Utils_Tuple2("veeeq", "\u225A"),
        _Utils_Tuple2("vellip", "\u22EE"),
        _Utils_Tuple2("verbar", "|"),
        _Utils_Tuple2("Verbar", "\u2016"),
        _Utils_Tuple2("vert", "|"),
        _Utils_Tuple2("Vert", "\u2016"),
        _Utils_Tuple2("VerticalBar", "\u2223"),
        _Utils_Tuple2("VerticalLine", "|"),
        _Utils_Tuple2("VerticalSeparator", "\u2758"),
        _Utils_Tuple2("VerticalTilde", "\u2240"),
        _Utils_Tuple2("VeryThinSpace", "\u200A"),
        _Utils_Tuple2("Vfr", "\u{1D519}"),
        _Utils_Tuple2("vfr", "\u{1D533}"),
        _Utils_Tuple2("vltri", "\u22B2"),
        _Utils_Tuple2("vnsub", "\u2282\u20D2"),
        _Utils_Tuple2("vnsup", "\u2283\u20D2"),
        _Utils_Tuple2("Vopf", "\u{1D54D}"),
        _Utils_Tuple2("vopf", "\u{1D567}"),
        _Utils_Tuple2("vprop", "\u221D"),
        _Utils_Tuple2("vrtri", "\u22B3"),
        _Utils_Tuple2("Vscr", "\u{1D4B1}"),
        _Utils_Tuple2("vscr", "\u{1D4CB}"),
        _Utils_Tuple2("vsubnE", "\u2ACB\uFE00"),
        _Utils_Tuple2("vsubne", "\u228A\uFE00"),
        _Utils_Tuple2("vsupnE", "\u2ACC\uFE00"),
        _Utils_Tuple2("vsupne", "\u228B\uFE00"),
        _Utils_Tuple2("Vvdash", "\u22AA"),
        _Utils_Tuple2("vzigzag", "\u299A"),
        _Utils_Tuple2("Wcirc", "\u0174"),
        _Utils_Tuple2("wcirc", "\u0175"),
        _Utils_Tuple2("wedbar", "\u2A5F"),
        _Utils_Tuple2("wedge", "\u2227"),
        _Utils_Tuple2("Wedge", "\u22C0"),
        _Utils_Tuple2("wedgeq", "\u2259"),
        _Utils_Tuple2("weierp", "\u2118"),
        _Utils_Tuple2("Wfr", "\u{1D51A}"),
        _Utils_Tuple2("wfr", "\u{1D534}"),
        _Utils_Tuple2("Wopf", "\u{1D54E}"),
        _Utils_Tuple2("wopf", "\u{1D568}"),
        _Utils_Tuple2("wp", "\u2118"),
        _Utils_Tuple2("wr", "\u2240"),
        _Utils_Tuple2("wreath", "\u2240"),
        _Utils_Tuple2("Wscr", "\u{1D4B2}"),
        _Utils_Tuple2("wscr", "\u{1D4CC}"),
        _Utils_Tuple2("xcap", "\u22C2"),
        _Utils_Tuple2("xcirc", "\u25EF"),
        _Utils_Tuple2("xcup", "\u22C3"),
        _Utils_Tuple2("xdtri", "\u25BD"),
        _Utils_Tuple2("Xfr", "\u{1D51B}"),
        _Utils_Tuple2("xfr", "\u{1D535}"),
        _Utils_Tuple2("xharr", "\u27F7"),
        _Utils_Tuple2("xhArr", "\u27FA"),
        _Utils_Tuple2("Xi", "\u039E"),
        _Utils_Tuple2("xi", "\u03BE"),
        _Utils_Tuple2("xlarr", "\u27F5"),
        _Utils_Tuple2("xlArr", "\u27F8"),
        _Utils_Tuple2("xmap", "\u27FC"),
        _Utils_Tuple2("xnis", "\u22FB"),
        _Utils_Tuple2("xodot", "\u2A00"),
        _Utils_Tuple2("Xopf", "\u{1D54F}"),
        _Utils_Tuple2("xopf", "\u{1D569}"),
        _Utils_Tuple2("xoplus", "\u2A01"),
        _Utils_Tuple2("xotime", "\u2A02"),
        _Utils_Tuple2("xrarr", "\u27F6"),
        _Utils_Tuple2("xrArr", "\u27F9"),
        _Utils_Tuple2("Xscr", "\u{1D4B3}"),
        _Utils_Tuple2("xscr", "\u{1D4CD}"),
        _Utils_Tuple2("xsqcup", "\u2A06"),
        _Utils_Tuple2("xuplus", "\u2A04"),
        _Utils_Tuple2("xutri", "\u25B3"),
        _Utils_Tuple2("xvee", "\u22C1"),
        _Utils_Tuple2("xwedge", "\u22C0"),
        _Utils_Tuple2("Yacute", "\xDD"),
        _Utils_Tuple2("yacute", "\xFD"),
        _Utils_Tuple2("YAcy", "\u042F"),
        _Utils_Tuple2("yacy", "\u044F"),
        _Utils_Tuple2("Ycirc", "\u0176"),
        _Utils_Tuple2("ycirc", "\u0177"),
        _Utils_Tuple2("Ycy", "\u042B"),
        _Utils_Tuple2("ycy", "\u044B"),
        _Utils_Tuple2("yen", "\xA5"),
        _Utils_Tuple2("Yfr", "\u{1D51C}"),
        _Utils_Tuple2("yfr", "\u{1D536}"),
        _Utils_Tuple2("YIcy", "\u0407"),
        _Utils_Tuple2("yicy", "\u0457"),
        _Utils_Tuple2("Yopf", "\u{1D550}"),
        _Utils_Tuple2("yopf", "\u{1D56A}"),
        _Utils_Tuple2("Yscr", "\u{1D4B4}"),
        _Utils_Tuple2("yscr", "\u{1D4CE}"),
        _Utils_Tuple2("YUcy", "\u042E"),
        _Utils_Tuple2("yucy", "\u044E"),
        _Utils_Tuple2("yuml", "\xFF"),
        _Utils_Tuple2("Yuml", "\u0178"),
        _Utils_Tuple2("Zacute", "\u0179"),
        _Utils_Tuple2("zacute", "\u017A"),
        _Utils_Tuple2("Zcaron", "\u017D"),
        _Utils_Tuple2("zcaron", "\u017E"),
        _Utils_Tuple2("Zcy", "\u0417"),
        _Utils_Tuple2("zcy", "\u0437"),
        _Utils_Tuple2("Zdot", "\u017B"),
        _Utils_Tuple2("zdot", "\u017C"),
        _Utils_Tuple2("zeetrf", "\u2128"),
        _Utils_Tuple2("ZeroWidthSpace", "\u200B"),
        _Utils_Tuple2("Zeta", "\u0396"),
        _Utils_Tuple2("zeta", "\u03B6"),
        _Utils_Tuple2("zfr", "\u{1D537}"),
        _Utils_Tuple2("Zfr", "\u2128"),
        _Utils_Tuple2("ZHcy", "\u0416"),
        _Utils_Tuple2("zhcy", "\u0436"),
        _Utils_Tuple2("zigrarr", "\u21DD"),
        _Utils_Tuple2("zopf", "\u{1D56B}"),
        _Utils_Tuple2("Zopf", "\u2124"),
        _Utils_Tuple2("Zscr", "\u{1D4B5}"),
        _Utils_Tuple2("zscr", "\u{1D4CF}"),
        _Utils_Tuple2("zwj", "\u200D"),
        _Utils_Tuple2("zwnj", "\u200C")
      ]
    )
  );
  var $hecrj$html_parser$Html$Parser$namedCharacterReference = A2(
    $elm$parser$Parser$map,
    function(reference) {
      return A2(
        $elm$core$Maybe$withDefault,
        "&" + (reference + ";"),
        A2($elm$core$Dict$get, reference, $hecrj$html_parser$Html$Parser$NamedCharacterReferences$dict)
      );
    },
    $elm$parser$Parser$getChompedString(
      $hecrj$html_parser$Html$Parser$chompOneOrMore($elm$core$Char$isAlpha)
    )
  );
  var $elm$core$String$cons = _String_cons;
  var $elm$core$String$fromChar = function(_char) {
    return A2($elm$core$String$cons, _char, "");
  };
  var $elm$core$Char$fromCode = _Char_fromCode;
  var $elm$core$Basics$pow = _Basics_pow;
  var $rtfeldman$elm_hex$Hex$fromStringHelp = F3(
    function(position, chars, accumulated) {
      fromStringHelp:
        while (true) {
          if (!chars.b) {
            return $elm$core$Result$Ok(accumulated);
          } else {
            var _char = chars.a;
            var rest = chars.b;
            switch (_char.valueOf()) {
              case "0":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated;
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "1":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "2":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 2 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "3":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 3 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "4":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 4 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "5":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 5 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "6":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 6 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "7":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 7 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "8":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 8 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "9":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 9 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "a":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 10 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "b":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 11 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "c":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 12 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "d":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 13 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "e":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 14 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              case "f":
                var $temp$position = position - 1, $temp$chars = rest, $temp$accumulated = accumulated + 15 * A2($elm$core$Basics$pow, 16, position);
                position = $temp$position;
                chars = $temp$chars;
                accumulated = $temp$accumulated;
                continue fromStringHelp;
              default:
                var nonHex = _char;
                return $elm$core$Result$Err(
                  $elm$core$String$fromChar(nonHex) + " is not a valid hexadecimal character."
                );
            }
          }
        }
    }
  );
  var $elm$core$Result$map = F2(
    function(func, ra) {
      if (ra.$ === "Ok") {
        var a = ra.a;
        return $elm$core$Result$Ok(
          func(a)
        );
      } else {
        var e = ra.a;
        return $elm$core$Result$Err(e);
      }
    }
  );
  var $elm$core$List$tail = function(list) {
    if (list.b) {
      var x = list.a;
      var xs = list.b;
      return $elm$core$Maybe$Just(xs);
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $elm$core$String$foldr = _String_foldr;
  var $elm$core$String$toList = function(string) {
    return A3($elm$core$String$foldr, $elm$core$List$cons, _List_Nil, string);
  };
  var $rtfeldman$elm_hex$Hex$fromString = function(str) {
    if ($elm$core$String$isEmpty(str)) {
      return $elm$core$Result$Err("Empty strings are not valid hexadecimal strings.");
    } else {
      var result = (function() {
        if (A2($elm$core$String$startsWith, "-", str)) {
          var list = A2(
            $elm$core$Maybe$withDefault,
            _List_Nil,
            $elm$core$List$tail(
              $elm$core$String$toList(str)
            )
          );
          return A2(
            $elm$core$Result$map,
            $elm$core$Basics$negate,
            A3(
              $rtfeldman$elm_hex$Hex$fromStringHelp,
              $elm$core$List$length(list) - 1,
              list,
              0
            )
          );
        } else {
          return A3(
            $rtfeldman$elm_hex$Hex$fromStringHelp,
            $elm$core$String$length(str) - 1,
            $elm$core$String$toList(str),
            0
          );
        }
      })();
      var formatError = function(err) {
        return A2(
          $elm$core$String$join,
          " ",
          _List_fromArray(
            ['"' + (str + '"'), "is not a valid hexadecimal string because", err]
          )
        );
      };
      return A2($elm$core$Result$mapError, formatError, result);
    }
  };
  var $elm$core$Char$isHexDigit = function(_char) {
    var code = $elm$core$Char$toCode(_char);
    return 48 <= code && code <= 57 || (65 <= code && code <= 70 || 97 <= code && code <= 102);
  };
  var $hecrj$html_parser$Html$Parser$hexadecimal = A2(
    $elm$parser$Parser$andThen,
    function(hex) {
      var _v0 = $rtfeldman$elm_hex$Hex$fromString(
        $elm$core$String$toLower(hex)
      );
      if (_v0.$ === "Ok") {
        var value = _v0.a;
        return $elm$parser$Parser$succeed(value);
      } else {
        var error = _v0.a;
        return $elm$parser$Parser$problem(error);
      }
    },
    $elm$parser$Parser$getChompedString(
      $hecrj$html_parser$Html$Parser$chompOneOrMore($elm$core$Char$isHexDigit)
    )
  );
  var $elm$parser$Parser$ExpectingInt = { $: "ExpectingInt" };
  var $elm$parser$Parser$Advanced$consumeBase = _Parser_consumeBase;
  var $elm$parser$Parser$Advanced$consumeBase16 = _Parser_consumeBase16;
  var $elm$parser$Parser$Advanced$bumpOffset = F2(
    function(newOffset, s) {
      return { col: s.col + (newOffset - s.offset), context: s.context, indent: s.indent, offset: newOffset, row: s.row, src: s.src };
    }
  );
  var $elm$parser$Parser$Advanced$chompBase10 = _Parser_chompBase10;
  var $elm$parser$Parser$Advanced$isAsciiCode = _Parser_isAsciiCode;
  var $elm$parser$Parser$Advanced$consumeExp = F2(
    function(offset, src) {
      if (A3($elm$parser$Parser$Advanced$isAsciiCode, 101, offset, src) || A3($elm$parser$Parser$Advanced$isAsciiCode, 69, offset, src)) {
        var eOffset = offset + 1;
        var expOffset = A3($elm$parser$Parser$Advanced$isAsciiCode, 43, eOffset, src) || A3($elm$parser$Parser$Advanced$isAsciiCode, 45, eOffset, src) ? eOffset + 1 : eOffset;
        var newOffset = A2($elm$parser$Parser$Advanced$chompBase10, expOffset, src);
        return _Utils_eq(expOffset, newOffset) ? -newOffset : newOffset;
      } else {
        return offset;
      }
    }
  );
  var $elm$parser$Parser$Advanced$consumeDotAndExp = F2(
    function(offset, src) {
      return A3($elm$parser$Parser$Advanced$isAsciiCode, 46, offset, src) ? A2(
        $elm$parser$Parser$Advanced$consumeExp,
        A2($elm$parser$Parser$Advanced$chompBase10, offset + 1, src),
        src
      ) : A2($elm$parser$Parser$Advanced$consumeExp, offset, src);
    }
  );
  var $elm$parser$Parser$Advanced$finalizeInt = F5(
    function(invalid, handler, startOffset, _v0, s) {
      var endOffset = _v0.a;
      var n = _v0.b;
      if (handler.$ === "Err") {
        var x = handler.a;
        return A2(
          $elm$parser$Parser$Advanced$Bad,
          true,
          A2($elm$parser$Parser$Advanced$fromState, s, x)
        );
      } else {
        var toValue = handler.a;
        return _Utils_eq(startOffset, endOffset) ? A2(
          $elm$parser$Parser$Advanced$Bad,
          _Utils_cmp(s.offset, startOffset) < 0,
          A2($elm$parser$Parser$Advanced$fromState, s, invalid)
        ) : A3(
          $elm$parser$Parser$Advanced$Good,
          true,
          toValue(n),
          A2($elm$parser$Parser$Advanced$bumpOffset, endOffset, s)
        );
      }
    }
  );
  var $elm$parser$Parser$Advanced$finalizeFloat = F6(
    function(invalid, expecting, intSettings, floatSettings, intPair, s) {
      var intOffset = intPair.a;
      var floatOffset = A2($elm$parser$Parser$Advanced$consumeDotAndExp, intOffset, s.src);
      if (floatOffset < 0) {
        return A2(
          $elm$parser$Parser$Advanced$Bad,
          true,
          A4($elm$parser$Parser$Advanced$fromInfo, s.row, s.col - (floatOffset + s.offset), invalid, s.context)
        );
      } else {
        if (_Utils_eq(s.offset, floatOffset)) {
          return A2(
            $elm$parser$Parser$Advanced$Bad,
            false,
            A2($elm$parser$Parser$Advanced$fromState, s, expecting)
          );
        } else {
          if (_Utils_eq(intOffset, floatOffset)) {
            return A5($elm$parser$Parser$Advanced$finalizeInt, invalid, intSettings, s.offset, intPair, s);
          } else {
            if (floatSettings.$ === "Err") {
              var x = floatSettings.a;
              return A2(
                $elm$parser$Parser$Advanced$Bad,
                true,
                A2($elm$parser$Parser$Advanced$fromState, s, invalid)
              );
            } else {
              var toValue = floatSettings.a;
              var _v1 = $elm$core$String$toFloat(
                A3($elm$core$String$slice, s.offset, floatOffset, s.src)
              );
              if (_v1.$ === "Nothing") {
                return A2(
                  $elm$parser$Parser$Advanced$Bad,
                  true,
                  A2($elm$parser$Parser$Advanced$fromState, s, invalid)
                );
              } else {
                var n = _v1.a;
                return A3(
                  $elm$parser$Parser$Advanced$Good,
                  true,
                  toValue(n),
                  A2($elm$parser$Parser$Advanced$bumpOffset, floatOffset, s)
                );
              }
            }
          }
        }
      }
    }
  );
  var $elm$parser$Parser$Advanced$number = function(c) {
    return $elm$parser$Parser$Advanced$Parser(
      function(s) {
        if (A3($elm$parser$Parser$Advanced$isAsciiCode, 48, s.offset, s.src)) {
          var zeroOffset = s.offset + 1;
          var baseOffset = zeroOffset + 1;
          return A3($elm$parser$Parser$Advanced$isAsciiCode, 120, zeroOffset, s.src) ? A5(
            $elm$parser$Parser$Advanced$finalizeInt,
            c.invalid,
            c.hex,
            baseOffset,
            A2($elm$parser$Parser$Advanced$consumeBase16, baseOffset, s.src),
            s
          ) : A3($elm$parser$Parser$Advanced$isAsciiCode, 111, zeroOffset, s.src) ? A5(
            $elm$parser$Parser$Advanced$finalizeInt,
            c.invalid,
            c.octal,
            baseOffset,
            A3($elm$parser$Parser$Advanced$consumeBase, 8, baseOffset, s.src),
            s
          ) : A3($elm$parser$Parser$Advanced$isAsciiCode, 98, zeroOffset, s.src) ? A5(
            $elm$parser$Parser$Advanced$finalizeInt,
            c.invalid,
            c.binary,
            baseOffset,
            A3($elm$parser$Parser$Advanced$consumeBase, 2, baseOffset, s.src),
            s
          ) : A6(
            $elm$parser$Parser$Advanced$finalizeFloat,
            c.invalid,
            c.expecting,
            c._int,
            c._float,
            _Utils_Tuple2(zeroOffset, 0),
            s
          );
        } else {
          return A6(
            $elm$parser$Parser$Advanced$finalizeFloat,
            c.invalid,
            c.expecting,
            c._int,
            c._float,
            A3($elm$parser$Parser$Advanced$consumeBase, 10, s.offset, s.src),
            s
          );
        }
      }
    );
  };
  var $elm$parser$Parser$Advanced$int = F2(
    function(expecting, invalid) {
      return $elm$parser$Parser$Advanced$number(
        {
          binary: $elm$core$Result$Err(invalid),
          expecting,
          _float: $elm$core$Result$Err(invalid),
          hex: $elm$core$Result$Err(invalid),
          _int: $elm$core$Result$Ok($elm$core$Basics$identity),
          invalid,
          octal: $elm$core$Result$Err(invalid)
        }
      );
    }
  );
  var $elm$parser$Parser$int = A2($elm$parser$Parser$Advanced$int, $elm$parser$Parser$ExpectingInt, $elm$parser$Parser$ExpectingInt);
  var $hecrj$html_parser$Html$Parser$numericCharacterReference = (function() {
    var codepoint = $elm$parser$Parser$oneOf(
      _List_fromArray(
        [
          A2(
            $elm$parser$Parser$keeper,
            A2(
              $elm$parser$Parser$ignorer,
              $elm$parser$Parser$succeed($elm$core$Basics$identity),
              $elm$parser$Parser$chompIf(
                function(c) {
                  return _Utils_eq(
                    c,
                    _Utils_chr("x")
                  ) || _Utils_eq(
                    c,
                    _Utils_chr("X")
                  );
                }
              )
            ),
            $hecrj$html_parser$Html$Parser$hexadecimal
          ),
          A2(
            $elm$parser$Parser$keeper,
            A2(
              $elm$parser$Parser$ignorer,
              $elm$parser$Parser$succeed($elm$core$Basics$identity),
              $elm$parser$Parser$chompWhile(
                $elm$core$Basics$eq(
                  _Utils_chr("0")
                )
              )
            ),
            $elm$parser$Parser$int
          )
        ]
      )
    );
    return A2(
      $elm$parser$Parser$keeper,
      A2(
        $elm$parser$Parser$ignorer,
        $elm$parser$Parser$succeed($elm$core$Basics$identity),
        $elm$parser$Parser$chompIf(
          $elm$core$Basics$eq(
            _Utils_chr("#")
          )
        )
      ),
      A2(
        $elm$parser$Parser$map,
        A2($elm$core$Basics$composeR, $elm$core$Char$fromCode, $elm$core$String$fromChar),
        codepoint
      )
    );
  })();
  var $hecrj$html_parser$Html$Parser$characterReference = A2(
    $elm$parser$Parser$keeper,
    A2(
      $elm$parser$Parser$ignorer,
      $elm$parser$Parser$succeed($elm$core$Basics$identity),
      $elm$parser$Parser$chompIf(
        $elm$core$Basics$eq(
          _Utils_chr("&")
        )
      )
    ),
    $elm$parser$Parser$oneOf(
      _List_fromArray(
        [
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$backtrackable($hecrj$html_parser$Html$Parser$namedCharacterReference),
            $hecrj$html_parser$Html$Parser$chompSemicolon
          ),
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$backtrackable($hecrj$html_parser$Html$Parser$numericCharacterReference),
            $hecrj$html_parser$Html$Parser$chompSemicolon
          ),
          $elm$parser$Parser$succeed("&")
        ]
      )
    )
  );
  var $hecrj$html_parser$Html$Parser$tagAttributeQuotedValue = function(quote) {
    var isQuotedValueChar = function(c) {
      return !_Utils_eq(c, quote) && !_Utils_eq(
        c,
        _Utils_chr("&")
      );
    };
    return A2(
      $elm$parser$Parser$keeper,
      A2(
        $elm$parser$Parser$ignorer,
        $elm$parser$Parser$succeed($elm$core$Basics$identity),
        $elm$parser$Parser$chompIf(
          $elm$core$Basics$eq(quote)
        )
      ),
      A2(
        $elm$parser$Parser$ignorer,
        A2(
          $elm$parser$Parser$map,
          $elm$core$String$join(""),
          $hecrj$html_parser$Html$Parser$many(
            $elm$parser$Parser$oneOf(
              _List_fromArray(
                [
                  $elm$parser$Parser$getChompedString(
                    $hecrj$html_parser$Html$Parser$chompOneOrMore(isQuotedValueChar)
                  ),
                  $hecrj$html_parser$Html$Parser$characterReference
                ]
              )
            )
          )
        ),
        $elm$parser$Parser$chompIf(
          $elm$core$Basics$eq(quote)
        )
      )
    );
  };
  var $hecrj$html_parser$Html$Parser$oneOrMore = F2(
    function(type_, parser_) {
      return A2(
        $elm$parser$Parser$loop,
        _List_Nil,
        function(list) {
          return $elm$parser$Parser$oneOf(
            _List_fromArray(
              [
                A2(
                  $elm$parser$Parser$map,
                  function(_new) {
                    return $elm$parser$Parser$Loop(
                      A2($elm$core$List$cons, _new, list)
                    );
                  },
                  parser_
                ),
                $elm$core$List$isEmpty(list) ? $elm$parser$Parser$problem("expecting at least one " + type_) : $elm$parser$Parser$succeed(
                  $elm$parser$Parser$Done(
                    $elm$core$List$reverse(list)
                  )
                )
              ]
            )
          );
        }
      );
    }
  );
  var $hecrj$html_parser$Html$Parser$tagAttributeUnquotedValue = (function() {
    var isUnquotedValueChar = function(c) {
      return !$hecrj$html_parser$Html$Parser$isSpaceCharacter(c) && (!_Utils_eq(
        c,
        _Utils_chr('"')
      ) && (!_Utils_eq(
        c,
        _Utils_chr("'")
      ) && (!_Utils_eq(
        c,
        _Utils_chr("=")
      ) && (!_Utils_eq(
        c,
        _Utils_chr("<")
      ) && (!_Utils_eq(
        c,
        _Utils_chr(">")
      ) && (!_Utils_eq(
        c,
        _Utils_chr("`")
      ) && !_Utils_eq(
        c,
        _Utils_chr("&")
      )))))));
    };
    return A2(
      $elm$parser$Parser$map,
      $elm$core$String$join(""),
      A2(
        $hecrj$html_parser$Html$Parser$oneOrMore,
        "attribute value",
        $elm$parser$Parser$oneOf(
          _List_fromArray(
            [
              $elm$parser$Parser$getChompedString(
                $hecrj$html_parser$Html$Parser$chompOneOrMore(isUnquotedValueChar)
              ),
              $hecrj$html_parser$Html$Parser$characterReference
            ]
          )
        )
      )
    );
  })();
  var $hecrj$html_parser$Html$Parser$tagAttributeValue = $elm$parser$Parser$oneOf(
    _List_fromArray(
      [
        A2(
          $elm$parser$Parser$keeper,
          A2(
            $elm$parser$Parser$ignorer,
            A2(
              $elm$parser$Parser$ignorer,
              $elm$parser$Parser$succeed($elm$core$Basics$identity),
              $elm$parser$Parser$chompIf(
                $elm$core$Basics$eq(
                  _Utils_chr("=")
                )
              )
            ),
            $elm$parser$Parser$chompWhile($hecrj$html_parser$Html$Parser$isSpaceCharacter)
          ),
          $elm$parser$Parser$oneOf(
            _List_fromArray(
              [
                $hecrj$html_parser$Html$Parser$tagAttributeUnquotedValue,
                $hecrj$html_parser$Html$Parser$tagAttributeQuotedValue(
                  _Utils_chr('"')
                ),
                $hecrj$html_parser$Html$Parser$tagAttributeQuotedValue(
                  _Utils_chr("'")
                )
              ]
            )
          )
        ),
        $elm$parser$Parser$succeed("")
      ]
    )
  );
  var $hecrj$html_parser$Html$Parser$tagAttribute = A2(
    $elm$parser$Parser$keeper,
    A2(
      $elm$parser$Parser$keeper,
      $elm$parser$Parser$succeed($elm$core$Tuple$pair),
      A2(
        $elm$parser$Parser$ignorer,
        $hecrj$html_parser$Html$Parser$tagAttributeName,
        $elm$parser$Parser$chompWhile($hecrj$html_parser$Html$Parser$isSpaceCharacter)
      )
    ),
    A2(
      $elm$parser$Parser$ignorer,
      $hecrj$html_parser$Html$Parser$tagAttributeValue,
      $elm$parser$Parser$chompWhile($hecrj$html_parser$Html$Parser$isSpaceCharacter)
    )
  );
  var $hecrj$html_parser$Html$Parser$tagAttributes = $hecrj$html_parser$Html$Parser$many($hecrj$html_parser$Html$Parser$tagAttribute);
  var $hecrj$html_parser$Html$Parser$tagName = A2(
    $elm$parser$Parser$map,
    $elm$core$String$toLower,
    $elm$parser$Parser$getChompedString(
      A2(
        $elm$parser$Parser$ignorer,
        $elm$parser$Parser$chompIf($elm$core$Char$isAlphaNum),
        $elm$parser$Parser$chompWhile(
          function(c) {
            return $elm$core$Char$isAlphaNum(c) || _Utils_eq(
              c,
              _Utils_chr("-")
            );
          }
        )
      )
    )
  );
  var $hecrj$html_parser$Html$Parser$Text = function(a) {
    return { $: "Text", a };
  };
  var $hecrj$html_parser$Html$Parser$text = A2(
    $elm$parser$Parser$map,
    A2(
      $elm$core$Basics$composeR,
      $elm$core$String$join(""),
      $hecrj$html_parser$Html$Parser$Text
    ),
    A2(
      $hecrj$html_parser$Html$Parser$oneOrMore,
      "text element",
      $elm$parser$Parser$oneOf(
        _List_fromArray(
          [
            $elm$parser$Parser$getChompedString(
              $hecrj$html_parser$Html$Parser$chompOneOrMore(
                function(c) {
                  return !_Utils_eq(
                    c,
                    _Utils_chr("<")
                  ) && !_Utils_eq(
                    c,
                    _Utils_chr("&")
                  );
                }
              )
            ),
            $hecrj$html_parser$Html$Parser$characterReference
          ]
        )
      )
    )
  );
  function $hecrj$html_parser$Html$Parser$cyclic$node() {
    return $elm$parser$Parser$oneOf(
      _List_fromArray(
        [
          $hecrj$html_parser$Html$Parser$text,
          $hecrj$html_parser$Html$Parser$comment,
          $hecrj$html_parser$Html$Parser$cyclic$element()
        ]
      )
    );
  }
  function $hecrj$html_parser$Html$Parser$cyclic$element() {
    return A2(
      $elm$parser$Parser$andThen,
      function(_v0) {
        var name = _v0.a;
        var attributes = _v0.b;
        return $hecrj$html_parser$Html$Parser$isVoidElement(name) ? A2(
          $elm$parser$Parser$ignorer,
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$succeed(
              A3($hecrj$html_parser$Html$Parser$Element, name, attributes, _List_Nil)
            ),
            $elm$parser$Parser$oneOf(
              _List_fromArray(
                [
                  $elm$parser$Parser$chompIf(
                    $elm$core$Basics$eq(
                      _Utils_chr("/")
                    )
                  ),
                  $elm$parser$Parser$succeed(_Utils_Tuple0)
                ]
              )
            )
          ),
          $elm$parser$Parser$chompIf(
            $elm$core$Basics$eq(
              _Utils_chr(">")
            )
          )
        ) : A2(
          $elm$parser$Parser$keeper,
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$succeed(
              A2($hecrj$html_parser$Html$Parser$Element, name, attributes)
            ),
            $elm$parser$Parser$chompIf(
              $elm$core$Basics$eq(
                _Utils_chr(">")
              )
            )
          ),
          A2(
            $elm$parser$Parser$ignorer,
            $hecrj$html_parser$Html$Parser$many(
              $elm$parser$Parser$backtrackable(
                $hecrj$html_parser$Html$Parser$cyclic$node()
              )
            ),
            $hecrj$html_parser$Html$Parser$closingTag(name)
          )
        );
      },
      A2(
        $elm$parser$Parser$keeper,
        A2(
          $elm$parser$Parser$keeper,
          A2(
            $elm$parser$Parser$ignorer,
            $elm$parser$Parser$succeed($elm$core$Tuple$pair),
            $elm$parser$Parser$chompIf(
              $elm$core$Basics$eq(
                _Utils_chr("<")
              )
            )
          ),
          A2(
            $elm$parser$Parser$ignorer,
            $hecrj$html_parser$Html$Parser$tagName,
            $elm$parser$Parser$chompWhile($hecrj$html_parser$Html$Parser$isSpaceCharacter)
          )
        ),
        $hecrj$html_parser$Html$Parser$tagAttributes
      )
    );
  }
  try {
    $hecrj$html_parser$Html$Parser$node = $hecrj$html_parser$Html$Parser$cyclic$node();
    $hecrj$html_parser$Html$Parser$cyclic$node = function() {
      return $hecrj$html_parser$Html$Parser$node;
    };
    $hecrj$html_parser$Html$Parser$element = $hecrj$html_parser$Html$Parser$cyclic$element();
    $hecrj$html_parser$Html$Parser$cyclic$element = function() {
      return $hecrj$html_parser$Html$Parser$element;
    };
  } catch ($) {
    throw "Some top-level definitions from `Html.Parser` are causing infinite recursion:\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502    node\n  \u2502     \u2193\n  \u2502    element\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2518\n\nThese errors are very tricky, so read https://elm-lang.org/0.19.1/bad-recursion to learn how to fix it!";
  }
  var $hecrj$html_parser$Html$Parser$node;
  var $hecrj$html_parser$Html$Parser$element;
  var $elm$parser$Parser$DeadEnd = F3(
    function(row, col, problem) {
      return { col, problem, row };
    }
  );
  var $elm$parser$Parser$problemToDeadEnd = function(p) {
    return A3($elm$parser$Parser$DeadEnd, p.row, p.col, p.problem);
  };
  var $elm$parser$Parser$Advanced$bagToList = F2(
    function(bag, list) {
      bagToList:
        while (true) {
          switch (bag.$) {
            case "Empty":
              return list;
            case "AddRight":
              var bag1 = bag.a;
              var x = bag.b;
              var $temp$bag = bag1, $temp$list = A2($elm$core$List$cons, x, list);
              bag = $temp$bag;
              list = $temp$list;
              continue bagToList;
            default:
              var bag1 = bag.a;
              var bag2 = bag.b;
              var $temp$bag = bag1, $temp$list = A2($elm$parser$Parser$Advanced$bagToList, bag2, list);
              bag = $temp$bag;
              list = $temp$list;
              continue bagToList;
          }
        }
    }
  );
  var $elm$parser$Parser$Advanced$run = F2(
    function(_v0, src) {
      var parse = _v0.a;
      var _v1 = parse(
        { col: 1, context: _List_Nil, indent: 1, offset: 0, row: 1, src }
      );
      if (_v1.$ === "Good") {
        var value = _v1.b;
        return $elm$core$Result$Ok(value);
      } else {
        var bag = _v1.b;
        return $elm$core$Result$Err(
          A2($elm$parser$Parser$Advanced$bagToList, bag, _List_Nil)
        );
      }
    }
  );
  var $elm$parser$Parser$run = F2(
    function(parser, source) {
      var _v0 = A2($elm$parser$Parser$Advanced$run, parser, source);
      if (_v0.$ === "Ok") {
        var a = _v0.a;
        return $elm$core$Result$Ok(a);
      } else {
        var problems = _v0.a;
        return $elm$core$Result$Err(
          A2($elm$core$List$map, $elm$parser$Parser$problemToDeadEnd, problems)
        );
      }
    }
  );
  var $hecrj$html_parser$Html$Parser$run = function(str) {
    return $elm$core$String$isEmpty(str) ? $elm$core$Result$Ok(_List_Nil) : A2(
      $elm$parser$Parser$run,
      A2($hecrj$html_parser$Html$Parser$oneOrMore, "node", $hecrj$html_parser$Html$Parser$node),
      str
    );
  };
  var $author$project$View$HtmlRenderer$isAllowedTag = function(tag) {
    return A2(
      $elm$core$List$member,
      tag,
      _List_fromArray(
        ["p", "br", "em", "i", "strong", "b", "a", "ul", "ol", "li", "span", "img"]
      )
    );
  };
  var $author$project$View$HtmlRenderer$ensureAnchorDefaults = function(attrs) {
    var hasTarget = A2(
      $elm$core$List$any,
      function(attr) {
        return attr.a === "target";
      },
      attrs
    );
    var hasRel = A2(
      $elm$core$List$any,
      function(attr) {
        return attr.a === "rel";
      },
      attrs
    );
    return (function(current) {
      return hasRel ? current : A2(
        $elm$core$List$cons,
        _Utils_Tuple2("rel", "noopener noreferrer"),
        current
      );
    })(
      (function(current) {
        return hasTarget ? current : A2(
          $elm$core$List$cons,
          _Utils_Tuple2("target", "_blank"),
          current
        );
      })(attrs)
    );
  };
  var $author$project$View$HtmlRenderer$sanitizeAnchorAttr = function(attr) {
    var _v0 = attr.a;
    if (_v0 === "href") {
      return $elm$core$Maybe$Just(attr);
    } else {
      return $elm$core$Maybe$Nothing;
    }
  };
  var $author$project$View$HtmlRenderer$sanitizeImageAttr = function(attr) {
    var _v0 = attr.a;
    switch (_v0) {
      case "alt":
        return $elm$core$Maybe$Just(attr);
      case "src":
        return $elm$core$Maybe$Just(attr);
      default:
        return $elm$core$Maybe$Nothing;
    }
  };
  var $author$project$View$HtmlRenderer$sanitizeAttrs = F2(
    function(tag, attrs) {
      switch (tag) {
        case "a":
          return $author$project$View$HtmlRenderer$ensureAnchorDefaults(
            A2($elm$core$List$filterMap, $author$project$View$HtmlRenderer$sanitizeAnchorAttr, attrs)
          );
        case "img":
          return A2($elm$core$List$filterMap, $author$project$View$HtmlRenderer$sanitizeImageAttr, attrs);
        default:
          return _List_Nil;
      }
    }
  );
  var $author$project$View$HtmlRenderer$sanitizeNode = function(node) {
    switch (node.$) {
      case "Text":
        var textValue = node.a;
        return _List_fromArray(
          [
            $hecrj$html_parser$Html$Parser$Text(textValue)
          ]
        );
      case "Element":
        var tag = node.a;
        var attrs = node.b;
        var children = node.c;
        return $author$project$View$HtmlRenderer$isAllowedTag(tag) ? _List_fromArray(
          [
            A3(
              $hecrj$html_parser$Html$Parser$Element,
              tag,
              A2($author$project$View$HtmlRenderer$sanitizeAttrs, tag, attrs),
              $author$project$View$HtmlRenderer$sanitizeNodes(children)
            )
          ]
        ) : $author$project$View$HtmlRenderer$sanitizeNodes(children);
      default:
        return _List_Nil;
    }
  };
  var $author$project$View$HtmlRenderer$sanitizeNodes = function(nodes) {
    return A2($elm$core$List$concatMap, $author$project$View$HtmlRenderer$sanitizeNode, nodes);
  };
  var $elm$html$Html$Attributes$attribute = $elm$virtual_dom$VirtualDom$attribute;
  var $hecrj$html_parser$Html$Parser$Util$toAttribute = function(_v0) {
    var name = _v0.a;
    var value = _v0.b;
    return A2($elm$html$Html$Attributes$attribute, name, value);
  };
  var $hecrj$html_parser$Html$Parser$Util$toVirtualDom = function(nodes) {
    return A2($elm$core$List$map, $hecrj$html_parser$Html$Parser$Util$toVirtualDomEach, nodes);
  };
  var $hecrj$html_parser$Html$Parser$Util$toVirtualDomEach = function(node) {
    switch (node.$) {
      case "Element":
        var name = node.a;
        var attrs = node.b;
        var children = node.c;
        return A3(
          $elm$html$Html$node,
          name,
          A2($elm$core$List$map, $hecrj$html_parser$Html$Parser$Util$toAttribute, attrs),
          $hecrj$html_parser$Html$Parser$Util$toVirtualDom(children)
        );
      case "Text":
        var s = node.a;
        return $elm$html$Html$text(s);
      default:
        return $elm$html$Html$text("");
    }
  };
  var $author$project$View$HtmlRenderer$unwrapRootDiv = function(nodes) {
    if (nodes.b && nodes.a.$ === "Element" && nodes.a.a === "div" && !nodes.b.b) {
      var _v1 = nodes.a;
      var children = _v1.c;
      return children;
    } else {
      return nodes;
    }
  };
  var $author$project$View$HtmlRenderer$renderHtml = function(rawHtml) {
    var renderNodes = function(nodes2) {
      return $hecrj$html_parser$Html$Parser$Util$toVirtualDom(
        $author$project$View$HtmlRenderer$sanitizeNodes(nodes2)
      );
    };
    var normalized = $author$project$View$HtmlRenderer$normalizeHtml(rawHtml);
    var _v0 = $hecrj$html_parser$Html$Parser$run(normalized);
    if (_v0.$ === "Ok") {
      var nodes = _v0.a;
      return renderNodes(nodes);
    } else {
      var _v1 = $hecrj$html_parser$Html$Parser$run("<div>" + (normalized + "</div>"));
      if (_v1.$ === "Ok") {
        var nodes = _v1.a;
        return renderNodes(
          $author$project$View$HtmlRenderer$unwrapRootDiv(nodes)
        );
      } else {
        return _List_fromArray(
          [
            $elm$html$Html$text(rawHtml)
          ]
        );
      }
    }
  };
  var $elm$html$Html$Attributes$target = _VirtualDom_attribute("target");
  var $author$project$View$ManifestInfoModal$viewingDirectionLabel = function(direction) {
    switch (direction.$) {
      case "LeftToRight":
        return "Left to Right";
      case "RightToLeft":
        return "Right to Left";
      case "TopToBottom":
        return "Top to Bottom";
      default:
        return "Bottom to Top";
    }
  };
  var $author$project$View$ManifestInfoModal$behaviorLabel = function(behavior) {
    switch (behavior.$) {
      case "AutoAdvanceBehavior":
        return "Auto-advance";
      case "NoAutoAdvanceBehavior":
        return "No auto-advance";
      case "RepeatBehavior":
        return "Repeat";
      case "NoRepeatBehavior":
        return "No repeat";
      case "UnorderedBehavior":
        return "Unordered";
      case "IndividualsBehavior":
        return "Individuals";
      case "ContinuousBehavior":
        return "Continuous";
      case "PagedBehavior":
        return "Paged";
      case "FacingPagesBehavior":
        return "Facing pages";
      case "NonPagedBehavior":
        return "Non-paged";
      case "MultiPartBehavior":
        return "Multi-part";
      case "TogetherBehavior":
        return "Together";
      case "SequenceBehavior":
        return "Sequence";
      case "ThumbnailNavBehavior":
        return "Thumbnail nav";
      case "NoNavBehavior":
        return "No nav";
      default:
        return "Hidden";
    }
  };
  var $author$project$View$ManifestInfoModal$viewingHintLabel = function(hint) {
    switch (hint.$) {
      case "PagedHint":
        return "Paged";
      case "IndividualsHint":
        return "Individuals";
      case "ContinuousHint":
        return "Continuous";
      case "MultiPartHint":
        return "Multi-part";
      case "NonPagedHint":
        return "Non-paged";
      case "TopHint":
        return "Top";
      default:
        return "Facing pages";
    }
  };
  var $author$project$View$ManifestInfoModal$viewingLayoutLabel = function(layout) {
    if (layout.$ === "LayoutV2") {
      var hint = layout.a;
      return "Hint: " + $author$project$View$ManifestInfoModal$viewingHintLabel(hint);
    } else {
      var behaviors = layout.a;
      return $elm$core$List$isEmpty(behaviors) ? "Behavior: None" : "Behavior: " + A2(
        $elm$core$String$join,
        ", ",
        A2($elm$core$List$map, $author$project$View$ManifestInfoModal$behaviorLabel, behaviors)
      );
    }
  };
  var $author$project$View$ManifestInfoModal$buildRows = F2(
    function(model, manifest) {
      var rangeCount = $elm$core$String$fromInt(
        A2(
          $elm$core$Maybe$withDefault,
          0,
          A2(
            $elm$core$Maybe$map,
            $elm$core$List$length,
            $rism_digital$elm_iiif$IIIF$Presentation$toRanges(manifest)
          )
        )
      );
      var manifestUrl = (function() {
        var _v2 = model.resourceResponse;
        switch (_v2.$) {
          case "ResourceLoadedManifest":
            return model.manifestUrl;
          case "ResourceLoadedCollection":
            var collectionState = _v2.a;
            return A2($elm$core$Maybe$withDefault, model.manifestUrl, collectionState.selectedManifestId);
          default:
            return model.manifestUrl;
        }
      })();
      var canvasCount = $elm$core$String$fromInt(
        $elm$core$List$length(
          $rism_digital$elm_iiif$IIIF$Presentation$toCanvases(manifest)
        )
      );
      var _v0 = manifest;
      var version = _v0.a;
      var innerManifest = _v0.b;
      var summaryText = A2(
        $elm$core$Maybe$withDefault,
        "None",
        A2(
          $elm$core$Maybe$map,
          $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap(model.detectedLanguage),
          innerManifest.summary
        )
      );
      var viewingDirection = $author$project$View$ManifestInfoModal$viewingDirectionLabel(innerManifest.viewingDirection);
      var viewingHintOrBehavior = $author$project$View$ManifestInfoModal$viewingLayoutLabel(innerManifest.viewingLayout);
      var iiifVersion = (function() {
        if (version.$ === "IIIFV2") {
          return "IIIF v2";
        } else {
          return "IIIF v3";
        }
      })();
      return A2(
        $elm$core$List$cons,
        _Utils_Tuple2(
          "Manifest URL",
          A2(
            $elm$html$Html$a,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$href(manifestUrl),
                $elm$html$Html$Attributes$target("_blank"),
                $elm$html$Html$Attributes$rel("noopener noreferrer")
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(manifestUrl)
              ]
            )
          )
        ),
        _Utils_ap(
          (function() {
            if ($elm$core$List$isEmpty(model.acceptHeaders)) {
              return _List_Nil;
            } else {
              var acceptHeaders = A2($elm$core$String$join, ", ", model.acceptHeaders);
              return _List_fromArray(
                [
                  _Utils_Tuple2(
                    "Accept Headers",
                    $elm$html$Html$text(acceptHeaders)
                  )
                ]
              );
            }
          })(),
          _List_fromArray(
            [
              _Utils_Tuple2(
                "Detected User Language",
                $elm$html$Html$text(
                  $author$project$View$ManifestInfoModal$languageLabel(model.detectedLanguage)
                )
              ),
              _Utils_Tuple2(
                "IIIF Version",
                $elm$html$Html$text(iiifVersion)
              ),
              _Utils_Tuple2(
                "Viewing Hint / Behavior",
                $elm$html$Html$text(viewingHintOrBehavior)
              ),
              _Utils_Tuple2(
                "Viewing Direction",
                $elm$html$Html$text(viewingDirection)
              ),
              _Utils_Tuple2(
                "Summary",
                summaryText === "None" ? $elm$html$Html$text(summaryText) : A2(
                  $elm$html$Html$div,
                  _List_Nil,
                  $author$project$View$HtmlRenderer$renderHtml(summaryText)
                )
              ),
              _Utils_Tuple2(
                "Canvases",
                $elm$html$Html$text(canvasCount)
              ),
              _Utils_Tuple2(
                "Ranges",
                $elm$html$Html$text(rangeCount)
              )
            ]
          )
        )
      );
    }
  );
  var $elm$html$Html$Attributes$alt = _VirtualDom_attribute("alt");
  var $elm$html$Html$img = _VirtualDom_node("img");
  var $author$project$View$ManifestInfoModal$logoIiifUrl = function(logo) {
    var _v0 = A2($elm$core$Maybe$andThen, $elm$core$List$head, logo.service);
    if (_v0.$ === "Just") {
      var service = _v0.a;
      return A2(
        $elm$core$Maybe$map,
        A2(
          $elm$core$Basics$composeR,
          $rism_digital$elm_iiif$IIIF$Image$setImageUriSize(
            $rism_digital$elm_iiif$IIIF$Image$WidthOnlySize(256)
          ),
          $rism_digital$elm_iiif$IIIF$Image$createImageAddress
        ),
        $rism_digital$elm_iiif$IIIF$Image$parseImageAddress(service.id)
      );
    } else {
      return $elm$core$Maybe$Just(logo.id);
    }
  };
  var $author$project$View$ManifestInfoModal$providerHomepage = function(provider) {
    return A2($elm$core$Maybe$andThen, $elm$core$List$head, provider.homepage);
  };
  var $author$project$View$ManifestInfoModal$providerLogo = function(provider) {
    return A2($elm$core$Maybe$andThen, $elm$core$List$head, provider.logo);
  };
  var $elm$html$Html$Attributes$src = function(url) {
    return A2(
      _VirtualDom_attribute,
      "src",
      _VirtualDom_noJavaScriptOrHtmlUri(url)
    );
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$toHomepage = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.homepage;
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toLogo = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.logo;
    }
  );
  var $rism_digital$elm_iiif$IIIF$Presentation$toProvider = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.provider;
    }
  );
  var $author$project$View$ManifestInfoModal$viewLogoBlock = F2(
    function(language, manifest) {
      var _v0 = (function() {
        var _v1 = A2(
          $elm$core$Maybe$andThen,
          $elm$core$List$head,
          $rism_digital$elm_iiif$IIIF$Presentation$toProvider(manifest)
        );
        if (_v1.$ === "Just") {
          var provider = _v1.a;
          return _Utils_Tuple2(
            $author$project$View$ManifestInfoModal$providerLogo(provider),
            $author$project$View$ManifestInfoModal$providerHomepage(provider)
          );
        } else {
          return _Utils_Tuple2(
            $elm$core$Maybe$Nothing,
            A2(
              $elm$core$Maybe$andThen,
              $elm$core$List$head,
              $rism_digital$elm_iiif$IIIF$Presentation$toHomepage(manifest)
            )
          );
        }
      })();
      var providerLogoImage = _v0.a;
      var homepageLink = _v0.b;
      var logoUrl = (function() {
        if (providerLogoImage.$ === "Just") {
          var logo = providerLogoImage.a;
          return $author$project$View$ManifestInfoModal$logoIiifUrl(logo);
        } else {
          return A2(
            $elm$core$Maybe$map,
            A2(
              $elm$core$Basics$composeR,
              function($) {
                return $.id;
              },
              A2(
                $elm$core$Basics$composeR,
                $rism_digital$elm_iiif$IIIF$Image$setImageUriSize(
                  $rism_digital$elm_iiif$IIIF$Image$WidthOnlySize(256)
                ),
                $rism_digital$elm_iiif$IIIF$Image$createImageAddress
              )
            ),
            $rism_digital$elm_iiif$IIIF$Presentation$toLogo(manifest)
          );
        }
      })();
      return A2(
        $author$project$View$Helpers$viewIf,
        A2(
          $elm$html$Html$div,
          _List_Nil,
          _List_fromArray(
            [
              A2(
                $author$project$View$Helpers$viewMaybe,
                function(url) {
                  return A2(
                    $elm$html$Html$img,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$classList(
                          _List_fromArray(
                            [
                              _Utils_Tuple2("manifest-info-logo", true)
                            ]
                          )
                        ),
                        $elm$html$Html$Attributes$src(url),
                        $elm$html$Html$Attributes$alt("Manifest logo")
                      ]
                    ),
                    _List_Nil
                  );
                },
                logoUrl
              ),
              A2(
                $author$project$View$Helpers$viewMaybe,
                function(page) {
                  var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, page.label);
                  return A2(
                    $elm$html$Html$a,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$href(page.id),
                        $elm$html$Html$Attributes$target("_blank"),
                        $elm$html$Html$Attributes$rel("noopener noreferrer")
                      ]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text(labelText)
                      ]
                    )
                  );
                },
                homepageLink
              )
            ]
          )
        ),
        !_Utils_eq(logoUrl, $elm$core$Maybe$Nothing) || !_Utils_eq(homepageLink, $elm$core$Maybe$Nothing)
      );
    }
  );
  var $author$project$View$ManifestInfoModal$viewRow = function(_v0) {
    var labelText = _v0.a;
    var valueNode = _v0.b;
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("metadata-item", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("metadata-label", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(labelText)
              ]
            )
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("metadata-value", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [valueNode]
            )
          )
        ]
      )
    );
  };
  var $author$project$View$ManifestInfoModal$viewBody = F2(
    function(model, maybeManifest) {
      var rows = A2(
        $elm$core$Maybe$withDefault,
        _List_fromArray(
          [
            _Utils_Tuple2(
              "Manifest",
              $elm$html$Html$text("Not loaded")
            )
          ]
        ),
        A2(
          $elm$core$Maybe$map,
          $author$project$View$ManifestInfoModal$buildRows(model),
          maybeManifest
        )
      );
      var logoBlock = A2(
        $author$project$View$Helpers$viewMaybe,
        $author$project$View$ManifestInfoModal$viewLogoBlock(model.detectedLanguage),
        maybeManifest
      );
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("modal-body", true),
                  _Utils_Tuple2("is-two-column", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("metadata-body", true)
                      ]
                    )
                  )
                ]
              ),
              A2($elm$core$List$map, $author$project$View$ManifestInfoModal$viewRow, rows)
            ),
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("manifest-info-logo-wrap", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [logoBlock]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$Msg$UserClickedCloseManifestInfo = { $: "UserClickedCloseManifestInfo" };
  var $elm$svg$Svg$Attributes$d = _VirtualDom_attribute("d");
  var $elm$svg$Svg$Attributes$fill = _VirtualDom_attribute("fill");
  var $elm$svg$Svg$Attributes$height = _VirtualDom_attribute("height");
  var $elm$svg$Svg$trustedNode = _VirtualDom_nodeNS("http://www.w3.org/2000/svg");
  var $elm$svg$Svg$svg = $elm$svg$Svg$trustedNode("svg");
  var $elm$svg$Svg$Attributes$viewBox = _VirtualDom_attribute("viewBox");
  var $elm$svg$Svg$Attributes$width = _VirtualDom_attribute("width");
  var $author$project$View$Icons$icon = F2(
    function(viewBoxValue, children) {
      return A2(
        $elm$svg$Svg$svg,
        _List_fromArray(
          [
            $elm$svg$Svg$Attributes$viewBox(viewBoxValue),
            $elm$svg$Svg$Attributes$width("100%"),
            $elm$svg$Svg$Attributes$height("100%"),
            $elm$svg$Svg$Attributes$fill("currentColor")
          ]
        ),
        children
      );
    }
  );
  var $elm$svg$Svg$path = $elm$svg$Svg$trustedNode("path");
  var $author$project$View$Icons$close = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M64 80c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16H448c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16H64zM0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zm175 79c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $elm$html$Html$Attributes$boolProperty = F2(
    function(key, bool) {
      return A2(
        _VirtualDom_property,
        key,
        $elm$json$Json$Encode$bool(bool)
      );
    }
  );
  var $elm$html$Html$Attributes$disabled = $elm$html$Html$Attributes$boolProperty("disabled");
  var $author$project$View$Helpers$viewButton = function(config) {
    var isDisabled = _Utils_eq(config.onClickMsg, $elm$core$Maybe$Nothing);
    var buttonAttrs = (function() {
      var baseAttrs = _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("canvas-toolbar-button", true),
                _Utils_Tuple2("is-disabled", isDisabled),
                _Utils_Tuple2("is-fullscreen", config.isFullscreen)
              ]
            )
          ),
          $elm$html$Html$Attributes$type_("button"),
          $elm$html$Html$Attributes$title(config.label)
        ]
      );
      var _v0 = config.onClickMsg;
      if (_v0.$ === "Just") {
        var msg = _v0.a;
        return A2(
          $elm$core$List$cons,
          $elm$html$Html$Events$onClick(msg),
          baseAttrs
        );
      } else {
        return A2(
          $elm$core$List$cons,
          $elm$html$Html$Attributes$disabled(true),
          baseAttrs
        );
      }
    })();
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("canvas-toolbar-item", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$button,
            buttonAttrs,
            _List_fromArray(
              [config.icon]
            )
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("canvas-toolbar-label", true),
                      _Utils_Tuple2("is-fullscreen", config.isFullscreen)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(config.label)
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$View$ManifestInfoModal$viewHeader = function(_v0) {
    var fullscreen = _v0.fullscreen;
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("modal-header", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("modal-title", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text("Manifest Info")
              ]
            )
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("modal-actions", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("modal-close-action", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$close,
                          isFullscreen: fullscreen,
                          label: "",
                          onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserClickedCloseManifestInfo)
                        }
                      )
                    ]
                  )
                )
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$View$ManifestInfoModal$viewManifestInfoModal = function(model) {
    return A2(
      $author$project$View$Helpers$viewIf,
      A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("modal-overlay", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("modal", true),
                        _Utils_Tuple2("is-narrow", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $author$project$View$ManifestInfoModal$viewHeader(model),
                  A2(
                    $author$project$View$ManifestInfoModal$viewBody,
                    model,
                    $author$project$Model$currentManifest(model)
                  )
                ]
              )
            )
          ]
        )
      ),
      model.manifestInfoOpen
    );
  };
  var $elm$html$Html$h1 = _VirtualDom_node("h1");
  var $rism_digital$elm_iiif$IIIF$Presentation$toLabel = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.label;
    }
  );
  var $author$project$View$viewManifestTitle = function(model) {
    return A2(
      $author$project$View$Helpers$viewIf,
      A2(
        $author$project$View$Helpers$viewMaybe,
        function(manifest) {
          var labelText = A2(
            $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap,
            model.detectedLanguage,
            $rism_digital$elm_iiif$IIIF$Presentation$toLabel(manifest)
          );
          return A2(
            $author$project$View$Helpers$viewIf,
            A2(
              $elm$html$Html$h1,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("diva-app-title", true),
                        _Utils_Tuple2("is-fullscreen", model.fullscreen)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(labelText)
                ]
              )
            ),
            !$elm$core$String$isEmpty(labelText)
          );
        },
        $author$project$Model$currentManifest(model)
      ),
      model.showTitle
    );
  };
  var $author$project$Msg$UserClickedPageViewImageChoice = function(a) {
    return { $: "UserClickedPageViewImageChoice", a };
  };
  var $author$project$View$PageViewModal$viewImageChoiceItem = F3(
    function(selectedIndex, index, image) {
      var isActive = _Utils_eq(index, selectedIndex);
      return A2(
        $elm$html$Html$button,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("page-view-choice", true),
                  _Utils_Tuple2("ui-card", true),
                  _Utils_Tuple2("ui-card--dark", true),
                  _Utils_Tuple2("is-active", isActive)
                ]
              )
            ),
            $elm$html$Html$Attributes$type_("button"),
            $elm$html$Html$Events$onClick(
              $author$project$Msg$UserClickedPageViewImageChoice(index)
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$img,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("page-view-choice-thumb", true)
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$src(image.thumbUrl),
                  $elm$html$Html$Attributes$alt(image.label)
                ]
              ),
              _List_Nil
            ),
            A2(
              $elm$html$Html$span,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("page-view-choice-label", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(image.label)
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$PageViewModal$viewImageChoicesSidebar = F2(
    function(images, selectedIndex) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("page-view-choices", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$indexedMap,
          F2(
            function(index, image) {
              return A4($elm$html$Html$Lazy$lazy3, $author$project$View$PageViewModal$viewImageChoiceItem, selectedIndex, index, image);
            }
          ),
          images
        )
      );
    }
  );
  var $author$project$Filters$IntAltBlueGamma = { $: "IntAltBlueGamma" };
  var $author$project$Filters$IntAltBlueHue = { $: "IntAltBlueHue" };
  var $author$project$Filters$IntAltBlueHueWindow = { $: "IntAltBlueHueWindow" };
  var $author$project$Filters$IntAltBlueSigmoid = { $: "IntAltBlueSigmoid" };
  var $author$project$Filters$IntAltBlueVibrance = { $: "IntAltBlueVibrance" };
  var $author$project$Filters$IntAltGreenGamma = { $: "IntAltGreenGamma" };
  var $author$project$Filters$IntAltGreenHue = { $: "IntAltGreenHue" };
  var $author$project$Filters$IntAltGreenHueWindow = { $: "IntAltGreenHueWindow" };
  var $author$project$Filters$IntAltGreenSigmoid = { $: "IntAltGreenSigmoid" };
  var $author$project$Filters$IntAltGreenVibrance = { $: "IntAltGreenVibrance" };
  var $author$project$Filters$IntAltRedGamma = { $: "IntAltRedGamma" };
  var $author$project$Filters$IntAltRedHue = { $: "IntAltRedHue" };
  var $author$project$Filters$IntAltRedHueWindow = { $: "IntAltRedHueWindow" };
  var $author$project$Filters$IntAltRedSigmoid = { $: "IntAltRedSigmoid" };
  var $author$project$Filters$IntAltRedVibrance = { $: "IntAltRedVibrance" };
  var $author$project$Filters$ToggleAltBlueGamma = { $: "ToggleAltBlueGamma" };
  var $author$project$Filters$ToggleAltBlueHue = { $: "ToggleAltBlueHue" };
  var $author$project$Filters$ToggleAltBlueSigmoid = { $: "ToggleAltBlueSigmoid" };
  var $author$project$Filters$ToggleAltBlueVibrance = { $: "ToggleAltBlueVibrance" };
  var $author$project$Filters$ToggleAltGreenGamma = { $: "ToggleAltGreenGamma" };
  var $author$project$Filters$ToggleAltGreenHue = { $: "ToggleAltGreenHue" };
  var $author$project$Filters$ToggleAltGreenSigmoid = { $: "ToggleAltGreenSigmoid" };
  var $author$project$Filters$ToggleAltGreenVibrance = { $: "ToggleAltGreenVibrance" };
  var $author$project$Filters$ToggleAltRedGamma = { $: "ToggleAltRedGamma" };
  var $author$project$Filters$ToggleAltRedHue = { $: "ToggleAltRedHue" };
  var $author$project$Filters$ToggleAltRedSigmoid = { $: "ToggleAltRedSigmoid" };
  var $author$project$Filters$ToggleAltRedVibrance = { $: "ToggleAltRedVibrance" };
  var $author$project$Msg$UserResetAltColourAdjust = { $: "UserResetAltColourAdjust" };
  var $author$project$Msg$UserUpdatedFilterInt = F2(
    function(a, b) {
      return { $: "UserUpdatedFilterInt", a, b };
    }
  );
  var $author$project$Msg$UserToggledFilterGroup = function(a) {
    return { $: "UserToggledFilterGroup", a };
  };
  var $author$project$View$PageViewModal$viewFilterGroup = F4(
    function(model, groupId, title, items) {
      var isExpanded = A2($elm$core$Set$member, groupId, model.filterGroupExpanded);
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("filter-group", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$cons,
          A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("filter-title-button", true),
                      _Utils_Tuple2("is-collapsed", !isExpanded)
                    ]
                  )
                ),
                $elm$html$Html$Events$onClick(
                  $author$project$Msg$UserToggledFilterGroup(groupId)
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-title-icon", true),
                            _Utils_Tuple2("is-expanded", isExpanded)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_Nil
                ),
                A2(
                  $elm$html$Html$span,
                  _List_Nil,
                  _List_fromArray(
                    [
                      $elm$html$Html$text(title)
                    ]
                  )
                )
              ]
            )
          ),
          isExpanded ? items : _List_Nil
        )
      );
    }
  );
  var $author$project$View$PageViewModal$viewFilterRow = function(items) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("filter-row", true)
              ]
            )
          )
        ]
      ),
      items
    );
  };
  var $elm$html$Html$Attributes$step = function(n) {
    return A2(_VirtualDom_attribute, "step", n);
  };
  var $author$project$View$PageViewModal$viewRangeInput = F5(
    function(minValue, maxValue, stepValue, currentValue, onChange) {
      var baseAttrs = _List_fromArray(
        [
          $elm$html$Html$Attributes$type_("range"),
          $elm$html$Html$Attributes$min(minValue),
          $elm$html$Html$Attributes$max(maxValue),
          $elm$html$Html$Attributes$value(currentValue),
          $elm$html$Html$Events$onInput(onChange)
        ]
      );
      var attrs = (function() {
        if (stepValue.$ === "Just") {
          var stepSize = stepValue.a;
          return A2(
            $elm$core$List$cons,
            $elm$html$Html$Attributes$step(stepSize),
            baseAttrs
          );
        } else {
          return baseAttrs;
        }
      })();
      return A2(
        $elm$html$Html$input,
        A2(
          $elm$core$List$cons,
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("filter-range-input", true)
              ]
            )
          ),
          attrs
        ),
        _List_Nil
      );
    }
  );
  var $author$project$View$PageViewModal$viewRangeRow = function(config) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("filter-range-group", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("filter-range-header", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-label", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(config.label)
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-value", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(config.display)
                    ]
                  )
                )
              ]
            )
          ),
          A5($author$project$View$PageViewModal$viewRangeInput, config.min, config.max, config.step, config.value, config.onInput)
        ]
      )
    );
  };
  var $author$project$Msg$UserToggledFilter = F2(
    function(a, b) {
      return { $: "UserToggledFilter", a, b };
    }
  );
  var $elm$html$Html$Attributes$checked = $elm$html$Html$Attributes$boolProperty("checked");
  var $elm$html$Html$label = _VirtualDom_node("label");
  var $elm$html$Html$Events$targetChecked = A2(
    $elm$json$Json$Decode$at,
    _List_fromArray(
      ["target", "checked"]
    ),
    $elm$json$Json$Decode$bool
  );
  var $elm$html$Html$Events$onCheck = function(tagger) {
    return A2(
      $elm$html$Html$Events$on,
      "change",
      A2($elm$json$Json$Decode$map, tagger, $elm$html$Html$Events$targetChecked)
    );
  };
  var $author$project$View$PageViewModal$viewToggleRangeRow = function(config) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("filter-range-group", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("filter-range-header", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$label,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-toggle", true),
                            _Utils_Tuple2("is-inline", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      A2(
                        $elm$html$Html$input,
                        _List_fromArray(
                          [
                            $elm$html$Html$Attributes$type_("checkbox"),
                            $elm$html$Html$Attributes$checked(config.checked),
                            $elm$html$Html$Events$onCheck(
                              $author$project$Msg$UserToggledFilter(config.onToggle)
                            )
                          ]
                        ),
                        _List_Nil
                      ),
                      $elm$html$Html$text(config.label)
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-value", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(config.display)
                    ]
                  )
                )
              ]
            )
          ),
          A5($author$project$View$PageViewModal$viewRangeInput, config.min, config.max, config.step, config.value, config.onInput)
        ]
      )
    );
  };
  var $author$project$View$PageViewModal$viewAdvancedColourAdjustGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "advanced-colour-adjust",
      "Advanced colour adjust",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$button,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-reset", true)
                          ]
                        )
                      ),
                      $elm$html$Html$Attributes$type_("button"),
                      $elm$html$Html$Events$onClick($author$project$Msg$UserResetAltColourAdjust)
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Reset sliders")
                    ]
                  )
                )
              ]
            )
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altRedGammaEnabled,
              display: $elm$core$String$fromInt(model.filters.altRedGamma),
              label: "Red Gamma",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltRedGamma),
              onToggle: $author$project$Filters$ToggleAltRedGamma,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altRedGamma)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altRedSigmoidEnabled,
              display: $elm$core$String$fromInt(model.filters.altRedSigmoid),
              label: "Red Sigmoid",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltRedSigmoid),
              onToggle: $author$project$Filters$ToggleAltRedSigmoid,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altRedSigmoid)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altRedHueEnabled,
              display: $elm$core$String$fromInt(model.filters.altRedHue),
              label: "Red Hue Boost",
              max: "100",
              min: "-100",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltRedHue),
              onToggle: $author$project$Filters$ToggleAltRedHue,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altRedHue)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromInt(model.filters.altRedHueWindow),
              label: "Red Hue Window",
              max: "30",
              min: "2",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltRedHueWindow),
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altRedHueWindow)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altRedVibranceEnabled,
              display: $elm$core$String$fromInt(model.filters.altRedVibrance),
              label: "Red Vibrance",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltRedVibrance),
              onToggle: $author$project$Filters$ToggleAltRedVibrance,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altRedVibrance)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altGreenGammaEnabled,
              display: $elm$core$String$fromInt(model.filters.altGreenGamma),
              label: "Green Gamma",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltGreenGamma),
              onToggle: $author$project$Filters$ToggleAltGreenGamma,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altGreenGamma)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altGreenSigmoidEnabled,
              display: $elm$core$String$fromInt(model.filters.altGreenSigmoid),
              label: "Green Sigmoid",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltGreenSigmoid),
              onToggle: $author$project$Filters$ToggleAltGreenSigmoid,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altGreenSigmoid)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altGreenHueEnabled,
              display: $elm$core$String$fromInt(model.filters.altGreenHue),
              label: "Green Hue Boost",
              max: "100",
              min: "-100",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltGreenHue),
              onToggle: $author$project$Filters$ToggleAltGreenHue,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altGreenHue)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromInt(model.filters.altGreenHueWindow),
              label: "Green Hue Window",
              max: "30",
              min: "2",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltGreenHueWindow),
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altGreenHueWindow)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altGreenVibranceEnabled,
              display: $elm$core$String$fromInt(model.filters.altGreenVibrance),
              label: "Green Vibrance",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltGreenVibrance),
              onToggle: $author$project$Filters$ToggleAltGreenVibrance,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altGreenVibrance)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altBlueGammaEnabled,
              display: $elm$core$String$fromInt(model.filters.altBlueGamma),
              label: "Blue Gamma",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltBlueGamma),
              onToggle: $author$project$Filters$ToggleAltBlueGamma,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altBlueGamma)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altBlueSigmoidEnabled,
              display: $elm$core$String$fromInt(model.filters.altBlueSigmoid),
              label: "Blue Sigmoid",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltBlueSigmoid),
              onToggle: $author$project$Filters$ToggleAltBlueSigmoid,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altBlueSigmoid)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altBlueHueEnabled,
              display: $elm$core$String$fromInt(model.filters.altBlueHue),
              label: "Blue Hue Boost",
              max: "100",
              min: "-100",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltBlueHue),
              onToggle: $author$project$Filters$ToggleAltBlueHue,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altBlueHue)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromInt(model.filters.altBlueHueWindow),
              label: "Blue Hue Window",
              max: "30",
              min: "2",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltBlueHueWindow),
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altBlueHueWindow)
            }
          ),
          $author$project$View$PageViewModal$viewToggleRangeRow(
            {
              checked: model.filters.altBlueVibranceEnabled,
              display: $elm$core$String$fromInt(model.filters.altBlueVibrance),
              label: "Blue Vibrance",
              max: "100",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAltBlueVibrance),
              onToggle: $author$project$Filters$ToggleAltBlueVibrance,
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.altBlueVibrance)
            }
          )
        ]
      )
    );
  };
  var $author$project$Filters$FloatContrast = { $: "FloatContrast" };
  var $author$project$Filters$FloatGamma = { $: "FloatGamma" };
  var $author$project$Filters$IntBrightness = { $: "IntBrightness" };
  var $author$project$Filters$IntCcBlue = { $: "IntCcBlue" };
  var $author$project$Filters$IntCcGreen = { $: "IntCcGreen" };
  var $author$project$Filters$IntCcRed = { $: "IntCcRed" };
  var $author$project$Filters$IntHue = { $: "IntHue" };
  var $author$project$Filters$IntSaturation = { $: "IntSaturation" };
  var $author$project$Filters$IntVibrance = { $: "IntVibrance" };
  var $author$project$Filters$ToggleBrightness = { $: "ToggleBrightness" };
  var $author$project$Filters$ToggleCcBlue = { $: "ToggleCcBlue" };
  var $author$project$Filters$ToggleCcGreen = { $: "ToggleCcGreen" };
  var $author$project$Filters$ToggleCcRed = { $: "ToggleCcRed" };
  var $author$project$Filters$ToggleContrast = { $: "ToggleContrast" };
  var $author$project$Filters$ToggleGamma = { $: "ToggleGamma" };
  var $author$project$Filters$ToggleHue = { $: "ToggleHue" };
  var $author$project$Filters$ToggleSaturation = { $: "ToggleSaturation" };
  var $author$project$Filters$ToggleVibrance = { $: "ToggleVibrance" };
  var $author$project$Msg$UserUpdatedFilterFloat = F2(
    function(a, b) {
      return { $: "UserUpdatedFilterFloat", a, b };
    }
  );
  var $author$project$View$PageViewModal$colourAdjustToggleRanges = function(model) {
    return _List_fromArray(
      [
        {
          checked: model.filters.brightnessEnabled,
          display: $elm$core$String$fromInt(model.filters.brightness),
          label: "Brightness",
          max: "255",
          min: "-255",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntBrightness),
          onToggle: $author$project$Filters$ToggleBrightness,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.brightness)
        },
        {
          checked: model.filters.contrastEnabled,
          display: $elm$core$String$fromFloat(model.filters.contrast),
          label: "Contrast",
          max: "4",
          min: "0",
          onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatContrast),
          onToggle: $author$project$Filters$ToggleContrast,
          step: $elm$core$Maybe$Just("0.1"),
          value: $elm$core$String$fromFloat(model.filters.contrast)
        },
        {
          checked: model.filters.gammaEnabled,
          display: $elm$core$String$fromFloat(model.filters.gamma),
          label: "Gamma",
          max: "4",
          min: "0.1",
          onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatGamma),
          onToggle: $author$project$Filters$ToggleGamma,
          step: $elm$core$Maybe$Just("0.1"),
          value: $elm$core$String$fromFloat(model.filters.gamma)
        },
        {
          checked: model.filters.saturationEnabled,
          display: $elm$core$String$fromInt(model.filters.saturation),
          label: "Saturation",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntSaturation),
          onToggle: $author$project$Filters$ToggleSaturation,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.saturation)
        },
        {
          checked: model.filters.vibranceEnabled,
          display: $elm$core$String$fromInt(model.filters.vibrance),
          label: "Vibrance",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntVibrance),
          onToggle: $author$project$Filters$ToggleVibrance,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.vibrance)
        },
        {
          checked: model.filters.hueEnabled,
          display: $elm$core$String$fromInt(model.filters.hue),
          label: "Hue",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntHue),
          onToggle: $author$project$Filters$ToggleHue,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.hue)
        },
        {
          checked: model.filters.ccRedEnabled,
          display: $elm$core$String$fromInt(model.filters.ccRed),
          label: "Red",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntCcRed),
          onToggle: $author$project$Filters$ToggleCcRed,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.ccRed)
        },
        {
          checked: model.filters.ccGreenEnabled,
          display: $elm$core$String$fromInt(model.filters.ccGreen),
          label: "Green",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntCcGreen),
          onToggle: $author$project$Filters$ToggleCcGreen,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.ccGreen)
        },
        {
          checked: model.filters.ccBlueEnabled,
          display: $elm$core$String$fromInt(model.filters.ccBlue),
          label: "Blue",
          max: "100",
          min: "-100",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntCcBlue),
          onToggle: $author$project$Filters$ToggleCcBlue,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.ccBlue)
        }
      ]
    );
  };
  var $author$project$View$PageViewModal$viewColourAdjustGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "colour-adjust",
      "Colour Adjust",
      A2(
        $elm$core$List$map,
        $author$project$View$PageViewModal$viewToggleRangeRow,
        $author$project$View$PageViewModal$colourAdjustToggleRanges(model)
      )
    );
  };
  var $author$project$Filters$IntColourmapCenter = { $: "IntColourmapCenter" };
  var $author$project$Filters$StringColourmapPreset = { $: "StringColourmapPreset" };
  var $author$project$Filters$ToggleColourmap = { $: "ToggleColourmap" };
  var $author$project$Msg$UserUpdatedFilterString = F2(
    function(a, b) {
      return { $: "UserUpdatedFilterString", a, b };
    }
  );
  var $elm$html$Html$option = _VirtualDom_node("option");
  var $author$project$View$PageViewModal$colourmapPresets = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("gray")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Gray")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("hot")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Hot")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("cool")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Cool")
          ]
        )
      )
    ]
  );
  var $elm$html$Html$select = _VirtualDom_node("select");
  var $author$project$View$PageViewModal$viewSelect = F3(
    function(currentValue, onChange, options) {
      return A2(
        $elm$html$Html$select,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("filter-select", true)
                ]
              )
            ),
            $elm$html$Html$Events$onInput(onChange),
            $elm$html$Html$Attributes$value(currentValue)
          ]
        ),
        options
      );
    }
  );
  var $author$project$View$PageViewModal$viewToggle = F3(
    function(labelText, isChecked, toggle) {
      return A2(
        $elm$html$Html$label,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("filter-toggle", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$input,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$type_("checkbox"),
                  $elm$html$Html$Attributes$checked(isChecked),
                  $elm$html$Html$Events$onCheck(
                    $author$project$Msg$UserToggledFilter(toggle)
                  )
                ]
              ),
              _List_Nil
            ),
            $elm$html$Html$text(labelText)
          ]
        )
      );
    }
  );
  var $author$project$View$PageViewModal$viewColourmapGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "colourmap",
      "Colourmap",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Colourmap", model.filters.colourmapEnabled, $author$project$Filters$ToggleColourmap),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  model.filters.colourmapPreset,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringColourmapPreset),
                  $author$project$View$PageViewModal$colourmapPresets
                )
              ]
            )
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromInt(model.filters.colourmapCenter),
              label: "Center",
              max: "255",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntColourmapCenter),
              step: $elm$core$Maybe$Nothing,
              value: $elm$core$String$fromInt(model.filters.colourmapCenter)
            }
          )
        ]
      )
    );
  };
  var $author$project$Filters$StringConvolutionPreset = { $: "StringConvolutionPreset" };
  var $author$project$Filters$ToggleConvolution = { $: "ToggleConvolution" };
  var $author$project$View$PageViewModal$convolutionPresets = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("sharpen")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Sharpen")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("blur")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Blur")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("edge")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Edge")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("emboss")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Emboss")
          ]
        )
      )
    ]
  );
  var $author$project$View$PageViewModal$viewConvolutionGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "convolution",
      "Convolution",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Kernel", model.filters.convolutionEnabled, $author$project$Filters$ToggleConvolution),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  model.filters.convolutionPreset,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringConvolutionPreset),
                  $author$project$View$PageViewModal$convolutionPresets
                )
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$Filters$IntAdaptiveOffset = { $: "IntAdaptiveOffset" };
  var $author$project$View$PageViewModal$adaptiveOffsetRange = function(model) {
    return {
      display: $elm$core$String$fromInt(model.filters.adaptiveOffset),
      label: "Offset",
      max: "50",
      min: "-50",
      onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAdaptiveOffset),
      step: $elm$core$Maybe$Just("1"),
      value: $elm$core$String$fromInt(model.filters.adaptiveOffset)
    };
  };
  var $author$project$Filters$FloatNormalizeStrength = { $: "FloatNormalizeStrength" };
  var $author$project$Filters$FloatUnsharpAmount = { $: "FloatUnsharpAmount" };
  var $author$project$Filters$IntAdaptiveWindow = { $: "IntAdaptiveWindow" };
  var $author$project$Filters$ToggleAdaptive = { $: "ToggleAdaptive" };
  var $author$project$Filters$ToggleNormalize = { $: "ToggleNormalize" };
  var $author$project$Filters$ToggleUnsharp = { $: "ToggleUnsharp" };
  var $author$project$View$PageViewModal$enhancementToggleRanges = function(model) {
    return _List_fromArray(
      [
        {
          checked: model.filters.normalizeEnabled,
          display: $elm$core$String$fromFloat(model.filters.normalizeStrength),
          label: "Normalize",
          max: "2",
          min: "0",
          onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatNormalizeStrength),
          onToggle: $author$project$Filters$ToggleNormalize,
          step: $elm$core$Maybe$Just("0.1"),
          value: $elm$core$String$fromFloat(model.filters.normalizeStrength)
        },
        {
          checked: model.filters.unsharpEnabled,
          display: $elm$core$String$fromFloat(model.filters.unsharpAmount),
          label: "Unsharp",
          max: "3",
          min: "0",
          onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatUnsharpAmount),
          onToggle: $author$project$Filters$ToggleUnsharp,
          step: $elm$core$Maybe$Just("0.1"),
          value: $elm$core$String$fromFloat(model.filters.unsharpAmount)
        },
        {
          checked: model.filters.adaptiveEnabled,
          display: $elm$core$String$fromInt(model.filters.adaptiveWindow),
          label: "Adaptive",
          max: "51",
          min: "3",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntAdaptiveWindow),
          onToggle: $author$project$Filters$ToggleAdaptive,
          step: $elm$core$Maybe$Just("2"),
          value: $elm$core$String$fromInt(model.filters.adaptiveWindow)
        }
      ]
    );
  };
  var $author$project$View$PageViewModal$viewEnhancementGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "enhancement",
      "Enhancement",
      _Utils_ap(
        A2(
          $elm$core$List$map,
          $author$project$View$PageViewModal$viewToggleRangeRow,
          $author$project$View$PageViewModal$enhancementToggleRanges(model)
        ),
        _List_fromArray(
          [
            $author$project$View$PageViewModal$viewRangeRow(
              $author$project$View$PageViewModal$adaptiveOffsetRange(model)
            )
          ]
        )
      )
    );
  };
  var $author$project$Msg$UserAppliedFilterJson = { $: "UserAppliedFilterJson" };
  var $author$project$Msg$UserCopiedFilterJson = { $: "UserCopiedFilterJson" };
  var $author$project$Msg$UserUpdatedFilterJsonInput = function(a) {
    return { $: "UserUpdatedFilterJsonInput", a };
  };
  var $elm$html$Html$Attributes$rows = function(n) {
    return A2(
      _VirtualDom_attribute,
      "rows",
      $elm$core$String$fromInt(n)
    );
  };
  var $elm$html$Html$textarea = _VirtualDom_node("textarea");
  var $author$project$View$PageViewModal$viewFilterJsonGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "filter-json",
      "Import / Export Filter Settings",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$button,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-reset", true)
                          ]
                        )
                      ),
                      $elm$html$Html$Attributes$type_("button"),
                      $elm$html$Html$Events$onClick($author$project$Msg$UserCopiedFilterJson)
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Show JSON")
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$button,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-reset", true)
                          ]
                        )
                      ),
                      $elm$html$Html$Attributes$type_("button"),
                      $elm$html$Html$Events$onClick($author$project$Msg$UserAppliedFilterJson)
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Apply")
                    ]
                  )
                )
              ]
            )
          ),
          A2(
            $elm$html$Html$textarea,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("filter-json", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$value(model.filtersJsonInput),
                $elm$html$Html$Events$onInput($author$project$Msg$UserUpdatedFilterJsonInput),
                $elm$html$Html$Attributes$rows(6)
              ]
            ),
            _List_Nil
          ),
          (function() {
            var _v0 = model.filtersJsonError;
            if (_v0.$ === "Just") {
              var err = _v0.a;
              return A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("filter-json-error", true)
                        ]
                      )
                    )
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text(err)
                  ]
                )
              );
            } else {
              return $elm$html$Html$text("");
            }
          })()
        ]
      )
    );
  };
  var $author$project$Filters$IntMorphKernel = { $: "IntMorphKernel" };
  var $author$project$Filters$StringMorphOperation = { $: "StringMorphOperation" };
  var $author$project$Filters$ToggleMorph = { $: "ToggleMorph" };
  var $author$project$View$PageViewModal$morphKernelOptions = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("3")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("3x3")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("5")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("5x5")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("7")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("7x7")
          ]
        )
      )
    ]
  );
  var $author$project$View$PageViewModal$morphOperationOptions = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("erode")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Erode")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("dilate")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Dilate")
          ]
        )
      )
    ]
  );
  var $author$project$View$PageViewModal$viewMorphologyGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "morphology",
      "Morphology",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Morph", model.filters.morphEnabled, $author$project$Filters$ToggleMorph),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  model.filters.morphOperation,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringMorphOperation),
                  $author$project$View$PageViewModal$morphOperationOptions
                ),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  $elm$core$String$fromInt(model.filters.morphKernel),
                  $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntMorphKernel),
                  $author$project$View$PageViewModal$morphKernelOptions
                )
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$Filters$StringPcaMode = { $: "StringPcaMode" };
  var $author$project$Filters$TogglePca = { $: "TogglePca" };
  var $author$project$View$PageViewModal$pcaModes = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("pca-rgb")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("PCA (RGB)")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("pca1")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("PCA Component 1")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("pca2")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("PCA Component 2")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("pca3")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("PCA Component 3")
          ]
        )
      )
    ]
  );
  var $author$project$View$PageViewModal$viewPcaGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "pca",
      "Principle Component Analysis",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "PCA", model.filters.pcaEnabled, $author$project$Filters$TogglePca),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  model.filters.pcaMode,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringPcaMode),
                  $author$project$View$PageViewModal$pcaModes
                )
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$Filters$FloatColourReplaceBlend = { $: "FloatColourReplaceBlend" };
  var $author$project$Filters$FloatPseudoColourBlue = { $: "FloatPseudoColourBlue" };
  var $author$project$Filters$FloatPseudoColourGreen = { $: "FloatPseudoColourGreen" };
  var $author$project$Filters$FloatPseudoColourRed = { $: "FloatPseudoColourRed" };
  var $author$project$Filters$IntColourReplaceTolerance = { $: "IntColourReplaceTolerance" };
  var $author$project$Filters$StringColourReplaceSource = { $: "StringColourReplaceSource" };
  var $author$project$Filters$StringColourReplaceTarget = { $: "StringColourReplaceTarget" };
  var $author$project$Filters$StringPseudoColourMode = { $: "StringPseudoColourMode" };
  var $author$project$Filters$ToggleColourReplace = { $: "ToggleColourReplace" };
  var $author$project$Filters$ToggleColourReplacePreserveLum = { $: "ToggleColourReplacePreserveLum" };
  var $author$project$Filters$TogglePseudoColour = { $: "TogglePseudoColour" };
  var $author$project$View$PageViewModal$pseudoColourModes = _List_fromArray(
    [
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("rg")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Red\u2013Green Diff")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("gb")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Green\u2013Blue Diff")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("rb")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Red\u2013Blue Diff")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("luma")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Luma False Colour")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("cmy")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("CMY False Colour")
          ]
        )
      ),
      A2(
        $elm$html$Html$option,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$value("heat")
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text("Heat Map")
          ]
        )
      )
    ]
  );
  var $author$project$View$PageViewModal$viewColourInput = F2(
    function(colourValue, onChange) {
      return A2(
        $elm$html$Html$input,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("filter-color-input", true)
                ]
              )
            ),
            $elm$html$Html$Attributes$type_("color"),
            $elm$html$Html$Attributes$value(colourValue),
            $elm$html$Html$Events$onInput(onChange)
          ]
        ),
        _List_Nil
      );
    }
  );
  var $author$project$View$PageViewModal$viewPseudoColourGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "pseudo-colour",
      "Pseudo Colour",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Pseudo-colour", model.filters.pseudoColourEnabled, $author$project$Filters$TogglePseudoColour),
                A3(
                  $author$project$View$PageViewModal$viewSelect,
                  model.filters.pseudoColourMode,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringPseudoColourMode),
                  $author$project$View$PageViewModal$pseudoColourModes
                )
              ]
            )
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromFloat(model.filters.pseudoColourRed),
              label: "Red Weight",
              max: "2",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatPseudoColourRed),
              step: $elm$core$Maybe$Just("0.01"),
              value: $elm$core$String$fromFloat(model.filters.pseudoColourRed)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromFloat(model.filters.pseudoColourGreen),
              label: "Green Weight",
              max: "2",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatPseudoColourGreen),
              step: $elm$core$Maybe$Just("0.01"),
              value: $elm$core$String$fromFloat(model.filters.pseudoColourGreen)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromFloat(model.filters.pseudoColourBlue),
              label: "Blue Weight",
              max: "2",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatPseudoColourBlue),
              step: $elm$core$Maybe$Just("0.01"),
              value: $elm$core$String$fromFloat(model.filters.pseudoColourBlue)
            }
          ),
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Replace Colour", model.filters.colourReplaceEnabled, $author$project$Filters$ToggleColourReplace)
              ]
            )
          ),
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-label", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Source")
                    ]
                  )
                ),
                A2(
                  $author$project$View$PageViewModal$viewColourInput,
                  model.filters.colourReplaceSource,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringColourReplaceSource)
                ),
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-label", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Target")
                    ]
                  )
                ),
                A2(
                  $author$project$View$PageViewModal$viewColourInput,
                  model.filters.colourReplaceTarget,
                  $author$project$Msg$UserUpdatedFilterString($author$project$Filters$StringColourReplaceTarget)
                )
              ]
            )
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromInt(model.filters.colourReplaceTolerance),
              label: "Tolerance",
              max: "255",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntColourReplaceTolerance),
              step: $elm$core$Maybe$Just("1"),
              value: $elm$core$String$fromInt(model.filters.colourReplaceTolerance)
            }
          ),
          $author$project$View$PageViewModal$viewRangeRow(
            {
              display: $elm$core$String$fromFloat(model.filters.colourReplaceBlend),
              label: "Strength",
              max: "1",
              min: "0",
              onInput: $author$project$Msg$UserUpdatedFilterFloat($author$project$Filters$FloatColourReplaceBlend),
              step: $elm$core$Maybe$Just("0.01"),
              value: $elm$core$String$fromFloat(model.filters.colourReplaceBlend)
            }
          ),
          $author$project$View$PageViewModal$viewFilterRow(
            _List_fromArray(
              [
                A3($author$project$View$PageViewModal$viewToggle, "Preserve Luminance", model.filters.colourReplacePreserveLum, $author$project$Filters$ToggleColourReplacePreserveLum)
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$Filters$ToggleGrayscale = { $: "ToggleGrayscale" };
  var $author$project$Filters$ToggleInvert = { $: "ToggleInvert" };
  var $author$project$Filters$IntThreshold = { $: "IntThreshold" };
  var $author$project$Filters$ToggleThreshold = { $: "ToggleThreshold" };
  var $author$project$View$PageViewModal$toneToggleRanges = function(model) {
    return _List_fromArray(
      [
        {
          checked: model.filters.thresholdEnabled,
          display: $elm$core$String$fromInt(model.filters.threshold),
          label: "Threshold",
          max: "255",
          min: "0",
          onInput: $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntThreshold),
          onToggle: $author$project$Filters$ToggleThreshold,
          step: $elm$core$Maybe$Nothing,
          value: $elm$core$String$fromInt(model.filters.threshold)
        }
      ]
    );
  };
  var $author$project$View$PageViewModal$viewToggleRows = function(items) {
    return A2(
      $elm$core$List$map,
      function(_v0) {
        var labelText = _v0.a;
        var isChecked = _v0.b;
        var toggle = _v0.c;
        return A3($author$project$View$PageViewModal$viewToggle, labelText, isChecked, toggle);
      },
      items
    );
  };
  var $author$project$View$PageViewModal$viewToneGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "tone",
      "Tone",
      _Utils_ap(
        $author$project$View$PageViewModal$viewToggleRows(
          _List_fromArray(
            [
              _Utils_Tuple3("Grayscale", model.filters.grayscale, $author$project$Filters$ToggleGrayscale),
              _Utils_Tuple3("Invert", model.filters.invert, $author$project$Filters$ToggleInvert)
            ]
          )
        ),
        A2(
          $elm$core$List$map,
          $author$project$View$PageViewModal$viewToggleRangeRow,
          $author$project$View$PageViewModal$toneToggleRanges(model)
        )
      )
    );
  };
  var $author$project$Filters$ToggleFlip = { $: "ToggleFlip" };
  var $author$project$View$PageViewModal$viewMirrorRow = function(model) {
    return $author$project$View$PageViewModal$viewFilterRow(
      _List_fromArray(
        [
          A3($author$project$View$PageViewModal$viewToggle, "Mirror", model.filters.flip, $author$project$Filters$ToggleFlip)
        ]
      )
    );
  };
  var $author$project$Filters$IntRotation = { $: "IntRotation" };
  var $author$project$View$PageViewModal$viewRotationRow = function(model) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("filter-range-group", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("filter-range-header", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-label", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Rotation")
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$span,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("filter-range-header-right", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      A2(
                        $elm$html$Html$span,
                        _List_fromArray(
                          [
                            $elm$html$Html$Attributes$classList(
                              _List_fromArray(
                                [
                                  _Utils_Tuple2("filter-value", true)
                                ]
                              )
                            )
                          ]
                        ),
                        _List_fromArray(
                          [
                            $elm$html$Html$text(
                              $elm$core$String$fromInt(model.filters.rotation) + "\xB0"
                            )
                          ]
                        )
                      ),
                      A2(
                        $elm$html$Html$button,
                        _List_fromArray(
                          [
                            $elm$html$Html$Attributes$classList(
                              _List_fromArray(
                                [
                                  _Utils_Tuple2("filter-reset", true)
                                ]
                              )
                            ),
                            $elm$html$Html$Attributes$type_("button"),
                            $elm$html$Html$Events$onClick(
                              A2($author$project$Msg$UserUpdatedFilterInt, $author$project$Filters$IntRotation, "0")
                            )
                          ]
                        ),
                        _List_fromArray(
                          [
                            $elm$html$Html$text("Reset")
                          ]
                        )
                      )
                    ]
                  )
                )
              ]
            )
          ),
          A5(
            $author$project$View$PageViewModal$viewRangeInput,
            "-180",
            "180",
            $elm$core$Maybe$Just("1"),
            $elm$core$String$fromInt(model.filters.rotation),
            $author$project$Msg$UserUpdatedFilterInt($author$project$Filters$IntRotation)
          )
        ]
      )
    );
  };
  var $author$project$View$PageViewModal$viewTransformGroup = function(model) {
    return A4(
      $author$project$View$PageViewModal$viewFilterGroup,
      model,
      "transform",
      "Transform",
      _List_fromArray(
        [
          $author$project$View$PageViewModal$viewRotationRow(model),
          $author$project$View$PageViewModal$viewMirrorRow(model)
        ]
      )
    );
  };
  var $author$project$View$PageViewModal$viewModalSidebar = function(model) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("modal-sidebar", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewTransformGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewToneGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewColourAdjustGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewMorphologyGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewConvolutionGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewColourmapGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewPseudoColourGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewPcaGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewAdvancedColourAdjustGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewEnhancementGroup, model),
          A2($elm$html$Html$Lazy$lazy, $author$project$View$PageViewModal$viewFilterJsonGroup, model)
        ]
      )
    );
  };
  var $author$project$View$PageViewModal$viewModalViewer = F2(
    function(fullscreen, isOuterLeft) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("modal-viewer", true),
                  _Utils_Tuple2("is-fullscreen", fullscreen),
                  _Utils_Tuple2("is-outer-left", isOuterLeft)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("modal-canvas", true)
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$id("filter-viewer")
                ]
              ),
              _List_Nil
            )
          ]
        )
      );
    }
  );
  var $author$project$View$PageViewModal$viewModalBody = function(model) {
    var currentPage = A2(
      $elm$core$Maybe$andThen,
      function(index) {
        return A2($author$project$Model$getPageAt, index, model.pages);
      },
      model.selectedIndex
    );
    var hasChoices = A2(
      $elm$core$Maybe$withDefault,
      false,
      A2(
        $elm$core$Maybe$map,
        function(page) {
          return $elm$core$List$length(page.images) > 1;
        },
        currentPage
      )
    );
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("modal-body", true),
                _Utils_Tuple2("is-no-gap", true),
                _Utils_Tuple2("is-fullscreen", model.pageViewFullscreen),
                _Utils_Tuple2("is-with-choices", hasChoices),
                _Utils_Tuple2("is-no-sidebar", !model.pageViewSidebarVisible),
                _Utils_Tuple2("is-with-choices-no-sidebar", hasChoices && !model.pageViewSidebarVisible)
              ]
            )
          )
        ]
      ),
      (function() {
        var _v0 = _Utils_Tuple3(hasChoices, currentPage, model.pageViewSidebarVisible);
        if (!_v0.c) {
          if (_v0.a && _v0.b.$ === "Just") {
            var page = _v0.b.a;
            return _List_fromArray(
              [
                A2($author$project$View$PageViewModal$viewImageChoicesSidebar, page.images, model.pageViewImageIndex),
                A2($author$project$View$PageViewModal$viewModalViewer, model.pageViewFullscreen, false)
              ]
            );
          } else {
            return _List_fromArray(
              [
                A2($author$project$View$PageViewModal$viewModalViewer, model.pageViewFullscreen, true)
              ]
            );
          }
        } else {
          if (_v0.a && _v0.b.$ === "Just") {
            var page = _v0.b.a;
            return _List_fromArray(
              [
                A2($author$project$View$PageViewModal$viewImageChoicesSidebar, page.images, model.pageViewImageIndex),
                A2($author$project$View$PageViewModal$viewModalViewer, model.pageViewFullscreen, false),
                $author$project$View$PageViewModal$viewModalSidebar(model)
              ]
            );
          } else {
            return _List_fromArray(
              [
                A2($author$project$View$PageViewModal$viewModalViewer, model.pageViewFullscreen, true),
                $author$project$View$PageViewModal$viewModalSidebar(model)
              ]
            );
          }
        }
      })()
    );
  };
  var $author$project$Msg$UserClickedClosePageView = { $: "UserClickedClosePageView" };
  var $author$project$Msg$UserClickedPageViewNext = { $: "UserClickedPageViewNext" };
  var $author$project$Msg$UserClickedPageViewPrev = { $: "UserClickedPageViewPrev" };
  var $author$project$Msg$UserClickedSaveFilteredImage = { $: "UserClickedSaveFilteredImage" };
  var $author$project$Msg$UserToggledPageViewFullscreen = { $: "UserToggledPageViewFullscreen" };
  var $author$project$Msg$UserToggledPageViewSidebar = { $: "UserToggledPageViewSidebar" };
  var $author$project$View$PageViewModal$currentPageLabelFor = function(model) {
    return A2(
      $elm$core$Maybe$withDefault,
      "",
      A2(
        $elm$core$Maybe$map,
        function($) {
          return $.label;
        },
        A2(
          $elm$core$Maybe$andThen,
          function(index) {
            return A2($author$project$Model$getPageAt, index, model.pages);
          },
          model.selectedIndex
        )
      )
    );
  };
  var $author$project$Utilites$disabledIf = F2(
    function(disabled, msg) {
      return disabled ? $elm$core$Maybe$Nothing : $elm$core$Maybe$Just(msg);
    }
  );
  var $author$project$View$Icons$downloadSelection = A2(
    $author$project$View$Icons$icon,
    "0 0 448 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M114.2 320L224 430 333.8 320H280c-13.3 0-24-10.7-24-24V176H192V296c0 13.3-10.7 24-24 24H114.2zM224 480c-11.5 0-22.5-4.6-30.6-12.7L77.6 351.2C68.9 342.5 64 330.7 64 318.4c0-25.6 20.8-46.4 46.4-46.4H144V176c0-26.5 21.5-48 48-48h64c26.5 0 48 21.5 48 48v96h33.6c25.6 0 46.4 20.8 46.4 46.4c0 12.3-4.9 24.1-13.6 32.8L254.6 467.3c-8.1 8.1-19.1 12.7-30.6 12.7zM32 96a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm96 0a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm64-32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 96a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm64-32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$fromFullscreen = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M7 7C-2.3 16.4-2.3 31.6 7 41l80 80L41.4 166.6c-6 6-9.4 14.1-9.4 22.6V192c0 17.7 14.3 32 32 32H192c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32h-2.7c-8.5 0-16.6 3.4-22.6 9.4L121 87 41 7C31.6-2.3 16.4-2.3 7 7zM505 41c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L391 87 345.4 41.4c-6-6-14.1-9.4-22.6-9.4H320c-17.7 0-32 14.3-32 32V192c0 17.7 14.3 32 32 32H448c17.7 0 32-14.3 32-32v-2.7c0-8.5-3.4-16.6-9.4-22.6L425 121l80-80zM505 471l-80-80 45.7-45.7c6-6 9.4-14.1 9.4-22.6V320c0-17.7-14.3-32-32-32H320c-17.7 0-32 14.3-32 32V448c0 17.7 14.3 32 32 32h2.7c8.5 0 16.6-3.4 22.6-9.4L391 425l80 80c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9zM7 471c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80 45.7 45.7c6 6 14.1 9.4 22.6 9.4H192c17.7 0 32-14.3 32-32V320c0-17.7-14.3-32-32-32H64c-17.7 0-32 14.3-32 32v2.7c0 8.5 3.4 16.6 9.4 22.6L87 391 7 471zM412.1 176H336V99.9L412.1 176zM336 412.1V336h76.1L336 412.1zM99.9 176L176 99.9V176H99.9zM176 412.1L99.9 336H176v76.1z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$hideSidebar = A2(
    $author$project$View$Icons$icon,
    "0 0 640 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M24 64c13.3 0 24 10.7 24 24l0 336c0 13.3-10.7 24-24 24s-24-10.7-24-24L0 88C0 74.7 10.7 64 24 64zm217 71c9.4 9.4 9.4 24.6 0 33.9l-63 63 284.1 0-63-63c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L537 239c9.4 9.4 9.4 24.6 0 33.9L433 377c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l63-63-284.1 0 63 63c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0L103 273c-9.4-9.4-9.4-24.6 0-33.9L207 135c9.4-9.4 24.6-9.4 33.9 0zM640 88V424c0 13.3-10.7 24-24 24s-24-10.7-24-24V88c0-13.3 10.7-24 24-24s24 10.7 24 24z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$PageViewModal$manifestTitleFor = function(model) {
    return A2(
      $elm$core$Maybe$withDefault,
      "",
      A2(
        $elm$core$Maybe$map,
        function(m) {
          return A2(
            $rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap,
            model.detectedLanguage,
            $rism_digital$elm_iiif$IIIF$Presentation$toLabel(m)
          );
        },
        $author$project$Model$currentManifest(model)
      )
    );
  };
  var $author$project$View$Icons$nextPage = A2(
    $author$project$View$Icons$icon,
    "0 0 24 24",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M8.59 16.59L10 18L16 12L10 6L8.59 7.41L13.17 12L8.59 16.59z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$prevPage = A2(
    $author$project$View$Icons$icon,
    "0 0 24 24",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M15.41 7.41L14 6L8 12L14 18L15.41 16.59L10.83 12L15.41 7.41z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$showSidebar = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M295 401L167 273c-9.4-9.4-9.4-24.6 0-33.9L295 111c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-87 87L488 232c13.3 0 24 10.7 24 24s-10.7 24-24 24l-246.1 0 87 87c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0zM168 80L88 80c-22.1 0-40 17.9-40 40l0 272c0 22.1 17.9 40 40 40l80 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-48.6 0-88-39.4-88-88L0 120C0 71.4 39.4 32 88 32l80 0c13.3 0 24 10.7 24 24s-10.7 24-24 24z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$toFullscreen = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M156.1 80H80v76.1L156.1 80zM32 192V64c0-17.7 14.3-32 32-32H192c17.7 0 32 14.3 32 32v2.7c0 8.5-3.4 16.6-9.4 22.6L169 135l87 87 87-87L297.4 89.4c-6-6-9.4-14.1-9.4-22.6V64c0-17.7 14.3-32 32-32H448c17.7 0 32 14.3 32 32V192c0 17.7-14.3 32-32 32h-2.7c-8.5 0-16.6-3.4-22.6-9.4L377 169l-87 87 87 87 45.7-45.7c6-6 14.1-9.4 22.6-9.4H448c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H320c-17.7 0-32-14.3-32-32v-2.7c0-8.5 3.4-16.6 9.4-22.6L343 377l-87-87-87 87 45.7 45.7c6 6 9.4 14.1 9.4 22.6V448c0 17.7-14.3 32-32 32H64c-17.7 0-32-14.3-32-32V320c0-17.7 14.3-32 32-32h2.7c8.5 0 16.6 3.4 22.6 9.4L135 343l87-87-87-87L89.4 214.6c-6 6-14.1 9.4-22.6 9.4H64c-17.7 0-32-14.3-32-32zM355.9 432H432V355.9L355.9 432zM80 355.9V432h76.1L80 355.9zM355.9 80L432 156.1V80H355.9z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$PageViewModal$viewModalHeader = function(model) {
    var pageLabel = $author$project$View$PageViewModal$currentPageLabelFor(model);
    var manifestTitle = $author$project$View$PageViewModal$manifestTitleFor(model);
    var _v0 = model.pageViewSidebarVisible ? _Utils_Tuple2($author$project$View$Icons$hideSidebar, "Hide filters") : _Utils_Tuple2($author$project$View$Icons$showSidebar, "Show filters");
    var sidebarIcon = _v0.a;
    var sidebarLabel = _v0.b;
    var _v1 = (function() {
      var _v2 = model.selectedIndex;
      if (_v2.$ === "Just") {
        var index = _v2.a;
        return _Utils_Tuple2(
          index <= 0,
          _Utils_cmp(
            index,
            $elm$core$List$length(model.pages) - 1
          ) > -1
        );
      } else {
        return _Utils_Tuple2(true, true);
      }
    })();
    var prevDisabled = _v1.a;
    var nextDisabled = _v1.b;
    var _v3 = model.pageViewFullscreen ? _Utils_Tuple2($author$project$View$Icons$fromFullscreen, "Exit fullscreen") : _Utils_Tuple2($author$project$View$Icons$toFullscreen, "Fullscreen");
    var fullscreenIcon = _v3.a;
    var fullscreenLabel = _v3.b;
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("modal-header", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("modal-title-stack", true)
                    ]
                  )
                )
              ]
            ),
            A2(
              $elm$core$List$cons,
              A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("modal-title", true)
                        ]
                      )
                    )
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text("Page View")
                  ]
                )
              ),
              _Utils_ap(
                $elm$core$String$isEmpty(manifestTitle) ? _List_Nil : _List_fromArray(
                  [
                    A2(
                      $elm$html$Html$div,
                      _List_fromArray(
                        [
                          $elm$html$Html$Attributes$classList(
                            _List_fromArray(
                              [
                                _Utils_Tuple2("modal-subtitle", true)
                              ]
                            )
                          )
                        ]
                      ),
                      _List_fromArray(
                        [
                          $elm$html$Html$text(manifestTitle)
                        ]
                      )
                    )
                  ]
                ),
                $elm$core$String$isEmpty(pageLabel) ? _List_Nil : _List_fromArray(
                  [
                    A2(
                      $elm$html$Html$div,
                      _List_fromArray(
                        [
                          $elm$html$Html$Attributes$classList(
                            _List_fromArray(
                              [
                                _Utils_Tuple2("modal-subtitle", true),
                                _Utils_Tuple2("is-muted", true)
                              ]
                            )
                          )
                        ]
                      ),
                      _List_fromArray(
                        [
                          $elm$html$Html$text(pageLabel)
                        ]
                      )
                    )
                  ]
                )
              )
            )
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("modal-actions", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $author$project$View$Helpers$viewButton(
                  {
                    icon: $author$project$View$Icons$prevPage,
                    isFullscreen: model.fullscreen,
                    label: "Previous Page",
                    onClickMsg: A2($author$project$Utilites$disabledIf, prevDisabled, $author$project$Msg$UserClickedPageViewPrev)
                  }
                ),
                $author$project$View$Helpers$viewButton(
                  {
                    icon: $author$project$View$Icons$nextPage,
                    isFullscreen: model.fullscreen,
                    label: "Next Page",
                    onClickMsg: A2($author$project$Utilites$disabledIf, nextDisabled, $author$project$Msg$UserClickedPageViewNext)
                  }
                ),
                $author$project$View$Helpers$viewButton(
                  {
                    icon: $author$project$View$Icons$downloadSelection,
                    isFullscreen: model.fullscreen,
                    label: "Save view",
                    onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserClickedSaveFilteredImage)
                  }
                ),
                $author$project$View$Helpers$viewButton(
                  {
                    icon: sidebarIcon,
                    isFullscreen: model.fullscreen,
                    label: sidebarLabel,
                    onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserToggledPageViewSidebar)
                  }
                ),
                $author$project$View$Helpers$viewButton(
                  {
                    icon: fullscreenIcon,
                    isFullscreen: model.fullscreen,
                    label: fullscreenLabel,
                    onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserToggledPageViewFullscreen)
                  }
                ),
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("modal-close-action", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$close,
                          isFullscreen: model.fullscreen,
                          label: "",
                          onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserClickedClosePageView)
                        }
                      )
                    ]
                  )
                )
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$View$PageViewModal$viewPageViewModal = function(model) {
    return A2(
      $author$project$View$Helpers$viewIf,
      A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("modal-overlay", true),
                  _Utils_Tuple2("is-fullscreen", model.pageViewFullscreen)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("modal", true),
                        _Utils_Tuple2("is-fullscreen", model.pageViewFullscreen),
                        _Utils_Tuple2("is-page-view", !model.pageViewFullscreen)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $author$project$View$PageViewModal$viewModalHeader(model),
                  $author$project$View$PageViewModal$viewModalBody(model)
                ]
              )
            )
          ]
        )
      ),
      model.pageViewOpen
    );
  };
  var $rism_digital$elm_iiif$IIIF$Presentation$toRequiredStatement = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.requiredStatement;
    }
  );
  var $author$project$View$viewRequiredStatement = function(model) {
    return A2(
      $author$project$View$Helpers$viewMaybe,
      function(manifest) {
        return A2(
          $author$project$View$Helpers$viewMaybe,
          function(statement) {
            var valueText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, model.detectedLanguage, statement.value);
            return A2(
              $author$project$View$Helpers$viewIf,
              A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("required-statement", true)
                        ]
                      )
                    )
                  ]
                ),
                $author$project$View$HtmlRenderer$renderHtml(valueText)
              ),
              !$elm$core$String$isEmpty(valueText)
            );
          },
          $rism_digital$elm_iiif$IIIF$Presentation$toRequiredStatement(manifest)
        );
      },
      $author$project$Model$currentManifest(model)
    );
  };
  var $author$project$Msg$UserToggledContents = { $: "UserToggledContents" };
  var $author$project$Msg$UserToggledMetadata = { $: "UserToggledMetadata" };
  var $author$project$Msg$UserToggledThumbnails = { $: "UserToggledThumbnails" };
  var $rism_digital$elm_iiif$IIIF$Presentation$toMetadata = $rism_digital$elm_iiif$IIIF$Presentation$withManifest(
    function($) {
      return $.metadata;
    }
  );
  var $author$project$View$Sidebar$hasManifestMetadata = function(manifest) {
    var hasMetadataEntries = !$elm$core$List$isEmpty(
      $rism_digital$elm_iiif$IIIF$Presentation$toMetadata(manifest)
    );
    var hasHomepageEntries = (function() {
      var _v0 = $rism_digital$elm_iiif$IIIF$Presentation$toHomepage(manifest);
      if (_v0.$ === "Just") {
        var links = _v0.a;
        return !$elm$core$List$isEmpty(links);
      } else {
        return false;
      }
    })();
    return hasMetadataEntries || hasHomepageEntries;
  };
  var $author$project$View$Sidebar$isSidebarVisible = function(state) {
    return !_Utils_eq(state, $author$project$Model$SidebarHidden);
  };
  var $author$project$View$Sidebar$viewContentsEmptyBody = A2(
    $elm$html$Html$div,
    _List_fromArray(
      [
        $elm$html$Html$Attributes$classList(
          _List_fromArray(
            [
              _Utils_Tuple2("contents-empty", true)
            ]
          )
        )
      ]
    ),
    _List_fromArray(
      [
        $elm$html$Html$text("No contents available.")
      ]
    )
  );
  var $author$project$Msg$UserClickedRange = F2(
    function(a, b) {
      return { $: "UserClickedRange", a, b };
    }
  );
  var $author$project$View$Sidebar$metadataEntry = F2(
    function(language, entry) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("metadata-item", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("metadata-label", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(
                    A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, entry.label)
                  )
                ]
              )
            ),
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("metadata-value", true)
                      ]
                    )
                  )
                ]
              ),
              $author$project$View$HtmlRenderer$renderHtml(
                A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, entry.value)
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewRangeMetadata = F2(
    function(language, metadata) {
      return $elm$core$List$isEmpty(metadata) ? _List_Nil : _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-meta", true)
                    ]
                  )
                )
              ]
            ),
            A2(
              $elm$core$List$map,
              $author$project$View$Sidebar$metadataEntry(language),
              metadata
            )
          )
        ]
      );
    }
  );
  var $author$project$View$Sidebar$viewRangeItems = F3(
    function(model, rangeIndexMap, items) {
      var rendered = A2(
        $elm$core$List$filterMap,
        function(item) {
          if (item.$ === "RangeCanvas") {
            return $elm$core$Maybe$Nothing;
          } else {
            var range = item.a;
            return $elm$core$Maybe$Just(
              A4($elm$html$Html$Lazy$lazy3, $author$project$View$Sidebar$viewRangeNode, model, rangeIndexMap, range)
            );
          }
        },
        items
      );
      return $elm$core$List$isEmpty(rendered) ? _List_Nil : _List_fromArray(
        [
          A2(
            $elm$html$Html$ul,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-list-nested", true),
                      _Utils_Tuple2("list-reset", true)
                    ]
                  )
                )
              ]
            ),
            rendered
          )
        ]
      );
    }
  );
  var $author$project$View$Sidebar$viewRangeNode = F3(
    function(model, rangeIndexMap, range) {
      var metadataBlock = _Utils_eq(
        model.selectedRangeId,
        $elm$core$Maybe$Just(range.id)
      ) ? A2($author$project$View$Sidebar$viewRangeMetadata, model.detectedLanguage, range.metadata) : _List_Nil;
      var maybeIndex = A2(
        $elm$core$Maybe$withDefault,
        $elm$core$Maybe$Nothing,
        A2($elm$core$Dict$get, range.id, rangeIndexMap)
      );
      var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, model.detectedLanguage, range.label);
      var labelNode = (function() {
        if (maybeIndex.$ === "Just") {
          var index = maybeIndex.a;
          return A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-button", true),
                      _Utils_Tuple2("ui-button", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$type_("button"),
                $elm$html$Html$Events$onClick(
                  A2(
                    $author$project$Msg$UserClickedRange,
                    range.id,
                    $elm$core$Maybe$Just(index)
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(
                  $elm$core$String$isEmpty(labelText) ? "[Untitled range]" : labelText
                )
              ]
            )
          );
        } else {
          return A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-button", true),
                      _Utils_Tuple2("ui-button", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$type_("button"),
                $elm$html$Html$Events$onClick(
                  A2($author$project$Msg$UserClickedRange, range.id, $elm$core$Maybe$Nothing)
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(
                  $elm$core$String$isEmpty(labelText) ? "[Untitled range]" : labelText
                )
              ]
            )
          );
        }
      })();
      var children = A3($author$project$View$Sidebar$viewRangeItems, model, rangeIndexMap, range.items);
      return A2(
        $elm$html$Html$li,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("contents-item", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$cons,
          labelNode,
          _Utils_ap(metadataBlock, children)
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewRangeList = F3(
    function(model, rangeIndexMap, ranges) {
      return A2(
        $elm$html$Html$ul,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("contents-list", true),
                  _Utils_Tuple2("list-reset", true)
                ]
              )
            )
          ]
        ),
        A2(
          $elm$core$List$map,
          A3($elm$html$Html$Lazy$lazy3, $author$project$View$Sidebar$viewRangeNode, model, rangeIndexMap),
          ranges
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewContentsIndexBody = F2(
    function(model, manifest) {
      var _v0 = $rism_digital$elm_iiif$IIIF$Presentation$toRanges(manifest);
      if (_v0.$ === "Just") {
        var list = _v0.a;
        return $elm$core$List$isEmpty(list) ? $author$project$View$Sidebar$viewContentsEmptyBody : A3($author$project$View$Sidebar$viewRangeList, model, model.rangeIndexMap, list);
      } else {
        return $author$project$View$Sidebar$viewContentsEmptyBody;
      }
    }
  );
  var $author$project$Msg$UserSelectedContentsIndex = { $: "UserSelectedContentsIndex" };
  var $author$project$Msg$UserSelectedContentsPages = { $: "UserSelectedContentsPages" };
  var $author$project$View$Sidebar$viewContentsToggle = F2(
    function(viewMode, contentsView) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("contents-view-tabs", true)
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [
            A2(
              $elm$html$Html$button,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("contents-view-button", true),
                        _Utils_Tuple2(
                          "is-active",
                          _Utils_eq(contentsView, $author$project$Model$ContentsIndex)
                        )
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$type_("button"),
                  $elm$html$Html$Events$onClick($author$project$Msg$UserSelectedContentsIndex)
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text("Index")
                ]
              )
            ),
            A2(
              $elm$html$Html$button,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("contents-view-button", true),
                        _Utils_Tuple2(
                          "is-active",
                          _Utils_eq(contentsView, $author$project$Model$ContentsPages)
                        )
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$type_("button"),
                  $elm$html$Html$Events$onClick($author$project$Msg$UserSelectedContentsPages)
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(
                    (function() {
                      if (viewMode.$ === "OneUp") {
                        return "On this page";
                      } else {
                        return "On these pages";
                      }
                    })()
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$Sidebar$currentCanvasId = F2(
    function(model, manifest) {
      return A2(
        $elm$core$Maybe$map,
        function($) {
          return $.id;
        },
        A2(
          $elm$core$Maybe$andThen,
          function(index) {
            return $elm$core$List$head(
              A2(
                $elm$core$List$drop,
                index,
                $rism_digital$elm_iiif$IIIF$Presentation$toCanvases(manifest)
              )
            );
          },
          model.selectedIndex
        )
      );
    }
  );
  var $author$project$View$Sidebar$rangeContainsCanvas = F2(
    function(canvasId, range) {
      return A2(
        $elm$core$List$any,
        $author$project$View$Sidebar$rangeItemContainsCanvas(canvasId),
        range.items
      );
    }
  );
  var $author$project$View$Sidebar$rangeItemContainsCanvas = F2(
    function(canvasId, item) {
      if (item.$ === "RangeCanvas") {
        var idValue = item.a;
        return _Utils_eq(idValue, canvasId);
      } else {
        var range = item.a;
        return A2($author$project$View$Sidebar$rangeContainsCanvas, canvasId, range);
      }
    }
  );
  var $author$project$View$Sidebar$rangesForCanvasInRange = F2(
    function(canvasId, range) {
      var nested = A2(
        $elm$core$List$concatMap,
        function(item) {
          if (item.$ === "RangeCanvas") {
            return _List_Nil;
          } else {
            var child = item.a;
            return A2($author$project$View$Sidebar$rangesForCanvasInRange, canvasId, child);
          }
        },
        range.items
      );
      return A2($author$project$View$Sidebar$rangeContainsCanvas, canvasId, range) ? A2($elm$core$List$cons, range, nested) : nested;
    }
  );
  var $author$project$View$Sidebar$rangesForCanvas = F2(
    function(canvasId, ranges) {
      return A2(
        $elm$core$List$concatMap,
        $author$project$View$Sidebar$rangesForCanvasInRange(canvasId),
        ranges
      );
    }
  );
  var $author$project$View$Sidebar$viewOnThisPageEmptyBody = A2(
    $elm$html$Html$div,
    _List_fromArray(
      [
        $elm$html$Html$Attributes$classList(
          _List_fromArray(
            [
              _Utils_Tuple2("contents-empty", true)
            ]
          )
        )
      ]
    ),
    _List_fromArray(
      [
        $elm$html$Html$text("No ranges for this page.")
      ]
    )
  );
  var $author$project$View$Sidebar$rangeCanvasIds = function(items) {
    var step = F2(
      function(pending, acc) {
        step:
          while (true) {
            if (!pending.b) {
              return $elm$core$List$reverse(acc);
            } else {
              if (!pending.a.b) {
                var restStacks = pending.b;
                var $temp$pending = restStacks, $temp$acc = acc;
                pending = $temp$pending;
                acc = $temp$acc;
                continue step;
              } else {
                var _v1 = pending.a;
                var item = _v1.a;
                var rest = _v1.b;
                var restStacks = pending.b;
                if (item.$ === "RangeCanvas") {
                  var idValue = item.a;
                  var $temp$pending = A2($elm$core$List$cons, rest, restStacks), $temp$acc = A2($elm$core$List$cons, idValue, acc);
                  pending = $temp$pending;
                  acc = $temp$acc;
                  continue step;
                } else {
                  var range = item.a;
                  var $temp$pending = A2(
                    $elm$core$List$cons,
                    range.items,
                    A2($elm$core$List$cons, rest, restStacks)
                  ), $temp$acc = acc;
                  pending = $temp$pending;
                  acc = $temp$acc;
                  continue step;
                }
              }
            }
          }
      }
    );
    return A2(
      step,
      _List_fromArray(
        [items]
      ),
      _List_Nil
    );
  };
  var $author$project$View$Sidebar$rangeCanvasLabels = F2(
    function(canvasLabelMap, range) {
      return A2(
        $elm$core$List$filterMap,
        function(idValue) {
          return A2($elm$core$Dict$get, idValue, canvasLabelMap);
        },
        $author$project$View$Sidebar$rangeCanvasIds(range.items)
      );
    }
  );
  var $author$project$View$Sidebar$viewOtpRangeItem = F3(
    function(model, canvasLabelMap, range) {
      var metadataBlock = A2($author$project$View$Sidebar$viewRangeMetadata, model.detectedLanguage, range.metadata);
      var maybeIndex = A2(
        $elm$core$Maybe$withDefault,
        $elm$core$Maybe$Nothing,
        A2($elm$core$Dict$get, range.id, model.rangeIndexMap)
      );
      var labelText = A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, model.detectedLanguage, range.label);
      var canvasLabels = A2($author$project$View$Sidebar$rangeCanvasLabels, canvasLabelMap, range);
      var firstLabel = $elm$core$List$head(canvasLabels);
      var lastLabel = $elm$core$List$head(
        $elm$core$List$reverse(canvasLabels)
      );
      var rangePrefix = (function() {
        var _v1 = _Utils_Tuple2(firstLabel, lastLabel);
        if (_v1.a.$ === "Just") {
          if (_v1.b.$ === "Just") {
            var first = _v1.a.a;
            var last = _v1.b.a;
            return _Utils_eq(first, last) ? "[" + (first + "] ") : "[" + (first + ("-" + (last + "] ")));
          } else {
            var first = _v1.a.a;
            var _v2 = _v1.b;
            return "[" + (first + "] ");
          }
        } else {
          if (_v1.b.$ === "Just") {
            var _v3 = _v1.a;
            var last = _v1.b.a;
            return "[" + (last + "] ");
          } else {
            return "";
          }
        }
      })();
      var labelNode = (function() {
        if (maybeIndex.$ === "Just") {
          var index = maybeIndex.a;
          return A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-button", true),
                      _Utils_Tuple2("ui-button", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$type_("button"),
                $elm$html$Html$Events$onClick(
                  A2(
                    $author$project$Msg$UserClickedRange,
                    range.id,
                    $elm$core$Maybe$Just(index)
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(
                  $elm$core$String$isEmpty(labelText) ? rangePrefix + "[Untitled range]" : _Utils_ap(rangePrefix, labelText)
                )
              ]
            )
          );
        } else {
          return A2(
            $elm$html$Html$button,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-button", true),
                      _Utils_Tuple2("ui-button", true)
                    ]
                  )
                ),
                $elm$html$Html$Attributes$type_("button"),
                $elm$html$Html$Events$onClick(
                  A2($author$project$Msg$UserClickedRange, range.id, $elm$core$Maybe$Nothing)
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text(
                  $elm$core$String$isEmpty(labelText) ? rangePrefix + "[Untitled range]" : _Utils_ap(rangePrefix, labelText)
                )
              ]
            )
          );
        }
      })();
      return A2(
        $elm$html$Html$li,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("contents-item", true)
                ]
              )
            )
          ]
        ),
        A2($elm$core$List$cons, labelNode, metadataBlock)
      );
    }
  );
  var $author$project$View$Sidebar$viewOnThisPageBody = F2(
    function(model, manifest) {
      var _v0 = A2($author$project$View$Sidebar$currentCanvasId, model, manifest);
      if (_v0.$ === "Just") {
        var canvasId = _v0.a;
        var _v1 = $rism_digital$elm_iiif$IIIF$Presentation$toRanges(manifest);
        if (_v1.$ === "Just") {
          var list = _v1.a;
          var matches = A2($author$project$View$Sidebar$rangesForCanvas, canvasId, list);
          if ($elm$core$List$isEmpty(matches)) {
            return $author$project$View$Sidebar$viewOnThisPageEmptyBody;
          } else {
            var canvasLabelMap = $elm$core$Dict$fromList(
              A2(
                $elm$core$List$map,
                function(canvas) {
                  return _Utils_Tuple2(
                    canvas.id,
                    $rism_digital$elm_iiif$IIIF$Presentation$canvasLabel(canvas)
                  );
                },
                $rism_digital$elm_iiif$IIIF$Presentation$toCanvases(manifest)
              )
            );
            return A2(
              $elm$html$Html$ul,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("contents-list", true),
                        _Utils_Tuple2("list-reset", true)
                      ]
                    )
                  )
                ]
              ),
              A2(
                $elm$core$List$map,
                A2($author$project$View$Sidebar$viewOtpRangeItem, model, canvasLabelMap),
                matches
              )
            );
          }
        } else {
          return $author$project$View$Sidebar$viewOnThisPageEmptyBody;
        }
      } else {
        return $author$project$View$Sidebar$viewOnThisPageEmptyBody;
      }
    }
  );
  var $author$project$View$Sidebar$viewContentsContent = function(model) {
    var maybeManifest = $author$project$Model$currentManifest(model);
    var body = (function() {
      var _v0 = _Utils_Tuple2(model.contentsView, maybeManifest);
      if (_v0.a.$ === "ContentsIndex") {
        if (_v0.b.$ === "Just") {
          var _v1 = _v0.a;
          var manifest = _v0.b.a;
          return A2($author$project$View$Sidebar$viewContentsIndexBody, model, manifest);
        } else {
          var _v2 = _v0.a;
          var _v3 = _v0.b;
          return $author$project$View$Sidebar$viewContentsEmptyBody;
        }
      } else {
        if (_v0.b.$ === "Just") {
          var _v4 = _v0.a;
          var manifest = _v0.b.a;
          return A2($author$project$View$Sidebar$viewOnThisPageBody, model, manifest);
        } else {
          var _v5 = _v0.a;
          var _v6 = _v0.b;
          return $author$project$View$Sidebar$viewOnThisPageEmptyBody;
        }
      }
    })();
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("contents-panel", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("contents-title", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $elm$html$Html$text("Contents")
              ]
            )
          ),
          A2($author$project$View$Sidebar$viewContentsToggle, model.viewMode, model.contentsView),
          body
        ]
      )
    );
  };
  var $author$project$View$Sidebar$homepageLinkBlock = F2(
    function(language, page) {
      return A2(
        $elm$html$Html$div,
        _List_Nil,
        _List_fromArray(
          [
            A2(
              $elm$html$Html$a,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$href(page.id),
                  $elm$html$Html$Attributes$target("_blank"),
                  $elm$html$Html$Attributes$rel("noopener noreferrer")
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(
                    A2($rism_digital$elm_iiif$IIIF$Language$extractLabelFromLanguageMap, language, page.label)
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$Sidebar$homepageEntries = F2(
    function(language, manifest) {
      var _v0 = $rism_digital$elm_iiif$IIIF$Presentation$toHomepage(manifest);
      if (_v0.$ === "Just") {
        var links = _v0.a;
        return $elm$core$List$isEmpty(links) ? _List_Nil : _List_fromArray(
          [
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("metadata-item", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$classList(
                          _List_fromArray(
                            [
                              _Utils_Tuple2("metadata-label", true)
                            ]
                          )
                        )
                      ]
                    ),
                    _List_fromArray(
                      [
                        $elm$html$Html$text("Homepage")
                      ]
                    )
                  ),
                  A2(
                    $elm$html$Html$div,
                    _List_fromArray(
                      [
                        $elm$html$Html$Attributes$classList(
                          _List_fromArray(
                            [
                              _Utils_Tuple2("metadata-value", true)
                            ]
                          )
                        )
                      ]
                    ),
                    A2(
                      $elm$core$List$map,
                      $author$project$View$Sidebar$homepageLinkBlock(language),
                      links
                    )
                  )
                ]
              )
            )
          ]
        );
      } else {
        return _List_Nil;
      }
    }
  );
  var $author$project$View$Sidebar$metadataEntries = F2(
    function(language, manifest) {
      return A2(
        $elm$core$List$map,
        $author$project$View$Sidebar$metadataEntry(language),
        $rism_digital$elm_iiif$IIIF$Presentation$toMetadata(manifest)
      );
    }
  );
  var $author$project$View$Sidebar$viewMetadataContent = function(model) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("metadata-panel", true)
              ]
            )
          )
        ]
      ),
      (function() {
        var _v0 = $author$project$Model$currentManifest(model);
        if (_v0.$ === "Just") {
          var manifest = _v0.a;
          return _List_fromArray(
            [
              A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("metadata-body", true)
                        ]
                      )
                    )
                  ]
                ),
                _Utils_ap(
                  A2($author$project$View$Sidebar$metadataEntries, model.detectedLanguage, manifest),
                  A2($author$project$View$Sidebar$homepageEntries, model.detectedLanguage, manifest)
                )
              )
            ]
          );
        } else {
          return _List_fromArray(
            [
              A2(
                $elm$html$Html$div,
                _List_fromArray(
                  [
                    $elm$html$Html$Attributes$classList(
                      _List_fromArray(
                        [
                          _Utils_Tuple2("metadata-body", true)
                        ]
                      )
                    )
                  ]
                ),
                _List_fromArray(
                  [
                    $elm$html$Html$text("No metadata available.")
                  ]
                )
              )
            ]
          );
        }
      })()
    );
  };
  var $author$project$View$Sidebar$viewSidebarPane = F3(
    function(current, target, content) {
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("sidebar-pane", true),
                  _Utils_Tuple2(
                    "is-hidden",
                    !_Utils_eq(current, target)
                  )
                ]
              )
            )
          ]
        ),
        _List_fromArray(
          [content]
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewSidebarTab = F4(
    function(current, target, label, msg) {
      return A2(
        $elm$html$Html$button,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("sidebar-tab-button", true),
                  _Utils_Tuple2(
                    "is-active",
                    _Utils_eq(current, target)
                  )
                ]
              )
            ),
            $elm$html$Html$Attributes$type_("button"),
            $elm$html$Html$Events$onClick(msg)
          ]
        ),
        _List_fromArray(
          [
            $elm$html$Html$text(label)
          ]
        )
      );
    }
  );
  var $elm$virtual_dom$VirtualDom$lazy4 = _VirtualDom_lazy4;
  var $elm$html$Html$Lazy$lazy4 = $elm$virtual_dom$VirtualDom$lazy4;
  var $author$project$Msg$UserClickedThumbnail = function(a) {
    return { $: "UserClickedThumbnail", a };
  };
  var $author$project$Model$pageViewStartIndex = F3(
    function(viewMode, shiftByOne, index) {
      if (viewMode.$ === "OneUp") {
        return index;
      } else {
        return shiftByOne ? !index ? 0 : A2($elm$core$Basics$modBy, 2, index) === 1 ? index : index - 1 : index - A2($elm$core$Basics$modBy, 2, index);
      }
    }
  );
  var $author$project$View$Sidebar$isThumbnailActive = F4(
    function(viewMode, shiftByOne, selectedIndex, index) {
      if (selectedIndex.$ === "Just") {
        var selected = selectedIndex.a;
        if (viewMode.$ === "OneUp") {
          return _Utils_eq(selected, index);
        } else {
          if (shiftByOne && !selected) {
            return !index;
          } else {
            var startIndex = A3($author$project$Model$pageViewStartIndex, $author$project$Model$TwoUp, shiftByOne, selected);
            return _Utils_eq(index, startIndex) || _Utils_eq(index, startIndex + 1);
          }
        }
      } else {
        return false;
      }
    }
  );
  var $author$project$View$Sidebar$viewThumbnail = F4(
    function(viewMode, shiftByOne, selectedIndex, _v0) {
      var index = _v0.a;
      var page = _v0.b;
      var thumbUrl = A2(
        $elm$core$Maybe$withDefault,
        "",
        A2(
          $elm$core$Maybe$map,
          function($) {
            return $.thumbUrl;
          },
          $author$project$Model$primaryImage(page)
        )
      );
      var isActive = A4($author$project$View$Sidebar$isThumbnailActive, viewMode, shiftByOne, selectedIndex, index);
      var hasChoices = $elm$core$List$length(page.images) > 1;
      var attrs = _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("thumbs-item", true),
                _Utils_Tuple2("ui-card", true),
                _Utils_Tuple2("ui-card--dark", true),
                _Utils_Tuple2("is-active", isActive)
              ]
            )
          ),
          $elm$html$Html$Attributes$type_("button"),
          $elm$html$Html$Attributes$id(
            "thumb-" + $elm$core$String$fromInt(index)
          ),
          A2(
            $elm$html$Html$Attributes$attribute,
            "data-thumb-index",
            $elm$core$String$fromInt(index)
          ),
          $elm$html$Html$Events$onClick(
            $author$project$Msg$UserClickedThumbnail(index)
          )
        ]
      );
      return A2(
        $elm$html$Html$button,
        attrs,
        _List_fromArray(
          [
            A2(
              $elm$html$Html$img,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("thumbs-image", true)
                      ]
                    )
                  ),
                  $elm$html$Html$Attributes$src(thumbUrl),
                  $elm$html$Html$Attributes$alt(
                    "Page " + $elm$core$String$fromInt(index + 1)
                  )
                ]
              ),
              _List_Nil
            ),
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("thumbs-label", true),
                        _Utils_Tuple2("is-active", isActive)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(
                    hasChoices ? page.label + " *" : page.label
                  )
                ]
              )
            )
          ]
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewThumbnails = F2(
    function(_v0, pages) {
      var fullscreen = _v0.fullscreen;
      var selectedIndex = _v0.selectedIndex;
      var shiftByOne = _v0.shiftByOne;
      var thumbsInstantScroll = _v0.thumbsInstantScroll;
      var viewMode = _v0.viewMode;
      var viewingDirection = _v0.viewingDirection;
      return A2(
        $elm$html$Html$div,
        _List_fromArray(
          [
            $elm$html$Html$Attributes$classList(
              _List_fromArray(
                [
                  _Utils_Tuple2("thumbs", true),
                  _Utils_Tuple2("is-fullscreen", fullscreen)
                ]
              )
            ),
            $elm$html$Html$Attributes$id("thumbs"),
            A2(
              $elm$html$Html$Attributes$style,
              "scroll-behavior",
              thumbsInstantScroll ? "auto" : "smooth"
            ),
            A2(
              $elm$html$Html$Attributes$style,
              "direction",
              _Utils_eq(viewingDirection, $rism_digital$elm_iiif$IIIF$Presentation$RightToLeft) ? "rtl" : "ltr"
            )
          ]
        ),
        A2(
          $elm$core$List$map,
          A4($elm$html$Html$Lazy$lazy4, $author$project$View$Sidebar$viewThumbnail, viewMode, shiftByOne, selectedIndex),
          A2($elm$core$List$indexedMap, $elm$core$Tuple$pair, pages)
        )
      );
    }
  );
  var $author$project$View$Sidebar$viewSidebarPanel = function(model) {
    var panelClasses = _List_fromArray(
      [
        _Utils_Tuple2("sidebar-panel", true),
        _Utils_Tuple2("is-fullscreen", model.fullscreen),
        _Utils_Tuple2(
          "is-hidden",
          !$author$project$View$Sidebar$isSidebarVisible(model.sidebarState)
        ),
        _Utils_Tuple2("is-overlay", model.mobileSidebarOpen),
        _Utils_Tuple2("is-mobile-hidden", !model.mobileSidebarOpen)
      ]
    );
    var maybeManifest = $author$project$Model$currentManifest(model);
    var hasMetadata = (function() {
      if (maybeManifest.$ === "Just") {
        var manifest = maybeManifest.a;
        return $author$project$View$Sidebar$hasManifestMetadata(manifest);
      } else {
        return false;
      }
    })();
    var metadataPane = hasMetadata ? _List_fromArray(
      [
        A3(
          $author$project$View$Sidebar$viewSidebarPane,
          model.sidebarState,
          $author$project$Model$SidebarMetadata,
          $author$project$View$Sidebar$viewMetadataContent(model)
        )
      ]
    ) : _List_Nil;
    var metadataTab = hasMetadata ? _List_fromArray(
      [
        A4($author$project$View$Sidebar$viewSidebarTab, model.sidebarState, $author$project$Model$SidebarMetadata, "Metadata", $author$project$Msg$UserToggledMetadata)
      ]
    ) : _List_Nil;
    var hasContents = (function() {
      if (maybeManifest.$ === "Just") {
        var manifest = maybeManifest.a;
        return A2(
          $elm$core$Maybe$withDefault,
          false,
          A2(
            $elm$core$Maybe$map,
            A2($elm$core$Basics$composeR, $elm$core$List$isEmpty, $elm$core$Basics$not),
            $rism_digital$elm_iiif$IIIF$Presentation$toRanges(manifest)
          )
        );
      } else {
        return false;
      }
    })();
    var contentsTab = hasContents ? _List_fromArray(
      [
        A4($author$project$View$Sidebar$viewSidebarTab, model.sidebarState, $author$project$Model$SidebarContents, "Contents", $author$project$Msg$UserToggledContents)
      ]
    ) : _List_Nil;
    var contentsPane = hasContents ? _List_fromArray(
      [
        A3(
          $author$project$View$Sidebar$viewSidebarPane,
          model.sidebarState,
          $author$project$Model$SidebarContents,
          $author$project$View$Sidebar$viewContentsContent(model)
        )
      ]
    ) : _List_Nil;
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(panelClasses),
          A2(
            $elm$html$Html$Attributes$style,
            "width",
            $author$project$View$Sidebar$isSidebarVisible(model.sidebarState) ? $elm$core$String$fromInt(model.sidebarWidth) + "px" : "0px"
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("sidebar-tabs", true)
                    ]
                  )
                )
              ]
            ),
            A2(
              $elm$core$List$cons,
              A4($author$project$View$Sidebar$viewSidebarTab, model.sidebarState, $author$project$Model$SidebarThumbnails, "Thumbnails", $author$project$Msg$UserToggledThumbnails),
              _Utils_ap(metadataTab, contentsTab)
            )
          ),
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("sidebar-content", true)
                    ]
                  )
                )
              ]
            ),
            A2(
              $elm$core$List$cons,
              A3(
                $author$project$View$Sidebar$viewSidebarPane,
                model.sidebarState,
                $author$project$Model$SidebarThumbnails,
                A2(
                  $author$project$View$Sidebar$viewThumbnails,
                  {
                    fullscreen: model.fullscreen,
                    selectedIndex: model.selectedIndex,
                    shiftByOne: model.shiftByOne,
                    thumbsInstantScroll: model.thumbsInstantScroll,
                    viewMode: model.viewMode,
                    viewingDirection: A2(
                      $elm$core$Maybe$withDefault,
                      $rism_digital$elm_iiif$IIIF$Presentation$LeftToRight,
                      A2($elm$core$Maybe$map, $rism_digital$elm_iiif$IIIF$Presentation$toViewingDirection, maybeManifest)
                    )
                  },
                  model.pages
                )
              ),
              _Utils_ap(metadataPane, contentsPane)
            )
          )
        ]
      )
    );
  };
  var $author$project$Msg$UserStartedSidebarResize = function(a) {
    return { $: "UserStartedSidebarResize", a };
  };
  var $author$project$View$Sidebar$viewSidebarResizer = function(model) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("sidebar-resizer", true),
                _Utils_Tuple2(
                  "is-hidden",
                  !$author$project$View$Sidebar$isSidebarVisible(model.sidebarState)
                )
              ]
            )
          ),
          A2(
            $elm$html$Html$Events$on,
            "mousedown",
            A2(
              $elm$json$Json$Decode$map,
              $author$project$Msg$UserStartedSidebarResize,
              A2($elm$json$Json$Decode$field, "clientX", $elm$json$Json$Decode$int)
            )
          )
        ]
      ),
      _List_fromArray(
        [
          $elm$html$Html$text("\u22EE")
        ]
      )
    );
  };
  var $author$project$Msg$UserClickedOpenManifestInfo = { $: "UserClickedOpenManifestInfo" };
  var $author$project$Msg$UserClickedOpenPageView = { $: "UserClickedOpenPageView" };
  var $author$project$Msg$UserClickedZoomIn = { $: "UserClickedZoomIn" };
  var $author$project$Msg$UserClickedZoomOut = { $: "UserClickedZoomOut" };
  var $author$project$Msg$UserToggledFullscreen = { $: "UserToggledFullscreen" };
  var $author$project$Msg$UserToggledShiftByOne = { $: "UserToggledShiftByOne" };
  var $author$project$Msg$UserToggledSidebar = { $: "UserToggledSidebar" };
  var $author$project$Msg$UserToggledTwoUp = { $: "UserToggledTwoUp" };
  var $author$project$View$Icons$info = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M256 48a208 208 0 1 1 0 416 208 208 0 1 1 0-416zm0 464A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336c-13.3 0-24 10.7-24 24s10.7 24 24 24h80c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V248c0-13.3-10.7-24-24-24H216c-13.3 0-24 10.7-24 24s10.7 24 24 24h24v64H216zm40-144a32 32 0 1 0 0-64 32 32 0 1 0 0 64z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$openingPageView = A2(
    $author$project$View$Icons$icon,
    "0 0 576 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M156 32C100.6 32 48.8 46.6 27.1 53.6C10.3 59 0 74.5 0 91.1V403.5c0 26.1 24 44.2 48 40.2c19.8-3.3 54.8-7.7 100-7.7c54 0 97.5 25.5 112.5 35.6c7.5 5 16.8 8.4 27 8.4c11.5 0 21.6-4.2 29.3-9.9C330.2 460.3 369.1 436 428 436c47.7 0 80.5 4 99 7.2c23.9 4.1 49-13.8 49-40.6V91.1c0-16.5-10.3-32.1-27.1-37.5C527.2 46.6 475.4 32 420 32c-36.8 0-71.8 6.4-97.4 12.7c-12.8 3.2-23.5 6.3-30.9 8.7c-1.3 .4-2.6 .8-3.7 1.2c-1.1-.4-2.4-.8-3.7-1.2c-7.5-2.4-18.1-5.5-30.9-8.7C227.8 38.4 192.8 32 156 32zM264 97.3V417.9C238 404.2 196.8 388 148 388c-42.9 0-77.4 3.7-100 7.1V97.3C70.3 90.6 112.4 80 156 80c31.6 0 62.6 5.6 85.9 11.3c8.6 2.1 16.1 4.2 22.1 6zm48 319.2V97.3c6-1.8 13.5-3.9 22.1-6C357.4 85.6 388.4 80 420 80c43.6 0 85.7 10.6 108 17.3V394.7c-21.7-3.3-54.9-6.7-100-6.7c-51.4 0-90.8 15-116 28.6z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$pageViewOpen = A2(
    $author$project$View$Icons$icon,
    "0 0 384 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16H224v80c0 17.7 14.3 32 32 32h80V448c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0H64zM272 304c0-53-43-96-96-96s-96 43-96 96s43 96 96 96c17.8 0 34.4-4.8 48.7-13.2L263 425.1c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-38.3-38.3c8.5-14.3 13.3-31 13.3-48.9zm-96-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$scrollingPageView = A2(
    $author$project$View$Icons$icon,
    "0 0 384 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M64 48c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V64c0-8.8-7.2-16-16-16H64zM0 64C0 28.7 28.7 0 64 0H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V64zm120 64H264c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 96H264c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 96h48c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$shiftLeft = A2(
    $author$project$View$Icons$icon,
    "0 0 640 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M 283.05 111 C 292.45 101.6 307.65 101.6 316.95 111 C 326.25 120.4 326.35 135.6 316.95 144.9 L 277.95 183.9 L 556.05 183.9 C 569.35 183.9 580.05 194.6 580.05 207.9 C 580.05 221.2 569.35 231.9 556.05 231.9 L 277.95 231.9 L 316.95 270.9 C 326.35 280.3 326.35 295.5 316.95 304.8 C 307.55 314.1 292.35 314.2 283.05 304.8 L 203.05 224.8 C 193.65 215.4 193.65 200.2 203.05 190.9 L 283.05 110.9 L 283.05 111 Z M 392 0 C 422.9 0 448 25.1 448 56 L 448 128 L 400 128 L 400 56 C 400 51.6 396.4 48 392 48 L 88 48 C 65.9 48 48 65.9 48 88 L 48 358.7 C 57.8 354.4 68.6 352 80 352 L 392 352 C 396.4 352 400 348.4 400 344 L 400 288 L 448 288 L 448 344 C 448 366.3 434.9 385.6 416 394.6 L 416 464 L 424 464 C 437.3 464 448 474.7 448 488 C 448 501.3 437.3 512 424 512 L 80 512 C 35.8 512 0 476.2 0 432 C 0 429.3 0.1 426.6 0.4 424 L 0 424 L 0 88 C 0 39.4 39.4 0 88 0 L 392 0 Z M 80 400 C 62.3 400 48 414.3 48 432 C 48 449.7 62.3 464 80 464 L 368 464 L 368 400 L 80 400 Z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$shiftRight = A2(
    $author$project$View$Icons$icon,
    "0 0 640 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M88 0C39.4 0 0 39.4 0 88V424H.4c-.3 2.6-.4 5.3-.4 8c0 44.2 35.8 80 80 80H424c13.3 0 24-10.7 24-24s-10.7-24-24-24h-8V394.6c18.9-9 32-28.3 32-50.6V288H400v56c0 4.4-3.6 8-8 8H80c-11.4 0-22.2 2.4-32 6.7V88c0-22.1 17.9-40 40-40H392c4.4 0 8 3.6 8 8v72h48V56c0-30.9-25.1-56-56-56H88zM368 400v64H80c-17.7 0-32-14.3-32-32s14.3-32 32-32H368zM553 111c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l39 39H280c-13.3 0-24 10.7-24 24s10.7 24 24 24H558.1l-39 39c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9l-80-80z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Toolbar$truncateLabel = F2(
    function(maxLength, label) {
      return _Utils_cmp(
        $elm$core$String$length(label),
        maxLength
      ) > 0 ? A2($elm$core$String$left, maxLength - 3, label) + "..." : label;
    }
  );
  var $author$project$View$Toolbar$viewCurrentLabel = function(model) {
    var fullLabelText = (function() {
      var _v0 = model.selectedIndex;
      if (_v0.$ === "Just") {
        var index = _v0.a;
        var _v1 = model.viewMode;
        if (_v1.$ === "OneUp") {
          return A2(
            $elm$core$Maybe$withDefault,
            "",
            A2(
              $elm$core$Maybe$map,
              function($) {
                return $.label;
              },
              A2($author$project$Model$getPageAt, index, model.pages)
            )
          );
        } else {
          var startIndex = A3($author$project$Model$pageViewStartIndex, model.viewMode, model.shiftByOne, index);
          var secondLabel = A2(
            $elm$core$Maybe$map,
            function($) {
              return $.label;
            },
            A2($author$project$Model$getPageAt, startIndex + 1, model.pages)
          );
          var firstLabel = A2(
            $elm$core$Maybe$map,
            function($) {
              return $.label;
            },
            A2($author$project$Model$getPageAt, startIndex, model.pages)
          );
          var _v2 = _Utils_Tuple2(firstLabel, secondLabel);
          if (_v2.a.$ === "Just") {
            var left = _v2.a.a;
            if (model.shiftByOne && !startIndex) {
              return left;
            } else {
              if (secondLabel.$ === "Just") {
                var right = secondLabel.a;
                return left + (" / " + right);
              } else {
                return left;
              }
            }
          } else {
            return "";
          }
        }
      } else {
        return "";
      }
    })();
    var labelText = A2($author$project$View$Toolbar$truncateLabel, 140, fullLabelText);
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("canvas-label", true),
                _Utils_Tuple2("is-fullscreen", model.fullscreen)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          $elm$html$Html$text(labelText)
        ]
      )
    );
  };
  var $author$project$View$Toolbar$viewStatus = function(model) {
    var maybeStatus = (function() {
      var _v0 = model.resourceResponse;
      switch (_v0.$) {
        case "ResourceNotRequested":
          return $elm$core$Maybe$Nothing;
        case "ResourceLoading":
          return $elm$core$Maybe$Just(
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("status", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text("Loading...")
                ]
              )
            )
          );
        case "ResourceLoadedManifest":
          return $elm$core$List$isEmpty(model.tileSources) ? $elm$core$Maybe$Just(
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("status", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text("No canvases found in this manifest.")
                ]
              )
            )
          ) : $elm$core$Maybe$Nothing;
        case "ResourceLoadedCollection":
          var _v1 = model.response;
          switch (_v1.$) {
            case "NotRequested":
              return $elm$core$Maybe$Just(
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("status", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Select a manifest from the collection to view.")
                    ]
                  )
                )
              );
            case "Loading":
              return $elm$core$Maybe$Just(
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("status", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Select a manifest from the collection to view.")
                    ]
                  )
                )
              );
            case "Loaded":
              return $elm$core$List$isEmpty(model.tileSources) ? $elm$core$Maybe$Just(
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("status", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text("Select a manifest from the collection to view.")
                    ]
                  )
                )
              ) : $elm$core$Maybe$Nothing;
            default:
              var message = _v1.a;
              return $elm$core$Maybe$Just(
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("status", true),
                            _Utils_Tuple2("is-error", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $elm$html$Html$text(message)
                    ]
                  )
                )
              );
          }
        default:
          var message = _v0.a;
          return $elm$core$Maybe$Just(
            A2(
              $elm$html$Html$div,
              _List_fromArray(
                [
                  $elm$html$Html$Attributes$classList(
                    _List_fromArray(
                      [
                        _Utils_Tuple2("status", true),
                        _Utils_Tuple2("is-error", true)
                      ]
                    )
                  )
                ]
              ),
              _List_fromArray(
                [
                  $elm$html$Html$text(message)
                ]
              )
            )
          );
      }
    })();
    return A2($author$project$View$Helpers$viewMaybe, $elm$core$Basics$identity, maybeStatus);
  };
  var $author$project$View$Icons$zoomIn = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M208 48a160 160 0 1 1 0 320 160 160 0 1 1 0-320zm0 368c48.8 0 93.7-16.8 129.1-44.9L471 505c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L371.1 337.1C399.2 301.7 416 256.8 416 208C416 93.1 322.9 0 208 0S0 93.1 0 208S93.1 416 208 416zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Icons$zoomOut = A2(
    $author$project$View$Icons$icon,
    "0 0 512 512",
    _List_fromArray(
      [
        A2(
          $elm$svg$Svg$path,
          _List_fromArray(
            [
              $elm$svg$Svg$Attributes$d("M208 48a160 160 0 1 1 0 320 160 160 0 1 1 0-320zm0 368c48.8 0 93.7-16.8 129.1-44.9L471 505c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9L371.1 337.1C399.2 301.7 416 256.8 416 208C416 93.1 322.9 0 208 0S0 93.1 0 208S93.1 416 208 416zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24H280c13.3 0 24-10.7 24-24s-10.7-24-24-24H136z")
            ]
          ),
          _List_Nil
        )
      ]
    )
  );
  var $author$project$View$Toolbar$viewToolbar = function(model) {
    var controlsDisabled = $author$project$Utilites$isNothing(
      $author$project$Model$currentManifest(model)
    );
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$classList(
            _List_fromArray(
              [
                _Utils_Tuple2("canvas-toolbar-stack", true)
              ]
            )
          )
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("canvas-toolbar", true)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("canvas-toolbar-section", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$zoomOut,
                          isFullscreen: model.fullscreen,
                          label: "Zoom Out",
                          onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserClickedZoomOut)
                        }
                      ),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$zoomIn,
                          isFullscreen: model.fullscreen,
                          label: "Zoom In",
                          onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserClickedZoomIn)
                        }
                      )
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("canvas-toolbar-section", true),
                            _Utils_Tuple2("is-right", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$Toolbar$viewStatus(model),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$pageViewOpen,
                          isFullscreen: model.fullscreen,
                          label: "Page View",
                          onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserClickedOpenPageView)
                        }
                      ),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: $author$project$View$Icons$info,
                          isFullscreen: model.fullscreen,
                          label: "Manifest Info",
                          onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserClickedOpenManifestInfo)
                        }
                      ),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: _Utils_eq(model.viewMode, $author$project$Model$OneUp) ? $author$project$View$Icons$openingPageView : $author$project$View$Icons$scrollingPageView,
                          isFullscreen: model.fullscreen,
                          label: _Utils_eq(model.viewMode, $author$project$Model$OneUp) ? "Two Page" : "One Page",
                          onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserToggledTwoUp)
                        }
                      ),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: model.shiftByOne ? $author$project$View$Icons$shiftLeft : $author$project$View$Icons$shiftRight,
                          isFullscreen: model.fullscreen,
                          label: "Shift Page",
                          onClickMsg: A2(
                            $author$project$Utilites$disabledIf,
                            controlsDisabled || _Utils_eq(model.viewMode, $author$project$Model$OneUp),
                            $author$project$Msg$UserToggledShiftByOne
                          )
                        }
                      ),
                      $author$project$View$Helpers$viewButton(
                        (function() {
                          var sidebarVisible = model.isMobile ? model.mobileSidebarOpen : !_Utils_eq(model.sidebarState, $author$project$Model$SidebarHidden);
                          return {
                            icon: sidebarVisible ? $author$project$View$Icons$hideSidebar : $author$project$View$Icons$showSidebar,
                            isFullscreen: model.fullscreen,
                            label: sidebarVisible ? "Hide Sidebar" : "Show Sidebar",
                            onClickMsg: A2($author$project$Utilites$disabledIf, controlsDisabled, $author$project$Msg$UserToggledSidebar)
                          };
                        })()
                      ),
                      $author$project$View$Helpers$viewButton(
                        {
                          icon: model.fullscreen ? $author$project$View$Icons$fromFullscreen : $author$project$View$Icons$toFullscreen,
                          isFullscreen: model.fullscreen,
                          label: model.fullscreen ? "Exit Full" : "Fullscreen",
                          onClickMsg: $elm$core$Maybe$Just($author$project$Msg$UserToggledFullscreen)
                        }
                      )
                    ]
                  )
                )
              ]
            )
          ),
          $author$project$View$Toolbar$viewCurrentLabel(model)
        ]
      )
    );
  };
  var $author$project$View$view = function(model) {
    return A2(
      $elm$html$Html$div,
      _List_fromArray(
        [
          $elm$html$Html$Attributes$id(model.rootElementId)
        ]
      ),
      _List_fromArray(
        [
          A2(
            $elm$html$Html$div,
            _List_fromArray(
              [
                $elm$html$Html$Attributes$classList(
                  _List_fromArray(
                    [
                      _Utils_Tuple2("diva-app", true),
                      _Utils_Tuple2("is-fullscreen", model.fullscreen)
                    ]
                  )
                )
              ]
            ),
            _List_fromArray(
              [
                $author$project$View$viewManifestTitle(model),
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("diva-app-header", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$Toolbar$viewToolbar(model)
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("diva-app-body", true),
                            _Utils_Tuple2("is-fullscreen", model.fullscreen)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$CollectionExplorer$viewCollectionSidebar(model),
                      $author$project$View$CollectionExplorer$viewCollectionResizer(model),
                      A2(
                        $elm$html$Html$div,
                        _List_fromArray(
                          [
                            $elm$html$Html$Attributes$classList(
                              _List_fromArray(
                                [
                                  _Utils_Tuple2("diva-canvas-column", true),
                                  _Utils_Tuple2("is-fullscreen", model.fullscreen)
                                ]
                              )
                            )
                          ]
                        ),
                        _List_fromArray(
                          [
                            A3(
                              $author$project$View$viewCanvas,
                              model.fullscreen,
                              model.isViewerLoading,
                              $author$project$View$hasCollectionSidebar(model)
                            )
                          ]
                        )
                      ),
                      $author$project$View$Sidebar$viewSidebarResizer(model),
                      $author$project$View$Sidebar$viewSidebarPanel(model)
                    ]
                  )
                ),
                A2(
                  $elm$html$Html$div,
                  _List_fromArray(
                    [
                      $elm$html$Html$Attributes$classList(
                        _List_fromArray(
                          [
                            _Utils_Tuple2("required-statement-dock", true)
                          ]
                        )
                      )
                    ]
                  ),
                  _List_fromArray(
                    [
                      $author$project$View$viewRequiredStatement(model)
                    ]
                  )
                ),
                $author$project$View$PageViewModal$viewPageViewModal(model),
                $author$project$View$ManifestInfoModal$viewManifestInfoModal(model)
              ]
            )
          )
        ]
      )
    );
  };
  var $author$project$Main$main = $elm$browser$Browser$element(
    { init: $author$project$Main$init, subscriptions: $author$project$Main$subscriptions, update: $author$project$Main$update, view: $author$project$View$view }
  );
  var Elm = { "Main": { "init": $author$project$Main$main(
    A2(
      $elm$json$Json$Decode$andThen,
      function(userLanguage) {
        return A2(
          $elm$json$Json$Decode$andThen,
          function(showTitle) {
            return A2(
              $elm$json$Json$Decode$andThen,
              function(showSidebar) {
                return A2(
                  $elm$json$Json$Decode$andThen,
                  function(rootElementId) {
                    return A2(
                      $elm$json$Json$Decode$andThen,
                      function(objectData) {
                        return A2(
                          $elm$json$Json$Decode$andThen,
                          function(acceptHeaders) {
                            return $elm$json$Json$Decode$succeed(
                              { acceptHeaders, objectData, rootElementId, showSidebar, showTitle, userLanguage }
                            );
                          },
                          A2(
                            $elm$json$Json$Decode$field,
                            "acceptHeaders",
                            $elm$json$Json$Decode$list($elm$json$Json$Decode$string)
                          )
                        );
                      },
                      A2($elm$json$Json$Decode$field, "objectData", $elm$json$Json$Decode$string)
                    );
                  },
                  A2($elm$json$Json$Decode$field, "rootElementId", $elm$json$Json$Decode$string)
                );
              },
              A2($elm$json$Json$Decode$field, "showSidebar", $elm$json$Json$Decode$bool)
            );
          },
          A2($elm$json$Json$Decode$field, "showTitle", $elm$json$Json$Decode$bool)
        );
      },
      A2($elm$json$Json$Decode$field, "userLanguage", $elm$json$Json$Decode$string)
    )
  )({ "versions": { "elm": "0.19.1" }, "types": { "message": "Msg.Msg", "aliases": { "IIIF.Presentation.Canvas": { "args": [], "type": "{ id : String.String, label : Maybe.Maybe IIIF.Language.LanguageMap, width : Maybe.Maybe Basics.Int, height : Maybe.Maybe Basics.Int, images : List.List IIIF.Presentation.Image }" }, "IIIF.Presentation.HomePage": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, format : IIIF.Presentation.MediaFormats, type_ : IIIF.Presentation.ResourceTypes }" }, "IIIF.Presentation.Image": { "args": [], "type": "{ id : IIIF.Image.ImageUri, label : Maybe.Maybe IIIF.Language.LanguageMap, imageType : IIIF.Presentation.ImageType, service : List.List IIIF.Presentation.ServiceTypes }" }, "IIIF.Language.LabelValue": { "args": [], "type": "{ label : IIIF.Language.LanguageMap, value : IIIF.Language.LanguageMap }" }, "IIIF.Language.LanguageMap": { "args": [], "type": "List.List IIIF.Language.LanguageValues" }, "IIIF.Presentation.Logo": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, format : IIIF.Presentation.MediaFormats, type_ : IIIF.Presentation.ResourceTypes, width : Basics.Int, height : Basics.Int, service : Maybe.Maybe (List.List IIIF.Presentation.ServiceObject) }" }, "IIIF.Presentation.Manifest": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, metadata : List.List IIIF.Language.LabelValue, viewingDirection : IIIF.Presentation.ViewingDirection, summary : Maybe.Maybe IIIF.Language.LanguageMap, viewingLayout : IIIF.Presentation.ViewingLayout, canvases : List.List IIIF.Presentation.Canvas, ranges : Maybe.Maybe (List.List IIIF.Presentation.Range), homepage : Maybe.Maybe (List.List IIIF.Presentation.HomePage), logo : Maybe.Maybe IIIF.Presentation.Image, provider : Maybe.Maybe (List.List IIIF.Presentation.Provider), thumbnail : Maybe.Maybe IIIF.Presentation.Image, requiredStatement : Maybe.Maybe IIIF.Presentation.RequiredStatement }" }, "IIIF.Presentation.Provider": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, type_ : IIIF.Presentation.ResourceTypes, homepage : Maybe.Maybe (List.List IIIF.Presentation.HomePage), logo : Maybe.Maybe (List.List IIIF.Presentation.Logo), seeAlso : Maybe.Maybe (List.List IIIF.Presentation.SeeAlso) }" }, "IIIF.Presentation.Range": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, items : List.List IIIF.Presentation.RangeItem, metadata : List.List IIIF.Language.LabelValue }" }, "IIIF.Presentation.RequiredStatement": { "args": [], "type": "{ label : IIIF.Language.LanguageMap, value : IIIF.Language.LanguageMap }" }, "IIIF.Presentation.SeeAlso": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, format : IIIF.Presentation.MediaFormats, type_ : IIIF.Presentation.ResourceTypes }" }, "IIIF.Presentation.ServiceObject": { "args": [], "type": "{ id : String.String, serviceType : IIIF.Presentation.ServiceTypes }" }, "IIIF.Presentation.Collection": { "args": [], "type": "{ id : String.String, label : IIIF.Language.LanguageMap, summary : Maybe.Maybe IIIF.Language.LanguageMap, items : List.List IIIF.Presentation.CollectionItem }" }, "IIIF.Image.ImageRequestParameters": { "args": [], "type": "{ host : String.String, prefix : String.String, region : IIIF.Image.ImageRegion, size : IIIF.Image.ImageSize, rotation : IIIF.Image.ImageRotation, quality : IIIF.Image.ImageQuality, format : IIIF.Image.ImageFormat }" }, "IIIF.Image.ImageServerParameters": { "args": [], "type": "{ host : String.String, prefix : String.String }" } }, "unions": { "Msg.Msg": { "args": [], "tags": { "ClientNotifiedFullscreenChanged": ["Basics.Bool"], "ServerRespondedWithManifest": ["Result.Result Http.Error IIIF.Presentation.IIIFManifest"], "ServerRespondedWithResource": ["Result.Result Http.Error IIIF.Presentation.IIIFResource"], "UserClickedCollectionItem": ["String.String"], "ServerRespondedWithCollectionItem": ["String.String", "Result.Result Http.Error IIIF.Presentation.IIIFResource"], "UserClickedManifestItem": ["String.String", "String.String"], "ServerRespondedWithManifestFromCollection": ["Result.Result Http.Error IIIF.Presentation.IIIFManifest"], "UserToggledCollectionSidebar": [], "UserStartedCollectionSidebarResize": ["Basics.Int"], "UserDraggedCollectionSidebarResize": ["Basics.Int"], "UserEndedCollectionSidebarResize": [], "ClientNotifiedPageChanged": ["Basics.Int"], "ClientNotifiedPageChangedInstant": ["Basics.Int"], "ClientNotifiedScrollThumbs": ["Result.Result Browser.Dom.Error ()"], "SetResponseLoading": [], "UserClickedThumbnail": ["Basics.Int"], "UserToggledFilter": ["Filters.FilterToggle", "Basics.Bool"], "UserToggledContents": [], "UserClickedOpenPageView": [], "UserClickedClosePageView": [], "UserClickedSaveFilteredImage": [], "UserToggledPageViewFullscreen": [], "UserToggledPageViewSidebar": [], "UserClickedOpenManifestInfo": [], "UserClickedCloseManifestInfo": [], "UserToggledMobileSidebar": [], "UserClosedMobileSidebar": [], "UserClickedPageViewPrev": [], "UserClickedPageViewNext": [], "UserResetAltColourAdjust": [], "UserToggledFullscreen": [], "UserClickedRange": ["String.String", "Maybe.Maybe Basics.Int"], "UserToggledMetadata": [], "UserSelectedContentsIndex": [], "UserSelectedContentsPages": [], "UserToggledSidebar": [], "UserToggledShiftByOne": [], "UserToggledThumbnails": [], "UserToggledTwoUp": [], "UserUpdatedFilterInt": ["Filters.FilterIntValue", "String.String"], "UserUpdatedFilterFloat": ["Filters.FilterFloatValue", "String.String"], "UserUpdatedFilterString": ["Filters.FilterStringValue", "String.String"], "UserUpdatedFilterJsonInput": ["String.String"], "UserAppliedFilterJson": [], "UserCopiedFilterJson": [], "ViewerLoadingChanged": ["Basics.Bool"], "UserDraggedSidebarResize": ["Basics.Int"], "UserEndedSidebarResize": [], "UserStartedSidebarResize": ["Basics.Int"], "UserChangedZoomLevel": ["Basics.Float"], "ViewportChanged": ["Basics.Int", "Basics.Int"], "UserClickedZoomIn": [], "UserClickedZoomOut": [], "UserClickedPageViewImageChoice": ["Basics.Int"], "UserToggledFilterGroup": ["String.String"] } }, "Basics.Bool": { "args": [], "tags": { "True": [], "False": [] } }, "Browser.Dom.Error": { "args": [], "tags": { "NotFound": ["String.String"] } }, "Http.Error": { "args": [], "tags": { "BadUrl": ["String.String"], "Timeout": [], "NetworkError": [], "BadStatus": ["Basics.Int"], "BadBody": ["String.String"] } }, "Filters.FilterFloatValue": { "args": [], "tags": { "FloatColourReplaceBlend": [], "FloatContrast": [], "FloatGamma": [], "FloatNormalizeStrength": [], "FloatPseudoColourBlue": [], "FloatPseudoColourGreen": [], "FloatPseudoColourRed": [], "FloatUnsharpAmount": [] } }, "Filters.FilterIntValue": { "args": [], "tags": { "IntAdaptiveOffset": [], "IntAdaptiveWindow": [], "IntAltRedGamma": [], "IntAltRedSigmoid": [], "IntAltRedVibrance": [], "IntAltRedHue": [], "IntAltRedHueWindow": [], "IntAltGreenGamma": [], "IntAltGreenSigmoid": [], "IntAltGreenHue": [], "IntAltGreenHueWindow": [], "IntAltGreenVibrance": [], "IntAltBlueGamma": [], "IntAltBlueSigmoid": [], "IntAltBlueHue": [], "IntAltBlueHueWindow": [], "IntAltBlueVibrance": [], "IntBrightness": [], "IntCcBlue": [], "IntCcGreen": [], "IntCcRed": [], "IntColourmapCenter": [], "IntColourReplaceTolerance": [], "IntHue": [], "IntMorphKernel": [], "IntRotation": [], "IntSaturation": [], "IntThreshold": [], "IntVibrance": [] } }, "Filters.FilterStringValue": { "args": [], "tags": { "StringColourmapPreset": [], "StringColourReplaceSource": [], "StringColourReplaceTarget": [], "StringConvolutionPreset": [], "StringMorphOperation": [], "StringPcaMode": [], "StringPseudoColourMode": [] } }, "Filters.FilterToggle": { "args": [], "tags": { "ToggleAdaptive": [], "ToggleAltBlueGamma": [], "ToggleAltBlueHue": [], "ToggleAltBlueSigmoid": [], "ToggleAltBlueVibrance": [], "ToggleAltGreenGamma": [], "ToggleAltGreenHue": [], "ToggleAltGreenSigmoid": [], "ToggleAltGreenVibrance": [], "ToggleAltRedGamma": [], "ToggleAltRedHue": [], "ToggleAltRedSigmoid": [], "ToggleAltRedVibrance": [], "ToggleBrightness": [], "ToggleCcBlue": [], "ToggleCcGreen": [], "ToggleCcRed": [], "ToggleColourmap": [], "ToggleColourReplace": [], "ToggleColourReplacePreserveLum": [], "ToggleContrast": [], "ToggleConvolution": [], "ToggleFlip": [], "ToggleGamma": [], "ToggleGrayscale": [], "ToggleHue": [], "ToggleInvert": [], "ToggleMorph": [], "ToggleNormalize": [], "TogglePca": [], "TogglePseudoColour": [], "ToggleSaturation": [], "ToggleThreshold": [], "ToggleUnsharp": [], "ToggleVibrance": [] } }, "Basics.Float": { "args": [], "tags": { "Float": [] } }, "IIIF.Presentation.IIIFManifest": { "args": [], "tags": { "IIIFManifest": ["IIIF.Version.IIIFVersion", "IIIF.Presentation.Manifest"] } }, "IIIF.Presentation.IIIFResource": { "args": [], "tags": { "ResourceManifest": ["IIIF.Presentation.IIIFManifest"], "ResourceCollection": ["IIIF.Presentation.IIIFCollection"], "ResourceCanvas": ["IIIF.Presentation.IIIFCanvas"], "ResourceRange": ["IIIF.Presentation.IIIFRange"] } }, "Basics.Int": { "args": [], "tags": { "Int": [] } }, "Maybe.Maybe": { "args": ["a"], "tags": { "Just": ["a"], "Nothing": [] } }, "Result.Result": { "args": ["error", "value"], "tags": { "Ok": ["value"], "Err": ["error"] } }, "String.String": { "args": [], "tags": { "String": [] } }, "IIIF.Presentation.IIIFCanvas": { "args": [], "tags": { "IIIFCanvas": ["IIIF.Version.IIIFVersion", "IIIF.Presentation.Canvas"] } }, "IIIF.Presentation.IIIFCollection": { "args": [], "tags": { "IIIFCollection": ["IIIF.Version.IIIFVersion", "IIIF.Presentation.Collection"] } }, "IIIF.Presentation.IIIFRange": { "args": [], "tags": { "IIIFRange": ["IIIF.Version.IIIFVersion", "IIIF.Presentation.Range"] } }, "IIIF.Version.IIIFVersion": { "args": [], "tags": { "IIIFV2": [], "IIIFV3": [] } }, "IIIF.Presentation.ImageType": { "args": [], "tags": { "PrimaryImage": [], "ChoiceImage": [] } }, "IIIF.Image.ImageUri": { "args": [], "tags": { "InfoUri": ["IIIF.Image.ImageServerParameters"], "ImageUri": ["IIIF.Image.ImageRequestParameters"] } }, "IIIF.Language.LanguageValues": { "args": [], "tags": { "LanguageValues": ["IIIF.Language.Language", "List.List String.String"] } }, "List.List": { "args": ["a"], "tags": {} }, "IIIF.Presentation.MediaFormats": { "args": [], "tags": { "ImageJpeg": [], "OtherFormat": ["String.String"] } }, "IIIF.Presentation.RangeItem": { "args": [], "tags": { "RangeCanvas": ["String.String"], "RangeRange": ["IIIF.Presentation.Range"] } }, "IIIF.Presentation.ResourceTypes": { "args": [], "tags": { "Video": [], "OtherResource": ["String.String"] } }, "IIIF.Presentation.ServiceTypes": { "args": [], "tags": { "ImageService1": [], "ImageService2": [], "ImageService3": [], "SearchService1": [], "AutoCompleteService1": [], "AuthTokenService1": [], "AuthLogoutService1": [], "UnknownService": [] } }, "IIIF.Presentation.ViewingDirection": { "args": [], "tags": { "LeftToRight": [], "RightToLeft": [], "TopToBottom": [], "BottomToTop": [] } }, "IIIF.Presentation.ViewingLayout": { "args": [], "tags": { "LayoutV2": ["IIIF.Presentation.ViewingHint"], "LayoutV3": ["List.List IIIF.Presentation.Behavior"] } }, "IIIF.Presentation.Behavior": { "args": [], "tags": { "AutoAdvanceBehavior": [], "NoAutoAdvanceBehavior": [], "RepeatBehavior": [], "NoRepeatBehavior": [], "UnorderedBehavior": [], "IndividualsBehavior": [], "ContinuousBehavior": [], "PagedBehavior": [], "FacingPagesBehavior": [], "NonPagedBehavior": [], "MultiPartBehavior": [], "TogetherBehavior": [], "SequenceBehavior": [], "ThumbnailNavBehavior": [], "NoNavBehavior": [], "HiddenBehavior": [] } }, "IIIF.Presentation.CollectionItem": { "args": [], "tags": { "NestedCollection": ["IIIF.Presentation.Collection"], "ManifestItem": ["IIIF.Presentation.Manifest"] } }, "IIIF.Image.ImageFormat": { "args": [], "tags": { "JpegFormat": [], "TiffFormat": [], "PngFormat": [], "Jp2Format": [], "GifFormat": [], "PdfFormat": [], "WebpFormat": [] } }, "IIIF.Image.ImageQuality": { "args": [], "tags": { "ColorQuality": [], "GrayQuality": [], "BiTonalQuality": [], "DefaultQuality": [], "NativeQuality": [] } }, "IIIF.Image.ImageRegion": { "args": [], "tags": { "FullRegion": [], "SquareRegion": [], "SizeRegion": ["{ x : Basics.Int, y : Basics.Int, w : Basics.Int, h : Basics.Int }"], "PctSizeRegion": ["{ x : Basics.Float, y : Basics.Float, w : Basics.Float, h : Basics.Float }"] } }, "IIIF.Image.ImageRotation": { "args": [], "tags": { "NormalRotation": ["Basics.Float"], "MirroredRotation": ["Basics.Float"] } }, "IIIF.Image.ImageSize": { "args": [], "tags": { "MaxSize": [], "ExactMaxSize": [], "WidthOnlySize": ["Basics.Int"], "ExactWidthOnlySize": ["Basics.Int"], "HeightOnlySize": ["Basics.Int"], "ExactHeightOnlySize": ["Basics.Int"], "PercentSize": ["Basics.Float"], "ExactPercentSize": ["Basics.Float"], "WidthAndHeightSize": ["( Basics.Int, Basics.Int )"], "ExactWidthAndHeightSize": ["( Basics.Int, Basics.Int )"], "ScaledWidthAndHeightSize": ["( Basics.Int, Basics.Int )"], "ExactScaledWidthAndHeightSize": ["( Basics.Int, Basics.Int )"] } }, "IIIF.Language.Language": { "args": [], "tags": { "LanguageCode": ["String.String"], "None": [], "Default": [] } }, "IIIF.Presentation.ViewingHint": { "args": [], "tags": { "PagedHint": [], "IndividualsHint": [], "ContinuousHint": [], "MultiPartHint": [], "NonPagedHint": [], "TopHint": [], "FacingPagesHint": [] } } } } }) } };

  // src/filters.ts
  function setFilterOptions(viewer, options) {
    if (!viewer) {
      throw new Error("A viewer must be specified.");
    }
    if (!viewer.filterPluginInstance) {
      viewer.filterPluginInstance = createFilterPlugin(viewer, options || {});
    } else {
      setOptions(viewer.filterPluginInstance, options || {});
    }
  }
  function createFilterPlugin(viewer, options) {
    const instance = { viewer, filters: [], filterIncrement: 0 };
    const self = instance;
    self.viewer.addHandler("tile-loaded", tileLoadedHandler);
    self.viewer.addHandler("tile-drawing", tileDrawingHandler);
    setOptions(self, options);
    function tileLoadedHandler(event) {
      const processors = getFiltersProcessors(self, event.tiledImage);
      if (processors.length === 0) {
        return;
      }
      const tile = event.tile;
      const image = event.data || event.image;
      if (image !== null && image !== void 0) {
        const canvas = window.document.createElement("canvas");
        canvas.width = image.width;
        canvas.height = image.height;
        const context = canvas.getContext("2d", { willReadFrequently: true });
        context.drawImage(image, 0, 0);
        tile._renderedContext = context;
        const callback = event.getCompletionCallback();
        applyFilters(context, processors, callback);
        tile._filterIncrement = self.filterIncrement;
      }
    }
    function applyFilters(context, filtersProcessors, callback) {
      if (callback) {
        const currentIncrement = self.filterIncrement;
        const callbacks = [];
        for (let i = 0; i < filtersProcessors.length - 1; i += 1) {
          ((index) => {
            callbacks[index] = () => {
              if (self.filterIncrement !== currentIncrement) {
                return;
              }
              filtersProcessors[index + 1](context, callbacks[index + 1]);
            };
          })(i);
        }
        callbacks[filtersProcessors.length - 1] = () => {
          if (self.filterIncrement !== currentIncrement) {
            return;
          }
          callback();
        };
        filtersProcessors[0](context, callbacks[0]);
      } else {
        for (let i = 0; i < filtersProcessors.length; i += 1) {
          filtersProcessors[i](context, () => {
          });
        }
      }
    }
    function readImageDataFromContext(context) {
      const width = context.canvas.width;
      const height = context.canvas.height;
      const scratchContext = Filters._ensureScratchContext(width, height);
      scratchContext.clearRect(0, 0, width, height);
      scratchContext.drawImage(context.canvas, 0, 0);
      return scratchContext.getImageData(0, 0, width, height);
    }
    function tileDrawingHandler(event) {
      const tile = event.tile;
      const rendered = event.rendered;
      if (rendered._filterIncrement === self.filterIncrement) {
        return;
      }
      const processors = getFiltersProcessors(self, event.tiledImage);
      if (processors.length === 0) {
        if (rendered._originalImageData) {
          rendered.putImageData(rendered._originalImageData, 0, 0);
          delete rendered._originalImageData;
        }
        rendered._filterIncrement = self.filterIncrement;
        return;
      }
      if (rendered._originalImageData) {
        rendered.putImageData(rendered._originalImageData, 0, 0);
      } else {
        rendered._originalImageData = readImageDataFromContext(rendered);
      }
      if (tile._renderedContext) {
        if (tile._filterIncrement === self.filterIncrement) {
          const imgData = readImageDataFromContext(tile._renderedContext);
          rendered.putImageData(imgData, 0, 0);
          delete tile._renderedContext;
          delete tile._filterIncrement;
          rendered._filterIncrement = self.filterIncrement;
          return;
        }
        delete tile._renderedContext;
        delete tile._filterIncrement;
      }
      applyFilters(rendered, processors);
      rendered._filterIncrement = self.filterIncrement;
    }
    return instance;
  }
  function setOptions(instance, options) {
    const nextOptions = options || {};
    const filters = nextOptions.filters;
    instance.filters = !filters ? [] : Array.isArray(filters) ? filters : [filters];
    for (let i = 0; i < instance.filters.length; i += 1) {
      const filter = instance.filters[i];
      if (!filter.processors) {
        throw new Error("Filter processors must be specified.");
      }
      filter.processors = Array.isArray(filter.processors) ? filter.processors : [filter.processors];
    }
    instance.filterIncrement += 1;
    if (nextOptions.loadMode === "sync") {
      instance.viewer.forceRedraw();
    } else {
      let itemsToReset = [];
      for (let i = 0; i < instance.filters.length; i += 1) {
        const filter = instance.filters[i];
        if (!filter.items) {
          itemsToReset = getAllItems(instance.viewer.world);
          break;
        }
        if (Array.isArray(filter.items)) {
          for (let j = 0; j < filter.items.length; j += 1) {
            addItemToReset(filter.items[j], itemsToReset);
          }
        } else {
          addItemToReset(filter.items, itemsToReset);
        }
      }
      for (let i = 0; i < itemsToReset.length; i += 1) {
        itemsToReset[i].reset();
      }
    }
  }
  function addItemToReset(item, itemsToReset) {
    if (itemsToReset.indexOf(item) >= 0) {
      throw new Error("An item can not have filters assigned multiple times.");
    }
    itemsToReset.push(item);
  }
  function getAllItems(world) {
    const result = [];
    for (let i = 0; i < world.getItemCount(); i += 1) {
      result.push(world.getItemAt(i));
    }
    return result;
  }
  function getFiltersProcessors(instance, item) {
    if (instance.filters.length === 0) {
      return [];
    }
    let globalProcessors = null;
    for (let i = 0; i < instance.filters.length; i += 1) {
      const filter = instance.filters[i];
      if (!filter.items) {
        globalProcessors = filter.processors;
      } else if (filter.items === item || Array.isArray(filter.items) && filter.items.indexOf(item) >= 0) {
        return filter.processors;
      }
    }
    return globalProcessors ? globalProcessors : [];
  }
  var sampleStops = (stops, t) => {
    let lower = stops[0];
    let upper = stops[stops.length - 1];
    for (let i = 0; i < stops.length; i += 1) {
      if (stops[i].stop >= t) {
        upper = stops[i];
        lower = stops[Math.max(0, i - 1)];
        break;
      }
    }
    if (upper.stop === lower.stop) {
      return upper.color.slice();
    }
    const localT = (t - lower.stop) / (upper.stop - lower.stop);
    const r = Math.round(lower.color[0] + (upper.color[0] - lower.color[0]) * localT);
    const g = Math.round(lower.color[1] + (upper.color[1] - lower.color[1]) * localT);
    const b = Math.round(lower.color[2] + (upper.color[2] - lower.color[2]) * localT);
    return [r, g, b];
  };
  var buildColormap = (stops) => {
    const map = [];
    for (let i = 0; i < 256; i += 1) {
      const t = i / 255;
      map[i] = sampleStops(stops, t);
    }
    return map;
  };
  var colormapCache = /* @__PURE__ */ new Map();
  var getColormap = (preset) => {
    const cached = colormapCache.get(preset);
    if (cached) {
      return cached;
    }
    let result = null;
    switch (preset) {
      case "hot":
        result = buildColormap([
          { stop: 0, color: [0, 0, 0] },
          { stop: 0.4, color: [255, 0, 0] },
          { stop: 0.7, color: [255, 255, 0] },
          { stop: 1, color: [255, 255, 255] }
        ]);
        break;
      case "cool":
        result = buildColormap([
          { stop: 0, color: [0, 0, 0] },
          { stop: 0.5, color: [0, 128, 255] },
          { stop: 1, color: [255, 255, 255] }
        ]);
        break;
      case "gray":
      case "":
        result = buildColormap(
          [{ stop: 0, color: [0, 0, 0] }, { stop: 1, color: [255, 255, 255] }]
        );
        break;
      default:
        return null;
    }
    colormapCache.set(preset, result);
    return result;
  };
  var clampByte = (value) => {
    if (value < 0) {
      return 0;
    }
    if (value > 255) {
      return 255;
    }
    return value;
  };
  var clamp01 = (value) => {
    if (value < 0) {
      return 0;
    }
    if (value > 1) {
      return 1;
    }
    return value;
  };
  var hexToRgb = (hex) => {
    if (!hex) {
      return null;
    }
    let cleaned = hex.trim();
    if (cleaned.startsWith("#")) {
      cleaned = cleaned.slice(1);
    }
    if (cleaned.length === 3) {
      cleaned = cleaned.split("").map((ch) => ch + ch).join("");
    }
    if (cleaned.length !== 6) {
      return null;
    }
    const value = parseInt(cleaned, 16);
    if (Number.isNaN(value)) {
      return null;
    }
    return [value >> 16 & 255, value >> 8 & 255, value & 255];
  };
  var boxBlur = (input, width, height, radius, grayscale) => {
    const size = width * height;
    const output = new Uint8ClampedArray(input.length);
    if (!radius) {
      output.set(input);
      return output;
    }
    const windowSize = radius * 2 + 1;
    const invWindowSize = 1 / windowSize;
    if (grayscale) {
      const temp2 = new Uint8ClampedArray(size);
      for (let y = 0; y < height; y += 1) {
        let sum = 0;
        for (let x = -radius; x <= radius; x += 1) {
          const cx = Math.min(width - 1, Math.max(0, x));
          sum += input[y * width + cx];
        }
        for (let x = 0; x < width; x += 1) {
          temp2[y * width + x] = sum * invWindowSize + 0.5 | 0;
          const removeX = Math.max(0, x - radius);
          const addX = Math.min(width - 1, x + radius + 1);
          sum += input[y * width + addX] - input[y * width + removeX];
        }
      }
      for (let x = 0; x < width; x += 1) {
        let sum = 0;
        for (let y = -radius; y <= radius; y += 1) {
          const cy = Math.min(height - 1, Math.max(0, y));
          sum += temp2[cy * width + x];
        }
        for (let y = 0; y < height; y += 1) {
          output[y * width + x] = sum * invWindowSize + 0.5 | 0;
          const removeY = Math.max(0, y - radius);
          const addY = Math.min(height - 1, y + radius + 1);
          sum += temp2[addY * width + x] - temp2[removeY * width + x];
        }
      }
      return output;
    }
    const temp = new Uint8ClampedArray(input.length);
    for (let y = 0; y < height; y += 1) {
      let sumR = 0;
      let sumG = 0;
      let sumB = 0;
      for (let x = -radius; x <= radius; x += 1) {
        const cx = Math.min(width - 1, Math.max(0, x));
        const idx = (y * width + cx) * 4;
        sumR += input[idx];
        sumG += input[idx + 1];
        sumB += input[idx + 2];
      }
      for (let x = 0; x < width; x += 1) {
        const idx = (y * width + x) * 4;
        temp[idx] = sumR * invWindowSize + 0.5 | 0;
        temp[idx + 1] = sumG * invWindowSize + 0.5 | 0;
        temp[idx + 2] = sumB * invWindowSize + 0.5 | 0;
        temp[idx + 3] = input[idx + 3];
        const removeX = Math.max(0, x - radius);
        const addX = Math.min(width - 1, x + radius + 1);
        const removeIdx = (y * width + removeX) * 4;
        const addIdx = (y * width + addX) * 4;
        sumR += input[addIdx] - input[removeIdx];
        sumG += input[addIdx + 1] - input[removeIdx + 1];
        sumB += input[addIdx + 2] - input[removeIdx + 2];
      }
    }
    for (let x = 0; x < width; x += 1) {
      let sumR = 0;
      let sumG = 0;
      let sumB = 0;
      for (let y = -radius; y <= radius; y += 1) {
        const cy = Math.min(height - 1, Math.max(0, y));
        const idx = (cy * width + x) * 4;
        sumR += temp[idx];
        sumG += temp[idx + 1];
        sumB += temp[idx + 2];
      }
      for (let y = 0; y < height; y += 1) {
        const idx = (y * width + x) * 4;
        output[idx] = sumR * invWindowSize + 0.5 | 0;
        output[idx + 1] = sumG * invWindowSize + 0.5 | 0;
        output[idx + 2] = sumB * invWindowSize + 0.5 | 0;
        output[idx + 3] = temp[idx + 3];
        const removeY = Math.max(0, y - radius);
        const addY = Math.min(height - 1, y + radius + 1);
        const removeIdx = (removeY * width + x) * 4;
        const addIdx = (addY * width + x) * 4;
        sumR += temp[addIdx] - temp[removeIdx];
        sumG += temp[addIdx + 1] - temp[removeIdx + 1];
        sumB += temp[addIdx + 2] - temp[removeIdx + 2];
      }
    }
    return output;
  };
  function applyPixelTransformInPlace(transform) {
    return function(context, callback) {
      Filters._applyPixelTransformInPlace(context, transform);
      callback();
    };
  }
  function buildLuminance(data, width, height) {
    const length = width * height;
    const lum = Filters._ensureScratch(length);
    for (let i = 0, p = 0; p < length; i += 4, p += 1) {
      lum[p] = 77 * data[i] + 150 * data[i + 1] + 29 * data[i + 2] >> 8;
    }
    return lum;
  }
  function withImageData(context, handler) {
    const width = context.canvas.width;
    const height = context.canvas.height;
    const scratchContext = Filters._ensureScratchContext(width, height);
    scratchContext.clearRect(0, 0, width, height);
    scratchContext.drawImage(context.canvas, 0, 0);
    const imgData = scratchContext.getImageData(0, 0, width, height);
    const didChange = handler(imgData);
    if (didChange) {
      scratchContext.putImageData(imgData, 0, 0);
      context.clearRect(0, 0, width, height);
      context.drawImage(Filters._scratchCanvas, 0, 0);
    }
  }
  function convolvePixels(originalPixels, outputPixels, width, height, kernel, kernelSize, kernelHalfSize) {
    const rowStride = width * 4;
    const interiorStartY = kernelHalfSize;
    const interiorEndY = height - kernelHalfSize;
    const interiorStartX = kernelHalfSize;
    const interiorEndX = width - kernelHalfSize;
    for (let y = interiorStartY; y < interiorEndY; y += 1) {
      const rowOffset = y * rowStride;
      for (let x = interiorStartX; x < interiorEndX; x += 1) {
        let r = 0;
        let g = 0;
        let b = 0;
        for (let j = 0; j < kernelSize; j += 1) {
          const kernelRowOffset = (y + j - kernelHalfSize) * rowStride;
          for (let i = 0; i < kernelSize; i += 1) {
            const offset = kernelRowOffset + (x + i - kernelHalfSize) * 4;
            const weight = kernel[j * kernelSize + i];
            r += originalPixels[offset] * weight;
            g += originalPixels[offset + 1] * weight;
            b += originalPixels[offset + 2] * weight;
          }
        }
        const outOffset = rowOffset + x * 4;
        outputPixels[outOffset] = r;
        outputPixels[outOffset + 1] = g;
        outputPixels[outOffset + 2] = b;
      }
    }
    for (let y = 0; y < height; y += 1) {
      const rowOffset = y * rowStride;
      const isInteriorY = y >= interiorStartY && y < interiorEndY;
      for (let x = 0; x < width; x += 1) {
        if (isInteriorY && x >= interiorStartX && x < interiorEndX) {
          continue;
        }
        let r = 0;
        let g = 0;
        let b = 0;
        for (let j = 0; j < kernelSize; j += 1) {
          const pixelY = y + j - kernelHalfSize;
          if (pixelY < 0 || pixelY >= height) {
            continue;
          }
          const kernelRowOffset = pixelY * rowStride;
          for (let i = 0; i < kernelSize; i += 1) {
            const pixelX = x + i - kernelHalfSize;
            if (pixelX >= 0 && pixelX < width) {
              const offset = kernelRowOffset + pixelX * 4;
              const weight = kernel[j * kernelSize + i];
              r += originalPixels[offset] * weight;
              g += originalPixels[offset + 1] * weight;
              b += originalPixels[offset + 2] * weight;
            }
          }
        }
        const outOffset = rowOffset + x * 4;
        outputPixels[outOffset] = r;
        outputPixels[outOffset + 1] = g;
        outputPixels[outOffset + 2] = b;
      }
    }
  }
  function morphPixels(originalPixels, outputPixels, width, height, kernelSize, kernelHalfSize, comparator) {
    const rowStride = width * 4;
    const interiorStartY = kernelHalfSize;
    const interiorEndY = height - kernelHalfSize;
    const interiorStartX = kernelHalfSize;
    const interiorEndX = width - kernelHalfSize;
    for (let y = interiorStartY; y < interiorEndY; y += 1) {
      const rowOffset = y * rowStride;
      for (let x = interiorStartX; x < interiorEndX; x += 1) {
        const centerOffset = rowOffset + x * 4;
        let r = originalPixels[centerOffset];
        let g = originalPixels[centerOffset + 1];
        let b = originalPixels[centerOffset + 2];
        for (let j = 0; j < kernelSize; j += 1) {
          const kernelRowOffset = (y + j - kernelHalfSize) * rowStride;
          for (let i = 0; i < kernelSize; i += 1) {
            const offset = kernelRowOffset + (x + i - kernelHalfSize) * 4;
            r = comparator(originalPixels[offset], r);
            g = comparator(originalPixels[offset + 1], g);
            b = comparator(originalPixels[offset + 2], b);
          }
        }
        outputPixels[centerOffset] = r;
        outputPixels[centerOffset + 1] = g;
        outputPixels[centerOffset + 2] = b;
      }
    }
    for (let y = 0; y < height; y += 1) {
      const rowOffset = y * rowStride;
      const isInteriorY = y >= interiorStartY && y < interiorEndY;
      for (let x = 0; x < width; x += 1) {
        if (isInteriorY && x >= interiorStartX && x < interiorEndX) {
          continue;
        }
        const centerOffset = rowOffset + x * 4;
        let r = originalPixels[centerOffset];
        let g = originalPixels[centerOffset + 1];
        let b = originalPixels[centerOffset + 2];
        for (let j = 0; j < kernelSize; j += 1) {
          const pixelY = y + j - kernelHalfSize;
          if (pixelY < 0 || pixelY >= height) {
            continue;
          }
          const kernelRowOffset = pixelY * rowStride;
          for (let i = 0; i < kernelSize; i += 1) {
            const pixelX = x + i - kernelHalfSize;
            if (pixelX >= 0 && pixelX < width) {
              const offset = kernelRowOffset + pixelX * 4;
              r = comparator(originalPixels[offset], r);
              g = comparator(originalPixels[offset + 1], g);
              b = comparator(originalPixels[offset + 2], b);
            }
          }
        }
        outputPixels[centerOffset] = r;
        outputPixels[centerOffset + 1] = g;
        outputPixels[centerOffset + 2] = b;
      }
    }
  }
  function dot3(a, b) {
    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
  }
  function normalize3(v) {
    const len = Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]) || 1;
    return [v[0] / len, v[1] / len, v[2] / len];
  }
  function scaleMat3(m, s) {
    return [
      [m[0][0] * s, m[0][1] * s, m[0][2] * s],
      [m[1][0] * s, m[1][1] * s, m[1][2] * s],
      [m[2][0] * s, m[2][1] * s, m[2][2] * s]
    ];
  }
  function outer3(v) {
    return [
      [v[0] * v[0], v[0] * v[1], v[0] * v[2]],
      [v[1] * v[0], v[1] * v[1], v[1] * v[2]],
      [v[2] * v[0], v[2] * v[1], v[2] * v[2]]
    ];
  }
  function matVec3(m, v) {
    return [
      m[0][0] * v[0] + m[0][1] * v[1] + m[0][2] * v[2],
      m[1][0] * v[0] + m[1][1] * v[1] + m[1][2] * v[2],
      m[2][0] * v[0] + m[2][1] * v[1] + m[2][2] * v[2]
    ];
  }
  function matSub(a, b) {
    return [
      [a[0][0] - b[0][0], a[0][1] - b[0][1], a[0][2] - b[0][2]],
      [a[1][0] - b[1][0], a[1][1] - b[1][1], a[1][2] - b[1][2]],
      [a[2][0] - b[2][0], a[2][1] - b[2][1], a[2][2] - b[2][2]]
    ];
  }
  function powerIterEigen(m, iterations) {
    let v = normalize3([1, 1, 1]);
    for (let i = 0; i < iterations; i += 1) {
      v = normalize3(matVec3(m, v));
    }
    const mv = matVec3(m, v);
    const value = dot3(v, mv);
    return { vector: v, value };
  }
  function computePcaVectors(data) {
    const count = data.length / 4;
    let meanR = 0;
    let meanG = 0;
    let meanB = 0;
    for (let i = 0; i < data.length; i += 4) {
      meanR += data[i];
      meanG += data[i + 1];
      meanB += data[i + 2];
    }
    meanR /= count;
    meanG /= count;
    meanB /= count;
    let c00 = 0, c01 = 0, c02 = 0;
    let c11 = 0, c12 = 0;
    let c22 = 0;
    for (let i = 0; i < data.length; i += 4) {
      const r = data[i] - meanR;
      const g = data[i + 1] - meanG;
      const b = data[i + 2] - meanB;
      c00 += r * r;
      c01 += r * g;
      c02 += r * b;
      c11 += g * g;
      c12 += g * b;
      c22 += b * b;
    }
    const inv = 1 / Math.max(1, count - 1);
    const cov = [
      [c00 * inv, c01 * inv, c02 * inv],
      [c01 * inv, c11 * inv, c12 * inv],
      [c02 * inv, c12 * inv, c22 * inv]
    ];
    const eig1 = powerIterEigen(cov, 12);
    const deflated = matSub(cov, scaleMat3(outer3(eig1.vector), eig1.value));
    const eig2 = powerIterEigen(deflated, 12);
    const eig3 = normalize3([
      eig1.vector[1] * eig2.vector[2] - eig1.vector[2] * eig2.vector[1],
      eig1.vector[2] * eig2.vector[0] - eig1.vector[0] * eig2.vector[2],
      eig1.vector[0] * eig2.vector[1] - eig1.vector[1] * eig2.vector[0]
    ]);
    return { mean: [meanR, meanG, meanB], vectors: [eig1.vector, eig2.vector, eig3] };
  }
  function applyPcaColor(imgData, mode) {
    const data = imgData.data;
    const pca = computePcaVectors(data);
    const mean = pca.mean;
    const v1 = pca.vectors[0];
    const v2 = pca.vectors[1];
    const v3 = pca.vectors[2];
    let min1 = Infinity, max1 = -Infinity;
    let min2 = Infinity, max2 = -Infinity;
    let min3 = Infinity, max3 = -Infinity;
    for (let i = 0; i < data.length; i += 4) {
      const r = data[i] - mean[0];
      const g = data[i + 1] - mean[1];
      const b = data[i + 2] - mean[2];
      const c1 = r * v1[0] + g * v1[1] + b * v1[2];
      const c2 = r * v2[0] + g * v2[1] + b * v2[2];
      const c3 = r * v3[0] + g * v3[1] + b * v3[2];
      if (c1 < min1)
        min1 = c1;
      if (c1 > max1)
        max1 = c1;
      if (c2 < min2)
        min2 = c2;
      if (c2 > max2)
        max2 = c2;
      if (c3 < min3)
        min3 = c3;
      if (c3 > max3)
        max3 = c3;
    }
    const range1 = max1 - min1 || 1;
    const range2 = max2 - min2 || 1;
    const range3 = max3 - min3 || 1;
    const toByte = (v, min, range) => clampByte((v - min) / range * 255);
    for (let i = 0; i < data.length; i += 4) {
      const r = data[i] - mean[0];
      const g = data[i + 1] - mean[1];
      const b = data[i + 2] - mean[2];
      const c1 = r * v1[0] + g * v1[1] + b * v1[2];
      const c2 = r * v2[0] + g * v2[1] + b * v2[2];
      const c3 = r * v3[0] + g * v3[1] + b * v3[2];
      if (mode === "pca1") {
        const v = toByte(c1, min1, range1);
        data[i] = v;
        data[i + 1] = v;
        data[i + 2] = v;
      } else if (mode === "pca2") {
        const v = toByte(c2, min2, range2);
        data[i] = v;
        data[i + 1] = v;
        data[i + 2] = v;
      } else if (mode === "pca3") {
        const v = toByte(c3, min3, range3);
        data[i] = v;
        data[i + 1] = v;
        data[i + 2] = v;
      } else {
        data[i] = toByte(c1, min1, range1);
        data[i + 1] = toByte(c2, min2, range2);
        data[i + 2] = toByte(c3, min3, range3);
      }
    }
  }
  var Filters = {
    _scratch: null,
    _scratchCanvas: null,
    _scratchContext: null,
    _ensureScratch: function(length) {
      if (!this._scratch || this._scratch.length < length) {
        this._scratch = new Uint8ClampedArray(length);
      }
      return this._scratch;
    },
    _ensureScratchContext: function(width, height) {
      if (!this._scratchCanvas) {
        this._scratchCanvas = window.document.createElement("canvas");
      }
      if (!this._scratchContext) {
        this._scratchContext = this._scratchCanvas.getContext("2d", { willReadFrequently: true });
      }
      if (this._scratchCanvas.width !== width) {
        this._scratchCanvas.width = width;
      }
      if (this._scratchCanvas.height !== height) {
        this._scratchCanvas.height = height;
      }
      return this._scratchContext;
    },
    _resetScratch: function() {
      this._scratch = null;
      this._scratchCanvas = null;
      this._scratchContext = null;
    },
    _applyPixelTransformInPlace: function(context, transform) {
      const width = context.canvas.width;
      const height = context.canvas.height;
      const scratchContext = this._ensureScratchContext(width, height);
      scratchContext.clearRect(0, 0, width, height);
      scratchContext.drawImage(context.canvas, 0, 0);
      const imgData = scratchContext.getImageData(0, 0, width, height);
      const pixels = imgData.data;
      const out = [0, 0, 0, 0];
      for (let i = 0, pxl = pixels.length; i < pxl; i += 4) {
        transform(pixels[i], pixels[i + 1], pixels[i + 2], pixels[i + 3], out);
        pixels[i] = out[0];
        pixels[i + 1] = out[1];
        pixels[i + 2] = out[2];
        pixels[i + 3] = out[3];
      }
      scratchContext.putImageData(imgData, 0, 0);
      context.clearRect(0, 0, width, height);
      context.drawImage(this._scratchCanvas, 0, 0);
    },
    _rgbToHSV: function(r, g, b) {
      let rr = r / 255;
      let gg = g / 255;
      let bb = b / 255;
      const maxValue = Math.max(rr, gg, bb);
      const minValue = Math.min(rr, gg, bb);
      const v = maxValue;
      const d = maxValue - minValue;
      const s = maxValue === 0 ? 0 : d / maxValue;
      let h = 0;
      if (maxValue !== minValue) {
        switch (maxValue) {
          case rr:
            h = (gg - bb) / d + (gg < bb ? 6 : 0);
            break;
          case gg:
            h = (bb - rr) / d + 2;
            break;
          default:
            h = (rr - gg) / d + 4;
        }
        h /= 6;
      }
      return { h, s, v };
    },
    _hsvToRGB: function(h, s, v) {
      let r = 0;
      let g = 0;
      let b = 0;
      const i = Math.floor(h * 6);
      const f = h * 6 - i;
      const p = v * (1 - s);
      const q = v * (1 - f * s);
      const t = v * (1 - (1 - f) * s);
      switch (i % 6) {
        case 0:
          r = v;
          g = t;
          b = p;
          break;
        case 1:
          r = q;
          g = v;
          b = p;
          break;
        case 2:
          r = p;
          g = v;
          b = t;
          break;
        case 3:
          r = p;
          g = q;
          b = v;
          break;
        case 4:
          r = t;
          g = p;
          b = v;
          break;
        default:
          r = v;
          g = p;
          b = q;
      }
      return { r: Math.floor(r * 255), g: Math.floor(g * 255), b: Math.floor(b * 255) };
    },
    THRESHOLDING: function(threshold) {
      if (threshold < 0 || threshold > 255) {
        throw new Error("Threshold must be between 0 and 255.");
      }
      return applyPixelTransformInPlace(
        (r, g, b, _a, out) => {
          const v = 54 * r + 183 * g + 19 * b >> 8 >= threshold ? 255 : 0;
          out[0] = v;
          out[1] = v;
          out[2] = v;
          out[3] = 255;
        }
      );
    },
    SATURATION: function(adjustment) {
      const adj = adjustment * -0.01;
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          const maxValue = Math.max(r, g, b);
          out[0] = r !== maxValue ? r + (maxValue - r) * adj : r;
          out[1] = g !== maxValue ? g + (maxValue - g) * adj : g;
          out[2] = b !== maxValue ? b + (maxValue - b) * adj : b;
          out[3] = a;
        }
      );
    },
    VIBRANCE: function(adjustment) {
      const adj = adjustment * -1;
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          const maxValue = Math.max(r, g, b);
          const avg = (r + g + b) / 3;
          const amt = Math.abs(maxValue - avg) * 2 / 255 * adj / 100;
          out[0] = r !== maxValue ? r + (maxValue - r) * amt : r;
          out[1] = g !== maxValue ? g + (maxValue - g) * amt : g;
          out[2] = b !== maxValue ? b + (maxValue - b) * amt : b;
          out[3] = a;
        }
      );
    },
    HUE: function(adjustment) {
      const angle = Math.abs(adjustment) / 100 * 2 * Math.PI;
      const cosA = Math.cos(angle);
      const sinA = Math.sin(angle);
      const oneThird = 1 / 3;
      const sqrt1_3 = Math.sqrt(oneThird);
      const m00 = cosA + (1 - cosA) * oneThird;
      const m01 = oneThird * (1 - cosA) - sqrt1_3 * sinA;
      const m02 = oneThird * (1 - cosA) + sqrt1_3 * sinA;
      const m10 = oneThird * (1 - cosA) + sqrt1_3 * sinA;
      const m11 = cosA + (1 - cosA) * oneThird;
      const m12 = oneThird * (1 - cosA) - sqrt1_3 * sinA;
      const m20 = oneThird * (1 - cosA) - sqrt1_3 * sinA;
      const m21 = oneThird * (1 - cosA) + sqrt1_3 * sinA;
      const m22 = cosA + (1 - cosA) * oneThird;
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = clampByte(m00 * r + m01 * g + m02 * b);
          out[1] = clampByte(m10 * r + m11 * g + m12 * b);
          out[2] = clampByte(m20 * r + m21 * g + m22 * b);
          out[3] = a;
        }
      );
    },
    BRIGHTNESS: function(adjustment) {
      if (adjustment < -255 || adjustment > 255) {
        throw new Error("Brightness adjustment must be between -255 and 255.");
      }
      const precomputedBrightness = [];
      for (let i = 0; i < 256; i += 1) {
        precomputedBrightness[i] = i + adjustment;
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = precomputedBrightness[r];
          out[1] = precomputedBrightness[g];
          out[2] = precomputedBrightness[b];
          out[3] = a;
        }
      );
    },
    CC_RED: function(adjustment) {
      const adj = adjustment / 100;
      const absAdj = Math.abs(adj);
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = adj > 0 ? r + (255 - r) * adj : r - r * absAdj;
          out[1] = g;
          out[2] = b;
          out[3] = a;
        }
      );
    },
    CC_GREEN: function(adjustment) {
      const adj = adjustment / 100;
      const absAdj = Math.abs(adj);
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = r;
          out[1] = adj > 0 ? g + (255 - g) * adj : g - g * absAdj;
          out[2] = b;
          out[3] = a;
        }
      );
    },
    CC_BLUE: function(adjustment) {
      const adj = adjustment / 100;
      const absAdj = Math.abs(adj);
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = r;
          out[1] = g;
          out[2] = adj > 0 ? b + (255 - b) * adj : b - b * absAdj;
          out[3] = a;
        }
      );
    },
    CONTRAST: function(adjustment) {
      if (adjustment < 0) {
        throw new Error("Contrast adjustment must be positive.");
      }
      const precomputedContrast = [];
      for (let i = 0; i < 256; i += 1) {
        precomputedContrast[i] = i * adjustment;
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = precomputedContrast[r];
          out[1] = precomputedContrast[g];
          out[2] = precomputedContrast[b];
          out[3] = a;
        }
      );
    },
    GAMMA: function(adjustment) {
      if (adjustment < 0) {
        throw new Error("Gamma adjustment must be positive.");
      }
      const precomputedGamma = [];
      for (let i = 0; i < 256; i += 1) {
        precomputedGamma[i] = Math.pow(i / 255, adjustment) * 255;
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = precomputedGamma[r];
          out[1] = precomputedGamma[g];
          out[2] = precomputedGamma[b];
          out[3] = a;
        }
      );
    },
    GREYSCALE: function() {
      return applyPixelTransformInPlace(
        (r, g, b, _a, out) => {
          const val = 77 * r + 150 * g + 29 * b >> 8;
          out[0] = val;
          out[1] = val;
          out[2] = val;
          out[3] = 255;
        }
      );
    },
    INVERT: function() {
      const precomputedInvert = [];
      for (let i = 0; i < 256; i += 1) {
        precomputedInvert[i] = 255 - i;
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = precomputedInvert[r];
          out[1] = precomputedInvert[g];
          out[2] = precomputedInvert[b];
          out[3] = a;
        }
      );
    },
    MORPHOLOGICAL_OPERATION: function(kernelSize, comparator) {
      if (kernelSize % 2 === 0) {
        throw new Error("The kernel size must be an odd number.");
      }
      const kernelHalfSize = Math.floor(kernelSize / 2);
      if (!comparator) {
        throw new Error("A comparator must be defined.");
      }
      return function(context, callback) {
        withImageData(context, (imgData) => {
          const width = imgData.width;
          const height = imgData.height;
          const originalPixels = Filters._ensureScratch(imgData.data.length);
          originalPixels.set(imgData.data);
          morphPixels(
            originalPixels,
            imgData.data,
            width,
            height,
            kernelSize,
            kernelHalfSize,
            comparator
          );
          return true;
        });
        callback();
      };
    },
    CONVOLUTION: function(kernel) {
      if (!Array.isArray(kernel)) {
        throw new Error("The kernel must be an array.");
      }
      const kernelSize = Math.sqrt(kernel.length);
      if ((kernelSize + 1) % 2 !== 0) {
        throw new Error("The kernel must be a square matrix with odd width and height.");
      }
      const kernelHalfSize = (kernelSize - 1) / 2;
      return function(context, callback) {
        withImageData(context, (imgData) => {
          const width = imgData.width;
          const height = imgData.height;
          const originalPixels = Filters._ensureScratch(imgData.data.length);
          originalPixels.set(imgData.data);
          convolvePixels(
            originalPixels,
            imgData.data,
            width,
            height,
            kernel,
            kernelSize,
            kernelHalfSize
          );
          return true;
        });
        callback();
      };
    },
    COLORMAP: function(cmap, ctr) {
      const resampledCmap = cmap.slice(0);
      const diff = 255 - ctr;
      for (let i = 0; i < 256; i += 1) {
        let position = 0;
        if (i > ctr) {
          position = Math.min((i - ctr) / diff * 128 + 128, 255) | 0;
        } else {
          position = Math.max(0, i / (ctr / 128)) | 0;
        }
        resampledCmap[i] = cmap[position];
      }
      return applyPixelTransformInPlace(
        (r, g, b, _a, out) => {
          const v = (r + g + b) / 3 | 0;
          const c = resampledCmap[v];
          out[0] = c[0];
          out[1] = c[1];
          out[2] = c[2];
          out[3] = 255;
        }
      );
    },
    COLORMAP_PRESET: function(preset) {
      return getColormap(preset || "");
    },
    CONVOLUTION_PRESET: function(preset) {
      const normalized = (preset || "").toLowerCase();
      switch (normalized) {
        case "sharpen":
          return [0, -1, 0, -1, 5, -1, 0, -1, 0];
        case "blur":
          return [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];
        case "edge":
          return [-1, -1, -1, -1, 8, -1, -1, -1, -1];
        case "emboss":
          return [-2, -1, 0, -1, 1, 1, 0, 1, 2];
        default:
          return null;
      }
    },
    PSEUDOCOLOR: function(mode, red, green, blue) {
      const normalized = (mode || "").toLowerCase();
      const rWeight = red === void 0 ? 1 : red;
      const gWeight = green === void 0 ? 1 : green;
      const bWeight = blue === void 0 ? 1 : blue;
      const applyWeightsInPlace = (c0, c1, c2, out) => {
        out[0] = clampByte(c0 * rWeight);
        out[1] = clampByte(c1 * gWeight);
        out[2] = clampByte(c2 * bWeight);
      };
      return applyPixelTransformInPlace((r, g, b, a, out) => {
        const luma = 0.2126 * r + 0.7152 * g + 0.0722 * b;
        switch (normalized) {
          case "rg": {
            const v = clampByte(128 + (r - g));
            applyWeightsInPlace(v, 255 - v, (r + g) / 2, out);
            out[3] = a;
            return;
          }
          case "gb": {
            const v = clampByte(128 + (g - b));
            applyWeightsInPlace((g + b) / 2, v, 255 - v, out);
            out[3] = a;
            return;
          }
          case "rb": {
            const v = clampByte(128 + (r - b));
            applyWeightsInPlace(v, (r + b) / 2, 255 - v, out);
            out[3] = a;
            return;
          }
          case "luma": {
            const v = clampByte(luma);
            applyWeightsInPlace(v, 255 - v, v, out);
            out[3] = a;
            return;
          }
          case "cmy": {
            applyWeightsInPlace(255 - r, 255 - g, 255 - b, out);
            out[3] = a;
            return;
          }
          case "heat": {
            const v = clampByte(luma);
            const t = v / 255;
            applyWeightsInPlace(
              clampByte(255 * Math.min(1, t * 3)),
              clampByte(255 * Math.min(1, Math.max(0, (t - 0.33) * 3))),
              clampByte(255 * Math.min(1, Math.max(0, (t - 0.66) * 3))),
              out
            );
            out[3] = a;
            return;
          }
          case "pca1": {
            const v = clampByte(0.6 * r + 0.3 * g + 0.1 * b);
            applyWeightsInPlace(v, 255 - v, v, out);
            out[3] = a;
            return;
          }
          case "pca2": {
            const v = clampByte(0.5 * r - 0.2 * g - 0.3 * b + 128);
            applyWeightsInPlace(v, 255 - v, 255 - v, out);
            out[3] = a;
            return;
          }
          case "pca3": {
            const v = clampByte(0.2 * r + 0.6 * g - 0.8 * b + 128);
            applyWeightsInPlace(255 - v, v, 255 - v, out);
            out[3] = a;
            return;
          }
          default: {
            applyWeightsInPlace(r, g, b, out);
            out[3] = a;
          }
        }
      });
    },
    COLOR_REPLACE: function(source, target, tolerance, blend, preserveLum) {
      const src = hexToRgb(source);
      const dst = hexToRgb(target);
      if (!src || !dst) {
        return function(_, callback) {
          callback();
        };
      }
      const tol = Math.max(0, Math.min(255, tolerance === void 0 ? 0 : tolerance));
      const strength = Math.max(0, Math.min(1, blend === void 0 ? 1 : blend));
      const targetHsv = Filters._rgbToHSV(dst[0], dst[1], dst[2]);
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          const dr = r - src[0];
          const dg = g - src[1];
          const db = b - src[2];
          const dist = Math.sqrt(dr * dr + dg * dg + db * db);
          let weight = 0;
          if (tol <= 0) {
            weight = dist === 0 ? 1 : 0;
          } else {
            weight = 1 - Math.min(1, dist / tol);
          }
          weight *= strength;
          if (weight <= 0) {
            out[0] = r;
            out[1] = g;
            out[2] = b;
            out[3] = a;
            return;
          }
          let tr = dst[0];
          let tg = dst[1];
          let tb = dst[2];
          if (preserveLum) {
            const luma = (0.2126 * r + 0.7152 * g + 0.0722 * b) / 255;
            const rgb = Filters._hsvToRGB(targetHsv.h, targetHsv.s, luma);
            tr = rgb.r;
            tg = rgb.g;
            tb = rgb.b;
          }
          out[0] = clampByte(r + (tr - r) * weight);
          out[1] = clampByte(g + (tg - g) * weight);
          out[2] = clampByte(b + (tb - b) * weight);
          out[3] = a;
        }
      );
    },
    ALT_RED_GAMMA: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0));
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const exponent = 1 - strength / 100 * 0.8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        precomputed[i] = clampByte(Math.pow(i / 255, exponent) * 255);
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = precomputed[r];
          out[1] = g;
          out[2] = b;
          out[3] = a;
        }
      );
    },
    ALT_GREEN_GAMMA: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0));
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const exponent = 1 - strength / 100 * 0.8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        precomputed[i] = clampByte(Math.pow(i / 255, exponent) * 255);
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = r;
          out[1] = precomputed[g];
          out[2] = b;
          out[3] = a;
        }
      );
    },
    ALT_BLUE_GAMMA: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0));
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const exponent = 1 - strength / 100 * 0.8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        precomputed[i] = clampByte(Math.pow(i / 255, exponent) * 255);
      }
      return applyPixelTransformInPlace(
        (r, g, b, a, out) => {
          out[0] = r;
          out[1] = g;
          out[2] = precomputed[b];
          out[3] = a;
        }
      );
    },
    ALT_RED_SIGMOID: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const a = 8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const sig = 1 / (1 + Math.exp(-a * (i / 255 - 0.5)));
        const target = sig * 255;
        precomputed[i] = clampByte(i + (target - i) * strength);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = precomputed[r];
          out[1] = g;
          out[2] = b;
          out[3] = aPx;
        }
      );
    },
    ALT_GREEN_SIGMOID: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const a = 8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const sig = 1 / (1 + Math.exp(-a * (i / 255 - 0.5)));
        const target = sig * 255;
        precomputed[i] = clampByte(i + (target - i) * strength);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = r;
          out[1] = precomputed[g];
          out[2] = b;
          out[3] = aPx;
        }
      );
    },
    ALT_BLUE_SIGMOID: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const a = 8;
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const sig = 1 / (1 + Math.exp(-a * (i / 255 - 0.5)));
        const target = sig * 255;
        precomputed[i] = clampByte(i + (target - i) * strength);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = r;
          out[1] = g;
          out[2] = precomputed[b];
          out[3] = aPx;
        }
      );
    },
    ALT_RED_HUE: function(amount, window2) {
      const strength = Math.max(-100, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const windowSize = Math.max(0.02, Math.min(0.3, (window2 === void 0 ? 8 : window2) / 100));
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          const hsv = Filters._rgbToHSV(r, g, b);
          const hue = hsv.h;
          const hueDist = Math.min(Math.abs(hue), Math.abs(1 - hue));
          const hueWeight = clamp01(1 - hueDist / windowSize);
          const weight = hueWeight * Math.abs(strength);
          if (weight <= 0) {
            out[0] = r;
            out[1] = g;
            out[2] = b;
            out[3] = aPx;
            return;
          }
          const sign = strength >= 0 ? 1 : -1;
          const nextS = clamp01(hsv.s + sign * (1 - hsv.s) * weight);
          const nextV = clamp01(hsv.v + sign * hsv.v * weight * 0.2);
          const rgb = Filters._hsvToRGB(hsv.h, nextS, nextV);
          out[0] = rgb.r;
          out[1] = rgb.g;
          out[2] = rgb.b;
          out[3] = aPx;
        }
      );
    },
    ALT_GREEN_HUE: function(amount, window2) {
      const strength = Math.max(-100, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const windowSize = Math.max(0.02, Math.min(0.3, (window2 === void 0 ? 8 : window2) / 100));
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          const hsv = Filters._rgbToHSV(r, g, b);
          const hueDist = Math.abs(hsv.h - 1 / 3);
          const hueWeight = clamp01(1 - hueDist / windowSize);
          const weight = hueWeight * Math.abs(strength);
          if (weight <= 0) {
            out[0] = r;
            out[1] = g;
            out[2] = b;
            out[3] = aPx;
            return;
          }
          const sign = strength >= 0 ? 1 : -1;
          const nextS = clamp01(hsv.s + sign * (1 - hsv.s) * weight);
          const nextV = clamp01(hsv.v + sign * hsv.v * weight * 0.2);
          const rgb = Filters._hsvToRGB(hsv.h, nextS, nextV);
          out[0] = rgb.r;
          out[1] = rgb.g;
          out[2] = rgb.b;
          out[3] = aPx;
        }
      );
    },
    ALT_BLUE_HUE: function(amount, window2) {
      const strength = Math.max(-100, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const windowSize = Math.max(0.02, Math.min(0.3, (window2 === void 0 ? 8 : window2) / 100));
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          const hsv = Filters._rgbToHSV(r, g, b);
          const hueDist = Math.abs(hsv.h - 2 / 3);
          const hueWeight = clamp01(1 - hueDist / windowSize);
          const weight = hueWeight * Math.abs(strength);
          if (weight <= 0) {
            out[0] = r;
            out[1] = g;
            out[2] = b;
            out[3] = aPx;
            return;
          }
          const sign = strength >= 0 ? 1 : -1;
          const nextS = clamp01(hsv.s + sign * (1 - hsv.s) * weight);
          const nextV = clamp01(hsv.v + sign * hsv.v * weight * 0.2);
          const rgb = Filters._hsvToRGB(hsv.h, nextS, nextV);
          out[0] = rgb.r;
          out[1] = rgb.g;
          out[2] = rgb.b;
          out[3] = aPx;
        }
      );
    },
    ALT_RED_VIBRANCE: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const weight = i / 255 * (i / 255) * strength;
        precomputed[i] = clampByte(i + (255 - i) * weight);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = precomputed[r];
          out[1] = g;
          out[2] = b;
          out[3] = aPx;
        }
      );
    },
    ALT_GREEN_VIBRANCE: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const weight = i / 255 * (i / 255) * strength;
        precomputed[i] = clampByte(i + (255 - i) * weight);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = r;
          out[1] = precomputed[g];
          out[2] = b;
          out[3] = aPx;
        }
      );
    },
    ALT_BLUE_VIBRANCE: function(amount) {
      const strength = Math.max(0, Math.min(100, amount || 0)) / 100;
      if (strength === 0) {
        return function(_context, callback) {
          callback();
        };
      }
      const precomputed = [];
      for (let i = 0; i < 256; i += 1) {
        const weight = i / 255 * (i / 255) * strength;
        precomputed[i] = clampByte(i + (255 - i) * weight);
      }
      return applyPixelTransformInPlace(
        (r, g, b, aPx, out) => {
          out[0] = r;
          out[1] = g;
          out[2] = precomputed[b];
          out[3] = aPx;
        }
      );
    },
    PCA_COLOR: function(mode) {
      const normalized = (mode || "").toLowerCase();
      return function(context, callback) {
        withImageData(context, (imgData) => {
          applyPcaColor(imgData, normalized);
          return true;
        });
        callback();
      };
    },
    BACKGROUND_NORMALIZE: function(strength) {
      const amount = Math.max(0, Math.min(2, strength || 0));
      return function(context, callback) {
        if (amount === 0) {
          callback();
          return;
        }
        withImageData(context, (imgData) => {
          const width = imgData.width;
          const height = imgData.height;
          if (!width || !height) {
            return false;
          }
          const data = imgData.data;
          const lum = buildLuminance(data, width, height);
          const blurred = boxBlur(lum, width, height, 6, true);
          for (let i = 0, p = 0; i < data.length; i += 4, p += 1) {
            const normalized = clampByte((lum[p] - blurred[p]) * amount + 128);
            data[i] = normalized;
            data[i + 1] = normalized;
            data[i + 2] = normalized;
          }
          return true;
        });
        callback();
      };
    },
    UNSHARP_MASK: function(amount) {
      const strength = Math.max(0, Math.min(3, amount || 0));
      return function(context, callback) {
        if (strength === 0) {
          callback();
          return;
        }
        withImageData(context, (imgData) => {
          const width = imgData.width;
          const height = imgData.height;
          if (!width || !height) {
            return false;
          }
          const blurred = boxBlur(imgData.data, width, height, 2);
          const data = imgData.data;
          for (let i = 0; i < data.length; i += 4) {
            data[i] = clampByte(data[i] + strength * (data[i] - blurred[i]));
            data[i + 1] = clampByte(data[i + 1] + strength * (data[i + 1] - blurred[i + 1]));
            data[i + 2] = clampByte(data[i + 2] + strength * (data[i + 2] - blurred[i + 2]));
          }
          return true;
        });
        callback();
      };
    },
    ADAPTIVE_THRESHOLD: function(windowSize, offset) {
      let size = windowSize || 15;
      if (size % 2 === 0) {
        size += 1;
      }
      size = Math.max(3, Math.min(51, size));
      const bias = Math.max(-50, Math.min(50, offset || 0));
      return function(context, callback) {
        withImageData(context, (imgData) => {
          const width = imgData.width;
          const height = imgData.height;
          if (!width || !height) {
            return false;
          }
          const data = imgData.data;
          const lum = buildLuminance(data, width, height);
          const mean = boxBlur(lum, width, height, Math.floor(size / 2), true);
          for (let i = 0, p = 0; i < data.length; i += 4, p += 1) {
            const value = lum[p] > mean[p] + bias ? 255 : 0;
            data[i] = value;
            data[i + 1] = value;
            data[i + 2] = value;
          }
          return true;
        });
        callback();
      };
    }
  };

  // src/diva.ts
  var DIVA_STYLE_ID = "diva-inline-styles";
  var injectStyles = (cssText) => {
    if (typeof document === "undefined") {
      return;
    }
    if (document.getElementById(DIVA_STYLE_ID)) {
      return;
    }
    const styleEl = document.createElement("style");
    styleEl.id = DIVA_STYLE_ID;
    styleEl.textContent = cssText;
    const target = document.head || document.getElementsByTagName("head")[0] || document.documentElement;
    target.appendChild(styleEl);
  };
  injectStyles(diva_default);
  var Diva = class {
    constructor(rootId, flags) {
      this.mainViewer = document.getElementById("main-viewer");
      this.filterViewer = null;
      this.filterViewerElement = document.getElementById("filter-viewer");
      this.filterOptions = null;
      this.filterViewerFlipped = false;
      this.currentFilterTileSource = null;
      this.pendingFilterPreview = null;
      this.filterPreviewRetries = 0;
      const root = document.getElementById(rootId);
      if (!root) {
        throw new Error(`Missing root element: ${rootId}`);
      }
      const rootAny = root;
      if (rootAny.__divaInstance) {
        rootAny.__divaInstance.destroy();
      }
      if (rootAny.elmTree) {
        delete rootAny.elmTree;
        root.innerHTML = "";
      }
      this.root = root;
      this.handlePageChangeBound = this.handlePageChange.bind(this);
      this.handleZoomChangeBound = this.handleZoomChange.bind(this);
      this.handleLoadingChangeBound = this.handleLoadingChange.bind(this);
      this.handleFullscreenChangeBound = this.handleFullscreenChange.bind(this);
      let langCode = this.detectLanguage();
      this.app = Elm.Main.init({
        node: root,
        flags: {
          rootElementId: rootId,
          objectData: flags.objectData,
          acceptHeaders: flags.acceptHeaders || [],
          showSidebar: flags.showSidebar !== false,
          showTitle: flags.showTitle !== false,
          userLanguage: flags.setLanguage || langCode
        }
      });
      rootAny.__divaInstance = this;
      this.bindPorts();
      this.bindPageChange();
      this.bindFullscreenChange();
      this.bindZoomChange();
      this.bindLoadingChange();
    }
    /**
     * Detects the current locale of the browser,
     * and return the first part of it.
     *
     * @returns {string}
     */
    detectLanguage() {
      return navigator.language.split("-")[0];
    }
    bindPorts() {
      this.getPort("tileSourcesUpdated").subscribe((tileSources) => {
        this.callViewerMethod("setTileSources", tileSources);
      });
      this.getPort("pageAspectsUpdated").subscribe(
        (aspects) => {
          this.callViewerMethod("setPageAspects", aspects);
        }
      );
      this.getPort("zoomLevelUpdated").subscribe((zoom) => {
        this.callViewerMethod("setZoomLevel", zoom);
      });
      this.getPort("zoomBy").subscribe(
        (factor) => {
          this.callViewerMethod("zoomBy", factor);
        }
      );
      this.getPort("scrollToIndex").subscribe((index) => {
        this.callViewerMethod("scrollToIndex", index);
      });
      this.getPort("filterPreviewUpdated").subscribe((payload) => {
        if (!payload) {
          return;
        }
        this.pendingFilterPreview = payload;
        this.applyFilterPreview();
      });
      this.getPort("setFullscreen").subscribe((enabled) => {
        this.setFullscreen(enabled);
      });
      this.getPort("saveFilteredImage").subscribe(() => {
        this.saveFilteredImage();
      });
      this.getPort("layoutConfigUpdated").subscribe((config) => {
        if (this.callViewerMethod("setLayoutConfig", config.mode, config.direction)) {
          return;
        }
        this.callViewerMethod("setViewingDirection", config.direction);
        this.callViewerMethod("setLayoutMode", config.mode);
      });
      this.getPort("layoutModeUpdated").subscribe((mode) => {
        this.callViewerMethod("setLayoutMode", mode);
      });
      this.getPort("copyToClipboard").subscribe((text) => {
        this.copyToClipboard(text);
      });
    }
    ensureMainViewer() {
      if (!this.mainViewer) {
        this.mainViewer = document.getElementById("main-viewer");
      }
      return this.mainViewer;
    }
    applyFilterPreview() {
      if (!this.pendingFilterPreview) {
        return;
      }
      const element = this.ensureFilterViewerElement();
      if (!element) {
        if (this.filterPreviewRetries < 10) {
          this.filterPreviewRetries += 1;
          requestAnimationFrame(() => this.applyFilterPreview());
        }
        return;
      }
      const payload = this.pendingFilterPreview;
      this.pendingFilterPreview = null;
      this.filterPreviewRetries = 0;
      this.filterOptions = payload.filters || null;
      this.ensureFilterViewer();
      if (this.filterViewer) {
        const tileSourceChanged = this.currentFilterTileSource !== payload.tileSource;
        if (tileSourceChanged) {
          this.currentFilterTileSource = payload.tileSource;
          this.filterViewer.open(payload.tileSource);
        } else {
          this.applyFilterOptions();
        }
      }
    }
    copyToClipboard(text) {
      if (navigator.clipboard && typeof navigator.clipboard.writeText === "function") {
        navigator.clipboard.writeText(text).catch(
          () => {
            this.copyToClipboardFallback(text);
          }
        );
        return;
      }
      this.copyToClipboardFallback(text);
    }
    copyToClipboardFallback(text) {
      const textarea = document.createElement("textarea");
      textarea.value = text;
      textarea.setAttribute("readonly", "true");
      textarea.style.position = "fixed";
      textarea.style.left = "-9999px";
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand("copy");
      } catch (_err) {
      }
      document.body.removeChild(textarea);
    }
    bindPageChange() {
      this.bindViewerEvent("diva-page-change", this.handlePageChangeBound);
    }
    bindFullscreenChange() {
      document.addEventListener("fullscreenchange", this.handleFullscreenChangeBound);
    }
    bindZoomChange() {
      this.bindViewerEvent("diva-zoom-change", this.handleZoomChangeBound);
    }
    bindLoadingChange() {
      this.bindViewerEvent("diva-loading-change", this.handleLoadingChangeBound);
    }
    destroy() {
      this.removeViewerEvent("diva-page-change", this.handlePageChangeBound);
      this.removeViewerEvent("diva-zoom-change", this.handleZoomChangeBound);
      this.removeViewerEvent(
        "diva-loading-change",
        this.handleLoadingChangeBound
      );
      document.removeEventListener("fullscreenchange", this.handleFullscreenChangeBound);
      if (this.root) {
        const rootAny = this.root;
        if (rootAny.__divaInstance === this) {
          delete rootAny.__divaInstance;
        }
        if (rootAny.elmTree) {
          delete rootAny.elmTree;
        }
        this.root.innerHTML = "";
      }
    }
    setFullscreen(enabled) {
      if (enabled) {
        if (document.fullscreenElement) {
          return;
        }
        if (!document.fullscreenEnabled) {
          return;
        }
        const request = this.root.requestFullscreen();
        if (request && typeof request.catch === "function") {
          request.catch(() => {
          });
        }
        return;
      }
      if (!document.fullscreenElement) {
        return;
      }
      const exit = document.exitFullscreen();
      if (exit && typeof exit.catch === "function") {
        exit.catch(() => {
        });
      }
    }
    handlePageChange(event) {
      const detail = event.detail;
      if (!detail || typeof detail.index !== "number") {
        return;
      }
      if (detail.instant) {
        this.getPort("pageIndexChangedInstant").send(detail.index);
      } else {
        this.getPort("pageIndexChanged").send(detail.index);
      }
    }
    handleZoomChange(event) {
      const detail = event.detail;
      if (!detail || typeof detail.zoom !== "number") {
        return;
      }
      this.getPort("zoomChanged").send(detail.zoom);
    }
    handleLoadingChange(event) {
      const detail = event.detail;
      if (!detail || typeof detail.loading !== "boolean") {
        return;
      }
      this.getPort("viewerLoadingChanged").send(detail.loading);
    }
    handleFullscreenChange() {
      const isFullscreen = Boolean(document.fullscreenElement);
      this.getPort("fullscreenChanged").send(isFullscreen);
    }
    ensureFilterViewer() {
      if (this.filterViewer || !this.filterViewerElement) {
        return;
      }
      this.filterViewer = OpenSeadragon({
        element: this.filterViewerElement,
        showNavigationControl: false,
        preserveViewport: true,
        visibilityRatio: 0,
        drawer: "canvas",
        crossOriginPolicy: "Anonymous",
        loadTilesWithAjax: true,
        ajaxWithCredentials: false
      });
      this.filterViewer.addHandler("open", () => {
        var _a;
        const drawer = (_a = this.filterViewer) == null ? void 0 : _a.drawer;
        const canvas = drawer && drawer.canvas ? drawer.canvas : null;
        if (canvas && typeof canvas.getContext === "function") {
          const context = canvas.getContext("2d", { willReadFrequently: true });
          if (context) {
            drawer.context = context;
          }
        }
        if (this.filterViewer && this.filterViewer.viewport) {
          this.filterViewer.viewport.fitBounds(this.filterViewer.world.getHomeBounds(), true);
        }
        this.filterViewerFlipped = false;
        this.applyFilterOptions();
      });
    }
    ensureFilterViewerElement() {
      const element = document.getElementById("filter-viewer");
      if (!element) {
        this.filterViewerElement = null;
        return null;
      }
      if (this.filterViewerElement !== element || !element.isConnected) {
        if (this.filterViewer && typeof this.filterViewer.destroy === "function") {
          this.filterViewer.destroy();
        }
        this.filterViewer = null;
        this.currentFilterTileSource = null;
        this.filterViewerFlipped = false;
        this.filterViewerElement = element;
      }
      return this.filterViewerElement;
    }
    applyFilterOptions() {
      var _a, _b;
      if (!this.filterViewer) {
        return;
      }
      const options = buildFilterOptions(this.filterOptions);
      setFilterOptions(this.filterViewer, options);
      if (this.filterViewer.viewport) {
        const rotation = ((_a = this.filterOptions) == null ? void 0 : _a.rotation) || 0;
        this.filterViewer.viewport.setRotation(rotation);
        const shouldFlip = Boolean((_b = this.filterOptions) == null ? void 0 : _b.flip);
        const viewport = this.filterViewer.viewport;
        if (typeof viewport.toggleFlip === "function") {
          let isFlipped = this.filterViewerFlipped;
          if (typeof viewport.getFlip === "function") {
            isFlipped = Boolean(viewport.getFlip());
          }
          if (shouldFlip != isFlipped) {
            viewport.toggleFlip();
            this.filterViewerFlipped = shouldFlip;
          }
        }
      }
    }
    saveFilteredImage() {
      if (!this.filterViewer) {
        return;
      }
      const drawer = this.filterViewer.drawer;
      const canvas = drawer && drawer.canvas ? drawer.canvas : null;
      if (!canvas) {
        return;
      }
      try {
        const dataUrl = canvas.toDataURL("image/png");
        const link = document.createElement("a");
        link.href = dataUrl;
        link.download = `diva-filtered-${Date.now()}.png`;
        document.body.appendChild(link);
        link.click();
        link.remove();
      } catch (error) {
        console.error("Failed to save filtered image", error);
      }
    }
    getPort(name) {
      const ports = this.app.ports;
      const port = ports ? ports[name] : void 0;
      if (!port) {
        throw new Error(`Missing Elm port: ${String(name)}`);
      }
      return port;
    }
    callViewerMethod(name, ...args) {
      const viewer = this.ensureMainViewer();
      if (!viewer) {
        return false;
      }
      const method = viewer[name];
      if (typeof method !== "function") {
        return false;
      }
      method.apply(viewer, args);
      return true;
    }
    bindViewerEvent(name, handler) {
      const viewer = this.ensureMainViewer();
      if (!viewer) {
        return;
      }
      viewer.removeEventListener(name, handler);
      viewer.addEventListener(name, handler);
    }
    removeViewerEvent(name, handler) {
      const viewer = this.ensureMainViewer();
      if (!viewer) {
        return;
      }
      viewer.removeEventListener(name, handler);
    }
  };
  var filterFunctions = {
    THRESHOLDING: Filters.THRESHOLDING,
    BRIGHTNESS: Filters.BRIGHTNESS,
    SATURATION: Filters.SATURATION,
    VIBRANCE: Filters.VIBRANCE,
    HUE: Filters.HUE,
    CC_RED: Filters.CC_RED,
    CC_GREEN: Filters.CC_GREEN,
    CC_BLUE: Filters.CC_BLUE,
    CONTRAST: Filters.CONTRAST,
    GAMMA: Filters.GAMMA,
    GREYSCALE: Filters.GREYSCALE,
    INVERT: Filters.INVERT,
    BACKGROUND_NORMALIZE: Filters.BACKGROUND_NORMALIZE,
    UNSHARP_MASK: Filters.UNSHARP_MASK
  };
  var simpleFilterMappings = [
    { enabled: "thresholdEnabled", filter: "THRESHOLDING", args: ["threshold"] },
    { enabled: "brightnessEnabled", filter: "BRIGHTNESS", args: ["brightness"] },
    { enabled: "saturationEnabled", filter: "SATURATION", args: ["saturation"] },
    { enabled: "vibranceEnabled", filter: "VIBRANCE", args: ["vibrance"] },
    { enabled: "hueEnabled", filter: "HUE", args: ["hue"] },
    { enabled: "ccRedEnabled", filter: "CC_RED", args: ["ccRed"] },
    { enabled: "ccGreenEnabled", filter: "CC_GREEN", args: ["ccGreen"] },
    { enabled: "ccBlueEnabled", filter: "CC_BLUE", args: ["ccBlue"] },
    { enabled: "contrastEnabled", filter: "CONTRAST", args: ["contrast"] },
    { enabled: "gammaEnabled", filter: "GAMMA", args: ["gamma"] },
    { enabled: "grayscale", filter: "GREYSCALE" },
    { enabled: "invert", filter: "INVERT" },
    { enabled: "normalizeEnabled", filter: "BACKGROUND_NORMALIZE", args: ["normalizeStrength"] },
    { enabled: "unsharpEnabled", filter: "UNSHARP_MASK", args: ["unsharpAmount"] }
  ];
  var buildFilterOptions = (filters) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A;
    if (!filters) {
      return { filters: [], loadMode: "sync" };
    }
    const processors = [];
    for (const mapping of simpleFilterMappings) {
      if (filters[mapping.enabled]) {
        const filterArgs = (_b = (_a = mapping.args) == null ? void 0 : _a.map((key) => {
          var _a2;
          return (_a2 = filters[key]) != null ? _a2 : 0;
        })) != null ? _b : [];
        const filterFn = filterFunctions[mapping.filter];
        processors.push(filterFn(...filterArgs));
      }
    }
    if (filters.morphEnabled) {
      const comparator = filters.morphOperation === "dilate" ? Math.max : Math.min;
      processors.push(Filters.MORPHOLOGICAL_OPERATION((_c = filters.morphKernel) != null ? _c : 3, comparator));
    }
    if (filters.convolutionEnabled) {
      const kernel = Filters.CONVOLUTION_PRESET(filters.convolutionPreset || "");
      if (kernel) {
        processors.push(Filters.CONVOLUTION(kernel));
      }
    }
    if (filters.colourmapEnabled) {
      const colourmap = Filters.COLORMAP_PRESET(filters.colourmapPreset || "");
      if (colourmap) {
        processors.push(Filters.COLORMAP(colourmap, (_d = filters.colourmapCenter) != null ? _d : 128));
      }
    }
    if (filters.pseudoColourEnabled) {
      processors.push(
        Filters.PSEUDOCOLOR(
          filters.pseudoColourMode || "",
          (_e = filters.pseudoColourRed) != null ? _e : 1,
          (_f = filters.pseudoColourGreen) != null ? _f : 1,
          (_g = filters.pseudoColourBlue) != null ? _g : 1
        )
      );
    }
    if (filters.pcaEnabled) {
      processors.push(Filters.PCA_COLOR(filters.pcaMode || ""));
    }
    if (filters.colourReplaceEnabled) {
      processors.push(Filters.COLOR_REPLACE(
        filters.colourReplaceSource || "#ffffff",
        filters.colourReplaceTarget || "#ffffff",
        (_h = filters.colourReplaceTolerance) != null ? _h : 24,
        (_i = filters.colourReplaceBlend) != null ? _i : 1,
        (_j = filters.colourReplacePreserveLum) != null ? _j : false
      ));
    }
    if (filters.altRedGammaEnabled) {
      processors.push(Filters.ALT_RED_GAMMA((_k = filters.altRedGamma) != null ? _k : 0));
    }
    if (filters.altGreenGammaEnabled) {
      processors.push(Filters.ALT_GREEN_GAMMA((_l = filters.altGreenGamma) != null ? _l : 0));
    }
    if (filters.altBlueGammaEnabled) {
      processors.push(Filters.ALT_BLUE_GAMMA((_m = filters.altBlueGamma) != null ? _m : 0));
    }
    if (filters.altRedSigmoidEnabled) {
      processors.push(Filters.ALT_RED_SIGMOID((_n = filters.altRedSigmoid) != null ? _n : 0));
    }
    if (filters.altGreenSigmoidEnabled) {
      processors.push(Filters.ALT_GREEN_SIGMOID((_o = filters.altGreenSigmoid) != null ? _o : 0));
    }
    if (filters.altBlueSigmoidEnabled) {
      processors.push(Filters.ALT_BLUE_SIGMOID((_p = filters.altBlueSigmoid) != null ? _p : 0));
    }
    if (filters.altRedHueEnabled) {
      processors.push(Filters.ALT_RED_HUE((_q = filters.altRedHue) != null ? _q : 0, (_r = filters.altRedHueWindow) != null ? _r : 8));
    }
    if (filters.altGreenHueEnabled) {
      processors.push(
        Filters.ALT_GREEN_HUE((_s = filters.altGreenHue) != null ? _s : 0, (_t = filters.altGreenHueWindow) != null ? _t : 8)
      );
    }
    if (filters.altBlueHueEnabled) {
      processors.push(
        Filters.ALT_BLUE_HUE((_u = filters.altBlueHue) != null ? _u : 0, (_v = filters.altBlueHueWindow) != null ? _v : 8)
      );
    }
    if (filters.altRedVibranceEnabled) {
      processors.push(Filters.ALT_RED_VIBRANCE((_w = filters.altRedVibrance) != null ? _w : 0));
    }
    if (filters.altGreenVibranceEnabled) {
      processors.push(Filters.ALT_GREEN_VIBRANCE((_x = filters.altGreenVibrance) != null ? _x : 0));
    }
    if (filters.altBlueVibranceEnabled) {
      processors.push(Filters.ALT_BLUE_VIBRANCE((_y = filters.altBlueVibrance) != null ? _y : 0));
    }
    if (filters.adaptiveEnabled) {
      processors.push(
        Filters.ADAPTIVE_THRESHOLD((_z = filters.adaptiveWindow) != null ? _z : 15, (_A = filters.adaptiveOffset) != null ? _A : 10)
      );
    }
    if (processors.length === 0) {
      return { filters: [], loadMode: "sync" };
    }
    return { filters: { processors }, loadMode: "sync" };
  };
  window.Diva = Diva;
})();
